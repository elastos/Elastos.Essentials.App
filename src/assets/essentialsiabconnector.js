(function () {
	'use strict';

	/*
	  @license
	    DID.js v2.2.6
	    Mon, 02 May 2022 10:43:24 GMT - commit unknown

	    Released under the MIT License.
	*/
	class t{constructor(t){this.LevelType=["ERROR","WARN","INFO","DEBUG","TRACE"],this.id=t,this.name=this.LevelType[t];}getLevel(){return this.id}}class e{constructor(t){this.context=t||"";}static setLevel(t){t<=e.TRACE&&t>=e.INFO&&(e.logLevel=t);}static getLevel(){return e.logLevel}static levelIs(t){return t<=e.logLevel}log(...t){e.logLevel.id>=e.INFO.id&&console.log(this.format(e.INFO,t));}info(...t){e.logLevel.id>=e.INFO.id&&console.log(this.format(e.INFO,t));}debug(...t){e.logLevel.id>=e.DEBUG.id&&console.log(this.format(e.DEBUG,t));}trace(...t){e.logLevel.id>=e.TRACE.id&&console.log(this.format(e.TRACE,t));}warn(...t){e.logLevel.id>=e.WARNING.id&&console.log(this.format(e.WARNING,t));}error(...t){e.logLevel.id>=e.ERROR.id&&console.log(this.format(e.ERROR,t));}format(t,e){let r=(new Date).toISOString()+" "+t.name.toUpperCase()+" "+this.context+" ";if(!e||e.length<1)return r;let n=String(e[0]);for(let t=1;t<e.length;t++)n=n.replace(/\{\}/,String(e[t]));return r+" "+n}}
	/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */
	function r(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{u(n.next(t));}catch(t){o(t);}}function s(t){try{u(n.throw(t));}catch(t){o(t);}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e);}))).then(a,s);}u((n=n.apply(t,e||[])).next());}))}e.TRACE=new t(4),e.DEBUG=new t(3),e.INFO=new t(2),e.WARNING=new t(1),e.ERROR=new t(0),e.logLevel=e.WARNING;class n extends Error{constructor(t,e){super(t+(e?"\nCaused by: "+e.message+(e.stack?"\nCaused by: "+e.stack:""):"")),this.causedBy=e,Object.setPrototypeOf(this,new.target.prototype);}from(t){return this.message+=" Caused by "+t.message,this}}class i extends n{}class o extends n{}class a$1 extends n{}class s$1 extends n{}class u$1 extends n{}class c$1 extends n{}class l$1 extends n{}class f$1 extends n{}class h$1 extends n{}class d$1 extends n{}class p$1 extends n{}class y$1 extends n{}class g$1 extends n{}class m$1 extends n{}class b$1 extends n{}class v$1 extends n{}class w$1 extends n{}class _$1 extends n{}class S$1 extends n{}class E$1 extends n{}class I$1 extends n{}class A$1 extends n{}class k$1 extends n{}class D$1 extends n{}class x$1 extends n{}class T$1 extends n{}class P$1 extends n{}class O$1 extends n{}class R$1 extends n{}class C$1 extends n{}class M extends n{}class N$1 extends n{}class j$1 extends n{}class B$1 extends n{}class L extends n{}class F$1 extends n{}class U$1 extends n{}class z$1 extends n{}class K$1 extends n{}class q$1 extends n{}class H$1 extends n{}class V$1 extends n{}class W$1 extends n{}class J$1 extends n{}class Y$1 extends n{}class Z$1 extends n{}class G$1 extends n{}class X$1 extends n{}class $ extends n{}class Q$1 extends n{}class tt$1 extends n{}class et$1 extends n{}class rt$1 extends n{}class nt$1 extends n{}class it$1 extends n{}Object.freeze({__proto__:null,ParentException:n,IllegalArgumentException:i,WrongPasswordException:o,DIDStoreException:a$1,DIDResolveException:s$1,MnemonicException:u$1,DIDDeactivatedException:c$1,DIDAlreadyExistException:l$1,RootIdentityAlreadyExistException:f$1,UnknownInternalException:h$1,DIDStoreCryptoException:d$1,MalformedDocumentException:p$1,NotCustomizedDIDException:y$1,NotAttachedWithStoreException:g$1,NotPrimitiveDIDException:m$1,NoEffectiveControllerException:b$1,NotControllerException:v$1,AlreadySignedException:w$1,MalformedTransferTicketException:_$1,MalformedCredentialException:S$1,MalformedIDChainRequestException:E$1,InvalidKeyException:I$1,MalformedIDChainTransactionException:A$1,MalformedResolveResultException:k$1,DIDSyntaxException:D$1,MalformedResolveRequestException:x$1,MalformedResolveResponseException:T$1,DIDNotFoundException:P$1,MalformedDIDURLException:O$1,AlreadySealedException:R$1,CredentialNotGenuineException:C$1,CredentialExpiredException:M,CredentialRevokedException:N$1,CredentialAlreadyExistException:j$1,DIDNotGenuineException:B$1,DIDExpiredException:L,DIDNotUpToDateException:F$1,DIDObjectAlreadyExistException:U$1,IllegalUsage:z$1,DIDObjectNotExistException:K$1,CanNotRemoveEffectiveController:q$1,DIDObjectHasReference:H$1,MalformedPresentationException:V$1,UnsupportedOperationException:W$1,NetworkException:J$1,ResolveException:Y$1,DIDStorageException:Z$1,InvalidDateFormat:G$1,OutOfBoundException:X$1,DIDTransactionException:$,MalformedExportDataException:Q$1,DIDControllersChangedException:tt$1,MalformedMetadataException:et$1,JWTException:rt$1,MalformedDIDException:nt$1,IOException:it$1});class at$1{getSerializeContextDid(){return null}clone(){const t=Object.assign({},this);return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}static deserialize(t,e,r=null){let n;Ot$1(t&&""!==t,"Invalid JSON content"),n="string"==typeof t?JSON.parse(t):t;let i=new e;return i.fromJSON(n,r),i}static deserializeAsync(t,e,n=null){return r(this,void 0,void 0,(function*(){let r;Ot$1(t&&""!==t,"Invalid JSON content"),r="string"==typeof t?JSON.parse(t):t;let i=new e;return yield i.fromJSON(r,n),i}))}serialize(t=at$1.NORMALIZED_DEFAULT){var e;try{let r=t?null:null===(e=this.getSerializeContextDid())||void 0===e?void 0:e.toString();return JSON.stringify(this.toJSON(r)).normalize("NFC")}catch(t){throw new h$1(t)}}toString(t=at$1.NORMALIZED_DEFAULT){return this.serialize(t)}dateToString(t){return t?t.toISOString().split(".")[0]+"Z":null}dateFromString(t){if(t&&isNaN(Date.parse(t)))throw new G$1(t);return t?new Date(t+("Z"==t.slice(t.length-1)?"":"Z")):null}getString(t,e,r={}){if(void 0===e){if(r.mandatory)throw new D$1("Missing property: "+t);return r.defaultValue?r.defaultValue:null}if(null===e){if(!r.defaultValue&&!r.nullable)throw new D$1("Invalid property: "+t+", can not be null");return r.defaultValue?r.defaultValue:null}if("string"!=typeof e)throw new D$1("Invalid property value: "+t+", type error");return e}getNumber(t,e,r={}){if(void 0===e){if(r.mandatory)throw new D$1("Missing property: "+t);return r.defaultValue?r.defaultValue:null}if(null===e){if(!r.defaultValue&&!r.nullable)throw new D$1("Invalid property: "+t+", can not be null");return r.defaultValue?r.defaultValue:null}if("number"!=typeof e)throw new D$1("Invalid property value: "+t+", type error");return e}getBoolean(t,e,r={}){if(void 0===e){if(r.mandatory)throw new D$1("Missing property: "+t);return r.defaultValue?r.defaultValue:null}if(null===e){if(!r.defaultValue&&!r.nullable)throw new D$1("Invalid property: "+t+", can not be null");return r.defaultValue?r.defaultValue:null}if("boolean"!=typeof e)throw new D$1("Invalid property value: "+t+", type error");return e}getStrings(t,e,r={}){if(void 0===e){if(r.mandatory)throw new D$1("Missing property: "+t);return r.defaultValue?r.defaultValue:null}if(null===e){if(!r.defaultValue&&!r.nullable)throw new D$1("Invalid property: "+t+", can not be null");return r.defaultValue?r.defaultValue:null}if("string"==typeof e)return [e];if(Array.isArray(e)){let r=Array.from(e,(e=>("string"!=typeof e&&new D$1("Invalid property value: "+t+", type error"),e)));return r.sort()}throw new D$1("Invalid property value: "+t+", type error")}getContext(t,e,r={}){if(void 0===e){if(r.mandatory)throw new D$1("Missing property: "+t);return r.defaultValue?r.defaultValue:null}if(null===e){if(!r.defaultValue&&!r.nullable)throw new D$1("Invalid property: "+t+", can not be null");return r.defaultValue?r.defaultValue:null}if(Array.isArray(e)){let r=Array.from(e,(e=>("string"!=typeof e&&new D$1("Invalid property value: "+t+", type error"),e)));return r}throw new D$1("Invalid property value: "+t+", type error")}getDids(t,e,r={}){if(void 0===e){if(r.mandatory)throw new D$1("Missing property: "+t);return r.defaultValue?r.defaultValue:null}if(null===e){if(!r.defaultValue&&!r.nullable)throw new D$1("Invalid property: "+t+", can not be null");return r.defaultValue?r.defaultValue:null}if("string"==typeof e)try{return [new Nt$1(e)]}catch(e){new D$1("Invalid property value: "+t+", "+e,e);}if(Array.isArray(e)){let r=Array.from(e,(e=>{"string"!=typeof e&&new D$1("Invalid property value: "+t+", type error");try{return new Nt$1(e)}catch(e){new D$1("Invalid property value: "+t+", "+e,e);}}));return r.sort(((t,e)=>t.compareTo(e)))}throw new D$1("Invalid property value: "+t+", type error")}getDate(t,e,r={}){if(void 0===e){if(r.mandatory)throw new D$1("Missing property: "+t);return r.defaultValue?r.defaultValue:null}if(null===e){if(!r.defaultValue&&!r.nullable)throw new D$1("Invalid property: "+t+", can not be null");return r.defaultValue?r.defaultValue:null}if("string"!=typeof e)throw new D$1("Invalid property value: "+t+", type error");try{return this.dateFromString(e)}catch(e){throw new D$1("Invalid property value: "+t+", "+e,e)}}getDid(t,e,r={}){if(void 0===e){if(r.mandatory)throw new D$1("Missing property: "+t);return r.defaultValue?r.defaultValue:null}if(null===e){if(!r.defaultValue&&!r.nullable)throw new D$1("Invalid property: "+t+", can not be null");return r.defaultValue?r.defaultValue:null}if("string"!=typeof e)throw new D$1("Invalid property value: "+t+", type error");try{return new Nt$1(e)}catch(e){throw new D$1("Invalid property value: "+t+", "+e,e)}}getDidUrl(t,e,r={}){if(void 0===e){if(r.mandatory)throw new D$1("Missing property: "+t);return r.defaultValue?r.defaultValue:null}if(null===e){if(!r.defaultValue&&!r.nullable)throw new D$1("Invalid property: "+t+", can not be null");return r.defaultValue?r.defaultValue:null}if("string"!=typeof e)throw new D$1("Invalid property value: "+t+", type error");try{return new jt$1(e,r.context)}catch(e){throw new D$1("Invalid property value: "+t+", "+e,e)}}}function st$1(t){return t&&0!=t.length?Array.from(t,(e=>"object"==typeof e&&Object.keys(e).length>0&&!Array.isArray(e)?ut$1(e):Array.isArray(e)&&t.length>0?st$1(e):e)):t}function ut$1(t){let e=Object.keys(t);e.sort(((t,e)=>t<e?-1:t>e?1:0));let r={};for(var n in e){let i=e[n],o=t[i];"object"==typeof o&&Object.keys(o).length>0&&!Array.isArray(o)?r[i]=ut$1(o):Array.isArray(o)&&o.length>0?r[i]=st$1(o):r[i]=o;}return r}at$1.NORMALIZED_DEFAULT=!0;class ct$1 extends at$1{constructor(t){super(),this.props={},this.store=t,this.props={};}attachStore(t){Ot$1(null!=t,"Invalid store"),this.store=t;}detachStore(){this.store=null;}getStore(){return this.store}attachedStore(){return null!=this.store}get(t){return this.props[t]}put(t,e){null==e?delete this.props[t]:this.props[t]=e instanceof Date?e.toISOString():e,this.save();}getBoolean(t,e=!1){let r=this.get(t);return null!=r?new Boolean(r).valueOf():e}getInteger(t,e=-1){let r=this.get(t),n=e;if(null!=r)try{n=new Number(r).valueOf();}catch(t){}return n}getDate(t,e=null){let r=this.get(t),n=e;if(null!=r)try{n=new Date(r);}catch(t){}return n}remove(t){let e=this.props[t];return delete this.props[t],this.save(),e}isEmpty(){return 0==this.props.size}setAlias(t){this.put(ct$1.ALIAS,t);}getAlias(){return this.get(ct$1.ALIAS)}setExtra(t,e){Ot$1(null!=t&&""!=t,"Invalid key"),this.put(ct$1.USER_EXTRA_PREFIX+t,e);}getExtra(t){return Ot$1(t&&null!=t,"Invalid key"),this.get(ct$1.USER_EXTRA_PREFIX+t)}getExtraBoolean(t,e=!1){return Ot$1(t&&null!=t,"Invalid key"),this.getBoolean(ct$1.USER_EXTRA_PREFIX+t,e)}getExtraInteger(t,e=-1){return Ot$1(t&&null!=t,"Invalid key"),this.getInteger(ct$1.USER_EXTRA_PREFIX+t,e)}getExtraDate(t,e=null){return Ot$1(t&&null!=t,"Invalid key"),this.getDate(ct$1.USER_EXTRA_PREFIX+t,e)}removeExtra(t){return Ot$1(t&&null!=t,"Invalid key"),this.remove(ct$1.USER_EXTRA_PREFIX+t)}merge(t){t!=this&&null!=t&&(this.props=Object.assign(Object.assign({},t.props),this.props));}clone(){let t=super.clone();return t.store=this.store,t.props=this.props,t}toJSON(t=null){return ut$1(this.props)}fromJSON(t,e=null){this.props=JSON.parse(JSON.stringify(t));}}ct$1.ALIAS="alias",ct$1.USER_EXTRA_PREFIX="UX-";class lt$1 extends ct$1{constructor(t=null,e=null){super(e),this.did=null,this.did=t;}setDid(t){this.did=t;}setRootIdentityId(t){this.put(lt$1.ROOT_IDENTITY,t);}getRootIdentityId(){return this.get(lt$1.ROOT_IDENTITY)}setIndex(t){this.put(lt$1.INDEX,t);}getIndex(){return this.getInteger(lt$1.INDEX,-1)}setTransactionId(t){this.put(lt$1.TXID,t);}getTransactionId(){return this.get(lt$1.TXID)}setPreviousSignature(t){this.put(lt$1.PREV_SIGNATURE,t);}getPreviousSignature(){return this.get(lt$1.PREV_SIGNATURE)}setSignature(t){this.put(lt$1.SIGNATURE,t);}getSignature(){return this.get(lt$1.SIGNATURE)}setPublished(t){this.put(lt$1.PUBLISHED,t);}getPublished(){try{return this.getDate(lt$1.PUBLISHED,null)}catch(t){return null}}setDeactivated(t){this.put(lt$1.DEACTIVATED,t);}isDeactivated(){return this.getBoolean(lt$1.DEACTIVATED,!1)}clone(){let t=new lt$1;return t.props=this.props,t.did=this.did,t.store=this.store,t}save(){if(this.attachedStore())try{this.getStore().storeDidMetadata(this.did,this);}catch(t){throw t instanceof a$1&&console.log("INTERNAL - error store metadata for DID {}",this.did),t}}static parse(t,e=null){try{return at$1.deserialize(t,lt$1,e)}catch(t){throw t instanceof et$1?t:new et$1(t)}}}lt$1.ROOT_IDENTITY="rootIdentity",lt$1.INDEX="index",lt$1.TXID="txid",lt$1.PREV_SIGNATURE="prevSignature",lt$1.SIGNATURE="signature",lt$1.PUBLISHED="published",lt$1.DEACTIVATED="deactivated";class ft$1 extends ct$1{constructor(t=null){super(t),this.put(ft$1.TYPE,ft$1.DID_STORE_TYPE),this.put(ft$1.VERSION,ft$1.DID_STORE_VERSION);}getType(){return this.get(ft$1.TYPE)}getVersion(){return this.getInteger(ft$1.VERSION,-1)}setFingerprint(t){Ot$1(null!=t&&""!=t,"Invalid fingerprint"),this.put(ft$1.FINGERPRINT,t);}getFingerprint(){return this.get(ft$1.FINGERPRINT)}setDefaultRootIdentity(t){this.put(ft$1.DEFAULT_ROOT_IDENTITY,t);}getDefaultRootIdentity(){return this.get(ft$1.DEFAULT_ROOT_IDENTITY)}save(){if(this.attachedStore())try{this.getStore().storage.storeMetadata(this);}catch(t){throw t instanceof a$1&&ft$1.log.error("INTERNAL - error store metadata for DIDStore"),t}}static parse(t,e=null){try{return at$1.deserialize(t,ft$1,e)}catch(t){throw t instanceof et$1?t:new et$1(t)}}}ft$1.DID_STORE_TYPE="did:elastos:store",ft$1.DID_STORE_VERSION=3,ft$1.TYPE="type",ft$1.VERSION="version",ft$1.FINGERPRINT="fingerprint",ft$1.DEFAULT_ROOT_IDENTITY="defaultRootIdentity",ft$1.log=new e("DIDStoreMetadata");var yt$1="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function gt$1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function mt$1(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach((function(r){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return t[r]}});})),e}function bt$1(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}for(var vt$1={},wt$1={byteLength:function(t){var e=Dt$1(t),r=e[0],n=e[1];return 3*(r+n)/4-n},toByteArray:function(t){var e,r,n=Dt$1(t),i=n[0],o=n[1],a=new Et$1(function(t,e,r){return 3*(e+r)/4-r}(0,i,o)),s=0,u=o>0?i-4:i;for(r=0;r<u;r+=4)e=St$1[t.charCodeAt(r)]<<18|St$1[t.charCodeAt(r+1)]<<12|St$1[t.charCodeAt(r+2)]<<6|St$1[t.charCodeAt(r+3)],a[s++]=e>>16&255,a[s++]=e>>8&255,a[s++]=255&e;2===o&&(e=St$1[t.charCodeAt(r)]<<2|St$1[t.charCodeAt(r+1)]>>4,a[s++]=255&e);1===o&&(e=St$1[t.charCodeAt(r)]<<10|St$1[t.charCodeAt(r+1)]<<4|St$1[t.charCodeAt(r+2)]>>2,a[s++]=e>>8&255,a[s++]=255&e);return a},fromByteArray:function(t){for(var e,r=t.length,n=r%3,i=[],o=16383,a=0,s=r-n;a<s;a+=o)i.push(xt$1(t,a,a+o>s?s:a+o));1===n?(e=t[r-1],i.push(_t$1[e>>2]+_t$1[e<<4&63]+"==")):2===n&&(e=(t[r-2]<<8)+t[r-1],i.push(_t$1[e>>10]+_t$1[e>>4&63]+_t$1[e<<2&63]+"="));return i.join("")}},_t$1=[],St$1=[],Et$1="undefined"!=typeof Uint8Array?Uint8Array:Array,It$1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",At$1=0,kt$1=It$1.length;At$1<kt$1;++At$1)_t$1[At$1]=It$1[At$1],St$1[It$1.charCodeAt(At$1)]=At$1;function Dt$1(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return -1===r&&(r=e),[r,r===e?0:4-r%4]}function xt$1(t,e,r){for(var n,i,o=[],a=e;a<r;a+=3)n=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),o.push(_t$1[(i=n)>>18&63]+_t$1[i>>12&63]+_t$1[i>>6&63]+_t$1[63&i]);return o.join("")}St$1["-".charCodeAt(0)]=62,St$1["_".charCodeAt(0)]=63;var Tt$1,Pt$1={};
	/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function Ot$1(t,e){if(!t)throw new Error(e)}function Rt$1(t,e){Ot$1(null!=t&&""!==t,e);}function Ct$1(t,e){if(null===t)throw new Error(e)}function Mt$1(t){if("string"==typeof t){for(var e=0,r=t.length;r>0;)e=(e<<5)-e+t.charCodeAt(--r)|0;return e}if("number"==typeof t)return t;if("boolean"==typeof t)return !0===t?1231:1237;throw new i("Unsupported type "+typeof t)}Pt$1.read=function(t,e,r,n,i){var o,a,s=8*i-n-1,u=(1<<s)-1,c=u>>1,l=-7,f=r?i-1:0,h=r?-1:1,d=t[e+f];for(f+=h,o=d&(1<<-l)-1,d>>=-l,l+=s;l>0;o=256*o+t[e+f],f+=h,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=n;l>0;a=256*a+t[e+f],f+=h,l-=8);if(0===o)o=1-c;else {if(o===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,n),o-=c;}return (d?-1:1)*a*Math.pow(2,o-n)},Pt$1.write=function(t,e,r,n,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,p=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(e*u-1)*Math.pow(2,i),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;t[r+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[r+d]=255&a,d+=p,a/=256,c-=8);t[r+d-p]|=128*y;},
	/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <https://feross.org>
	 * @license  MIT
	 */
	function(t){var e=wt$1,r=Pt$1,n="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=function(t){+t!=t&&(t=0);return a.alloc(+t)},t.INSPECT_MAX_BYTES=50;var i=2147483647;function o(t){if(t>i)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,a.prototype),e}function a(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return c(t)}return s(t,e,r)}function s(t,e,r){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!a.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var r=0|d(t,e),n=o(r),i=n.write(t,e);i!==r&&(n=n.slice(0,i));return n}(t,e);if(ArrayBuffer.isView(t))return function(t){if(F(t,Uint8Array)){var e=new Uint8Array(t);return f(e.buffer,e.byteOffset,e.byteLength)}return l(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(F(t,ArrayBuffer)||t&&F(t.buffer,ArrayBuffer))return f(t,e,r);if("undefined"!=typeof SharedArrayBuffer&&(F(t,SharedArrayBuffer)||t&&F(t.buffer,SharedArrayBuffer)))return f(t,e,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return a.from(n,e,r);var i=function(t){if(a.isBuffer(t)){var e=0|h(t.length),r=o(e);return 0===r.length||t.copy(r,0,0,e),r}if(void 0!==t.length)return "number"!=typeof t.length||U(t.length)?o(0):l(t);if("Buffer"===t.type&&Array.isArray(t.data))return l(t.data)}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return a.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function c(t){return u(t),o(t<0?0:0|h(t))}function l(t){for(var e=t.length<0?0:0|h(t.length),r=o(e),n=0;n<e;n+=1)r[n]=255&t[n];return r}function f(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,a.prototype),n}function h(t){if(t>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|t}function d(t,e){if(a.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||F(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return j(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return B(t).length;default:if(i)return n?-1:j(t).length;e=(""+e).toLowerCase(),i=!0;}}function p(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return "";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return "";if((r>>>=0)<=(e>>>=0))return "";for(t||(t="utf8");;)switch(t){case"hex":return x(this,e,r);case"utf8":case"utf-8":return I(this,e,r);case"ascii":return k(this,e,r);case"latin1":case"binary":return D(this,e,r);case"base64":return E(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0;}}function y(t,e,r){var n=t[e];t[e]=t[r],t[r]=n;}function g(t,e,r,n,i){if(0===t.length)return -1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),U(r=+r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return -1;r=t.length-1;}else if(r<0){if(!i)return -1;r=0;}if("string"==typeof e&&(e=a.from(e,n)),a.isBuffer(e))return 0===e.length?-1:m(t,e,r,n,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):m(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function m(t,e,r,n,i){var o,a=1,s=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return -1;a=2,s/=2,u/=2,r/=2;}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var l=-1;for(o=r;o<s;o++)if(c(t,o)===c(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*a}else -1!==l&&(o-=o-l),l=-1;}else for(r+u>s&&(r=s-u),o=r;o>=0;o--){for(var f=!0,h=0;h<u;h++)if(c(t,o+h)!==c(e,h)){f=!1;break}if(f)return o}return -1}function b(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(e.substr(2*a,2),16);if(U(s))return a;t[r+a]=s;}return a}function v(t,e,r,n){return L(j(e,t.length-r),t,r,n)}function w(t,e,r,n){return L(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function _(t,e,r,n){return L(B(e),t,r,n)}function S(t,e,r,n){return L(function(t,e){for(var r,n,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)n=(r=t.charCodeAt(a))>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function E(t,r,n){return 0===r&&n===t.length?e.fromByteArray(t):e.fromByteArray(t.slice(r,n))}function I(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,a,s,u,c=t[i],l=null,f=c>239?4:c>223?3:c>191?2:1;if(i+f<=r)switch(f){case 1:c<128&&(l=c);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&(u=(15&c)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(l=u);}null===l?(l=65533,f=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=f;}return function(t){var e=t.length;if(e<=A)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=A));return r}(n)}t.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return !1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(t,e,r){return s(t,e,r)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(t,e,r){return function(t,e,r){return u(t),t<=0?o(t):void 0!==e?"string"==typeof r?o(t).fill(e,r):o(t).fill(e):o(t)}(t,e,r)},a.allocUnsafe=function(t){return c(t)},a.allocUnsafeSlow=function(t){return c(t)},a.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==a.prototype},a.compare=function(t,e){if(F(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),F(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(t)||!a.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},a.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return !0;default:return !1}},a.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return a.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=a.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var o=t[r];if(F(o,Uint8Array))i+o.length>n.length?a.from(o).copy(n,i):Uint8Array.prototype.set.call(n,o,i);else {if(!a.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i);}i+=o.length;}return n},a.byteLength=d,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},a.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},a.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},a.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?I(this,0,t):p.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(t){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===a.compare(this,t)},a.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(t,e,r,n,i){if(F(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return -1;if(e>=r)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(e>>>=0),u=Math.min(o,s),c=this.slice(n,i),l=t.slice(e,r),f=0;f<u;++f)if(c[f]!==l[f]){o=c[f],s=l[f];break}return o<s?-1:s<o?1:0},a.prototype.includes=function(t,e,r){return -1!==this.indexOf(t,e,r)},a.prototype.indexOf=function(t,e,r){return g(this,t,e,r,!0)},a.prototype.lastIndexOf=function(t,e,r){return g(this,t,e,r,!1)},a.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else {if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0);}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return b(this,t,e,r);case"utf8":case"utf-8":return v(this,t,e,r);case"ascii":case"latin1":case"binary":return w(this,t,e,r);case"base64":return _(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0;}},a.prototype.toJSON=function(){return {type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var A=4096;function k(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function D(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function x(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=z[t[o]];return i}function T(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function P(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function O(t,e,r,n,i,o){if(!a.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function R(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function C(t,e,n,i,o){return e=+e,n>>>=0,o||R(t,0,n,4),r.write(t,e,n,i,23,4),n+4}function M(t,e,n,i,o){return e=+e,n>>>=0,o||R(t,0,n,8),r.write(t,e,n,i,52,8),n+8}a.prototype.slice=function(t,e){var r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);var n=this.subarray(t,e);return Object.setPrototypeOf(n,a.prototype),n},a.prototype.readUintLE=a.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||P(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},a.prototype.readUintBE=a.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||P(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},a.prototype.readUint8=a.prototype.readUInt8=function(t,e){return t>>>=0,e||P(t,1,this.length),this[t]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(t,e){return t>>>=0,e||P(t,2,this.length),this[t]|this[t+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(t,e){return t>>>=0,e||P(t,2,this.length),this[t]<<8|this[t+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(t,e){return t>>>=0,e||P(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(t,e){return t>>>=0,e||P(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},a.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||P(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},a.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||P(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},a.prototype.readInt8=function(t,e){return t>>>=0,e||P(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},a.prototype.readInt16LE=function(t,e){t>>>=0,e||P(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt16BE=function(t,e){t>>>=0,e||P(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt32LE=function(t,e){return t>>>=0,e||P(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},a.prototype.readInt32BE=function(t,e){return t>>>=0,e||P(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},a.prototype.readFloatLE=function(t,e){return t>>>=0,e||P(t,4,this.length),r.read(this,t,!0,23,4)},a.prototype.readFloatBE=function(t,e){return t>>>=0,e||P(t,4,this.length),r.read(this,t,!1,23,4)},a.prototype.readDoubleLE=function(t,e){return t>>>=0,e||P(t,8,this.length),r.read(this,t,!0,52,8)},a.prototype.readDoubleBE=function(t,e){return t>>>=0,e||P(t,8,this.length),r.read(this,t,!1,52,8)},a.prototype.writeUintLE=a.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e>>>=0,r>>>=0,n)||O(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e>>>=0,r>>>=0,n)||O(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},a.prototype.writeUint8=a.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,1,255,0),this[e]=255&t,e+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},a.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);O(this,t,e,r,i-1,-i);}var o=0,a=1,s=0;for(this[e]=255&t;++o<r&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},a.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);O(this,t,e,r,i-1,-i);}var o=r-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},a.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},a.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},a.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},a.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},a.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},a.prototype.writeFloatLE=function(t,e,r){return C(this,t,e,!0,r)},a.prototype.writeFloatBE=function(t,e,r){return C(this,t,e,!1,r)},a.prototype.writeDoubleLE=function(t,e,r){return M(this,t,e,!0,r)},a.prototype.writeDoubleBE=function(t,e,r){return M(this,t,e,!1,r)},a.prototype.copy=function(t,e,r,n){if(!a.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i=n-r;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),i},a.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!a.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){var i=t.charCodeAt(0);("utf8"===n&&i<128||"latin1"===n)&&(t=i);}}else "number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var o;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(o=e;o<r;++o)this[o]=t;else {var s=a.isBuffer(t)?t:a.from(t,n),u=s.length;if(0===u)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<r-e;++o)this[o+e]=s[o%u];}return this};var N=/[^+/0-9A-Za-z-_]/g;function j(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],a=0;a<n;++a){if((r=t.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320);}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r);}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128);}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128);}else {if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128);}}return o}function B(t){return e.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(N,"")).length<2)return "";for(;t.length%4!=0;)t+="=";return t}(t))}function L(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function F(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function U(t){return t!=t}var z=function(){for(var t="0123456789abcdef",e=new Array(256),r=0;r<16;++r)for(var n=16*r,i=0;i<16;++i)e[n+i]=t[r]+t[i];return e}();}(vt$1);class Nt$1{constructor(t,e=null,r,n){if(this.repr=null,this.parser=new class{constructor(t){this.superThis=t;}isTokenChar(t,e){return t>="A"&&t<="Z"||t>="a"&&t<="z"||t>="0"&&t<="9"||!e&&("."==t||"_"==t||"-"==t)}scanNextPart(t,e,r,n){let i=r,o=!0;for(let a=e;a<r;a++){let e=t.charAt(a);if("string"==typeof e){if(e==n){i=a;break}}else for(let t=0;t<n.length;t++)if(e==n[t]){i=t;break}if(!this.isTokenChar(e,o))throw new nt$1("Invalid char at: "+a);o=!1;}return i}parse(t,e=0,r){if(null==t)throw new nt$1("null DID string");for(null==r&&(r=t.length);r>e&&t.charAt(r-1)<=" ";)r--;for(;e<r&&t.charAt(e)<=" ";)e++;if(e==r)throw new nt$1("empty DID string");let n=e,i=this.scanNextPart(t,n,r,":"),o=t.substring(n,i);if(o!=Nt$1.SCHEMA)throw new nt$1("Invalid DID schema: '"+o+"', at: "+n);if(n=i,n+1>=r||":"!=t.charAt(n))throw new nt$1("Missing method and id string at: "+n);i=this.scanNextPart(t,++n,r,":");let a=t.substring(n,i);if(a!=Nt$1.METHOD)throw new nt$1("Unknown DID method: '"+a+"', at: "+n);if(this.superThis.method=Nt$1.METHOD,n=i,n+1>=r||":"!=t.charAt(n))throw new nt$1("Missing id string at: "+(n+1>r?n:n+1));i=this.scanNextPart(t,++n,r,"\0"),this.superThis.methodSpecificId=t.substring(n,i);}}(this),this.metadata=null,e){let r=t;Rt$1(r,"Invalid method"),Rt$1(e,"Invalid methodSpecificId"),this.method=r,this.methodSpecificId=e;}else r||(r=0),n||(n=t.length),Rt$1(t,"Invalid DID string"),this.parser.parse(t,r,n);}static createFrom(t,e,r){return Ot$1(null!=t&&""!=t,"Invalid DID string"),Ot$1(e<r,"Invalid offsets"),new Nt$1(t,null,e,r)}static from(t){return t?t instanceof Nt$1?t:0==t.length?null:new Nt$1(t):null}getMethod(){return this.method}getMethodSpecificId(){return this.methodSpecificId}setMetadata(t){this.metadata=t;}toJSON(t=null){return this.toString()}getMetadata(){return r(this,void 0,void 0,(function*(){if(null==this.metadata)try{let t=yield this.resolve();this.metadata=null!=t?t.getMetadata():new lt$1(this);}catch(t){this.metadata=new lt$1(this);}return this.metadata}))}isDeactivated(){return r(this,void 0,void 0,(function*(){if((yield this.getMetadata()).isDeactivated())return !0;let t=yield Mx.getInstance().resolveDidBiography(this);if(null==t)return !1;let e=t.getStatus()==Tx.DEACTIVATED;return e&&(yield this.getMetadata()).setDeactivated(e),e}))}resolve(t=!1){return r(this,void 0,void 0,(function*(){let e=yield Mx.getInstance().resolveDid(this,t);return null!=e&&this.setMetadata(e.getMetadata()),e}))}resolveBiography(){return r(this,void 0,void 0,(function*(){return yield Mx.getInstance().resolveDidBiography(this)}))}toString(){return null==this.repr&&(this.repr="did:"+this.method+":"+this.methodSpecificId),this.repr}hashCode(){return 3357+Mt$1(this.toString())}equals(t){if(t==this)return !0;if(t instanceof Nt$1){let e=t,r=this.method===e.method;return r?this.methodSpecificId===e.methodSpecificId:r}if("string"==typeof t){let e=t;return this.toString()===e}return !1}compareTo(t){Ct$1(t,"did is null");let e=(t,e)=>t<e?-1:t>e?1:0,r=e(this.method,t.method);return 0==r?e(this.methodSpecificId,t.methodSpecificId):r}}Nt$1.SCHEMA="did",Nt$1.METHOD="elastos",Nt$1.METADATA="metadata";class jt$1{constructor(t,e){if(this.did=null,this.path=null,this.fragment=null,this.parser=new class{constructor(t){this.superThis=t;}isHexChar(t){return t>="A"&&t<="F"||t>="a"&&t<="f"||t>="0"&&t<="9"}isTokenChar(t,e){return t>="A"&&t<="Z"||t>="a"&&t<="z"||t>="0"&&t<="9"||!e&&("."==t||"_"==t||"-"==t)}scanNextPart(t,e,r,n,i){let o=r,a=!0;for(let s=e;s<r;s++){let e=t.charAt(s);if(null!=n&&n.indexOf(e)>=0){o=s;break}if(null!=i&&i.indexOf(e)>=0){if(a)throw new O$1("Invalid char at: "+s);a=!0;}else if(this.isTokenChar(e,a))a=!1;else {if("%"!=e)throw new O$1("Invalid char at: "+s);{if(s+2>=r)throw new O$1("Invalid char at: "+s);let e=t.charAt(++s);if(!this.isHexChar(e))throw new O$1("Invalid hex char at: "+s);if(e=t.charAt(++s),!this.isHexChar(e))throw new O$1("Invalid hex char at: "+s);a=!1;}}}return o}parse(t,e){if(null==t&&(t=null),this.superThis.did=t,null==e)throw new O$1("null DIDURL string");let r,n=0,i=e.length;for(;i>0&&e.charAt(i-1)<=" ";)i--;for(;n<i&&e.charAt(n)<=" ";)n++;if(n==i)throw new O$1("empty DIDURL string");let o=n;if(o<i&&"did:"==e.substr(o,4)){r=this.scanNextPart(e,o,i,"/?#",":");try{this.superThis.did=Nt$1.createFrom(e.toString(),o,r);}catch(t){throw new O$1("Invalid did at: "+o,t)}o=r;}if(o<i&&"/"==e.charAt(o)&&(r=this.scanNextPart(e,o+1,i,"?#","/"),this.superThis.path=e.substring(o,r),o=r),o<i&&"?"==e.charAt(o)){r=this.scanNextPart(e,o+1,i,"#","&=");let t=e.substring(o+1,r);if(o=r,""!=t){let e=new Map,r=t.split("&");for(let t of r){let r=t.split("=");if(r.length>0&&""!=r[0]){let t=r[0],n=2==r.length?r[1]:null;e.set(t,n);}}this.superThis.query=e;}}else this.superThis.query=new Map;if(o<i&&"#"==e.charAt(o)||o==n){"#"==e.charAt(o)&&o++,r=this.scanNextPart(e,o,i,"",null);let t=e.substring(o,r);""!=t&&(this.superThis.fragment=t);}}}(this),Ot$1(!!t||!!e,"Invalid context and url"),!t)return this.did=e,this.query=new Map,this;"string"==typeof t?this.parser.parse(e,t):(null!=t.did&&(this.did=t.did),this.path=t.path,this.query=t.query,this.queryString=t.queryString,this.fragment=t.fragment,this.repr=t.repr,this.metadata=t.metadata);}static fromDID(t){return new jt$1(null,t)}static from(t,e){if(!t)return null;let r;return r=null==e?null:e instanceof Nt$1?e:Nt$1.from(e),t instanceof jt$1?r?new jt$1(t,r):t:new jt$1(t,r)}clone(t){let e=jt$1.fromDID(this.did);return e.path=this.path,e.query=0==this.query.size&&t?new Map:new Map(this.query),e.queryString=this.queryString,e.fragment=this.fragment,e.repr=this.repr,e}getDid(){return this.did}setDid(t){this.did=t;}mapToString(t,e){let r=!0,n="";return t.forEach(((t,i)=>{r?r=!1:n+=e,n+=i,null!=t&&(n+="="+t);})),n}getPath(){return this.path}setPath(t){this.path=t;}getQueryString(){return 0==this.query.size?null:(null==this.queryString&&(this.queryString=this.mapToString(this.query,"&")),this.queryString)}getQuery(){return this.query}setQuery(t){this.query=new Map(t);}getQueryParameter(t){Ot$1(null!=t&&""!==t,"Invalid parameter name");let e=this.query.get(t);return null==e?null:e}hasQueryParameter(t){return Ot$1(null!=t&&""!=t,"Invalid parameter name"),this.query.has(t)}getFragment(){return this.fragment}setFragment(t){this.fragment=t;}setMetadata(t){this.metadata=t;}getMetadata(){return this.metadata}toJSON(t=null){let e=null;return t&&(e=new Nt$1(t)),this.toString(e)}toString(t=null){if(!t&&this.repr)return this.repr;let e="";return null==this.did||null!=t&&this.did.equals(t)||(e+=this.did),null!=this.path&&""!==this.path&&(e+=this.path),null!=this.query&&0!=this.query.size&&(e+="?"+this.getQueryString()),null!=this.fragment&&""!==this.fragment&&(e+="#"+this.getFragment()),t||(this.repr=e),e}equals(t){if(t==this)return !0;if(t instanceof jt$1){let e=t;return this.toString()===e.toString()}if("string"==typeof t){let e=t;return this.toString()===e}return !1}compareTo(t){Ct$1(t,"id is null");return e=this.toString(),r=t.toString(),e<r?-1:e>r?1:0;var e,r;}hashCode(){return Mt$1(this.toString())}}jt$1.SEPS=[":",";","/","?","#"],function(t){t.Builder=class{constructor(e){this.url=e instanceof Nt$1?t.fromDID(e):e.clone(!1);}setDid(t){return Ot$1(null!=t,"Invalid did"),t instanceof Nt$1?this.url.setDid(t):this.url.setDid(Nt$1.from(t)),this}clearDid(){return this.url.setDid(null),this}setPath(t){return this.url.setPath(t),this}clearPath(){return this.url.setPath(""),this}setQueryParameter(t,e){return Ot$1(null!=t&&""!==t,"Invalid parameter name"),this.url.getQuery().set(t,e),this}setQueryParameters(t){return this.url.getQuery().clear(),null!=t&&t.size>0&&t.forEach(((t,e)=>this.url.getQuery().set(e,t))),this}removeQueryParameter(t){return Ot$1(null!=t&&""!==t,"Invalid parameter name"),this.url.getQuery().delete(t),this}clearQueryParameters(){return this.url.getQuery().clear(),this}setFragment(t){return this.url.setFragment(t),this}clearFragment(){return this.url.setFragment(""),this}build(){return this.url.clone(!0)}};}(jt$1||(jt$1={})),function(t){t[t.ERROR=0]="ERROR",t[t.WARNING=1]="WARNING",t[t.INFO=2]="INFO",t[t.DEBUG=3]="DEBUG",t[t.TRACE=4]="TRACE";}(Tt$1||(Tt$1={}));class Bt$1{static enableJsonLdContext(t){this.enabledJsonLdContext=t;}static isEnabledJsonLdContext(){return this.enabledJsonLdContext}static setLogLevel(r){e.setLevel(new t(r));}static getLogLevel(){return e.getLevel().getLevel()}}Bt$1.enabledJsonLdContext=!1;class Lt$1{constructor(t){this.header=t||{};}setAlgorithm(t){return delete this.header.alg,this.header.alg=t,this}getAlgorithm(){return this.header.alg}setKeyId(t){return this.header.kid=t,this}getKeyId(){return this.header.kid}setType(t){return this.header.typ=t,this}getType(){return this.header.typ}setContentType(t){return this.header.cty=t,this}getContentType(){return this.header.cty}put(t,e){return t!=Lt$1.ALG&&t!=Lt$1.KID&&(this.header[t]&&delete this.header[t],this.header[t]=e),this}get(t){return this.header?this.header[t]:null}getJWSHeaderParameters(){return this.header}getJWTHeaderParameters(){return null!=this.header.alg&&"none"!==this.header.alg?this.header:null}}Lt$1.JWT_TYPE="JWT",Lt$1.TYPE="typ",Lt$1.CONTENT_TYPE="cty",Lt$1.ALG="alg",Lt$1.KID="kid";class Ft$1{constructor(t){this.payload=t||{};}put(t,e){return this.payload[t]&&delete this.payload[t],this.payload[t]=e,this}putWithObject(t){return this.payload=Object.assign(Object.assign({},this.payload),t),this}putWithJson(t){let e=JSON.parse(t);return this.putWithObject(e),this}get(t){return this.payload[t]}getAsObject(t){let e=this.payload[t];return null!=e?e:null}getAsJson(t){let e=this.payload[t];return null==e?null:JSON.stringify(e)}setId(t){return this.payload.jti=t,this}getId(){return this.payload.jti}setAudience(t){return this.payload.aud=t,this}getAudience(){return this.payload.aud}setExpiration(t){return this.payload.exp=t,this}getExpiration(){return this.payload.exp}setIssuedAt(t){return this.payload.iat=t,this}getIssuedAt(){return this.payload.iat}setIssuer(t){return this.payload.iss=t,this}getIssuer(){return this.payload.iss}setJti(t){return this.payload.jti=t,this}getJti(){return this.payload.jti}setNotBefore(t){return this.payload.nbf=t,this}getNotBefore(){return this.payload.nbf}setSubject(t){return this.payload.sub=t,this}getSubject(){return this.payload.sub}getJWTPayload(){return this.payload}}const Ut$1=new TextEncoder,zt$1=new TextDecoder;function Kt$1(...t){const e=t.reduce(((t,{length:e})=>t+e),0),r=new Uint8Array(e);let n=0;return t.forEach((t=>{r.set(t,n),n+=t.length;})),r}const qt$1=t=>(t=>{let e=t;"string"==typeof e&&(e=Ut$1.encode(e));const r=[];for(let t=0;t<e.length;t+=32768)r.push(String.fromCharCode.apply(null,e.subarray(t,t+32768)));return btoa(r.join(""))})(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),Ht$1=t=>{let e=t;e instanceof Uint8Array&&(e=zt$1.decode(e)),e=e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return (t=>new Uint8Array(atob(t).split("").map((t=>t.charCodeAt(0)))))(e)}catch(t){throw new TypeError("The input to be decoded is not correctly encoded.")}};class Vt$1 extends Error{constructor(t){var e;super(t),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,null===(e=Error.captureStackTrace)||void 0===e||e.call(Error,this,this.constructor);}static get code(){return "ERR_JOSE_GENERIC"}}class Wt$1 extends Vt$1{constructor(t,e="unspecified",r="unspecified"){super(t),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=e,this.reason=r;}static get code(){return "ERR_JWT_CLAIM_VALIDATION_FAILED"}}class Jt$1 extends Vt$1{constructor(t,e="unspecified",r="unspecified"){super(t),this.code="ERR_JWT_EXPIRED",this.claim=e,this.reason=r;}static get code(){return "ERR_JWT_EXPIRED"}}class Yt$1 extends Vt$1{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED";}static get code(){return "ERR_JOSE_ALG_NOT_ALLOWED"}}class Zt$1 extends Vt$1{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED";}static get code(){return "ERR_JOSE_NOT_SUPPORTED"}}class Gt$1 extends Vt$1{constructor(){super(...arguments),this.code="ERR_JWS_INVALID";}static get code(){return "ERR_JWS_INVALID"}}class Xt$1 extends Vt$1{constructor(){super(...arguments),this.code="ERR_JWT_INVALID";}static get code(){return "ERR_JWT_INVALID"}}class $t$1 extends Vt$1{constructor(){super(...arguments),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",this.message="signature verification failed";}static get code(){return "ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}var Qt$1=crypto;function te$1(t){try{return null!=t&&"boolean"==typeof t.extractable&&"string"==typeof t.algorithm.name&&"string"==typeof t.type}catch(t){return !1}}var ee$1="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function re$1(){throw new Error("setTimeout has not been defined")}function ne$1(){throw new Error("clearTimeout has not been defined")}var ie$1=re$1,oe$1=ne$1;function ae$1(t){if(ie$1===setTimeout)return setTimeout(t,0);if((ie$1===re$1||!ie$1)&&setTimeout)return ie$1=setTimeout,setTimeout(t,0);try{return ie$1(t,0)}catch(e){try{return ie$1.call(null,t,0)}catch(e){return ie$1.call(this,t,0)}}}"function"==typeof ee$1.setTimeout&&(ie$1=setTimeout),"function"==typeof ee$1.clearTimeout&&(oe$1=clearTimeout);var se$1,ue$1=[],ce$1=!1,le$1=-1;function fe$1(){ce$1&&se$1&&(ce$1=!1,se$1.length?ue$1=se$1.concat(ue$1):le$1=-1,ue$1.length&&he$1());}function he$1(){if(!ce$1){var t=ae$1(fe$1);ce$1=!0;for(var e=ue$1.length;e;){for(se$1=ue$1,ue$1=[];++le$1<e;)se$1&&se$1[le$1].run();le$1=-1,e=ue$1.length;}se$1=null,ce$1=!1,function(t){if(oe$1===clearTimeout)return clearTimeout(t);if((oe$1===ne$1||!oe$1)&&clearTimeout)return oe$1=clearTimeout,clearTimeout(t);try{oe$1(t);}catch(e){try{return oe$1.call(null,t)}catch(e){return oe$1.call(this,t)}}}(t);}}function de$1(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];ue$1.push(new pe$1(t,e)),1!==ue$1.length||ce$1||ae$1(he$1);}function pe$1(t,e){this.fun=t,this.array=e;}pe$1.prototype.run=function(){this.fun.apply(null,this.array);};function ye$1(){}var ge$1=ye$1,me$1=ye$1,be$1=ye$1,ve$1=ye$1,we$1=ye$1,_e$1=ye$1,Se$1=ye$1;var Ee$1=ee$1.performance||{},Ie$1=Ee$1.now||Ee$1.mozNow||Ee$1.msNow||Ee$1.oNow||Ee$1.webkitNow||function(){return (new Date).getTime()};var Ae$1=new Date;var ke$1={nextTick:de$1,title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:ge$1,addListener:me$1,once:be$1,off:ve$1,removeListener:we$1,removeAllListeners:_e$1,emit:Se$1,binding:function(t){throw new Error("process.binding is not supported")},cwd:function(){return "/"},chdir:function(t){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(t){var e=.001*Ie$1.call(Ee$1),r=Math.floor(e),n=Math.floor(e%1*1e9);return t&&(r-=t[0],(n-=t[1])<0&&(r--,n+=1e9)),[r,n]},platform:"browser",release:{},config:{},uptime:function(){return (new Date-Ae$1)/1e3}};function De$1(){return "function"==typeof WebSocketPair}function xe$1(){try{return void 0!==ke$1.versions.node}catch(t){return !1}}function Te$1(t,e="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${e} must be ${t}`)}function Pe$1(t,e){return t.name===e}function Oe$1(t){return parseInt(t.name.substr(4),10)}function Re$1(t,e,...r){switch(e){case"HS256":case"HS384":case"HS512":{if(!Pe$1(t.algorithm,"HMAC"))throw Te$1("HMAC");const r=parseInt(e.substr(2),10);if(Oe$1(t.algorithm.hash)!==r)throw Te$1(`SHA-${r}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!Pe$1(t.algorithm,"RSASSA-PKCS1-v1_5"))throw Te$1("RSASSA-PKCS1-v1_5");const r=parseInt(e.substr(2),10);if(Oe$1(t.algorithm.hash)!==r)throw Te$1(`SHA-${r}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!Pe$1(t.algorithm,"RSA-PSS"))throw Te$1("RSA-PSS");const r=parseInt(e.substr(2),10);if(Oe$1(t.algorithm.hash)!==r)throw Te$1(`SHA-${r}`,"algorithm.hash");break}case xe$1()&&"EdDSA":if("NODE-ED25519"!==t.algorithm.name&&"NODE-ED448"!==t.algorithm.name)throw Te$1("NODE-ED25519 or NODE-ED448");break;case De$1()&&"EdDSA":if(!Pe$1(t.algorithm,"NODE-ED25519"))throw Te$1("NODE-ED25519");break;case"ES256":case"ES384":case"ES512":{if(!Pe$1(t.algorithm,"ECDSA"))throw Te$1("ECDSA");const r=function(t){switch(t){case"ES256":return "P-256";case"ES384":return "P-384";case"ES512":return "P-521";default:throw new Error("unreachable")}}(e);if(t.algorithm.namedCurve!==r)throw Te$1(r,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}!function(t,e){if(e.length&&!e.some((e=>t.usages.includes(e)))){let t="CryptoKey does not support this operation, its usages must include ";if(e.length>2){const r=e.pop();t+=`one of ${e.join(", ")}, or ${r}.`;}else 2===e.length?t+=`one of ${e[0]} or ${e[1]}.`:t+=`${e[0]}.`;throw new TypeError(t)}}(t,r);}var Ce$1=(t,...e)=>{let r="Key must be ";if(e.length>2){const t=e.pop();r+=`one of type ${e.join(", ")}, or ${t}.`;}else 2===e.length?r+=`one of type ${e[0]} or ${e[1]}.`:r+=`of type ${e[0]}.`;return null==t?r+=` Received ${t}`:"function"==typeof t&&t.name?r+=` Received function ${t.name}`:"object"==typeof t&&null!=t&&t.constructor&&t.constructor.name&&(r+=` Received an instance of ${t.constructor.name}`),r},Me$1=t=>te$1(t);const Ne$1=["CryptoKey"];var je$1=(...t)=>{const e=t.filter(Boolean);if(0===e.length||1===e.length)return !0;let r;for(const t of e){const e=Object.keys(t);if(r&&0!==r.size)for(const t of e){if(r.has(t))return !1;r.add(t);}else r=new Set(e);}return !0};function Be$1(t){if("object"!=typeof(e=t)||null===e||"[object Object]"!==Object.prototype.toString.call(t))return !1;var e;if(null===Object.getPrototypeOf(t))return !0;let r=t;for(;null!==Object.getPrototypeOf(r);)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(t)===r}var Le$1=(t,e)=>{if(t.startsWith("RS")||t.startsWith("PS")){const{modulusLength:r}=e.algorithm;if("number"!=typeof r||r<2048)throw new TypeError(`${t} requires key modulusLength to be 2048 bits or larger`)}};var Fe$1=async t=>{var e,r;const{algorithm:n,keyUsages:i}=function(t){let e,r;switch(t.kty){case"oct":switch(t.alg){case"HS256":case"HS384":case"HS512":e={name:"HMAC",hash:`SHA-${t.alg.substr(-3)}`},r=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":throw new Zt$1(`${t.alg} keys cannot be imported as CryptoKey instances`);case"A128GCM":case"A192GCM":case"A256GCM":case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":e={name:"AES-GCM"},r=["encrypt","decrypt"];break;case"A128KW":case"A192KW":case"A256KW":e={name:"AES-KW"},r=["wrapKey","unwrapKey"];break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":e={name:"PBKDF2"},r=["deriveBits"];break;default:throw new Zt$1('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"RSA":switch(t.alg){case"PS256":case"PS384":case"PS512":e={name:"RSA-PSS",hash:`SHA-${t.alg.substr(-3)}`},r=t.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":e={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${t.alg.substr(-3)}`},r=t.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":e={name:"RSA-OAEP",hash:`SHA-${parseInt(t.alg.substr(-3),10)||1}`},r=t.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new Zt$1('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(t.alg){case"ES256":e={name:"ECDSA",namedCurve:"P-256"},r=t.d?["sign"]:["verify"];break;case"ES384":e={name:"ECDSA",namedCurve:"P-384"},r=t.d?["sign"]:["verify"];break;case"ES512":e={name:"ECDSA",namedCurve:"P-521"},r=t.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:"ECDH",namedCurve:t.crv},r=t.d?["deriveBits"]:[];break;default:throw new Zt$1('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case(De$1()||xe$1())&&"OKP":if("EdDSA"!==t.alg)throw new Zt$1('Invalid or unsupported JWK "alg" (Algorithm) Parameter value');switch(t.crv){case"Ed25519":e={name:"NODE-ED25519",namedCurve:"NODE-ED25519"},r=t.d?["sign"]:["verify"];break;case xe$1()&&"Ed448":e={name:"NODE-ED448",namedCurve:"NODE-ED448"},r=t.d?["sign"]:["verify"];break;default:throw new Zt$1('Invalid or unsupported JWK "crv" (Subtype of Key Pair) Parameter value')}break;default:throw new Zt$1('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return {algorithm:e,keyUsages:r}}(t),o=[n,null!==(e=t.ext)&&void 0!==e&&e,null!==(r=t.key_ops)&&void 0!==r?r:i];if("PBKDF2"===n.name)return Qt$1.subtle.importKey("raw",Ht$1(t.k),...o);const a={...t};return delete a.alg,Qt$1.subtle.importKey("jwk",a,...o)};async function Ue$1(t,e,r){if(!Be$1(t))throw new TypeError("JWK must be an object");if(e||(e=t.alg),"string"!=typeof e||!e)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');switch(t.kty){case"oct":if("string"!=typeof t.k||!t.k)throw new TypeError('missing "k" (Key Value) Parameter value');return null!=r||(r=!0!==t.ext),r?Fe$1({...t,alg:e,ext:!1}):Ht$1(t.k);case"RSA":if(void 0!==t.oth)throw new Zt$1('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return Fe$1({...t,alg:e});default:throw new Zt$1('Unsupported "kty" (Key Type) Parameter value')}}var ze$1=(t,e,r)=>{t.startsWith("HS")||"dir"===t||t.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(t)?(t=>{if(!(t instanceof Uint8Array)){if(!Me$1(t))throw new TypeError(Ce$1(t,...Ne$1,"Uint8Array"));if("secret"!==t.type)throw new TypeError(`${Ne$1.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}})(e):((t,e)=>{if(!Me$1(t))throw new TypeError(Ce$1(t,...Ne$1));if("secret"===t.type)throw new TypeError(`${Ne$1.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if("sign"===e&&"public"===t.type)throw new TypeError(`${Ne$1.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if("decrypt"===e&&"public"===t.type)throw new TypeError(`${Ne$1.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(t.algorithm&&"verify"===e&&"private"===t.type)throw new TypeError(`${Ne$1.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(t.algorithm&&"encrypt"===e&&"private"===t.type)throw new TypeError(`${Ne$1.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)})(e,r);};function Ke$1(t,e,r,n,i){if(void 0!==i.crit&&void 0===n.crit)throw new t('"crit" (Critical) Header Parameter MUST be integrity protected');if(!n||void 0===n.crit)return new Set;if(!Array.isArray(n.crit)||0===n.crit.length||n.crit.some((t=>"string"!=typeof t||0===t.length)))throw new t('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let o;o=void 0!==r?new Map([...Object.entries(r),...e.entries()]):e;for(const e of n.crit){if(!o.has(e))throw new Zt$1(`Extension Header Parameter "${e}" is not recognized`);if(void 0===i[e])throw new t(`Extension Header Parameter "${e}" is missing`);if(o.get(e)&&void 0===n[e])throw new t(`Extension Header Parameter "${e}" MUST be integrity protected`)}return new Set(n.crit)}var qe$1=(t,e)=>{if(void 0!==e&&(!Array.isArray(e)||e.some((t=>"string"!=typeof t))))throw new TypeError(`"${t}" option must be an array of strings`);if(e)return new Set(e)};function He$1(t,e){const r=parseInt(t.substr(-3),10);switch(t){case"HS256":case"HS384":case"HS512":return {hash:`SHA-${r}`,name:"HMAC"};case"PS256":case"PS384":case"PS512":return {hash:`SHA-${r}`,name:"RSA-PSS",saltLength:r>>3};case"RS256":case"RS384":case"RS512":return {hash:`SHA-${r}`,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return {hash:`SHA-${r}`,name:"ECDSA",namedCurve:e};case(De$1()||xe$1())&&"EdDSA":return {name:e,namedCurve:e};default:throw new Zt$1(`alg ${t} is not supported either by JOSE or your javascript runtime`)}}function Ve$1(t,e,r){if(te$1(e))return Re$1(e,t,r),e;if(e instanceof Uint8Array){if(!t.startsWith("HS"))throw new TypeError(Ce$1(e,...Ne$1));return Qt$1.subtle.importKey("raw",e,{hash:`SHA-${t.substr(-3)}`,name:"HMAC"},!1,[r])}throw new TypeError(Ce$1(e,...Ne$1,"Uint8Array"))}var We$1=async(t,e,r,n)=>{const i=await Ve$1(t,e,"verify");Le$1(t,i);const o=He$1(t,i.algorithm.namedCurve);try{return await Qt$1.subtle.verify(o,i,r,n)}catch(t){return !1}};async function Je$1(t,e,r){if(t instanceof Uint8Array&&(t=zt$1.decode(t)),"string"!=typeof t)throw new Gt$1("Compact JWS must be a string or Uint8Array");const{0:n,1:i,2:o,length:a}=t.split(".");if(3!==a)throw new Gt$1("Invalid Compact JWS");const s=await async function(t,e,r){var n;if(!Be$1(t))throw new Gt$1("Flattened JWS must be an object");if(void 0===t.protected&&void 0===t.header)throw new Gt$1('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==t.protected&&"string"!=typeof t.protected)throw new Gt$1("JWS Protected Header incorrect type");if(void 0===t.payload)throw new Gt$1("JWS Payload missing");if("string"!=typeof t.signature)throw new Gt$1("JWS Signature missing or incorrect type");if(void 0!==t.header&&!Be$1(t.header))throw new Gt$1("JWS Unprotected Header incorrect type");let i={};if(t.protected){const e=Ht$1(t.protected);try{i=JSON.parse(zt$1.decode(e));}catch(t){throw new Gt$1("JWS Protected Header is invalid")}}if(!je$1(i,t.header))throw new Gt$1("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const o={...i,...t.header};let a=!0;if(Ke$1(Gt$1,new Map([["b64",!0]]),null==r?void 0:r.crit,i,o).has("b64")&&(a=i.b64,"boolean"!=typeof a))throw new Gt$1('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:s}=o;if("string"!=typeof s||!s)throw new Gt$1('JWS "alg" (Algorithm) Header Parameter missing or invalid');const u=r&&qe$1("algorithms",r.algorithms);if(u&&!u.has(s))throw new Yt$1('"alg" (Algorithm) Header Parameter not allowed');if(a){if("string"!=typeof t.payload)throw new Gt$1("JWS Payload must be a string")}else if("string"!=typeof t.payload&&!(t.payload instanceof Uint8Array))throw new Gt$1("JWS Payload must be a string or an Uint8Array instance");let c=!1;"function"==typeof e&&(e=await e(i,t),c=!0),ze$1(s,e,"verify");const l=Kt$1(Ut$1.encode(null!==(n=t.protected)&&void 0!==n?n:""),Ut$1.encode("."),"string"==typeof t.payload?Ut$1.encode(t.payload):t.payload),f=Ht$1(t.signature);if(!await We$1(s,e,f,l))throw new $t$1;let h;h=a?Ht$1(t.payload):"string"==typeof t.payload?Ut$1.encode(t.payload):t.payload;const d={payload:h};return void 0!==t.protected&&(d.protectedHeader=i),void 0!==t.header&&(d.unprotectedHeader=t.header),c?{...d,key:e}:d}({payload:i,protected:n,signature:o},e,r),u={payload:s.payload,protectedHeader:s.protectedHeader};return "function"==typeof e?{...u,key:s.key}:u}var Ye$1=t=>Math.floor(t.getTime()/1e3);const Ze$1=/^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i;var Ge$1=t=>{const e=Ze$1.exec(t);if(!e)throw new TypeError("Invalid time period format");const r=parseFloat(e[1]);switch(e[2].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":return Math.round(r);case"minute":case"minutes":case"min":case"mins":case"m":return Math.round(60*r);case"hour":case"hours":case"hr":case"hrs":case"h":return Math.round(3600*r);case"day":case"days":case"d":return Math.round(86400*r);case"week":case"weeks":case"w":return Math.round(604800*r);default:return Math.round(31557600*r)}};const Xe$1=t=>t.toLowerCase().replace(/^application\//,"");var $e$1=(t,e,r={})=>{const{typ:n}=r;if(n&&("string"!=typeof t.typ||Xe$1(t.typ)!==Xe$1(n)))throw new Wt$1('unexpected "typ" JWT header value',"typ","check_failed");let i;try{i=JSON.parse(zt$1.decode(e));}catch(t){}if(!Be$1(i))throw new Xt$1("JWT Claims Set must be a top-level JSON object");const{issuer:o}=r;if(o&&!(Array.isArray(o)?o:[o]).includes(i.iss))throw new Wt$1('unexpected "iss" claim value',"iss","check_failed");const{subject:a}=r;if(a&&i.sub!==a)throw new Wt$1('unexpected "sub" claim value',"sub","check_failed");const{audience:s}=r;if(s&&(u=i.aud,c="string"==typeof s?[s]:s,!("string"==typeof u?c.includes(u):Array.isArray(u)&&c.some(Set.prototype.has.bind(new Set(u))))))throw new Wt$1('unexpected "aud" claim value',"aud","check_failed");var u,c;let l;switch(typeof r.clockTolerance){case"string":l=Ge$1(r.clockTolerance);break;case"number":l=r.clockTolerance;break;case"undefined":l=0;break;default:throw new TypeError("Invalid clockTolerance option type")}const{currentDate:f}=r,h=Ye$1(f||new Date);if(void 0!==i.iat||r.maxTokenAge){if("number"!=typeof i.iat)throw new Wt$1('"iat" claim must be a number',"iat","invalid");if(void 0===i.exp&&i.iat>h+l)throw new Wt$1('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}if(void 0!==i.nbf){if("number"!=typeof i.nbf)throw new Wt$1('"nbf" claim must be a number',"nbf","invalid");if(i.nbf>h+l)throw new Wt$1('"nbf" claim timestamp check failed',"nbf","check_failed")}if(void 0!==i.exp){if("number"!=typeof i.exp)throw new Wt$1('"exp" claim must be a number',"exp","invalid");if(i.exp<=h-l)throw new Jt$1('"exp" claim timestamp check failed',"exp","check_failed")}if(r.maxTokenAge){const t=h-i.iat;if(t-l>("number"==typeof r.maxTokenAge?r.maxTokenAge:Ge$1(r.maxTokenAge)))throw new Jt$1('"iat" claim timestamp check failed (too far in the past)',"iat","check_failed");if(t<0-l)throw new Wt$1('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}return i};var Qe$1=async(t,e,r)=>{const n=await Ve$1(t,e,"sign");Le$1(t,n);const i=await Qt$1.subtle.sign(He$1(t,n.algorithm.namedCurve),n,r);return new Uint8Array(i)};class tr$1{constructor(t){if(!(t instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this._payload=t;}setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setUnprotectedHeader(t){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}async sign(t,e){if(!this._protectedHeader&&!this._unprotectedHeader)throw new Gt$1("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!je$1(this._protectedHeader,this._unprotectedHeader))throw new Gt$1("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const r={...this._protectedHeader,...this._unprotectedHeader};let n=!0;if(Ke$1(Gt$1,new Map([["b64",!0]]),null==e?void 0:e.crit,this._protectedHeader,r).has("b64")&&(n=this._protectedHeader.b64,"boolean"!=typeof n))throw new Gt$1('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:i}=r;if("string"!=typeof i||!i)throw new Gt$1('JWS "alg" (Algorithm) Header Parameter missing or invalid');ze$1(i,t,"sign");let o,a=this._payload;n&&(a=Ut$1.encode(qt$1(a))),o=this._protectedHeader?Ut$1.encode(qt$1(JSON.stringify(this._protectedHeader))):Ut$1.encode("");const s=Kt$1(o,Ut$1.encode("."),a),u=await Qe$1(i,t,s),c={signature:qt$1(u),payload:""};return n&&(c.payload=zt$1.decode(a)),this._unprotectedHeader&&(c.header=this._unprotectedHeader),this._protectedHeader&&(c.protected=zt$1.decode(o)),c}}class er$1{constructor(t){this._flattened=new tr$1(t);}setProtectedHeader(t){return this._flattened.setProtectedHeader(t),this}async sign(t,e){const r=await this._flattened.sign(t,e);if(void 0===r.payload)throw new TypeError("use the flattened module for creating JWS with b64: false");return `${r.protected}.${r.payload}.${r.signature}`}}class rr$1{constructor(t){if(!Be$1(t))throw new TypeError("JWT Claims Set MUST be an object");this._payload=t;}setIssuer(t){return this._payload={...this._payload,iss:t},this}setSubject(t){return this._payload={...this._payload,sub:t},this}setAudience(t){return this._payload={...this._payload,aud:t},this}setJti(t){return this._payload={...this._payload,jti:t},this}setNotBefore(t){return this._payload="number"==typeof t?{...this._payload,nbf:t}:{...this._payload,nbf:Ye$1(new Date)+Ge$1(t)},this}setExpirationTime(t){return this._payload="number"==typeof t?{...this._payload,exp:t}:{...this._payload,exp:Ye$1(new Date)+Ge$1(t)},this}setIssuedAt(t){return this._payload=void 0===t?{...this._payload,iat:Ye$1(new Date)}:{...this._payload,iat:t},this}}class nr$1 extends rr$1{setProtectedHeader(t){return this._protectedHeader=t,this}async sign(t,e){var r;const n=new er$1(Ut$1.encode(JSON.stringify(this._payload)));if(n.setProtectedHeader(this._protectedHeader),Array.isArray(null===(r=this._protectedHeader)||void 0===r?void 0:r.crit)&&this._protectedHeader.crit.includes("b64")&&!1===this._protectedHeader.b64)throw new Xt$1("JWTs MUST NOT use unencoded payload");return n.sign(t,e)}}class ir$1 extends rr$1{encode(){return `${qt$1(JSON.stringify({alg:"none"}))}.${qt$1(JSON.stringify(this._payload))}.`}static decode(t,e){if("string"!=typeof t)throw new Xt$1("Unsecured JWT must be a string");const{0:r,1:n,2:i,length:o}=t.split(".");if(3!==o||""!==i)throw new Xt$1("Invalid Unsecured JWT");let a;try{if(a=JSON.parse(zt$1.decode(Ht$1(r))),"none"!==a.alg)throw new Error}catch(t){throw new Xt$1("Invalid Unsecured JWT")}return {payload:$e$1(a,Ht$1(n),e),header:a}}}const or$1=Ht$1;function ar$1(t){let e;if("string"==typeof t){const r=t.split(".");3!==r.length&&5!==r.length||([e]=r);}else if("object"==typeof t&&t){if(!("protected"in t))throw new TypeError("Token does not contain a Protected Header");e=t.protected;}try{if("string"!=typeof e||!e)throw new Error;const t=JSON.parse(zt$1.decode(or$1(e)));if(!Be$1(t))throw new Error;return t}catch(t){throw new TypeError("Invalid Token or Protected Header formatting")}}class sr$1{constructor(t,e){this.header=null,this.payload=null,Ot$1(null!=t,"Invalid issuer"),this.header=new Lt$1,this.payload=new Ft$1,this.payload.setIssuer(t.toString()),this.keyprovider=e,this.issuer=t;}static createHeader(){return new Lt$1}static createClaims(){return new Ft$1}setHeader(t){return this.header=t,this}setClaims(t){return this.payload=t,t.getIssuer()||this.payload.setIssuer(this.issuer.toString()),this}setClaimsWithJson(t){return this.payload=new Ft$1,this.payload.putWithJson(t),this.payload.getIssuer()||this.payload.setIssuer(this.issuer.toString()),this}setClaimsWithObject(t){return this.payload=new Ft$1,this.payload.putWithObject(t),this.payload.getIssuer()||this.payload.setIssuer(this.issuer.toString()),this}addClaims(t){return this.payload.putWithObject(t),this}addClaimsWithJson(t){let e=JSON.parse(t);return this.addClaims(e),this}addHeader(t,e){return this.header.put(t,e),this}claims(t,e){return this.payload.put(t,e),this}claimsWithJson(t,e){let r=JSON.parse(e);return this.claims(t,r),this}setId(t){return this.payload.setId(t),this}setAudience(t){return this.payload.setAudience(t),this}setExpiration(t){let e=t instanceof Date?t.getUTCSeconds():t;return this.payload.setExpiration(e),this}setIssuedAt(t){let e=t instanceof Date?t.getUTCSeconds():t;return this.payload.setIssuedAt(e),this}setIssuer(t){return this.payload.setIssuer(t),this}setJti(t){return this.payload.setJti(t),this}setNotBefore(t){let e=t instanceof Date?t.getUTCSeconds():t;return this.payload.setNotBefore(e),this}setSubject(t){return this.payload.setSubject(t),this}sign(t,e=null){return r(this,void 0,void 0,(function*(){Ot$1(null!=t&&""!=t,"Invalid password"),this.header.setAlgorithm("ES256"),e&&this.header.setKeyId(e);const r=new nr$1(this.payload.getJWTPayload()).setProtectedHeader(this.header.getJWTHeaderParameters());let n=yield this.keyprovider.getPrivateKey(e,t);return yield r.sign(n)}))}compact(){this.header.setAlgorithm("none");return `${jS.fromString(JSON.stringify(this.header.getJWSHeaderParameters()))}.${jS.fromString(JSON.stringify(this.payload.getJWTPayload()))}.`}}class ur$1{constructor(t,e){this.header=new Lt$1(t),this.claims=new Ft$1(e);}getHeader(){return this.header}getBody(){return this.claims}}class cr$1{constructor(t,e){this.keyprovider=t,this.options=e;}isSigned(t){return "none"!=ar$1(t).alg}getSignkey(t){return ar$1(t).kid}getIssuer(t){let e=t.split(".");if(3!=e.length)throw new rt$1("Invalid jwt token.");let r=JSON.parse(jS.toString(e[1])).iss;if(null==r)throw new rt$1("No issuer in the token.");return r}parse(t){return r(this,void 0,void 0,(function*(){if(this.isSigned(t)){if(null==this.keyprovider){let e=Nt$1.from(this.getIssuer(t));if(null==e)throw new rt$1("No issuer in the token");let r=yield e.resolve();if(null==r)throw new s$1("No issuer doc in the chain.");this.keyprovider=r.getKeyProvider();}let r=yield this.keyprovider.getPublicKey(this.getSignkey(t));var e;try{e=yield async function(t,e,r){var n;const i=await Je$1(t,e,r);if((null===(n=i.protectedHeader.crit)||void 0===n?void 0:n.includes("b64"))&&!1===i.protectedHeader.b64)throw new Xt$1("JWTs MUST NOT use unencoded payload");const o={payload:$e$1(i.protectedHeader,i.payload,r),protectedHeader:i.protectedHeader};return "function"==typeof e?{...o,key:i.key}:o}(t,r,this.options);}catch(t){throw new rt$1(t)}return new ur$1(e.protectedHeader,e.payload)}{const e=ir$1.decode(t,this.options);return new ur$1(e.header,e.payload)}}))}}class lr$1{constructor(){return this.keyProvider=null,this.options={},this}static newWithKeyProvider(t){let e=new lr$1;return e.keyProvider=t,e}requireSubject(t){return this.options.subject=t,this}requireAudience(t){return this.options.audience=t,this}requireIssuer(t){return this.options.issuer=t,this}requireIssuedAt(t){return this.options.maxTokenAge=t,this}requireAlgorithms(t){return this.options.algorithms=t,this}requireHeaderType(t){return this.options.typ=t,this}setAllowedClockSkewSeconds(t){return this.options.clockTolerance=t,this}build(){return Object.assign({},this.options),new cr$1(this.keyProvider,this.options)}}class fr$1 extends ct$1{constructor(t=null,e=null){super(e),this.id=t;}setId(t){this.id=t;}setTransactionId(t){this.put(fr$1.TXID,t);}getTransactionId(){return this.get(fr$1.TXID)}setPublished(t){Ot$1(null!=t,"Invalid timestamp"),this.put(fr$1.PUBLISHED,t);}getPublished(){return this.getDate(fr$1.PUBLISHED,null)}setRevoked(t){this.put(fr$1.REVOKED,t);}isRevoked(){return this.getBoolean(fr$1.REVOKED,!1)}clone(){try{return super.clone()}catch(t){return fr$1.log.error(t),null}}save(){if(this.attachedStore())try{this.getStore().storeCredentialMetadata(this.id,this);}catch(t){throw fr$1.log.error("INTERNAL - error store metadata for credential {}",this.id),t}}static parse(t,e=null){try{return at$1.deserialize(t,fr$1,e)}catch(t){throw t instanceof et$1?t:new et$1(t)}}}fr$1.TXID="txid",fr$1.PUBLISHED="published",fr$1.REVOKED="revoked",fr$1.log=new e("CredentialMetadata");var hr$1,dr$1,pr$1,gr$1=function(){var t=1e3,e=6e4,r=36e5,n="millisecond",i="second",o="minute",a="hour",s="day",u="week",c="month",l="quarter",f="year",h="date",d="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},m=function(t,e,r){var n=String(t);return !n||n.length>=e?t:""+Array(e+1-n.length).join(r)+t},b={s:m,z:function(t){var e=-t.utcOffset(),r=Math.abs(e),n=Math.floor(r/60),i=r%60;return (e<=0?"+":"-")+m(n,2,"0")+":"+m(i,2,"0")},m:function t(e,r){if(e.date()<r.date())return -t(r,e);var n=12*(r.year()-e.year())+(r.month()-e.month()),i=e.clone().add(n,c),o=r-i<0,a=e.clone().add(n+(o?-1:1),c);return +(-(n+(r-i)/(o?i-a:a-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return {M:c,y:f,w:u,d:s,D:h,h:a,m:o,s:i,ms:n,Q:l}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},v="en",w={};w[v]=g;var _=function(t){return t instanceof A},S=function(t,e,r){var n;if(!t)return v;if("string"==typeof t)w[t]&&(n=t),e&&(w[t]=e,n=t);else {var i=t.name;w[i]=t,n=i;}return !r&&n&&(v=n),n||!r&&v},E=function(t,e){if(_(t))return t.clone();var r="object"==typeof e?e:{};return r.date=t,r.args=arguments,new A(r)},I=b;I.l=S,I.i=_,I.w=function(t,e){return E(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var A=function(){function g(t){this.$L=S(t.locale,null,!0),this.parse(t);}var m=g.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,r=t.utc;if(null===e)return new Date(NaN);if(I.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var n=e.match(p);if(n){var i=n[2]-1||0,o=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,o)):new Date(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,o)}}return new Date(e)}(t),this.$x=t.x||{},this.init();},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds();},m.$utils=function(){return I},m.isValid=function(){return !(this.$d.toString()===d)},m.isSame=function(t,e){var r=E(t);return this.startOf(e)<=r&&r<=this.endOf(e)},m.isAfter=function(t,e){return E(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<E(t)},m.$g=function(t,e,r){return I.u(t)?this[e]:this.set(r,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var r=this,n=!!I.u(e)||e,l=I.p(t),d=function(t,e){var i=I.w(r.$u?Date.UTC(r.$y,e,t):new Date(r.$y,e,t),r);return n?i:i.endOf(s)},p=function(t,e){return I.w(r.toDate()[t].apply(r.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(e)),r)},y=this.$W,g=this.$M,m=this.$D,b="set"+(this.$u?"UTC":"");switch(l){case f:return n?d(1,0):d(31,11);case c:return n?d(1,g):d(0,g+1);case u:var v=this.$locale().weekStart||0,w=(y<v?y+7:y)-v;return d(n?m-w:m+(6-w),g);case s:case h:return p(b+"Hours",0);case a:return p(b+"Minutes",1);case o:return p(b+"Seconds",2);case i:return p(b+"Milliseconds",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var r,u=I.p(t),l="set"+(this.$u?"UTC":""),d=(r={},r[s]=l+"Date",r[h]=l+"Date",r[c]=l+"Month",r[f]=l+"FullYear",r[a]=l+"Hours",r[o]=l+"Minutes",r[i]=l+"Seconds",r[n]=l+"Milliseconds",r)[u],p=u===s?this.$D+(e-this.$W):e;if(u===c||u===f){var y=this.clone().set(h,1);y.$d[d](p),y.init(),this.$d=y.set(h,Math.min(this.$D,y.daysInMonth())).$d;}else d&&this.$d[d](p);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[I.p(t)]()},m.add=function(n,l){var h,d=this;n=Number(n);var p=I.p(l),y=function(t){var e=E(d);return I.w(e.date(e.date()+Math.round(t*n)),d)};if(p===c)return this.set(c,this.$M+n);if(p===f)return this.set(f,this.$y+n);if(p===s)return y(1);if(p===u)return y(7);var g=(h={},h[o]=e,h[a]=r,h[i]=t,h)[p]||1,m=this.$d.getTime()+n*g;return I.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this,r=this.$locale();if(!this.isValid())return r.invalidDate||d;var n=t||"YYYY-MM-DDTHH:mm:ssZ",i=I.z(this),o=this.$H,a=this.$m,s=this.$M,u=r.weekdays,c=r.months,l=function(t,r,i,o){return t&&(t[r]||t(e,n))||i[r].substr(0,o)},f=function(t){return I.s(o%12||12,t,"0")},h=r.meridiem||function(t,e,r){var n=t<12?"AM":"PM";return r?n.toLowerCase():n},p={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:I.s(s+1,2,"0"),MMM:l(r.monthsShort,s,c,3),MMMM:l(c,s),D:this.$D,DD:I.s(this.$D,2,"0"),d:String(this.$W),dd:l(r.weekdaysMin,this.$W,u,2),ddd:l(r.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(o),HH:I.s(o,2,"0"),h:f(1),hh:f(2),a:h(o,a,!0),A:h(o,a,!1),m:String(a),mm:I.s(a,2,"0"),s:String(this.$s),ss:I.s(this.$s,2,"0"),SSS:I.s(this.$ms,3,"0"),Z:i};return n.replace(y,(function(t,e){return e||p[t]||i.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(n,h,d){var p,y=I.p(h),g=E(n),m=(g.utcOffset()-this.utcOffset())*e,b=this-g,v=I.m(this,g);return v=(p={},p[f]=v/12,p[c]=v,p[l]=v/3,p[u]=(b-m)/6048e5,p[s]=(b-m)/864e5,p[a]=b/r,p[o]=b/e,p[i]=b/t,p)[y]||b,d?v:I.a(v)},m.daysInMonth=function(){return this.endOf(c).$D},m.$locale=function(){return w[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var r=this.clone(),n=S(t,e,!0);return n&&(r.$L=n),r},m.clone=function(){return I.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},g}(),k=A.prototype;return E.prototype=k,[["$ms",n],["$s",i],["$m",o],["$H",a],["$W",s],["$M",c],["$y",f],["$D",h]].forEach((function(t){k[t[1]]=function(e){return this.$g(e,t[0],t[1])};})),E.extend=function(t,e){return t.$i||(t(e,A,E),t.$i=!0),E},E.locale=S,E.isDayjs=_,E.unix=function(t){return E(1e3*t)},E.en=w[v],E.Ls=w,E.p={},E}();!function(t){t[t.EXTERNAL=0]="EXTERNAL",t[t.INTERNAL=1]="INTERNAL";}(hr$1||(hr$1={})),function(t){t[t.ELA=0]="ELA",t[t.IDCHAIN=1]="IDCHAIN";}(dr$1||(dr$1={})),function(t){t.ELA_STANDARD="ELA_STANDARD",t.ELA_MULTISIG="ELA_MULTISIG",t.ELA_CROSSCHAIN="ELA_CROSSCHAIN",t.ELA_IDCHAIN="ELA_IDCHAIN",t.ELA_DESTROY="ELA_DESTROY";}(pr$1||(pr$1={}));class mr$1{}mr$1._DEFAULT_PUBLICKEY_TYPE="secp256r1",mr$1.DEFAULT_PUBLICKEY_TYPE="ECDSAsecp256r1",mr$1.DATE_FORMAT="yyyy-MM-dd'T'HH:mm:ss'Z'",mr$1.DATE_FORMAT_ISO_8601="yyyy-MM-dd'T'HH:mm:ss.SSS'Z'",mr$1.MAX_VALID_YEARS=5;const br$1=new e("VerifiableCredential");class vr$1 extends at$1{constructor(){super();}static newWithVerifiableCredential(t,e){let r=new vr$1;return r.context=t.context,r.id=t.id,r.type=t.type,r.issuer=t.issuer,r.issuanceDate=t.issuanceDate,r.expirationDate=t.expirationDate,r.subject=t.subject,e&&(r.proof=t.proof),r}checkAttachedStore(){if(!this.getMetadata().attachedStore())throw new g$1}getId(){return this.id}getType(){return this.type}getIssuer(){return this.issuer}getIssuanceDate(){return this.issuanceDate}hasExpirationDate(){return null!=this.expirationDate}getExpirationDate(){return r(this,void 0,void 0,(function*(){if(null!=this.expirationDate)return this.expirationDate;try{let t=yield this.subject.getId().resolve();if(null!=t)return t.getExpires()}catch(t){return null}return null}))}getLastModified(){return this.proof.getCreated()}getSubject(){return this.subject}getProof(){return this.proof}getSerializeContextDid(){return this.getSubject().getId()}setMetadata(t){this.metadata=t,this.getId().setMetadata(t);}getMetadata(){return null==this.metadata&&(this.metadata=new fr$1(this.getId())),this.metadata}getStore(){return this.metadata.getStore()}isSelfProclaimed(){return this.issuer.equals(this.subject.getId())}isExpired(){return !(null==this.expirationDate||!gr$1().isAfter(gr$1(this.expirationDate)))}isGenuine(t=null){return r(this,void 0,void 0,(function*(){if(!this.getId().getDid().equals(this.getSubject().getId()))return null!=t&&(t.failed(this,"VC {}: invalid id '{}', should under the scope of '{}'",this.getId(),this.getId(),this.getSubject().getId()),t.failed(this,"VC {}: is not genuine",this.getId())),!1;let e=yield this.issuer.resolve();if(null==e)return null!=t&&(t.failed(this,"VC {}: Can not resolve the document for issuer '{}'",this.getId(),this.getIssuer()),t.failed(this,"VC {}: is not genuine",this.getId())),!1;if(!e.isGenuine(t))return null!=t&&(t.failed(this,"VC {}: issuer '{}' is not genuine",this.getId(),this.getIssuer()),t.failed(this,"VC {}: is not genuine",this.getId())),!1;if(!e.isAuthenticationKey(this.proof.getVerificationMethod()))return null!=t&&(t.failed(this,"VC {}: key '{}' for proof is not an authencation key of '{}'",this.getId(),this.proof.getVerificationMethod(),this.proof.getVerificationMethod().getDid()),t.failed(this,"VC {}: is not genuine",this.getId())),!1;if(this.proof.getType()!==mr$1.DEFAULT_PUBLICKEY_TYPE)return null!=t&&(t.failed(this,"VC {}: key type '{}' for proof is not supported",this.getId(),this.proof.getType()),t.failed(this,"VC {}: is not genuine",this.getId())),!1;let r=vr$1.newWithVerifiableCredential(this,!1).serialize(!0);if(!e.verify(this.proof.getVerificationMethod(),this.proof.getSignature(),vt$1.Buffer.from(r)))return null!=t&&(t.failed(this,"VC {}: proof is invalid, signature mismatch",this.getId()),t.failed(this,"VC {}: is not genuine",this.getId())),!1;if(!this.isSelfProclaimed()){let e=yield this.subject.getId().resolve();if(null!=e&&!e.isGenuine(t))return null!=t&&(t.failed(this,"VC {}: holder's document is not genuine",this.getId()),t.failed(this,"VC {}: is not genuine",this.getId())),!1}return null!=t&&t.succeeded(this,"VC {}: is genuine",this.getId()),!0}))}isGenuineInternal(t){if(function(t,e){if(!t)throw new Error(e)}(this.isSelfProclaimed(),"The credential should be self-proclaimed"),Ot$1(this.getSubject().getId().equals(t.getSubject()),"Invalid owner document"),!this.getId().getDid().equals(this.getSubject().getId()))return !1;if(!t.isAuthenticationKey(this.proof.getVerificationMethod()))return !1;if(this.proof.getType()!==mr$1.DEFAULT_PUBLICKEY_TYPE)return !1;let e=vr$1.newWithVerifiableCredential(this,!1).serialize(!0);return !!t.verify(this.proof.getVerificationMethod(),this.proof.getSignature(),vt$1.Buffer.from(e))}isRevoked(){return r(this,void 0,void 0,(function*(){if(this.getMetadata().isRevoked())return !0;let t=yield Mx.getInstance().resolveCredentialBiography(this.getId(),this.getIssuer());if(null==t)return !1;let e=t.getStatus().equals(gx.REVOKED);return e&&this.getMetadata().setRevoked(e),e}))}isValid(t=null){return r(this,void 0,void 0,(function*(){if(yield this.isRevoked())return null!=t&&(t.failed(this,"VC {}: is revoked",this.getId()),t.failed(this,"VC {}: is invalid",this.getId())),!1;if(this.isExpired())return null!=t&&(t.failed(this,"VC {}: is expired",this.getId()),t.failed(this,"VC {}: is invalid",this.getId())),!1;let e=yield this.issuer.resolve();if(null==e)return null!=t&&(t.failed(this,"VC {}: can not resolve the document for issuer '{}'",this.getId(),this.getIssuer()),t.failed(this,"VC {}: is invalid",this.getId())),!1;if(yield e.isDeactivated())return null!=t&&(t.failed(this,"VC {}: issuer '{}' is deactivated",this.getId(),this.getIssuer()),t.failed(this,"VC {}: is invalid",this.getId())),!1;if(!e.isGenuine())return null!=t&&(t.failed(this,"VC {}: issuer '{}' is not genuine",this.getId(),this.getIssuer()),t.failed(this,"VC {}: is invalid",this.getId())),!1;if(!e.isAuthenticationKey(this.proof.getVerificationMethod()))return null!=t&&(t.failed(this,"VC {}: key '{}' for proof is not an authencation key of '{}'",this.getId(),this.proof.getVerificationMethod(),this.proof.getVerificationMethod().getDid()),t.failed(this,"VC {}: is invalid",this.getSubject())),!1;if(this.proof.getType()!==mr$1.DEFAULT_PUBLICKEY_TYPE)return null!=t&&(t.failed(this,"VC {}: key type '{}' for proof is not supported",this.getId(),this.proof.getType()),t.failed(this,"VC {}: is invalid",this.getId())),!1;let r=vr$1.newWithVerifiableCredential(this,!1).serialize(!0);return e.verify(this.proof.getVerificationMethod(),this.proof.getSignature(),vt$1.Buffer.from(r))?(null!=t&&t.succeeded(this,"VC {}: is valid",this.getId()),!0):(null!=t&&(t.failed(this,"VC {}: proof is invalid, signature mismatch",this.getId()),t.failed(this,"VC {}: is invalid",this.getId())),!1)}))}wasDeclared(){return r(this,void 0,void 0,(function*(){let t=yield Mx.getInstance().resolveCredentialBiography(this.getId(),this.getIssuer());if(t.getStatus()==gx.NOT_FOUND)return !1;for(let e of t.getAllTransactions())if(e.getRequest().getOperation().equals(fx.Operation.DECLARE))return !0;return !1}))}declare(t,e,n=null){return r(this,void 0,void 0,(function*(){if(Ot$1(null!=e&&""!==e,"Invalid storepass"),this.checkAttachedStore(),!(yield this.isGenuine()))throw br$1.error("Publish failed because the credential is not genuine."),new C$1(this.getId().toString());if(yield this.isExpired())throw br$1.error("Publish failed because the credential is expired."),new M(this.getId().toString());if(yield this.isRevoked())throw br$1.error("Publish failed because the credential is revoked."),new N$1(this.getId().toString());if(yield this.wasDeclared())throw br$1.error("Publish failed because the credential already declared."),new j$1(this.getId().toString());let r=yield this.getStore().loadDid(this.getSubject().getId());if(null==r){if(r=yield this.getSubject().getId().resolve(),null==r)throw new P$1(this.getSubject().getId().toString());r.getMetadata().attachStore(this.getStore());}if(null==t&&null==r.getDefaultPublicKeyId())throw new I$1("Unknown sign key");if(null!=t){if(!r.isAuthenticationKey(t))throw new I$1(t.toString())}else t=r.getDefaultPublicKeyId();yield Mx.getInstance().declareCredential(this,r,t,e,n);}))}revoke(t,e=null,n=null,i=null){return r(this,void 0,void 0,(function*(){Ot$1(null!=n&&""!==n,"Invalid storepass"),this.checkAttachedStore(),null!=e&&e.getMetadata().attachedStore()&&this.getMetadata().attachStore(e.getStore());let r=yield this.getSubject().getId().resolve();if(null==r)throw br$1.error("Publish failed because the credential owner is not published."),new P$1(this.getSubject().getId().toString());r.getMetadata().attachStore(this.getStore());let o=yield this.getIssuer().resolve();if(null==o)throw br$1.error("Publish failed because the credential issuer is not published."),new P$1(this.getIssuer().toString());if(o.getMetadata().attachStore(this.getStore()),yield this.isRevoked())throw br$1.error("Publish failed because the credential is revoked."),new N$1(this.getId().toString());if("string"==typeof t&&(t=jt$1.from(t,this.getSubject().getId())),null==e){let r=null!=t&&null!=t.getDid()?t.getDid():this.getSubject().getId();if(null==(e=yield this.getStore().loadDid(r))){if(null==(e=yield this.getSubject().getId().resolve()))throw new P$1(this.getSubject().getId().toString());e.getMetadata().attachStore(this.getStore());}}if(!(e.getSubject().equals(this.getSubject().getId())||e.getSubject().equals(this.getIssuer())||r.hasController(e.getSubject())||o.hasController(e.getSubject())))throw br$1.error("Publish failed because the invalid signer or signkey."),new I$1("Not owner or issuer: "+e.getSubject());if(null==t&&null==e.getDefaultPublicKeyId())throw new I$1("Unknown sign key");if(null!=t){if(!e.isAuthenticationKey(t))throw new I$1(t.toString())}else t=e.getDefaultPublicKeyId();yield Mx.getInstance().revokeCredential(this,e,t,n,i);}))}static revoke(t,e,n,i,o=null){return r(this,void 0,void 0,(function*(){if(Ot$1(null!=t,"Invalid credential id"),Ot$1(null!=e,"Invalid issuer's document"),Ot$1(i&&null!=i,"Invalid storepass"),!e.getMetadata().attachedStore())throw new g$1(e.getSubject().toString());let r=yield Mx.getInstance().resolveCredentialBiography(t,e.getSubject());if(r.getStatus().equals(gx.REVOKED))throw br$1.error("Publish failed because the credential is revoked."),new N$1(t.toString());if(r.getStatus().equals(gx.VALID)){let t=r.getTransaction(0).getRequest().getCredential();if(!e.getSubject().equals(t.getSubject().getId())&&!e.getSubject().equals(t.getIssuer()))throw br$1.error("Publish failed because the invalid signer or signkey."),new I$1("Not owner or issuer: "+e.getSubject())}if(null==n&&null==e.getDefaultPublicKeyId())throw new I$1("Unknown sign key");if(null!=n){if(!e.isAuthenticationKey(n))throw new I$1(n.toString())}else n=e.getDefaultPublicKeyId();yield Mx.getInstance().revokeCredential(t,e,n,i,o);}))}static resolve(t,e=null,n=!1){return r(this,void 0,void 0,(function*(){if(null==t)throw new i;"string"==typeof t&&(t=jt$1.from(t)),"string"==typeof e&&(e=Nt$1.from(e));let r=yield Mx.getInstance().resolveCredential(t,e,n);return null!=r&&t.setMetadata(r.getMetadata()),r}))}static resolveBiography(t,e){return Ot$1(null!=t,"Invalid credential id"),Mx.getInstance().resolveCredentialBiography(t,e)}static list(t,e=0,r=0){return Ot$1(null!=t,"Invalid did"),Mx.getInstance().listCredentials(t,e,r)}toJSON(t=null){let e=t?new Nt$1(t):null,r={};return null!=this.context&&this.context.length>0&&(r["@context"]=Array.from(this.context)),r.id=this.id.toString(e),r.type=this.type,e&&this.issuer.equals(e)||(r.issuer=this.issuer.toString()),this.issuanceDate&&(r.issuanceDate=this.dateToString(this.issuanceDate)),this.expirationDate&&(r.expirationDate=this.dateToString(this.expirationDate)),r.credentialSubject=this.subject.toJSON(t),this.proof&&(r.proof=this.proof.toJSON(t)),r}fromJSON(t,e=null){if(!t.credentialSubject)throw new S$1("Missing property: subject");let r=t.credentialSubject,n=this.getDid("credentialSubject.id",r.id,{mandatory:!1,nullable:!1,defaultValue:e});if(!n)throw new S$1("Missing property: subject.id");if(this.context=this.getContext("@context",t["@context"],{mandatory:!1,nullable:!1,defaultValue:[]}),this.id=this.getDidUrl("id",t.id,{mandatory:!0,nullable:!1,context:n}),this.type=this.getStrings("type",t.type,{mandatory:!0,nullable:!1}),this.issuer=this.getDid("issuer",t.issuer,{mandatory:!1,nullable:!1,defaultValue:n}),this.issuanceDate=this.getDate("issuanceDate",t.issuanceDate,{mandatory:!0,nullable:!1}),this.expirationDate=this.getDate("expirationDate",t.expirationDate,{mandatory:!0,nullable:!0}),this.subject=vr$1.Subject.deserialize(r,vr$1.Subject,n),!t.proof)throw new S$1("Missing property: proof");let i=t.proof;this.proof=vr$1.Proof.deserialize(i,vr$1.Proof,this.issuer);}static parse(t,e=null){try{return at$1.deserialize(t,vr$1,e)}catch(t){throw t instanceof S$1?t:new S$1(t)}}}vr$1.W3C_CREDENTIAL_CONTEXT="https://www.w3.org/2018/credentials/v1",vr$1.ELASTOS_CREDENTIAL_CONTEXT="https://ns.elastos.org/credentials/v1",vr$1.DEFAULT_CREDENTIAL_TYPE="VerifiableCredential",function(t){t.Subject=class extends at$1{constructor(t=null,e={}){super(),this.id=t,this.properties=ut$1(JSON.parse(JSON.stringify(e)));}getId(){return this.id}getProperties(){return JSON.parse(JSON.stringify(this.properties))}getPropertyCount(){return Object.keys(this.properties).length}getProperty(t){return this.properties[t]}getPropertiesAsString(){return JSON.stringify(this.properties)}toJSON(t=null){t&&new Nt$1(t);let e={};return e.id=this.id.toString(),e=Object.assign(Object.assign({},e),this.properties),e}fromJSON(t,e=null){this.id=this.getDid("subject.id",t.id,{mandatory:!1,defaultValue:e});let r=JSON.parse(JSON.stringify(t));delete r.id,this.properties=ut$1(r);}};t.Proof=class extends at$1{constructor(t=null,e=null,r=new Date,n=mr$1.DEFAULT_PUBLICKEY_TYPE){super(),this.type=null!=n?n:mr$1.DEFAULT_PUBLICKEY_TYPE,this.created=null==r?null:new Date(r.getTime()/1e3*1e3),this.created&&this.created.setMilliseconds(0),this.verificationMethod=t,this.signature=e;}getType(){return this.type}getVerificationMethod(){return this.verificationMethod}getCreated(){return this.created}getSignature(){return this.signature}toJSON(t=null){let e={};return (t?new Nt$1(t):null)&&this.type===mr$1.DEFAULT_PUBLICKEY_TYPE||(e.type=this.type),this.created&&(e.created=this.dateToString(this.created)),e.verificationMethod=this.verificationMethod.toJSON(t),e.signature=this.signature,e}fromJSON(t,e=null){this.type=this.getString("proof.type",t.type,{mandatory:!1,defaultValue:mr$1.DEFAULT_PUBLICKEY_TYPE}),this.created=this.getDate("proof.created",t.created,{mandatory:!1}),this.verificationMethod=this.getDidUrl("proof.verificationMethod",t.verificationMethod,{mandatory:!0,nullable:!1,context:e}),this.signature=this.getString("proof.signature",t.signature,{mandatory:!0,nullable:!1});}};t.Builder=class{constructor(e,r){this.issuer=e,this.target=r,this.credential=new t,this.credential.issuer=e.getDid(),this.setDefaultType();}checkNotSealed(){if(null==this.credential)throw new R$1}id(t){return this.checkNotSealed(),Ot$1(null!=t,"Invalid id"),"string"==typeof t&&(t=jt$1.from(t,this.target)),Ot$1(null==t.getDid()||t.getDid().equals(this.target),"Invalid id"),null==t.getDid()&&(t=jt$1.from(t,this.target)),this.credential.id=t,this}setDefaultType(){this.checkNotSealed(),Bt$1.isEnabledJsonLdContext()&&(null==this.credential.context&&(this.credential.context=[]),this.credential.context.includes(t.W3C_CREDENTIAL_CONTEXT)||this.credential.context.push(t.W3C_CREDENTIAL_CONTEXT),this.credential.context.includes(t.ELASTOS_CREDENTIAL_CONTEXT)||this.credential.context.push(t.ELASTOS_CREDENTIAL_CONTEXT)),null==this.credential.type&&(this.credential.type=[]),this.credential.type.includes(t.DEFAULT_CREDENTIAL_TYPE)||this.credential.type.push(t.DEFAULT_CREDENTIAL_TYPE);}typeWithContext(t,e){return this.checkNotSealed(),Rt$1(t,"Invalid type: "+t),Bt$1.isEnabledJsonLdContext()?(Rt$1(e,"Invalid context: "+e),null==this.credential.context&&(this.credential.context=[]),this.credential.context.includes(e)||this.credential.context.push(e)):br$1.warn("JSON-LD context support not enabled"),null==this.credential.type&&(this.credential.type=[]),this.credential.type.includes(t)||this.credential.type.push(t),this}type(t){if(this.checkNotSealed(),Rt$1(t,"Invalid type: "+t),t.indexOf("#")<0)return this.typeWithContext(t,null);{let e=t.split("#",2);return this.typeWithContext(e[1],e[0])}}types(...t){if(null==t||0==t.length)return this;this.checkNotSealed();for(let e of t)this.type(e);return this}getMaxExpires(){let t;return t=null!=this.credential.getIssuanceDate()?gr$1(this.credential.getIssuanceDate()):gr$1(),t=t.add(mr$1.MAX_VALID_YEARS,"years"),t.toDate()}defaultExpirationDate(){return this.checkNotSealed(),this.credential.expirationDate=this.getMaxExpires(),this.credential.expirationDate&&this.credential.expirationDate.setMilliseconds(0),this}expirationDate(t){this.checkNotSealed(),Ot$1(null!=t,"Invalid expiration date");let e=gr$1(t),r=this.getMaxExpires();return e.isAfter(r)&&(e=gr$1(r)),this.credential.expirationDate=e.toDate(),this.credential.expirationDate&&this.credential.expirationDate.setMilliseconds(0),this}properties(t){this.checkNotSealed();let e="string"==typeof t?JSON.parse(t):JSON.parse(JSON.stringify(t));return delete e.id,null==t||0==Object.keys(t).length?(this.subjectProperties={},this):(this.subjectProperties=e,this)}property(t,e){return this.checkNotSealed(),Ot$1(null!=t&&""!==t&&"id"!==t,"Invalid name"),this.subjectProperties||(this.subjectProperties={}),this.subjectProperties[t]=e,this}sanitize(){if(null!=this.credential.context&&0!=this.credential.context.length||(this.credential.context=[]),null==this.credential.id)throw new S$1("Missing credential id");if(null==this.credential.type||0==this.credential.type.length)throw new S$1("Missing credential type");rS.sort(this.credential.type),this.credential.issuanceDate=new Date,this.credential.issuanceDate&&this.credential.issuanceDate.setMilliseconds(0),this.credential.hasExpirationDate()||this.defaultExpirationDate(),this.subjectProperties=ut$1(this.subjectProperties),this.credential.proof=null;}seal(e){return r(this,void 0,void 0,(function*(){this.checkNotSealed(),Ot$1(null!=e&&""!==e,"Invalid storepass"),this.sanitize(),this.credential.subject=new t.Subject(this.target,this.subjectProperties);let r=this.credential.serialize(!0),n=yield this.issuer.sign(e,vt$1.Buffer.from(r));this.credential.proof=new t.Proof(this.issuer.getSignKey(),n);let i=this.credential;return this.credential=null,i}))}};}(vr$1||(vr$1={}));var wr$1={},_r$1={},Sr$1={},Er$1={},Ir$1={},Ar$1={},kr$1={exports:{}},Dr$1=mt$1(Object.freeze({__proto__:null,default:{}}));!function(t,e){function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function n(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t;}function i(t,e,r){if(i.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"));}var o;"object"==typeof t?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;try{o="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:Dr$1.Buffer;}catch(t){}function a(t,e){var n=t.charCodeAt(e);return n>=48&&n<=57?n-48:n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:void r(!1,"Invalid character in "+t)}function s(t,e,r){var n=a(t,r);return r-1>=e&&(n|=a(t,r-1)<<4),n}function u(t,e,n,i){for(var o=0,a=0,s=Math.min(t.length,n),u=e;u<s;u++){var c=t.charCodeAt(u)-48;o*=i,a=c>=49?c-49+10:c>=17?c-17+10:c,r(c>=0&&a<i,"Invalid character"),o+=a;}return o}function c(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red;}if(i.isBN=function(t){return t instanceof i||null!==t&&"object"==typeof t&&t.constructor.wordSize===i.wordSize&&Array.isArray(t.words)},i.max=function(t,e){return t.cmp(e)>0?t:e},i.min=function(t,e){return t.cmp(e)<0?t:e},i.prototype._init=function(t,e,n){if("number"==typeof t)return this._initNumber(t,e,n);if("object"==typeof t)return this._initArray(t,e,n);"hex"===e&&(e=16),r(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,n):(this._parseBase(t,e,i),"le"===n&&this._initArray(this.toArray(),e,n)));},i.prototype._initNumber=function(t,e,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),e,n);},i.prototype._initArray=function(t,e,n){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,a,s=0;if("be"===n)for(i=t.length-1,o=0;i>=0;i-=3)a=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===n)for(i=0,o=0;i<t.length;i+=3)a=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this._strip()},i.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,a=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=s(t,e,n)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;else for(n=(t.length-e)%2==0?e+1:e;n<t.length;n+=2)i=s(t,e,n)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;this._strip();},i.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,a=o%n,s=Math.min(o,o-a)+r,c=0,l=r;l<s;l+=n)c=u(t,l,l+n,e),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==a){var f=1;for(c=u(t,l,t.length,e),l=0;l<a;l++)f*=e;this.imuln(f),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);}this._strip();},i.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red;},i.prototype._move=function(t){c(t,this);},i.prototype.clone=function(){var t=new i(null);return this.copy(t),t},i.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=l;}catch(t){i.prototype.inspect=l;}else i.prototype.inspect=l;function l(){return (this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function p(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],a=i*o,s=67108863&a,u=a/67108864|0;r.words[0]=s;for(var c=1;c<n;c++){for(var l=u>>>26,f=67108863&u,h=Math.min(c,e.length-1),d=Math.max(0,c-t.length+1);d<=h;d++){var p=c-d|0;l+=(a=(i=0|t.words[p])*(o=0|e.words[d])+f)/67108864|0,f=67108863&a;}r.words[c]=0|f,u=0|l;}return 0!==u?r.words[c]=0|u:r.length--,r._strip()}i.prototype.toString=function(t,e){var n;if(e=0|e||1,16===(t=t||10)||"hex"===t){n="";for(var i=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<i|o)).toString(16);n=0!=(o=s>>>24-i&16777215)||a!==this.length-1?f[6-u.length]+u+n:u+n,(i+=2)>=26&&(i-=26,a--);}for(0!==o&&(n=o.toString(16)+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(t===(0|t)&&t>=2&&t<=36){var c=h[t],l=d[t];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var y=p.modrn(l).toString(t);n=(p=p.idivn(l)).isZero()?y+n:f[c-y.length]+y+n;}for(this.isZero()&&(n="0"+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36");},i.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(t,e){return this.toArrayLike(o,t,e)}),i.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},i.prototype.toArrayLike=function(t,e,n){this._strip();var i=this.byteLength(),o=n||Math.max(1,i);r(i<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0");var a=function(t,e){return t.allocUnsafe?t.allocUnsafe(e):new t(e)}(t,o);return this["_toArrayLike"+("le"===e?"LE":"BE")](a,i),a},i.prototype._toArrayLikeLE=function(t,e){for(var r=0,n=0,i=0,o=0;i<this.length;i++){var a=this.words[i]<<o|n;t[r++]=255&a,r<t.length&&(t[r++]=a>>8&255),r<t.length&&(t[r++]=a>>16&255),6===o?(r<t.length&&(t[r++]=a>>24&255),n=0,o=0):(n=a>>>24,o+=2);}if(r<t.length)for(t[r++]=n;r<t.length;)t[r++]=0;},i.prototype._toArrayLikeBE=function(t,e){for(var r=t.length-1,n=0,i=0,o=0;i<this.length;i++){var a=this.words[i]<<o|n;t[r--]=255&a,r>=0&&(t[r--]=a>>8&255),r>=0&&(t[r--]=a>>16&255),6===o?(r>=0&&(t[r--]=a>>24&255),n=0,o=0):(n=a>>>24,o+=2);}if(r>=0)for(t[r--]=n;r>=0;)t[r--]=0;},Math.clz32?i.prototype._countBits=function(t){return 32-Math.clz32(t)}:i.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},i.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0==(8191&e)&&(r+=13,e>>>=13),0==(127&e)&&(r+=7,e>>>=7),0==(15&e)&&(r+=4,e>>>=4),0==(3&e)&&(r+=2,e>>>=2),0==(1&e)&&r++,r},i.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},i.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this._strip()},i.prototype.ior=function(t){return r(0==(this.negative|t.negative)),this.iuor(t)},i.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},i.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},i.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this._strip()},i.prototype.iand=function(t){return r(0==(this.negative|t.negative)),this.iuand(t)},i.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},i.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},i.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this._strip()},i.prototype.ixor=function(t){return r(0==(this.negative|t.negative)),this.iuxor(t)},i.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},i.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},i.prototype.inotn=function(t){r("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),n=t%26;this._expand(e),n>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this._strip()},i.prototype.notn=function(t){return this.clone().inotn(t)},i.prototype.setn=function(t,e){r("number"==typeof t&&t>=0);var n=t/26|0,i=t%26;return this._expand(n+1),this.words[n]=e?this.words[n]|1<<i:this.words[n]&~(1<<i),this._strip()},i.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},i.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},i.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var o=0,a=0;a<n.length;a++)o=(e=(0|r.words[a])-(0|n.words[a])+o)>>26,this.words[a]=67108863&e;for(;0!==o&&a<r.length;a++)o=(e=(0|r.words[a])+o)>>26,this.words[a]=67108863&e;if(0===o&&a<r.length&&r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this.length=Math.max(this.length,a),r!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(t){return this.clone().isub(t)};var y=function(t,e,r){var n,i,o,a=t.words,s=e.words,u=r.words,c=0,l=0|a[0],f=8191&l,h=l>>>13,d=0|a[1],p=8191&d,y=d>>>13,g=0|a[2],m=8191&g,b=g>>>13,v=0|a[3],w=8191&v,_=v>>>13,S=0|a[4],E=8191&S,I=S>>>13,A=0|a[5],k=8191&A,D=A>>>13,x=0|a[6],T=8191&x,P=x>>>13,O=0|a[7],R=8191&O,C=O>>>13,M=0|a[8],N=8191&M,j=M>>>13,B=0|a[9],L=8191&B,F=B>>>13,U=0|s[0],z=8191&U,K=U>>>13,q=0|s[1],H=8191&q,V=q>>>13,W=0|s[2],J=8191&W,Y=W>>>13,Z=0|s[3],G=8191&Z,X=Z>>>13,$=0|s[4],Q=8191&$,tt=$>>>13,et=0|s[5],rt=8191&et,nt=et>>>13,it=0|s[6],ot=8191&it,at=it>>>13,st=0|s[7],ut=8191&st,ct=st>>>13,lt=0|s[8],ft=8191&lt,ht=lt>>>13,dt=0|s[9],pt=8191&dt,yt=dt>>>13;r.negative=t.negative^e.negative,r.length=19;var gt=(c+(n=Math.imul(f,z))|0)+((8191&(i=(i=Math.imul(f,K))+Math.imul(h,z)|0))<<13)|0;c=((o=Math.imul(h,K))+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,n=Math.imul(p,z),i=(i=Math.imul(p,K))+Math.imul(y,z)|0,o=Math.imul(y,K);var mt=(c+(n=n+Math.imul(f,H)|0)|0)+((8191&(i=(i=i+Math.imul(f,V)|0)+Math.imul(h,H)|0))<<13)|0;c=((o=o+Math.imul(h,V)|0)+(i>>>13)|0)+(mt>>>26)|0,mt&=67108863,n=Math.imul(m,z),i=(i=Math.imul(m,K))+Math.imul(b,z)|0,o=Math.imul(b,K),n=n+Math.imul(p,H)|0,i=(i=i+Math.imul(p,V)|0)+Math.imul(y,H)|0,o=o+Math.imul(y,V)|0;var bt=(c+(n=n+Math.imul(f,J)|0)|0)+((8191&(i=(i=i+Math.imul(f,Y)|0)+Math.imul(h,J)|0))<<13)|0;c=((o=o+Math.imul(h,Y)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(w,z),i=(i=Math.imul(w,K))+Math.imul(_,z)|0,o=Math.imul(_,K),n=n+Math.imul(m,H)|0,i=(i=i+Math.imul(m,V)|0)+Math.imul(b,H)|0,o=o+Math.imul(b,V)|0,n=n+Math.imul(p,J)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(y,J)|0,o=o+Math.imul(y,Y)|0;var vt=(c+(n=n+Math.imul(f,G)|0)|0)+((8191&(i=(i=i+Math.imul(f,X)|0)+Math.imul(h,G)|0))<<13)|0;c=((o=o+Math.imul(h,X)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(E,z),i=(i=Math.imul(E,K))+Math.imul(I,z)|0,o=Math.imul(I,K),n=n+Math.imul(w,H)|0,i=(i=i+Math.imul(w,V)|0)+Math.imul(_,H)|0,o=o+Math.imul(_,V)|0,n=n+Math.imul(m,J)|0,i=(i=i+Math.imul(m,Y)|0)+Math.imul(b,J)|0,o=o+Math.imul(b,Y)|0,n=n+Math.imul(p,G)|0,i=(i=i+Math.imul(p,X)|0)+Math.imul(y,G)|0,o=o+Math.imul(y,X)|0;var wt=(c+(n=n+Math.imul(f,Q)|0)|0)+((8191&(i=(i=i+Math.imul(f,tt)|0)+Math.imul(h,Q)|0))<<13)|0;c=((o=o+Math.imul(h,tt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(k,z),i=(i=Math.imul(k,K))+Math.imul(D,z)|0,o=Math.imul(D,K),n=n+Math.imul(E,H)|0,i=(i=i+Math.imul(E,V)|0)+Math.imul(I,H)|0,o=o+Math.imul(I,V)|0,n=n+Math.imul(w,J)|0,i=(i=i+Math.imul(w,Y)|0)+Math.imul(_,J)|0,o=o+Math.imul(_,Y)|0,n=n+Math.imul(m,G)|0,i=(i=i+Math.imul(m,X)|0)+Math.imul(b,G)|0,o=o+Math.imul(b,X)|0,n=n+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,tt)|0)+Math.imul(y,Q)|0,o=o+Math.imul(y,tt)|0;var _t=(c+(n=n+Math.imul(f,rt)|0)|0)+((8191&(i=(i=i+Math.imul(f,nt)|0)+Math.imul(h,rt)|0))<<13)|0;c=((o=o+Math.imul(h,nt)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(T,z),i=(i=Math.imul(T,K))+Math.imul(P,z)|0,o=Math.imul(P,K),n=n+Math.imul(k,H)|0,i=(i=i+Math.imul(k,V)|0)+Math.imul(D,H)|0,o=o+Math.imul(D,V)|0,n=n+Math.imul(E,J)|0,i=(i=i+Math.imul(E,Y)|0)+Math.imul(I,J)|0,o=o+Math.imul(I,Y)|0,n=n+Math.imul(w,G)|0,i=(i=i+Math.imul(w,X)|0)+Math.imul(_,G)|0,o=o+Math.imul(_,X)|0,n=n+Math.imul(m,Q)|0,i=(i=i+Math.imul(m,tt)|0)+Math.imul(b,Q)|0,o=o+Math.imul(b,tt)|0,n=n+Math.imul(p,rt)|0,i=(i=i+Math.imul(p,nt)|0)+Math.imul(y,rt)|0,o=o+Math.imul(y,nt)|0;var St=(c+(n=n+Math.imul(f,ot)|0)|0)+((8191&(i=(i=i+Math.imul(f,at)|0)+Math.imul(h,ot)|0))<<13)|0;c=((o=o+Math.imul(h,at)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(R,z),i=(i=Math.imul(R,K))+Math.imul(C,z)|0,o=Math.imul(C,K),n=n+Math.imul(T,H)|0,i=(i=i+Math.imul(T,V)|0)+Math.imul(P,H)|0,o=o+Math.imul(P,V)|0,n=n+Math.imul(k,J)|0,i=(i=i+Math.imul(k,Y)|0)+Math.imul(D,J)|0,o=o+Math.imul(D,Y)|0,n=n+Math.imul(E,G)|0,i=(i=i+Math.imul(E,X)|0)+Math.imul(I,G)|0,o=o+Math.imul(I,X)|0,n=n+Math.imul(w,Q)|0,i=(i=i+Math.imul(w,tt)|0)+Math.imul(_,Q)|0,o=o+Math.imul(_,tt)|0,n=n+Math.imul(m,rt)|0,i=(i=i+Math.imul(m,nt)|0)+Math.imul(b,rt)|0,o=o+Math.imul(b,nt)|0,n=n+Math.imul(p,ot)|0,i=(i=i+Math.imul(p,at)|0)+Math.imul(y,ot)|0,o=o+Math.imul(y,at)|0;var Et=(c+(n=n+Math.imul(f,ut)|0)|0)+((8191&(i=(i=i+Math.imul(f,ct)|0)+Math.imul(h,ut)|0))<<13)|0;c=((o=o+Math.imul(h,ct)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(N,z),i=(i=Math.imul(N,K))+Math.imul(j,z)|0,o=Math.imul(j,K),n=n+Math.imul(R,H)|0,i=(i=i+Math.imul(R,V)|0)+Math.imul(C,H)|0,o=o+Math.imul(C,V)|0,n=n+Math.imul(T,J)|0,i=(i=i+Math.imul(T,Y)|0)+Math.imul(P,J)|0,o=o+Math.imul(P,Y)|0,n=n+Math.imul(k,G)|0,i=(i=i+Math.imul(k,X)|0)+Math.imul(D,G)|0,o=o+Math.imul(D,X)|0,n=n+Math.imul(E,Q)|0,i=(i=i+Math.imul(E,tt)|0)+Math.imul(I,Q)|0,o=o+Math.imul(I,tt)|0,n=n+Math.imul(w,rt)|0,i=(i=i+Math.imul(w,nt)|0)+Math.imul(_,rt)|0,o=o+Math.imul(_,nt)|0,n=n+Math.imul(m,ot)|0,i=(i=i+Math.imul(m,at)|0)+Math.imul(b,ot)|0,o=o+Math.imul(b,at)|0,n=n+Math.imul(p,ut)|0,i=(i=i+Math.imul(p,ct)|0)+Math.imul(y,ut)|0,o=o+Math.imul(y,ct)|0;var It=(c+(n=n+Math.imul(f,ft)|0)|0)+((8191&(i=(i=i+Math.imul(f,ht)|0)+Math.imul(h,ft)|0))<<13)|0;c=((o=o+Math.imul(h,ht)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(L,z),i=(i=Math.imul(L,K))+Math.imul(F,z)|0,o=Math.imul(F,K),n=n+Math.imul(N,H)|0,i=(i=i+Math.imul(N,V)|0)+Math.imul(j,H)|0,o=o+Math.imul(j,V)|0,n=n+Math.imul(R,J)|0,i=(i=i+Math.imul(R,Y)|0)+Math.imul(C,J)|0,o=o+Math.imul(C,Y)|0,n=n+Math.imul(T,G)|0,i=(i=i+Math.imul(T,X)|0)+Math.imul(P,G)|0,o=o+Math.imul(P,X)|0,n=n+Math.imul(k,Q)|0,i=(i=i+Math.imul(k,tt)|0)+Math.imul(D,Q)|0,o=o+Math.imul(D,tt)|0,n=n+Math.imul(E,rt)|0,i=(i=i+Math.imul(E,nt)|0)+Math.imul(I,rt)|0,o=o+Math.imul(I,nt)|0,n=n+Math.imul(w,ot)|0,i=(i=i+Math.imul(w,at)|0)+Math.imul(_,ot)|0,o=o+Math.imul(_,at)|0,n=n+Math.imul(m,ut)|0,i=(i=i+Math.imul(m,ct)|0)+Math.imul(b,ut)|0,o=o+Math.imul(b,ct)|0,n=n+Math.imul(p,ft)|0,i=(i=i+Math.imul(p,ht)|0)+Math.imul(y,ft)|0,o=o+Math.imul(y,ht)|0;var At=(c+(n=n+Math.imul(f,pt)|0)|0)+((8191&(i=(i=i+Math.imul(f,yt)|0)+Math.imul(h,pt)|0))<<13)|0;c=((o=o+Math.imul(h,yt)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(L,H),i=(i=Math.imul(L,V))+Math.imul(F,H)|0,o=Math.imul(F,V),n=n+Math.imul(N,J)|0,i=(i=i+Math.imul(N,Y)|0)+Math.imul(j,J)|0,o=o+Math.imul(j,Y)|0,n=n+Math.imul(R,G)|0,i=(i=i+Math.imul(R,X)|0)+Math.imul(C,G)|0,o=o+Math.imul(C,X)|0,n=n+Math.imul(T,Q)|0,i=(i=i+Math.imul(T,tt)|0)+Math.imul(P,Q)|0,o=o+Math.imul(P,tt)|0,n=n+Math.imul(k,rt)|0,i=(i=i+Math.imul(k,nt)|0)+Math.imul(D,rt)|0,o=o+Math.imul(D,nt)|0,n=n+Math.imul(E,ot)|0,i=(i=i+Math.imul(E,at)|0)+Math.imul(I,ot)|0,o=o+Math.imul(I,at)|0,n=n+Math.imul(w,ut)|0,i=(i=i+Math.imul(w,ct)|0)+Math.imul(_,ut)|0,o=o+Math.imul(_,ct)|0,n=n+Math.imul(m,ft)|0,i=(i=i+Math.imul(m,ht)|0)+Math.imul(b,ft)|0,o=o+Math.imul(b,ht)|0;var kt=(c+(n=n+Math.imul(p,pt)|0)|0)+((8191&(i=(i=i+Math.imul(p,yt)|0)+Math.imul(y,pt)|0))<<13)|0;c=((o=o+Math.imul(y,yt)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(L,J),i=(i=Math.imul(L,Y))+Math.imul(F,J)|0,o=Math.imul(F,Y),n=n+Math.imul(N,G)|0,i=(i=i+Math.imul(N,X)|0)+Math.imul(j,G)|0,o=o+Math.imul(j,X)|0,n=n+Math.imul(R,Q)|0,i=(i=i+Math.imul(R,tt)|0)+Math.imul(C,Q)|0,o=o+Math.imul(C,tt)|0,n=n+Math.imul(T,rt)|0,i=(i=i+Math.imul(T,nt)|0)+Math.imul(P,rt)|0,o=o+Math.imul(P,nt)|0,n=n+Math.imul(k,ot)|0,i=(i=i+Math.imul(k,at)|0)+Math.imul(D,ot)|0,o=o+Math.imul(D,at)|0,n=n+Math.imul(E,ut)|0,i=(i=i+Math.imul(E,ct)|0)+Math.imul(I,ut)|0,o=o+Math.imul(I,ct)|0,n=n+Math.imul(w,ft)|0,i=(i=i+Math.imul(w,ht)|0)+Math.imul(_,ft)|0,o=o+Math.imul(_,ht)|0;var Dt=(c+(n=n+Math.imul(m,pt)|0)|0)+((8191&(i=(i=i+Math.imul(m,yt)|0)+Math.imul(b,pt)|0))<<13)|0;c=((o=o+Math.imul(b,yt)|0)+(i>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,n=Math.imul(L,G),i=(i=Math.imul(L,X))+Math.imul(F,G)|0,o=Math.imul(F,X),n=n+Math.imul(N,Q)|0,i=(i=i+Math.imul(N,tt)|0)+Math.imul(j,Q)|0,o=o+Math.imul(j,tt)|0,n=n+Math.imul(R,rt)|0,i=(i=i+Math.imul(R,nt)|0)+Math.imul(C,rt)|0,o=o+Math.imul(C,nt)|0,n=n+Math.imul(T,ot)|0,i=(i=i+Math.imul(T,at)|0)+Math.imul(P,ot)|0,o=o+Math.imul(P,at)|0,n=n+Math.imul(k,ut)|0,i=(i=i+Math.imul(k,ct)|0)+Math.imul(D,ut)|0,o=o+Math.imul(D,ct)|0,n=n+Math.imul(E,ft)|0,i=(i=i+Math.imul(E,ht)|0)+Math.imul(I,ft)|0,o=o+Math.imul(I,ht)|0;var xt=(c+(n=n+Math.imul(w,pt)|0)|0)+((8191&(i=(i=i+Math.imul(w,yt)|0)+Math.imul(_,pt)|0))<<13)|0;c=((o=o+Math.imul(_,yt)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(L,Q),i=(i=Math.imul(L,tt))+Math.imul(F,Q)|0,o=Math.imul(F,tt),n=n+Math.imul(N,rt)|0,i=(i=i+Math.imul(N,nt)|0)+Math.imul(j,rt)|0,o=o+Math.imul(j,nt)|0,n=n+Math.imul(R,ot)|0,i=(i=i+Math.imul(R,at)|0)+Math.imul(C,ot)|0,o=o+Math.imul(C,at)|0,n=n+Math.imul(T,ut)|0,i=(i=i+Math.imul(T,ct)|0)+Math.imul(P,ut)|0,o=o+Math.imul(P,ct)|0,n=n+Math.imul(k,ft)|0,i=(i=i+Math.imul(k,ht)|0)+Math.imul(D,ft)|0,o=o+Math.imul(D,ht)|0;var Tt=(c+(n=n+Math.imul(E,pt)|0)|0)+((8191&(i=(i=i+Math.imul(E,yt)|0)+Math.imul(I,pt)|0))<<13)|0;c=((o=o+Math.imul(I,yt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(L,rt),i=(i=Math.imul(L,nt))+Math.imul(F,rt)|0,o=Math.imul(F,nt),n=n+Math.imul(N,ot)|0,i=(i=i+Math.imul(N,at)|0)+Math.imul(j,ot)|0,o=o+Math.imul(j,at)|0,n=n+Math.imul(R,ut)|0,i=(i=i+Math.imul(R,ct)|0)+Math.imul(C,ut)|0,o=o+Math.imul(C,ct)|0,n=n+Math.imul(T,ft)|0,i=(i=i+Math.imul(T,ht)|0)+Math.imul(P,ft)|0,o=o+Math.imul(P,ht)|0;var Pt=(c+(n=n+Math.imul(k,pt)|0)|0)+((8191&(i=(i=i+Math.imul(k,yt)|0)+Math.imul(D,pt)|0))<<13)|0;c=((o=o+Math.imul(D,yt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,n=Math.imul(L,ot),i=(i=Math.imul(L,at))+Math.imul(F,ot)|0,o=Math.imul(F,at),n=n+Math.imul(N,ut)|0,i=(i=i+Math.imul(N,ct)|0)+Math.imul(j,ut)|0,o=o+Math.imul(j,ct)|0,n=n+Math.imul(R,ft)|0,i=(i=i+Math.imul(R,ht)|0)+Math.imul(C,ft)|0,o=o+Math.imul(C,ht)|0;var Ot=(c+(n=n+Math.imul(T,pt)|0)|0)+((8191&(i=(i=i+Math.imul(T,yt)|0)+Math.imul(P,pt)|0))<<13)|0;c=((o=o+Math.imul(P,yt)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(L,ut),i=(i=Math.imul(L,ct))+Math.imul(F,ut)|0,o=Math.imul(F,ct),n=n+Math.imul(N,ft)|0,i=(i=i+Math.imul(N,ht)|0)+Math.imul(j,ft)|0,o=o+Math.imul(j,ht)|0;var Rt=(c+(n=n+Math.imul(R,pt)|0)|0)+((8191&(i=(i=i+Math.imul(R,yt)|0)+Math.imul(C,pt)|0))<<13)|0;c=((o=o+Math.imul(C,yt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(L,ft),i=(i=Math.imul(L,ht))+Math.imul(F,ft)|0,o=Math.imul(F,ht);var Ct=(c+(n=n+Math.imul(N,pt)|0)|0)+((8191&(i=(i=i+Math.imul(N,yt)|0)+Math.imul(j,pt)|0))<<13)|0;c=((o=o+Math.imul(j,yt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863;var Mt=(c+(n=Math.imul(L,pt))|0)+((8191&(i=(i=Math.imul(L,yt))+Math.imul(F,pt)|0))<<13)|0;return c=((o=Math.imul(F,yt))+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,u[0]=gt,u[1]=mt,u[2]=bt,u[3]=vt,u[4]=wt,u[5]=_t,u[6]=St,u[7]=Et,u[8]=It,u[9]=At,u[10]=kt,u[11]=Dt,u[12]=xt,u[13]=Tt,u[14]=Pt,u[15]=Ot,u[16]=Rt,u[17]=Ct,u[18]=Mt,0!==c&&(u[19]=c,r.length++),r};function g(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var a=i;i=0;for(var s=67108863&n,u=Math.min(o,e.length-1),c=Math.max(0,o-t.length+1);c<=u;c++){var l=o-c,f=(0|t.words[l])*(0|e.words[c]),h=67108863&f;s=67108863&(h=h+s|0),i+=(a=(a=a+(f/67108864|0)|0)+(h>>>26)|0)>>>26,a&=67108863;}r.words[o]=s,n=a,a=i;}return 0!==n?r.words[o]=n:r.length--,r._strip()}function m(t,e,r){return g(t,e,r)}Math.imul||(y=p),i.prototype.mulTo=function(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?y(this,t,e):r<63?p(this,t,e):r<1024?g(this,t,e):m(this,t,e)},i.prototype.mul=function(t){var e=new i(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},i.prototype.mulf=function(t){var e=new i(null);return e.words=new Array(this.length+t.length),m(this,t,e)},i.prototype.imul=function(t){return this.clone().mulTo(t,this)},i.prototype.imuln=function(t){var e=t<0;e&&(t=-t),r("number"==typeof t),r(t<67108864);for(var n=0,i=0;i<this.length;i++){var o=(0|this.words[i])*t,a=(67108863&o)+(67108863&n);n>>=26,n+=o/67108864|0,n+=a>>>26,this.words[i]=67108863&a;}return 0!==n&&(this.words[i]=n,this.length++),e?this.ineg():this},i.prototype.muln=function(t){return this.clone().imuln(t)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=t.words[n]>>>i&1;}return e}(t);if(0===e.length)return new i(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var o=r.sqr();n<e.length;n++,o=o.sqr())0!==e[n]&&(r=r.mul(o));return r},i.prototype.iushln=function(t){r("number"==typeof t&&t>=0);var e,n=t%26,i=(t-n)/26,o=67108863>>>26-n<<26-n;if(0!==n){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&o,u=(0|this.words[e])-s<<n;this.words[e]=u|a,a=s>>>26-n;}a&&(this.words[e]=a,this.length++);}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i;}return this._strip()},i.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},i.prototype.iushrn=function(t,e,n){var i;r("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,a=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,u=n;if(i-=a,i=Math.max(0,i),u){for(var c=0;c<a;c++)u.words[c]=this.words[c];u.length=a;}if(0===a);else if(this.length>a)for(this.length-=a,c=0;c<this.length;c++)this.words[c]=this.words[c+a];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;c>=0&&(0!==l||c>=i);c--){var f=0|this.words[c];this.words[c]=l<<26-o|f>>>o,l=f&s;}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(t,e,n){return r(0===this.negative),this.iushrn(t,e,n)},i.prototype.shln=function(t){return this.clone().ishln(t)},i.prototype.ushln=function(t){return this.clone().iushln(t)},i.prototype.shrn=function(t){return this.clone().ishrn(t)},i.prototype.ushrn=function(t){return this.clone().iushrn(t)},i.prototype.testn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26,i=1<<e;return !(this.length<=n||!(this.words[n]&i))},i.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==e&&n++,this.length=Math.min(n,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i;}return this._strip()},i.prototype.maskn=function(t){return this.clone().imaskn(t)},i.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},i.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},i.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this._strip()},i.prototype.addn=function(t){return this.clone().iaddn(t)},i.prototype.subn=function(t){return this.clone().isubn(t)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(t,e,n){var i,o,a=t.length+n;this._expand(a);var s=0;for(i=0;i<t.length;i++){o=(0|this.words[i+n])+s;var u=(0|t.words[i])*e;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+n]=67108863&o;}for(;i<this.length-n;i++)s=(o=(0|this.words[i+n])+s)>>26,this.words[i+n]=67108863&o;if(0===s)return this._strip();for(r(-1===s),s=0,i=0;i<this.length;i++)s=(o=-(0|this.words[i])+s)>>26,this.words[i]=67108863&o;return this.negative=1,this._strip()},i.prototype._wordDiv=function(t,e){var r=(this.length,t.length),n=this.clone(),o=t,a=0|o.words[o.length-1];0!=(r=26-this._countBits(a))&&(o=o.ushln(r),n.iushln(r),a=0|o.words[o.length-1]);var s,u=n.length-o.length;if("mod"!==e){(s=new i(null)).length=u+1,s.words=new Array(s.length);for(var c=0;c<s.length;c++)s.words[c]=0;}var l=n.clone()._ishlnsubmul(o,1,u);0===l.negative&&(n=l,s&&(s.words[u]=1));for(var f=u-1;f>=0;f--){var h=67108864*(0|n.words[o.length+f])+(0|n.words[o.length+f-1]);for(h=Math.min(h/a|0,67108863),n._ishlnsubmul(o,h,f);0!==n.negative;)h--,n.negative=0,n._ishlnsubmul(o,1,f),n.isZero()||(n.negative^=1);s&&(s.words[f]=h);}return s&&s._strip(),n._strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:s||null,mod:n}},i.prototype.divmod=function(t,e,n){return r(!t.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(o=s.div.neg()),"div"!==e&&(a=s.mod.neg(),n&&0!==a.negative&&a.iadd(t)),{div:o,mod:a}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(o=s.div.neg()),{div:o,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(a=s.mod.neg(),n&&0!==a.negative&&a.isub(t)),{div:s.div,mod:a}):t.length>this.length||this.cmp(t)<0?{div:new i(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new i(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new i(this.modrn(t.words[0]))}:this._wordDiv(t,e);var o,a,s;},i.prototype.div=function(t){return this.divmod(t,"div",!1).div},i.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},i.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},i.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},i.prototype.modrn=function(t){var e=t<0;e&&(t=-t),r(t<=67108863);for(var n=(1<<26)%t,i=0,o=this.length-1;o>=0;o--)i=(n*i+(0|this.words[o]))%t;return e?-i:i},i.prototype.modn=function(t){return this.modrn(t)},i.prototype.idivn=function(t){var e=t<0;e&&(t=-t),r(t<=67108863);for(var n=0,i=this.length-1;i>=0;i--){var o=(0|this.words[i])+67108864*n;this.words[i]=o/t|0,n=o%t;}return this._strip(),e?this.ineg():this},i.prototype.divn=function(t){return this.clone().idivn(t)},i.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var o=new i(1),a=new i(0),s=new i(0),u=new i(1),c=0;e.isEven()&&n.isEven();)e.iushrn(1),n.iushrn(1),++c;for(var l=n.clone(),f=e.clone();!e.isZero();){for(var h=0,d=1;0==(e.words[0]&d)&&h<26;++h,d<<=1);if(h>0)for(e.iushrn(h);h-- >0;)(o.isOdd()||a.isOdd())&&(o.iadd(l),a.isub(f)),o.iushrn(1),a.iushrn(1);for(var p=0,y=1;0==(n.words[0]&y)&&p<26;++p,y<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(l),u.isub(f)),s.iushrn(1),u.iushrn(1);e.cmp(n)>=0?(e.isub(n),o.isub(s),a.isub(u)):(n.isub(e),s.isub(o),u.isub(a));}return {a:s,b:u,gcd:n.iushln(c)}},i.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var o,a=new i(1),s=new i(0),u=n.clone();e.cmpn(1)>0&&n.cmpn(1)>0;){for(var c=0,l=1;0==(e.words[0]&l)&&c<26;++c,l<<=1);if(c>0)for(e.iushrn(c);c-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var f=0,h=1;0==(n.words[0]&h)&&f<26;++f,h<<=1);if(f>0)for(n.iushrn(f);f-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);e.cmp(n)>=0?(e.isub(n),a.isub(s)):(n.isub(e),s.isub(a));}return (o=0===e.cmpn(1)?a:s).cmpn(0)<0&&o.iadd(t),o},i.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o;}else if(0===i||0===r.cmpn(1))break;e.isub(r);}return r.iushln(n)},i.prototype.invm=function(t){return this.egcd(t).a.umod(t)},i.prototype.isEven=function(){return 0==(1&this.words[0])},i.prototype.isOdd=function(){return 1==(1&this.words[0])},i.prototype.andln=function(t){return this.words[0]&t},i.prototype.bincn=function(t){r("number"==typeof t);var e=t%26,n=(t-e)/26,i=1<<e;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var o=i,a=n;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s;}return 0!==o&&(this.words[a]=o,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(t){var e,n=t<0;if(0!==this.negative&&!n)return -1;if(0===this.negative&&n)return 1;if(this._strip(),this.length>1)e=1;else {n&&(t=-t),r(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1;}return 0!==this.negative?0|-e:e},i.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return -1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},i.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return -1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},i.prototype.gtn=function(t){return 1===this.cmpn(t)},i.prototype.gt=function(t){return 1===this.cmp(t)},i.prototype.gten=function(t){return this.cmpn(t)>=0},i.prototype.gte=function(t){return this.cmp(t)>=0},i.prototype.ltn=function(t){return -1===this.cmpn(t)},i.prototype.lt=function(t){return -1===this.cmp(t)},i.prototype.lten=function(t){return this.cmpn(t)<=0},i.prototype.lte=function(t){return this.cmp(t)<=0},i.prototype.eqn=function(t){return 0===this.cmpn(t)},i.prototype.eq=function(t){return 0===this.cmp(t)},i.red=function(t){return new I(t)},i.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(t){return this.red=t,this},i.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},i.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},i.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},i.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},i.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},i.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},i.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},i.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var b={k256:null,p224:null,p192:null,p25519:null};function v(t,e){this.name=t,this.p=new i(e,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp();}function w(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f");}function _(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001");}function S(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff");}function E(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed");}function I(t){if("string"==typeof t){var e=i._prime(t);this.m=e.p,this.prime=e;}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null;}function A(t){I.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv);}v.prototype._tmp=function(){var t=new i(null);return t.words=new Array(Math.ceil(this.n/13)),t},v.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength();}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},v.prototype.split=function(t,e){t.iushrn(this.n,0,e);},v.prototype.imulK=function(t){return t.imul(this.k)},n(w,v),w.prototype.split=function(t,e){for(var r=4194303,n=Math.min(t.length,9),i=0;i<n;i++)e.words[i]=t.words[i];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var o=t.words[9];for(e.words[e.length++]=o&r,i=10;i<t.length;i++){var a=0|t.words[i];t.words[i-10]=(a&r)<<4|o>>>22,o=a;}o>>>=22,t.words[i-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9;},w.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0);}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},n(_,v),n(S,v),n(E,v),E.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n;}return 0!==e&&(t.words[t.length++]=e),t},i._prime=function(t){if(b[t])return b[t];var e;if("k256"===t)e=new w;else if("p224"===t)e=new _;else if("p192"===t)e=new S;else {if("p25519"!==t)throw new Error("Unknown prime "+t);e=new E;}return b[t]=e,e},I.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers");},I.prototype._verify2=function(t,e){r(0==(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers");},I.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(c(t,t.umod(this.m)._forceRed(this)),t)},I.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},I.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},I.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},I.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},I.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},I.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},I.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},I.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},I.prototype.isqr=function(t){return this.imul(t,t.clone())},I.prototype.sqr=function(t){return this.mul(t,t)},I.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2==1),3===e){var n=this.m.add(new i(1)).iushrn(2);return this.pow(t,n)}for(var o=this.m.subn(1),a=0;!o.isZero()&&0===o.andln(1);)a++,o.iushrn(1);r(!o.isZero());var s=new i(1).toRed(this),u=s.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new i(2*l*l).toRed(this);0!==this.pow(l,c).cmp(u);)l.redIAdd(u);for(var f=this.pow(l,o),h=this.pow(t,o.addn(1).iushrn(1)),d=this.pow(t,o),p=a;0!==d.cmp(s);){for(var y=d,g=0;0!==y.cmp(s);g++)y=y.redSqr();r(g<p);var m=this.pow(f,new i(1).iushln(p-g-1));h=h.redMul(m),f=m.redSqr(),d=d.redMul(f),p=g;}return h},I.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},I.prototype.pow=function(t,e){if(e.isZero())return new i(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new i(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var o=r[0],a=0,s=0,u=e.bitLength()%26;for(0===u&&(u=26),n=e.length-1;n>=0;n--){for(var c=e.words[n],l=u-1;l>=0;l--){var f=c>>l&1;o!==r[0]&&(o=this.sqr(o)),0!==f||0!==a?(a<<=1,a|=f,(4==++s||0===n&&0===l)&&(o=this.mul(o,r[a]),s=0,a=0)):s=0;}u=26;}return o},I.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},I.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},i.mont=function(t){return new A(t)},n(A,I),A.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},A.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},A.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},A.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new i(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(n).iushrn(this.shift),a=o;return o.cmp(this.m)>=0?a=o.isub(this.m):o.cmpn(0)<0&&(a=o.iadd(this.m)),a._forceRed(this)},A.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)};}(kr$1,yt$1);var xr$1=kr$1.exports,Tr$1={},Pr$1={},Or$1={exports:{}};"function"==typeof Object.create?Or$1.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}));}:Or$1.exports=function(t,e){if(e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t;}};var Rr$1,Cr$1=vt$1,Mr$1=Cr$1.Buffer,Nr$1={};for(Rr$1 in Cr$1)Cr$1.hasOwnProperty(Rr$1)&&"SlowBuffer"!==Rr$1&&"Buffer"!==Rr$1&&(Nr$1[Rr$1]=Cr$1[Rr$1]);var jr$1=Nr$1.Buffer={};for(Rr$1 in Mr$1)Mr$1.hasOwnProperty(Rr$1)&&"allocUnsafe"!==Rr$1&&"allocUnsafeSlow"!==Rr$1&&(jr$1[Rr$1]=Mr$1[Rr$1]);if(Nr$1.Buffer.prototype=Mr$1.prototype,jr$1.from&&jr$1.from!==Uint8Array.from||(jr$1.from=function(t,e,r){if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof t);if(t&&void 0===t.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);return Mr$1(t,e,r)}),jr$1.alloc||(jr$1.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError('The "size" argument must be of type number. Received type '+typeof t);if(t<0||t>=2*(1<<30))throw new RangeError('The value "'+t+'" is invalid for option "size"');var n=Mr$1(t);return e&&0!==e.length?"string"==typeof r?n.fill(e,r):n.fill(e):n.fill(0),n}),!Nr$1.kStringMaxLength)try{Nr$1.kStringMaxLength=ke$1.binding("buffer").kStringMaxLength;}catch(t){}Nr$1.constants||(Nr$1.constants={MAX_LENGTH:Nr$1.kMaxLength},Nr$1.kStringMaxLength&&(Nr$1.constants.MAX_STRING_LENGTH=Nr$1.kStringMaxLength));var Br$1=Nr$1,Lr$1={};const Fr$1=Or$1.exports;function Ur$1(t){this._reporterState={obj:null,path:[],options:t||{},errors:[]};}function zr(t,e){this.path=t,this.rethrow(e);}Lr$1.Reporter=Ur$1,Ur$1.prototype.isError=function(t){return t instanceof zr},Ur$1.prototype.save=function(){const t=this._reporterState;return {obj:t.obj,pathLen:t.path.length}},Ur$1.prototype.restore=function(t){const e=this._reporterState;e.obj=t.obj,e.path=e.path.slice(0,t.pathLen);},Ur$1.prototype.enterKey=function(t){return this._reporterState.path.push(t)},Ur$1.prototype.exitKey=function(t){const e=this._reporterState;e.path=e.path.slice(0,t-1);},Ur$1.prototype.leaveKey=function(t,e,r){const n=this._reporterState;this.exitKey(t),null!==n.obj&&(n.obj[e]=r);},Ur$1.prototype.path=function(){return this._reporterState.path.join("/")},Ur$1.prototype.enterObject=function(){const t=this._reporterState,e=t.obj;return t.obj={},e},Ur$1.prototype.leaveObject=function(t){const e=this._reporterState,r=e.obj;return e.obj=t,r},Ur$1.prototype.error=function(t){let e;const r=this._reporterState,n=t instanceof zr;if(e=n?t:new zr(r.path.map((function(t){return "["+JSON.stringify(t)+"]"})).join(""),t.message||t,t.stack),!r.options.partial)throw e;return n||r.errors.push(e),e},Ur$1.prototype.wrapResult=function(t){const e=this._reporterState;return e.options.partial?{result:this.isError(t)?null:t,errors:e.errors}:t},Fr$1(zr,Error),zr.prototype.rethrow=function(t){if(this.message=t+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,zr),!this.stack)try{throw new Error(this.message)}catch(t){this.stack=t.stack;}return this};var Kr={};const qr=Or$1.exports,Hr=Lr$1.Reporter,Vr=Br$1.Buffer;function Wr(t,e){Hr.call(this,e),Vr.isBuffer(t)?(this.base=t,this.offset=0,this.length=t.length):this.error("Input not Buffer");}function Jr(t,e){if(Array.isArray(t))this.length=0,this.value=t.map((function(t){return Jr.isEncoderBuffer(t)||(t=new Jr(t,e)),this.length+=t.length,t}),this);else if("number"==typeof t){if(!(0<=t&&t<=255))return e.error("non-byte EncoderBuffer value");this.value=t,this.length=1;}else if("string"==typeof t)this.value=t,this.length=Vr.byteLength(t);else {if(!Vr.isBuffer(t))return e.error("Unsupported type: "+typeof t);this.value=t,this.length=t.length;}}qr(Wr,Hr),Kr.DecoderBuffer=Wr,Wr.isDecoderBuffer=function(t){if(t instanceof Wr)return !0;return "object"==typeof t&&Vr.isBuffer(t.base)&&"DecoderBuffer"===t.constructor.name&&"number"==typeof t.offset&&"number"==typeof t.length&&"function"==typeof t.save&&"function"==typeof t.restore&&"function"==typeof t.isEmpty&&"function"==typeof t.readUInt8&&"function"==typeof t.skip&&"function"==typeof t.raw},Wr.prototype.save=function(){return {offset:this.offset,reporter:Hr.prototype.save.call(this)}},Wr.prototype.restore=function(t){const e=new Wr(this.base);return e.offset=t.offset,e.length=this.offset,this.offset=t.offset,Hr.prototype.restore.call(this,t.reporter),e},Wr.prototype.isEmpty=function(){return this.offset===this.length},Wr.prototype.readUInt8=function(t){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(t||"DecoderBuffer overrun")},Wr.prototype.skip=function(t,e){if(!(this.offset+t<=this.length))return this.error(e||"DecoderBuffer overrun");const r=new Wr(this.base);return r._reporterState=this._reporterState,r.offset=this.offset,r.length=this.offset+t,this.offset+=t,r},Wr.prototype.raw=function(t){return this.base.slice(t?t.offset:this.offset,this.length)},Kr.EncoderBuffer=Jr,Jr.isEncoderBuffer=function(t){if(t instanceof Jr)return !0;return "object"==typeof t&&"EncoderBuffer"===t.constructor.name&&"number"==typeof t.length&&"function"==typeof t.join},Jr.prototype.join=function(t,e){return t||(t=Vr.alloc(this.length)),e||(e=0),0===this.length||(Array.isArray(this.value)?this.value.forEach((function(r){r.join(t,e),e+=r.length;})):("number"==typeof this.value?t[e]=this.value:"string"==typeof this.value?t.write(this.value,e):Vr.isBuffer(this.value)&&this.value.copy(t,e),e+=this.length)),t};var Yr=Zr;function Zr(t,e){if(!t)throw new Error(e||"Assertion failed")}Zr.equal=function(t,e,r){if(t!=e)throw new Error(r||"Assertion failed: "+t+" != "+e)};const Gr$1=Lr$1.Reporter,Xr=Kr.EncoderBuffer,$r$1=Kr.DecoderBuffer,Qr=Yr,tn$1=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],en$1=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(tn$1);function rn$1(t,e,r){const n={};this._baseState=n,n.name=r,n.enc=t,n.parent=e||null,n.children=null,n.tag=null,n.args=null,n.reverseArgs=null,n.choice=null,n.optional=!1,n.any=!1,n.obj=!1,n.use=null,n.useDecoder=null,n.key=null,n.default=null,n.explicit=null,n.implicit=null,n.contains=null,n.parent||(n.children=[],this._wrap());}var nn$1=rn$1;const on$1=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];rn$1.prototype.clone=function(){const t=this._baseState,e={};on$1.forEach((function(r){e[r]=t[r];}));const r=new this.constructor(e.parent);return r._baseState=e,r},rn$1.prototype._wrap=function(){const t=this._baseState;en$1.forEach((function(e){this[e]=function(){const r=new this.constructor(this);return t.children.push(r),r[e].apply(r,arguments)};}),this);},rn$1.prototype._init=function(t){const e=this._baseState;Qr(null===e.parent),t.call(this),e.children=e.children.filter((function(t){return t._baseState.parent===this}),this),Qr.equal(e.children.length,1,"Root node can have only one child");},rn$1.prototype._useArgs=function(t){const e=this._baseState,r=t.filter((function(t){return t instanceof this.constructor}),this);t=t.filter((function(t){return !(t instanceof this.constructor)}),this),0!==r.length&&(Qr(null===e.children),e.children=r,r.forEach((function(t){t._baseState.parent=this;}),this)),0!==t.length&&(Qr(null===e.args),e.args=t,e.reverseArgs=t.map((function(t){if("object"!=typeof t||t.constructor!==Object)return t;const e={};return Object.keys(t).forEach((function(r){r==(0|r)&&(r|=0);const n=t[r];e[n]=r;})),e})));},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach((function(t){rn$1.prototype[t]=function(){const e=this._baseState;throw new Error(t+" not implemented for encoding: "+e.enc)};})),tn$1.forEach((function(t){rn$1.prototype[t]=function(){const e=this._baseState,r=Array.prototype.slice.call(arguments);return Qr(null===e.tag),e.tag=t,this._useArgs(r),this};})),rn$1.prototype.use=function(t){Qr(t);const e=this._baseState;return Qr(null===e.use),e.use=t,this},rn$1.prototype.optional=function(){return this._baseState.optional=!0,this},rn$1.prototype.def=function(t){const e=this._baseState;return Qr(null===e.default),e.default=t,e.optional=!0,this},rn$1.prototype.explicit=function(t){const e=this._baseState;return Qr(null===e.explicit&&null===e.implicit),e.explicit=t,this},rn$1.prototype.implicit=function(t){const e=this._baseState;return Qr(null===e.explicit&&null===e.implicit),e.implicit=t,this},rn$1.prototype.obj=function(){const t=this._baseState,e=Array.prototype.slice.call(arguments);return t.obj=!0,0!==e.length&&this._useArgs(e),this},rn$1.prototype.key=function(t){const e=this._baseState;return Qr(null===e.key),e.key=t,this},rn$1.prototype.any=function(){return this._baseState.any=!0,this},rn$1.prototype.choice=function(t){const e=this._baseState;return Qr(null===e.choice),e.choice=t,this._useArgs(Object.keys(t).map((function(e){return t[e]}))),this},rn$1.prototype.contains=function(t){const e=this._baseState;return Qr(null===e.use),e.contains=t,this},rn$1.prototype._decode=function(t,e){const r=this._baseState;if(null===r.parent)return t.wrapResult(r.children[0]._decode(t,e));let n,i=r.default,o=!0,a=null;if(null!==r.key&&(a=t.enterKey(r.key)),r.optional){let n=null;if(null!==r.explicit?n=r.explicit:null!==r.implicit?n=r.implicit:null!==r.tag&&(n=r.tag),null!==n||r.any){if(o=this._peekTag(t,n,r.any),t.isError(o))return o}else {const n=t.save();try{null===r.choice?this._decodeGeneric(r.tag,t,e):this._decodeChoice(t,e),o=!0;}catch(t){o=!1;}t.restore(n);}}if(r.obj&&o&&(n=t.enterObject()),o){if(null!==r.explicit){const e=this._decodeTag(t,r.explicit);if(t.isError(e))return e;t=e;}const n=t.offset;if(null===r.use&&null===r.choice){let e;r.any&&(e=t.save());const n=this._decodeTag(t,null!==r.implicit?r.implicit:r.tag,r.any);if(t.isError(n))return n;r.any?i=t.raw(e):t=n;}if(e&&e.track&&null!==r.tag&&e.track(t.path(),n,t.length,"tagged"),e&&e.track&&null!==r.tag&&e.track(t.path(),t.offset,t.length,"content"),r.any||(i=null===r.choice?this._decodeGeneric(r.tag,t,e):this._decodeChoice(t,e)),t.isError(i))return i;if(r.any||null!==r.choice||null===r.children||r.children.forEach((function(r){r._decode(t,e);})),r.contains&&("octstr"===r.tag||"bitstr"===r.tag)){const n=new $r$1(i);i=this._getUse(r.contains,t._reporterState.obj)._decode(n,e);}}return r.obj&&o&&(i=t.leaveObject(n)),null===r.key||null===i&&!0!==o?null!==a&&t.exitKey(a):t.leaveKey(a,r.key,i),i},rn$1.prototype._decodeGeneric=function(t,e,r){const n=this._baseState;return "seq"===t||"set"===t?null:"seqof"===t||"setof"===t?this._decodeList(e,t,n.args[0],r):/str$/.test(t)?this._decodeStr(e,t,r):"objid"===t&&n.args?this._decodeObjid(e,n.args[0],n.args[1],r):"objid"===t?this._decodeObjid(e,null,null,r):"gentime"===t||"utctime"===t?this._decodeTime(e,t,r):"null_"===t?this._decodeNull(e,r):"bool"===t?this._decodeBool(e,r):"objDesc"===t?this._decodeStr(e,t,r):"int"===t||"enum"===t?this._decodeInt(e,n.args&&n.args[0],r):null!==n.use?this._getUse(n.use,e._reporterState.obj)._decode(e,r):e.error("unknown tag: "+t)},rn$1.prototype._getUse=function(t,e){const r=this._baseState;return r.useDecoder=this._use(t,e),Qr(null===r.useDecoder._baseState.parent),r.useDecoder=r.useDecoder._baseState.children[0],r.implicit!==r.useDecoder._baseState.implicit&&(r.useDecoder=r.useDecoder.clone(),r.useDecoder._baseState.implicit=r.implicit),r.useDecoder},rn$1.prototype._decodeChoice=function(t,e){const r=this._baseState;let n=null,i=!1;return Object.keys(r.choice).some((function(o){const a=t.save(),s=r.choice[o];try{const r=s._decode(t,e);if(t.isError(r))return !1;n={type:o,value:r},i=!0;}catch(e){return t.restore(a),!1}return !0}),this),i?n:t.error("Choice not matched")},rn$1.prototype._createEncoderBuffer=function(t){return new Xr(t,this.reporter)},rn$1.prototype._encode=function(t,e,r){const n=this._baseState;if(null!==n.default&&n.default===t)return;const i=this._encodeValue(t,e,r);return void 0===i||this._skipDefault(i,e,r)?void 0:i},rn$1.prototype._encodeValue=function(t,e,r){const n=this._baseState;if(null===n.parent)return n.children[0]._encode(t,e||new Gr$1);let i=null;if(this.reporter=e,n.optional&&void 0===t){if(null===n.default)return;t=n.default;}let o=null,a=!1;if(n.any)i=this._createEncoderBuffer(t);else if(n.choice)i=this._encodeChoice(t,e);else if(n.contains)o=this._getUse(n.contains,r)._encode(t,e),a=!0;else if(n.children)o=n.children.map((function(r){if("null_"===r._baseState.tag)return r._encode(null,e,t);if(null===r._baseState.key)return e.error("Child should have a key");const n=e.enterKey(r._baseState.key);if("object"!=typeof t)return e.error("Child expected, but input is not object");const i=r._encode(t[r._baseState.key],e,t);return e.leaveKey(n),i}),this).filter((function(t){return t})),o=this._createEncoderBuffer(o);else if("seqof"===n.tag||"setof"===n.tag){if(!n.args||1!==n.args.length)return e.error("Too many args for : "+n.tag);if(!Array.isArray(t))return e.error("seqof/setof, but data is not Array");const r=this.clone();r._baseState.implicit=null,o=this._createEncoderBuffer(t.map((function(r){const n=this._baseState;return this._getUse(n.args[0],t)._encode(r,e)}),r));}else null!==n.use?i=this._getUse(n.use,r)._encode(t,e):(o=this._encodePrimitive(n.tag,t),a=!0);if(!n.any&&null===n.choice){const t=null!==n.implicit?n.implicit:n.tag,r=null===n.implicit?"universal":"context";null===t?null===n.use&&e.error("Tag could be omitted only for .use()"):null===n.use&&(i=this._encodeComposite(t,a,r,o));}return null!==n.explicit&&(i=this._encodeComposite(n.explicit,!1,"context",i)),i},rn$1.prototype._encodeChoice=function(t,e){const r=this._baseState,n=r.choice[t.type];return n||Qr(!1,t.type+" not found in "+JSON.stringify(Object.keys(r.choice))),n._encode(t.value,e)},rn$1.prototype._encodePrimitive=function(t,e){const r=this._baseState;if(/str$/.test(t))return this._encodeStr(e,t);if("objid"===t&&r.args)return this._encodeObjid(e,r.reverseArgs[0],r.args[1]);if("objid"===t)return this._encodeObjid(e,null,null);if("gentime"===t||"utctime"===t)return this._encodeTime(e,t);if("null_"===t)return this._encodeNull();if("int"===t||"enum"===t)return this._encodeInt(e,r.args&&r.reverseArgs[0]);if("bool"===t)return this._encodeBool(e);if("objDesc"===t)return this._encodeStr(e,t);throw new Error("Unsupported tag: "+t)},rn$1.prototype._isNumstr=function(t){return /^[0-9 ]*$/.test(t)},rn$1.prototype._isPrintstr=function(t){return /^[A-Za-z0-9 '()+,-./:=?]*$/.test(t)};var an$1={};!function(t){function e(t){const e={};return Object.keys(t).forEach((function(r){(0|r)==r&&(r|=0);const n=t[r];e[n]=r;})),e}t.tagClass={0:"universal",1:"application",2:"context",3:"private"},t.tagClassByName=e(t.tagClass),t.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},t.tagByName=e(t.tag);}(an$1);const sn$1=Or$1.exports,un$1=Br$1.Buffer,cn$1=nn$1,ln$1=an$1;function fn$1(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new dn$1,this.tree._init(t.body);}var hn$1=fn$1;function dn$1(t){cn$1.call(this,"der",t);}function pn$1(t){return t<10?"0"+t:t}fn$1.prototype.encode=function(t,e){return this.tree._encode(t,e).join()},sn$1(dn$1,cn$1),dn$1.prototype._encodeComposite=function(t,e,r,n){const i=function(t,e,r,n){let i;"seqof"===t?t="seq":"setof"===t&&(t="set");if(ln$1.tagByName.hasOwnProperty(t))i=ln$1.tagByName[t];else {if("number"!=typeof t||(0|t)!==t)return n.error("Unknown tag: "+t);i=t;}if(i>=31)return n.error("Multi-octet tag encoding unsupported");e||(i|=32);return i|=ln$1.tagClassByName[r||"universal"]<<6,i}(t,e,r,this.reporter);if(n.length<128){const t=un$1.alloc(2);return t[0]=i,t[1]=n.length,this._createEncoderBuffer([t,n])}let o=1;for(let t=n.length;t>=256;t>>=8)o++;const a=un$1.alloc(2+o);a[0]=i,a[1]=128|o;for(let t=1+o,e=n.length;e>0;t--,e>>=8)a[t]=255&e;return this._createEncoderBuffer([a,n])},dn$1.prototype._encodeStr=function(t,e){if("bitstr"===e)return this._createEncoderBuffer([0|t.unused,t.data]);if("bmpstr"===e){const e=un$1.alloc(2*t.length);for(let r=0;r<t.length;r++)e.writeUInt16BE(t.charCodeAt(r),2*r);return this._createEncoderBuffer(e)}return "numstr"===e?this._isNumstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===e?this._isPrintstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(e)||"objDesc"===e?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: "+e+" unsupported")},dn$1.prototype._encodeObjid=function(t,e,r){if("string"==typeof t){if(!e)return this.reporter.error("string objid given, but no values map found");if(!e.hasOwnProperty(t))return this.reporter.error("objid not found in values map");t=e[t].split(/[\s.]+/g);for(let e=0;e<t.length;e++)t[e]|=0;}else if(Array.isArray(t)){t=t.slice();for(let e=0;e<t.length;e++)t[e]|=0;}if(!Array.isArray(t))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(t));if(!r){if(t[1]>=40)return this.reporter.error("Second objid identifier OOB");t.splice(0,2,40*t[0]+t[1]);}let n=0;for(let e=0;e<t.length;e++){let r=t[e];for(n++;r>=128;r>>=7)n++;}const i=un$1.alloc(n);let o=i.length-1;for(let e=t.length-1;e>=0;e--){let r=t[e];for(i[o--]=127&r;(r>>=7)>0;)i[o--]=128|127&r;}return this._createEncoderBuffer(i)},dn$1.prototype._encodeTime=function(t,e){let r;const n=new Date(t);return "gentime"===e?r=[pn$1(n.getUTCFullYear()),pn$1(n.getUTCMonth()+1),pn$1(n.getUTCDate()),pn$1(n.getUTCHours()),pn$1(n.getUTCMinutes()),pn$1(n.getUTCSeconds()),"Z"].join(""):"utctime"===e?r=[pn$1(n.getUTCFullYear()%100),pn$1(n.getUTCMonth()+1),pn$1(n.getUTCDate()),pn$1(n.getUTCHours()),pn$1(n.getUTCMinutes()),pn$1(n.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+e+" time is not supported yet"),this._encodeStr(r,"octstr")},dn$1.prototype._encodeNull=function(){return this._createEncoderBuffer("")},dn$1.prototype._encodeInt=function(t,e){if("string"==typeof t){if(!e)return this.reporter.error("String int or enum given, but no values map");if(!e.hasOwnProperty(t))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(t));t=e[t];}if("number"!=typeof t&&!un$1.isBuffer(t)){const e=t.toArray();!t.sign&&128&e[0]&&e.unshift(0),t=un$1.from(e);}if(un$1.isBuffer(t)){let e=t.length;0===t.length&&e++;const r=un$1.alloc(e);return t.copy(r),0===t.length&&(r[0]=0),this._createEncoderBuffer(r)}if(t<128)return this._createEncoderBuffer(t);if(t<256)return this._createEncoderBuffer([0,t]);let r=1;for(let e=t;e>=256;e>>=8)r++;const n=new Array(r);for(let e=n.length-1;e>=0;e--)n[e]=255&t,t>>=8;return 128&n[0]&&n.unshift(0),this._createEncoderBuffer(un$1.from(n))},dn$1.prototype._encodeBool=function(t){return this._createEncoderBuffer(t?255:0)},dn$1.prototype._use=function(t,e){return "function"==typeof t&&(t=t(e)),t._getEncoder("der").tree},dn$1.prototype._skipDefault=function(t,e,r){const n=this._baseState;let i;if(null===n.default)return !1;const o=t.join();if(void 0===n.defaultBuffer&&(n.defaultBuffer=this._encodeValue(n.default,e,r).join()),o.length!==n.defaultBuffer.length)return !1;for(i=0;i<o.length;i++)if(o[i]!==n.defaultBuffer[i])return !1;return !0};const yn$1=Or$1.exports,gn$1=hn$1;function mn$1(t){gn$1.call(this,t),this.enc="pem";}yn$1(mn$1,gn$1);var bn$1=mn$1;mn$1.prototype.encode=function(t,e){const r=gn$1.prototype.encode.call(this,t).toString("base64"),n=["-----BEGIN "+e.label+"-----"];for(let t=0;t<r.length;t+=64)n.push(r.slice(t,t+64));return n.push("-----END "+e.label+"-----"),n.join("\n")},function(t){const e=t;e.der=hn$1,e.pem=bn$1;}(Pr$1);var vn$1={};const wn$1=Or$1.exports,_n$1=kr$1.exports,Sn$1=Kr.DecoderBuffer,En$1=nn$1,In$1=an$1;function An$1(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new Dn$1,this.tree._init(t.body);}var kn$1=An$1;function Dn$1(t){En$1.call(this,"der",t);}function xn$1(t,e){let r=t.readUInt8(e);if(t.isError(r))return r;const n=In$1.tagClass[r>>6],i=0==(32&r);if(31==(31&r)){let n=r;for(r=0;128==(128&n);){if(n=t.readUInt8(e),t.isError(n))return n;r<<=7,r|=127&n;}}else r&=31;return {cls:n,primitive:i,tag:r,tagStr:In$1.tag[r]}}function Tn$1(t,e,r){let n=t.readUInt8(r);if(t.isError(n))return n;if(!e&&128===n)return null;if(0==(128&n))return n;const i=127&n;if(i>4)return t.error("length octect is too long");n=0;for(let e=0;e<i;e++){n<<=8;const e=t.readUInt8(r);if(t.isError(e))return e;n|=e;}return n}An$1.prototype.decode=function(t,e){return Sn$1.isDecoderBuffer(t)||(t=new Sn$1(t,e)),this.tree._decode(t,e)},wn$1(Dn$1,En$1),Dn$1.prototype._peekTag=function(t,e,r){if(t.isEmpty())return !1;const n=t.save(),i=xn$1(t,'Failed to peek tag: "'+e+'"');return t.isError(i)?i:(t.restore(n),i.tag===e||i.tagStr===e||i.tagStr+"of"===e||r)},Dn$1.prototype._decodeTag=function(t,e,r){const n=xn$1(t,'Failed to decode tag of "'+e+'"');if(t.isError(n))return n;let i=Tn$1(t,n.primitive,'Failed to get length of "'+e+'"');if(t.isError(i))return i;if(!r&&n.tag!==e&&n.tagStr!==e&&n.tagStr+"of"!==e)return t.error('Failed to match tag: "'+e+'"');if(n.primitive||null!==i)return t.skip(i,'Failed to match body of: "'+e+'"');const o=t.save(),a=this._skipUntilEnd(t,'Failed to skip indefinite length body: "'+this.tag+'"');return t.isError(a)?a:(i=t.offset-o.offset,t.restore(o),t.skip(i,'Failed to match body of: "'+e+'"'))},Dn$1.prototype._skipUntilEnd=function(t,e){for(;;){const r=xn$1(t,e);if(t.isError(r))return r;const n=Tn$1(t,r.primitive,e);if(t.isError(n))return n;let i;if(i=r.primitive||null!==n?t.skip(n):this._skipUntilEnd(t,e),t.isError(i))return i;if("end"===r.tagStr)break}},Dn$1.prototype._decodeList=function(t,e,r,n){const i=[];for(;!t.isEmpty();){const e=this._peekTag(t,"end");if(t.isError(e))return e;const o=r.decode(t,"der",n);if(t.isError(o)&&e)break;i.push(o);}return i},Dn$1.prototype._decodeStr=function(t,e){if("bitstr"===e){const e=t.readUInt8();return t.isError(e)?e:{unused:e,data:t.raw()}}if("bmpstr"===e){const e=t.raw();if(e.length%2==1)return t.error("Decoding of string type: bmpstr length mismatch");let r="";for(let t=0;t<e.length/2;t++)r+=String.fromCharCode(e.readUInt16BE(2*t));return r}if("numstr"===e){const e=t.raw().toString("ascii");return this._isNumstr(e)?e:t.error("Decoding of string type: numstr unsupported characters")}if("octstr"===e)return t.raw();if("objDesc"===e)return t.raw();if("printstr"===e){const e=t.raw().toString("ascii");return this._isPrintstr(e)?e:t.error("Decoding of string type: printstr unsupported characters")}return /str$/.test(e)?t.raw().toString():t.error("Decoding of string type: "+e+" unsupported")},Dn$1.prototype._decodeObjid=function(t,e,r){let n;const i=[];let o=0,a=0;for(;!t.isEmpty();)a=t.readUInt8(),o<<=7,o|=127&a,0==(128&a)&&(i.push(o),o=0);128&a&&i.push(o);const s=i[0]/40|0,u=i[0]%40;if(n=r?i:[s,u].concat(i.slice(1)),e){let t=e[n.join(" ")];void 0===t&&(t=e[n.join(".")]),void 0!==t&&(n=t);}return n},Dn$1.prototype._decodeTime=function(t,e){const r=t.raw().toString();let n,i,o,a,s,u;if("gentime"===e)n=0|r.slice(0,4),i=0|r.slice(4,6),o=0|r.slice(6,8),a=0|r.slice(8,10),s=0|r.slice(10,12),u=0|r.slice(12,14);else {if("utctime"!==e)return t.error("Decoding "+e+" time is not supported yet");n=0|r.slice(0,2),i=0|r.slice(2,4),o=0|r.slice(4,6),a=0|r.slice(6,8),s=0|r.slice(8,10),u=0|r.slice(10,12),n=n<70?2e3+n:1900+n;}return Date.UTC(n,i-1,o,a,s,u,0)},Dn$1.prototype._decodeNull=function(){return null},Dn$1.prototype._decodeBool=function(t){const e=t.readUInt8();return t.isError(e)?e:0!==e},Dn$1.prototype._decodeInt=function(t,e){const r=t.raw();let n=new _n$1(r);return e&&(n=e[n.toString(10)]||n),n},Dn$1.prototype._use=function(t,e){return "function"==typeof t&&(t=t(e)),t._getDecoder("der").tree};const Pn$1=Or$1.exports,On$1=Br$1.Buffer,Rn$1=kn$1;function Cn$1(t){Rn$1.call(this,t),this.enc="pem";}Pn$1(Cn$1,Rn$1);var Mn$1=Cn$1;Cn$1.prototype.decode=function(t,e){const r=t.toString().split(/[\r\n]+/g),n=e.label.toUpperCase(),i=/^-----(BEGIN|END) ([^-]+)-----$/;let o=-1,a=-1;for(let t=0;t<r.length;t++){const e=r[t].match(i);if(null!==e&&e[2]===n){if(-1!==o){if("END"!==e[1])break;a=t;break}if("BEGIN"!==e[1])break;o=t;}}if(-1===o||-1===a)throw new Error("PEM section not found for: "+n);const s=r.slice(o+1,a).join("");s.replace(/[^a-z0-9+/=]+/gi,"");const u=On$1.from(s,"base64");return Rn$1.prototype.decode.call(this,u,e)},function(t){const e=t;e.der=kn$1,e.pem=Mn$1;}(vn$1),function(t){const e=Pr$1,r=vn$1,n=Or$1.exports;function i(t,e){this.name=t,this.body=e,this.decoders={},this.encoders={};}t.define=function(t,e){return new i(t,e)},i.prototype._createNamed=function(t){const e=this.name;function r(t){this._initNamed(t,e);}return n(r,t),r.prototype._initNamed=function(e,r){t.call(this,e,r);},new r(this)},i.prototype._getDecoder=function(t){return t=t||"der",this.decoders.hasOwnProperty(t)||(this.decoders[t]=this._createNamed(r[t])),this.decoders[t]},i.prototype.decode=function(t,e,r){return this._getDecoder(e).decode(t,r)},i.prototype._getEncoder=function(t){return t=t||"der",this.encoders.hasOwnProperty(t)||(this.encoders[t]=this._createNamed(e[t])),this.encoders[t]},i.prototype.encode=function(t,e,r){return this._getEncoder(e).encode(t,r)};}(Tr$1);var Nn$1={};!function(t){const e=Nn$1;e.Reporter=Lr$1.Reporter,e.DecoderBuffer=Kr.DecoderBuffer,e.EncoderBuffer=Kr.EncoderBuffer,e.Node=nn$1;}();var jn$1={};!function(t){const e=t;e._reverse=function(t){const e={};return Object.keys(t).forEach((function(r){(0|r)==r&&(r|=0);const n=t[r];e[n]=r;})),e},e.der=an$1;}(jn$1),function(t){const e=Ar$1;e.bignum=kr$1.exports,e.define=Tr$1.define,e.base=Nn$1,e.constants=jn$1,e.decoders=vn$1,e.encoders=Pr$1;}();var Bn$1={};function Ln$1(t,e){return Object.keys(e).filter((function(r){return e[r].oid.toString()===t.toString()}))}Object.defineProperty(Bn$1,"__esModule",{value:!0}),Bn$1.getAlgorithmFromOidStrict=Bn$1.getAlgorithmFromOid=Bn$1.hashes=Bn$1.encryptionSchemes=Bn$1.pbkdf2Prfs=Bn$1.keyDerivationFunctions=Bn$1.passwordBasedEncryptionSchemes=Bn$1.publicKeyAlgorithms=Bn$1.namedCurves=void 0,Bn$1.namedCurves={"P-256":{indutnyName:"p256",payloadSize:32,oid:[1,2,840,10045,3,1,7]},"P-384":{indutnyName:"p384",payloadSize:48,oid:[1,3,132,0,34]},"P-521":{indutnyName:"p521",payloadSize:66,oid:[1,3,132,0,35]},"P-256K":{indutnyName:"secp256k1",payloadSize:32,oid:[1,3,132,0,10]}},Bn$1.publicKeyAlgorithms={EC:{oid:[1,2,840,10045,2,1]},RSA:{oid:[1,2,840,113549,1,1,1]}},Bn$1.passwordBasedEncryptionSchemes={"pbeWithMD5AndDES-CBC":{oid:[1,2,840,113549,1,5,3],hash:"MD5",encrypt:"DES-CBC"},"pbeWithSHA1AndDES-CBC":{oid:[1,2,840,113549,1,5,10],hash:"SHA-1",encrypt:"DES-CBC"},pbes2:{oid:[1,2,840,113549,1,5,13]}},Bn$1.keyDerivationFunctions={pbkdf2:{oid:[1,2,840,113549,1,5,12],defaultSaltLen:8}},Bn$1.pbkdf2Prfs={hmacWithSHA1:{oid:[1,2,840,113549,2,7],hash:"SHA-1"},hmacWithSHA256:{oid:[1,2,840,113549,2,9],hash:"SHA-256"},hmacWithSHA384:{oid:[1,2,840,113549,2,10],hash:"SHA-384"},hmacWithSHA512:{oid:[1,2,840,113549,2,11],hash:"SHA-512"}},Bn$1.encryptionSchemes={"des-ede3-cbc":{oid:[1,2,840,113549,3,7],keyLength:24,ivLength:8},"aes128-cbc":{oid:[2,16,840,1,101,3,4,1,2],keyLength:16,ivLength:16},"aes192-cbc":{oid:[2,16,840,1,101,3,4,1,22],keyLength:24,ivLength:16},"aes256-cbc":{oid:[2,16,840,1,101,3,4,1,42],keyLength:32,ivLength:16}},Bn$1.hashes={"SHA-256":{hashSize:32},"SHA-384":{hashSize:48},"SHA-512":{hashSize:64},"SHA-1":{hashSize:20},MD5:{hashSize:16}},Bn$1.getAlgorithmFromOid=Ln$1;Bn$1.getAlgorithmFromOidStrict=function(t,e){var r=Ln$1(t,e);if(0===r.length)throw new Error("UnsupportedAlgorithm");return r[0]};var Fn$1={},Un$1={},zn$1={},Kn$1=[],qn$1=[],Hn$1="undefined"!=typeof Uint8Array?Uint8Array:Array,Vn$1=!1;function Wn$1(){Vn$1=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,r=t.length;e<r;++e)Kn$1[e]=t[e],qn$1[t.charCodeAt(e)]=e;qn$1["-".charCodeAt(0)]=62,qn$1["_".charCodeAt(0)]=63;}function Jn$1(t,e,r){for(var n,i,o=[],a=e;a<r;a+=3)n=(t[a]<<16)+(t[a+1]<<8)+t[a+2],o.push(Kn$1[(i=n)>>18&63]+Kn$1[i>>12&63]+Kn$1[i>>6&63]+Kn$1[63&i]);return o.join("")}function Yn$1(t){var e;Vn$1||Wn$1();for(var r=t.length,n=r%3,i="",o=[],a=16383,s=0,u=r-n;s<u;s+=a)o.push(Jn$1(t,s,s+a>u?u:s+a));return 1===n?(e=t[r-1],i+=Kn$1[e>>2],i+=Kn$1[e<<4&63],i+="=="):2===n&&(e=(t[r-2]<<8)+t[r-1],i+=Kn$1[e>>10],i+=Kn$1[e>>4&63],i+=Kn$1[e<<2&63],i+="="),o.push(i),o.join("")}function Zn$1(t,e,r,n,i){var o,a,s=8*i-n-1,u=(1<<s)-1,c=u>>1,l=-7,f=r?i-1:0,h=r?-1:1,d=t[e+f];for(f+=h,o=d&(1<<-l)-1,d>>=-l,l+=s;l>0;o=256*o+t[e+f],f+=h,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=n;l>0;a=256*a+t[e+f],f+=h,l-=8);if(0===o)o=1-c;else {if(o===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,n),o-=c;}return (d?-1:1)*a*Math.pow(2,o-n)}function Gn$1(t,e,r,n,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,p=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(e*u-1)*Math.pow(2,i),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;t[r+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[r+d]=255&a,d+=p,a/=256,c-=8);t[r+d-p]|=128*y;}var Xn$1={}.toString,$n$1=Array.isArray||function(t){return "[object Array]"==Xn$1.call(t)};function Qn$1(){return ei.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function ti(t,e){if(Qn$1()<e)throw new RangeError("Invalid typed array length");return ei.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=ei.prototype:(null===t&&(t=new ei(e)),t.length=e),t}function ei(t,e,r){if(!(ei.TYPED_ARRAY_SUPPORT||this instanceof ei))return new ei(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return ii(this,t)}return ri(this,t,e,r)}function ri(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return "undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n);ei.TYPED_ARRAY_SUPPORT?(t=e).__proto__=ei.prototype:t=oi(t,e);return t}(t,e,r,n):"string"==typeof e?function(t,e,r){"string"==typeof r&&""!==r||(r="utf8");if(!ei.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|ui(e,r),i=(t=ti(t,n)).write(e,r);i!==n&&(t=t.slice(0,i));return t}(t,e,r):function(t,e){if(si(e)){var r=0|ai(e.length);return 0===(t=ti(t,r)).length||e.copy(t,0,0,r),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return "number"!=typeof e.length||(n=e.length)!=n?ti(t,0):oi(t,e);if("Buffer"===e.type&&$n$1(e.data))return oi(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function ni(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function ii(t,e){if(ni(e),t=ti(t,e<0?0:0|ai(e)),!ei.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function oi(t,e){var r=e.length<0?0:0|ai(e.length);t=ti(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function ai(t){if(t>=Qn$1())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Qn$1().toString(16)+" bytes");return 0|t}function si(t){return !(null==t||!t._isBuffer)}function ui(t,e){if(si(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return Mi(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Ni(t).length;default:if(n)return Mi(t).length;e=(""+e).toLowerCase(),n=!0;}}function ci(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return "";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return "";if((r>>>=0)<=(e>>>=0))return "";for(t||(t="utf8");;)switch(t){case"hex":return Ei(this,e,r);case"utf8":case"utf-8":return wi(this,e,r);case"ascii":return _i(this,e,r);case"latin1":case"binary":return Si(this,e,r);case"base64":return vi(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ii(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0;}}function li(t,e,r){var n=t[e];t[e]=t[r],t[r]=n;}function fi(t,e,r,n,i){if(0===t.length)return -1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return -1;r=t.length-1;}else if(r<0){if(!i)return -1;r=0;}if("string"==typeof e&&(e=ei.from(e,n)),si(e))return 0===e.length?-1:hi(t,e,r,n,i);if("number"==typeof e)return e&=255,ei.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):hi(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function hi(t,e,r,n,i){var o,a=1,s=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return -1;a=2,s/=2,u/=2,r/=2;}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var l=-1;for(o=r;o<s;o++)if(c(t,o)===c(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*a}else -1!==l&&(o-=o-l),l=-1;}else for(r+u>s&&(r=s-u),o=r;o>=0;o--){for(var f=!0,h=0;h<u;h++)if(c(t,o+h)!==c(e,h)){f=!1;break}if(f)return o}return -1}function di(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[r+a]=s;}return a}function pi(t,e,r,n){return ji(Mi(e,t.length-r),t,r,n)}function yi(t,e,r,n){return ji(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function gi(t,e,r,n){return yi(t,e,r,n)}function mi(t,e,r,n){return ji(Ni(e),t,r,n)}function bi(t,e,r,n){return ji(function(t,e){for(var r,n,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)n=(r=t.charCodeAt(a))>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function vi(t,e,r){return 0===e&&r===t.length?Yn$1(t):Yn$1(t.slice(e,r))}function wi(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,a,s,u,c=t[i],l=null,f=c>239?4:c>223?3:c>191?2:1;if(i+f<=r)switch(f){case 1:c<128&&(l=c);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&(u=(15&c)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(l=u);}null===l?(l=65533,f=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=f;}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=4096));return r}(n)}ei.TYPED_ARRAY_SUPPORT=void 0===ee$1.TYPED_ARRAY_SUPPORT||ee$1.TYPED_ARRAY_SUPPORT,ei.poolSize=8192,ei._augment=function(t){return t.__proto__=ei.prototype,t},ei.from=function(t,e,r){return ri(null,t,e,r)},ei.TYPED_ARRAY_SUPPORT&&(ei.prototype.__proto__=Uint8Array.prototype,ei.__proto__=Uint8Array),ei.alloc=function(t,e,r){return function(t,e,r,n){return ni(e),e<=0?ti(t,e):void 0!==r?"string"==typeof n?ti(t,e).fill(r,n):ti(t,e).fill(r):ti(t,e)}(null,t,e,r)},ei.allocUnsafe=function(t){return ii(null,t)},ei.allocUnsafeSlow=function(t){return ii(null,t)},ei.isBuffer=Bi,ei.compare=function(t,e){if(!si(t)||!si(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},ei.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return !0;default:return !1}},ei.concat=function(t,e){if(!$n$1(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return ei.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=ei.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var o=t[r];if(!si(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length;}return n},ei.byteLength=ui,ei.prototype._isBuffer=!0,ei.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)li(this,e,e+1);return this},ei.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)li(this,e,e+3),li(this,e+1,e+2);return this},ei.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)li(this,e,e+7),li(this,e+1,e+6),li(this,e+2,e+5),li(this,e+3,e+4);return this},ei.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?wi(this,0,t):ci.apply(this,arguments)},ei.prototype.equals=function(t){if(!si(t))throw new TypeError("Argument must be a Buffer");return this===t||0===ei.compare(this,t)},ei.prototype.inspect=function(){var t="";return this.length>0&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(t+=" ... ")),"<Buffer "+t+">"},ei.prototype.compare=function(t,e,r,n,i){if(!si(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return -1;if(e>=r)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(e>>>=0),s=Math.min(o,a),u=this.slice(n,i),c=t.slice(e,r),l=0;l<s;++l)if(u[l]!==c[l]){o=u[l],a=c[l];break}return o<a?-1:a<o?1:0},ei.prototype.includes=function(t,e,r){return -1!==this.indexOf(t,e,r)},ei.prototype.indexOf=function(t,e,r){return fi(this,t,e,r,!0)},ei.prototype.lastIndexOf=function(t,e,r){return fi(this,t,e,r,!1)},ei.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else {if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0);}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return di(this,t,e,r);case"utf8":case"utf-8":return pi(this,t,e,r);case"ascii":return yi(this,t,e,r);case"latin1":case"binary":return gi(this,t,e,r);case"base64":return mi(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return bi(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0;}},ei.prototype.toJSON=function(){return {type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function _i(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function Si(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function Ei(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=Ci(t[o]);return i}function Ii(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function Ai(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function ki(t,e,r,n,i,o){if(!si(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function Di(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i);}function xi(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;++i)t[r+i]=e>>>8*(n?i:3-i)&255;}function Ti(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Pi(t,e,r,n,i){return i||Ti(t,0,r,4),Gn$1(t,e,r,n,23,4),r+4}function Oi(t,e,r,n,i){return i||Ti(t,0,r,8),Gn$1(t,e,r,n,52,8),r+8}ei.prototype.slice=function(t,e){var r,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),ei.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=ei.prototype;else {var i=e-t;r=new ei(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+t];}return r},ei.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||Ai(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},ei.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||Ai(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},ei.prototype.readUInt8=function(t,e){return e||Ai(t,1,this.length),this[t]},ei.prototype.readUInt16LE=function(t,e){return e||Ai(t,2,this.length),this[t]|this[t+1]<<8},ei.prototype.readUInt16BE=function(t,e){return e||Ai(t,2,this.length),this[t]<<8|this[t+1]},ei.prototype.readUInt32LE=function(t,e){return e||Ai(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},ei.prototype.readUInt32BE=function(t,e){return e||Ai(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},ei.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||Ai(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},ei.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||Ai(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},ei.prototype.readInt8=function(t,e){return e||Ai(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},ei.prototype.readInt16LE=function(t,e){e||Ai(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},ei.prototype.readInt16BE=function(t,e){e||Ai(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},ei.prototype.readInt32LE=function(t,e){return e||Ai(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},ei.prototype.readInt32BE=function(t,e){return e||Ai(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},ei.prototype.readFloatLE=function(t,e){return e||Ai(t,4,this.length),Zn$1(this,t,!0,23,4)},ei.prototype.readFloatBE=function(t,e){return e||Ai(t,4,this.length),Zn$1(this,t,!1,23,4)},ei.prototype.readDoubleLE=function(t,e){return e||Ai(t,8,this.length),Zn$1(this,t,!0,52,8)},ei.prototype.readDoubleBE=function(t,e){return e||Ai(t,8,this.length),Zn$1(this,t,!1,52,8)},ei.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||ki(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},ei.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||ki(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},ei.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||ki(this,t,e,1,255,0),ei.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},ei.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||ki(this,t,e,2,65535,0),ei.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):Di(this,t,e,!0),e+2},ei.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||ki(this,t,e,2,65535,0),ei.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):Di(this,t,e,!1),e+2},ei.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||ki(this,t,e,4,4294967295,0),ei.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):xi(this,t,e,!0),e+4},ei.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||ki(this,t,e,4,4294967295,0),ei.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):xi(this,t,e,!1),e+4},ei.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);ki(this,t,e,r,i-1,-i);}var o=0,a=1,s=0;for(this[e]=255&t;++o<r&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},ei.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);ki(this,t,e,r,i-1,-i);}var o=r-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},ei.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||ki(this,t,e,1,127,-128),ei.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},ei.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||ki(this,t,e,2,32767,-32768),ei.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):Di(this,t,e,!0),e+2},ei.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||ki(this,t,e,2,32767,-32768),ei.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):Di(this,t,e,!1),e+2},ei.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||ki(this,t,e,4,2147483647,-2147483648),ei.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):xi(this,t,e,!0),e+4},ei.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||ki(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),ei.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):xi(this,t,e,!1),e+4},ei.prototype.writeFloatLE=function(t,e,r){return Pi(this,t,e,!0,r)},ei.prototype.writeFloatBE=function(t,e,r){return Pi(this,t,e,!1,r)},ei.prototype.writeDoubleLE=function(t,e,r){return Oi(this,t,e,!0,r)},ei.prototype.writeDoubleBE=function(t,e,r){return Oi(this,t,e,!1,r)},ei.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,o=n-r;if(this===t&&r<e&&e<n)for(i=o-1;i>=0;--i)t[i+e]=this[i+r];else if(o<1e3||!ei.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+o),e);return o},ei.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i);}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!ei.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else "number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var o;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(o=e;o<r;++o)this[o]=t;else {var a=si(t)?t:Mi(new ei(t,n).toString()),s=a.length;for(o=0;o<r-e;++o)this[o+e]=a[o%s];}return this};var Ri=/[^+\/0-9A-Za-z-_]/g;function Ci(t){return t<16?"0"+t.toString(16):t.toString(16)}function Mi(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],a=0;a<n;++a){if((r=t.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320);}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r);}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128);}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128);}else {if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128);}}return o}function Ni(t){return function(t){var e,r,n,i,o,a;Vn$1||Wn$1();var s=t.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o="="===t[s-2]?2:"="===t[s-1]?1:0,a=new Hn$1(3*s/4-o),n=o>0?s-4:s;var u=0;for(e=0,r=0;e<n;e+=4,r+=3)i=qn$1[t.charCodeAt(e)]<<18|qn$1[t.charCodeAt(e+1)]<<12|qn$1[t.charCodeAt(e+2)]<<6|qn$1[t.charCodeAt(e+3)],a[u++]=i>>16&255,a[u++]=i>>8&255,a[u++]=255&i;return 2===o?(i=qn$1[t.charCodeAt(e)]<<2|qn$1[t.charCodeAt(e+1)]>>4,a[u++]=255&i):1===o&&(i=qn$1[t.charCodeAt(e)]<<10|qn$1[t.charCodeAt(e+1)]<<4|qn$1[t.charCodeAt(e+2)]>>2,a[u++]=i>>8&255,a[u++]=255&i),a}(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(Ri,"")).length<2)return "";for(;t.length%4!=0;)t+="=";return t}(t))}function ji(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function Bi(t){return null!=t&&(!!t._isBuffer||Li(t)||function(t){return "function"==typeof t.readFloatLE&&"function"==typeof t.slice&&Li(t.slice(0,0))}(t))}function Li(t){return !!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}var Fi={};Object.defineProperty(Fi,"__esModule",{value:!0}),Fi.getEnvAtob=Fi.getEnvBtoa=void 0,Fi.getEnvBtoa=function(){return "undefined"!=typeof window?window.btoa:Ui},Fi.getEnvAtob=function(){return "undefined"!=typeof window?window.atob:zi};var Ui=function(t){return ei.from(t.toString(),"binary").toString("base64")},zi=function(t){return ei.from(t,"base64").toString("binary")};!function(t){var e=yt$1&&yt$1.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}});}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r];}),r=yt$1&&yt$1.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e});}:function(t,e){t.default=e;}),n=yt$1&&yt$1.__importStar||function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&e(n,t,i);return r(n,t),n};Object.defineProperty(t,"__esModule",{value:!0}),t.stringToArrayBuffer=t.arrayBufferToString=t.hexStringToArrayBuffer=t.arrayBufferToHexString=t.decodeBase64Url=t.encodeBase64Url=t.decodeBase64=t.encodeBase64=void 0;var i=n(Fi);t.encodeBase64=function(e){var r="";return r="string"==typeof e?e:t.arrayBufferToString(e),i.getEnvBtoa()(r)},t.decodeBase64=function(e){var r=i.getEnvAtob()(e),n=t.stringToArrayBuffer(r);return a(n)};var o=function(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)&&void 0!==t.buffer?new Uint8Array(t.buffer):new Uint8Array(t)},a=function(t){for(var e=!0,r=0;r<t.length;r++)if(t[r]>126||t[r]<32&&13!==t[r]&&10!==t[r]){e=!1;break}var n=null;if(e){n="";for(r=0;r<t.length;r++)n+=String.fromCharCode(t[r]);}else n=t;return n};t.encodeBase64Url=function(e){return t.encodeBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},t.decodeBase64Url=function(e){return e=e.replace(/-/g,"+").replace(/_/g,"/"),t.decodeBase64(e)},t.arrayBufferToHexString=function(t){for(var e=o(t),r="",n=0;n<e.length;n++){var i=(255&e[n]).toString(16);r+=i=1===i.length?"0"+i:i;}return r},t.hexStringToArrayBuffer=function(t){for(var e=[],r=t.length,n=0;n<r;n+=2)e.push(parseInt(t.substr(n,2),16));return new Uint8Array(e)},t.arrayBufferToString=function(t){var e=o(t),r=new Array(e.length);return e.forEach((function(t,e){r[e]=t;})),String.fromCharCode.apply(null,r)},t.stringToArrayBuffer=function(t){return new Uint8Array(t.length).map((function(e,r){return t.charCodeAt(r)}))};}(zn$1);var Ki={},qi=yt$1&&yt$1.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}});}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r];}),Hi=yt$1&&yt$1.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e});}:function(t,e){t.default=e;}),Vi=yt$1&&yt$1.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&qi(e,t,r);return Hi(e,t),e};Object.defineProperty(Ki,"__esModule",{value:!0}),Ki.binToPem=Ki.pemToBin=void 0;var Wi=Vi(zn$1),Ji={public:"PUBLIC KEY",private:"PRIVATE KEY",encryptedPrivate:"ENCRYPTED PRIVATE KEY",certificate:"CERTIFICATE",certRequest:"CERTIFICATE REQUEST"};Ki.pemToBin=function(t){var e=Zi(t);return Wi.decodeBase64(e)},Ki.binToPem=function(t,e){var r=Wi.encodeBase64(t);return Yi(r,e)};var Yi=function(t,e){for(var r=Ji[e],n="-----BEGIN "+r+"-----\n";t.length>0;)n+=t.substring(0,64)+"\n",t=t.substring(64);return n=n+"-----END "+r+"-----"},Zi=function(t){var e=RegExp("^-----[s]*BEGIN[^-]*-----$","gm"),r=RegExp("^-----[s]*END[^-]*-----$","gm");try{var n=t.split(e)[1].split(r)[0];return n=n.replace(/\r?\n/g,"")}catch(t){throw new Error("Invalid format as PEM")}};!function(t){var e=yt$1&&yt$1.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}});}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r];}),r=yt$1&&yt$1.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e});}:function(t,e){t.default=e;}),n=yt$1&&yt$1.__importStar||function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&e(n,t,i);return r(n,t),n};Object.defineProperty(t,"__esModule",{value:!0}),t.formatter=t.encoder=void 0;var i,o,a=n(zn$1),s=n(Ki);!function(t){t.encodeBase64=a.encodeBase64,t.decodeBase64=a.decodeBase64,t.encodeBase64Url=a.encodeBase64Url,t.decodeBase64Url=a.decodeBase64Url,t.arrayBufferToHexString=a.arrayBufferToHexString,t.hexStringToArrayBuffer=a.hexStringToArrayBuffer,t.stringToArrayBuffer=a.stringToArrayBuffer,t.arrayBufferToString=a.arrayBufferToString;}(i=t.encoder||(t.encoder={})),function(t){t.binToPem=s.binToPem,t.pemToBin=s.pemToBin;}(o=t.formatter||(t.formatter={})),t.default={encoder:i,formatter:o};}(Un$1);var Gi={},Xi="6.5.4",$i={},Qi={};!function(t){var e=Qi;function r(t){return 1===t.length?"0"+t:t}function n(t){for(var e="",n=0;n<t.length;n++)e+=r(t[n].toString(16));return e}e.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return [];var r=[];if("string"!=typeof t){for(var n=0;n<t.length;n++)r[n]=0|t[n];return r}if("hex"===e){(t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t);for(n=0;n<t.length;n+=2)r.push(parseInt(t[n]+t[n+1],16));}else for(n=0;n<t.length;n++){var i=t.charCodeAt(n),o=i>>8,a=255&i;o?r.push(o,a):r.push(a);}return r},e.zero2=r,e.toHex=n,e.encode=function(t,e){return "hex"===e?n(t):t};}(),function(t){var e=$i,r=kr$1.exports,n=Yr,i=Qi;e.assert=n,e.toArray=i.toArray,e.zero2=i.zero2,e.toHex=i.toHex,e.encode=i.encode,e.getNAF=function(t,e,r){var n=new Array(Math.max(t.bitLength(),r)+1);n.fill(0);for(var i=1<<e+1,o=t.clone(),a=0;a<n.length;a++){var s,u=o.andln(i-1);o.isOdd()?(s=u>(i>>1)-1?(i>>1)-u:u,o.isubn(s)):s=0,n[a]=s,o.iushrn(1);}return n},e.getJSF=function(t,e){var r=[[],[]];t=t.clone(),e=e.clone();for(var n,i=0,o=0;t.cmpn(-i)>0||e.cmpn(-o)>0;){var a,s,u=t.andln(3)+i&3,c=e.andln(3)+o&3;3===u&&(u=-1),3===c&&(c=-1),a=0==(1&u)?0:3!==(n=t.andln(7)+i&7)&&5!==n||2!==c?u:-u,r[0].push(a),s=0==(1&c)?0:3!==(n=e.andln(7)+o&7)&&5!==n||2!==u?c:-c,r[1].push(s),2*i===a+1&&(i=1-i),2*o===s+1&&(o=1-o),t.iushrn(1),e.iushrn(1);}return r},e.cachedProperty=function(t,e,r){var n="_"+e;t.prototype[e]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)};},e.parseBytes=function(t){return "string"==typeof t?e.toArray(t,"hex"):t},e.intFromLE=function(t){return new r(t,"hex","le")};}();var to,eo={exports:{}};function ro(t){this.rand=t;}if(eo.exports=function(t){return to||(to=new ro(null)),to.generate(t)},eo.exports.Rand=ro,ro.prototype.generate=function(t){return this._rand(t)},ro.prototype._rand=function(t){if(this.rand.getBytes)return this.rand.getBytes(t);for(var e=new Uint8Array(t),r=0;r<e.length;r++)e[r]=this.rand.getByte();return e},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?ro.prototype._rand=function(t){var e=new Uint8Array(t);return self.crypto.getRandomValues(e),e}:self.msCrypto&&self.msCrypto.getRandomValues?ro.prototype._rand=function(t){var e=new Uint8Array(t);return self.msCrypto.getRandomValues(e),e}:"object"==typeof window&&(ro.prototype._rand=function(){throw new Error("Not implemented yet")});else try{if("function"!=typeof null.randomBytes)throw new Error("Not supported");ro.prototype._rand=function(t){return null.randomBytes(t)};}catch(t){}var no={},io=kr$1.exports,oo=$i,ao=oo.getNAF,so=oo.getJSF,uo=oo.assert;function co(t,e){this.type=t,this.p=new io(e.p,16),this.red=e.prime?io.red(e.prime):io.mont(this.p),this.zero=new io(0).toRed(this.red),this.one=new io(1).toRed(this.red),this.two=new io(2).toRed(this.red),this.n=e.n&&new io(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red));}var lo=co;function fo(t,e){this.curve=t,this.type=e,this.precomputed=null;}co.prototype.point=function(){throw new Error("Not implemented")},co.prototype.validate=function(){throw new Error("Not implemented")},co.prototype._fixedNafMul=function(t,e){uo(t.precomputed);var r=t._getDoubles(),n=ao(e,1,this._bitLength),i=(1<<r.step+1)-(r.step%2==0?2:1);i/=3;var o,a,s=[];for(o=0;o<n.length;o+=r.step){a=0;for(var u=o+r.step-1;u>=o;u--)a=(a<<1)+n[u];s.push(a);}for(var c=this.jpoint(null,null,null),l=this.jpoint(null,null,null),f=i;f>0;f--){for(o=0;o<s.length;o++)(a=s[o])===f?l=l.mixedAdd(r.points[o]):a===-f&&(l=l.mixedAdd(r.points[o].neg()));c=c.add(l);}return c.toP()},co.prototype._wnafMul=function(t,e){var r=4,n=t._getNAFPoints(r);r=n.wnd;for(var i=n.points,o=ao(e,r,this._bitLength),a=this.jpoint(null,null,null),s=o.length-1;s>=0;s--){for(var u=0;s>=0&&0===o[s];s--)u++;if(s>=0&&u++,a=a.dblp(u),s<0)break;var c=o[s];uo(0!==c),a="affine"===t.type?c>0?a.mixedAdd(i[c-1>>1]):a.mixedAdd(i[-c-1>>1].neg()):c>0?a.add(i[c-1>>1]):a.add(i[-c-1>>1].neg());}return "affine"===t.type?a.toP():a},co.prototype._wnafMulAdd=function(t,e,r,n,i){var o,a,s,u=this._wnafT1,c=this._wnafT2,l=this._wnafT3,f=0;for(o=0;o<n;o++){var h=(s=e[o])._getNAFPoints(t);u[o]=h.wnd,c[o]=h.points;}for(o=n-1;o>=1;o-=2){var d=o-1,p=o;if(1===u[d]&&1===u[p]){var y=[e[d],null,null,e[p]];0===e[d].y.cmp(e[p].y)?(y[1]=e[d].add(e[p]),y[2]=e[d].toJ().mixedAdd(e[p].neg())):0===e[d].y.cmp(e[p].y.redNeg())?(y[1]=e[d].toJ().mixedAdd(e[p]),y[2]=e[d].add(e[p].neg())):(y[1]=e[d].toJ().mixedAdd(e[p]),y[2]=e[d].toJ().mixedAdd(e[p].neg()));var g=[-3,-1,-5,-7,0,7,5,1,3],m=so(r[d],r[p]);for(f=Math.max(m[0].length,f),l[d]=new Array(f),l[p]=new Array(f),a=0;a<f;a++){var b=0|m[0][a],v=0|m[1][a];l[d][a]=g[3*(b+1)+(v+1)],l[p][a]=0,c[d]=y;}}else l[d]=ao(r[d],u[d],this._bitLength),l[p]=ao(r[p],u[p],this._bitLength),f=Math.max(l[d].length,f),f=Math.max(l[p].length,f);}var w=this.jpoint(null,null,null),_=this._wnafT4;for(o=f;o>=0;o--){for(var S=0;o>=0;){var E=!0;for(a=0;a<n;a++)_[a]=0|l[a][o],0!==_[a]&&(E=!1);if(!E)break;S++,o--;}if(o>=0&&S++,w=w.dblp(S),o<0)break;for(a=0;a<n;a++){var I=_[a];0!==I&&(I>0?s=c[a][I-1>>1]:I<0&&(s=c[a][-I-1>>1].neg()),w="affine"===s.type?w.mixedAdd(s):w.add(s));}}for(o=0;o<n;o++)c[o]=null;return i?w:w.toP()},co.BasePoint=fo,fo.prototype.eq=function(){throw new Error("Not implemented")},fo.prototype.validate=function(){return this.curve.validate(this)},co.prototype.decodePoint=function(t,e){t=oo.toArray(t,e);var r=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1==2*r)return 6===t[0]?uo(t[t.length-1]%2==0):7===t[0]&&uo(t[t.length-1]%2==1),this.point(t.slice(1,1+r),t.slice(1+r,1+2*r));if((2===t[0]||3===t[0])&&t.length-1===r)return this.pointFromX(t.slice(1,1+r),3===t[0]);throw new Error("Unknown point format")},fo.prototype.encodeCompressed=function(t){return this.encode(t,!0)},fo.prototype._encode=function(t){var e=this.curve.p.byteLength(),r=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",e))},fo.prototype.encode=function(t,e){return oo.encode(this._encode(e),t)},fo.prototype.precompute=function(t){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,t),e.beta=this._getBeta(),this.precomputed=e,this},fo.prototype._hasDoubles=function(t){if(!this.precomputed)return !1;var e=this.precomputed.doubles;return !!e&&e.points.length>=Math.ceil((t.bitLength()+1)/e.step)},fo.prototype._getDoubles=function(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<e;i+=t){for(var o=0;o<t;o++)n=n.dbl();r.push(n);}return {step:t,points:r}},fo.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],r=(1<<t)-1,n=1===r?null:this.dbl(),i=1;i<r;i++)e[i]=e[i-1].add(n);return {wnd:t,points:e}},fo.prototype._getBeta=function(){return null},fo.prototype.dblp=function(t){for(var e=this,r=0;r<t;r++)e=e.dbl();return e};var ho=$i,po=kr$1.exports,yo=Or$1.exports,go=lo,mo=ho.assert;function bo(t){go.call(this,"short",t),this.a=new po(t.a,16).toRed(this.red),this.b=new po(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4);}yo(bo,go);var vo=bo;function wo(t,e,r,n){go.BasePoint.call(this,t,"affine"),null===e&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new po(e,16),this.y=new po(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1);}function _o(t,e,r,n){go.BasePoint.call(this,t,"jacobian"),null===e&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new po(0)):(this.x=new po(e,16),this.y=new po(r,16),this.z=new po(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one;}bo.prototype._getEndomorphism=function(t){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var e,r;if(t.beta)e=new po(t.beta,16).toRed(this.red);else {var n=this._getEndoRoots(this.p);e=(e=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red);}if(t.lambda)r=new po(t.lambda,16);else {var i=this._getEndoRoots(this.n);0===this.g.mul(i[0]).x.cmp(this.g.x.redMul(e))?r=i[0]:(r=i[1],mo(0===this.g.mul(r).x.cmp(this.g.x.redMul(e))));}return {beta:e,lambda:r,basis:t.basis?t.basis.map((function(t){return {a:new po(t.a,16),b:new po(t.b,16)}})):this._getEndoBasis(r)}}},bo.prototype._getEndoRoots=function(t){var e=t===this.p?this.red:po.mont(t),r=new po(2).toRed(e).redInvm(),n=r.redNeg(),i=new po(3).toRed(e).redNeg().redSqrt().redMul(r);return [n.redAdd(i).fromRed(),n.redSub(i).fromRed()]},bo.prototype._getEndoBasis=function(t){for(var e,r,n,i,o,a,s,u,c,l=this.n.ushrn(Math.floor(this.n.bitLength()/2)),f=t,h=this.n.clone(),d=new po(1),p=new po(0),y=new po(0),g=new po(1),m=0;0!==f.cmpn(0);){var b=h.div(f);u=h.sub(b.mul(f)),c=y.sub(b.mul(d));var v=g.sub(b.mul(p));if(!n&&u.cmp(l)<0)e=s.neg(),r=d,n=u.neg(),i=c;else if(n&&2==++m)break;s=u,h=f,f=u,y=d,d=c,g=p,p=v;}o=u.neg(),a=c;var w=n.sqr().add(i.sqr());return o.sqr().add(a.sqr()).cmp(w)>=0&&(o=e,a=r),n.negative&&(n=n.neg(),i=i.neg()),o.negative&&(o=o.neg(),a=a.neg()),[{a:n,b:i},{a:o,b:a}]},bo.prototype._endoSplit=function(t){var e=this.endo.basis,r=e[0],n=e[1],i=n.b.mul(t).divRound(this.n),o=r.b.neg().mul(t).divRound(this.n),a=i.mul(r.a),s=o.mul(n.a),u=i.mul(r.b),c=o.mul(n.b);return {k1:t.sub(a).sub(s),k2:u.add(c).neg()}},bo.prototype.pointFromX=function(t,e){(t=new po(t,16)).red||(t=t.toRed(this.red));var r=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var i=n.fromRed().isOdd();return (e&&!i||!e&&i)&&(n=n.redNeg()),this.point(t,n)},bo.prototype.validate=function(t){if(t.inf)return !0;var e=t.x,r=t.y,n=this.a.redMul(e),i=e.redSqr().redMul(e).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(i).cmpn(0)},bo.prototype._endoWnafMulAdd=function(t,e,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,o=0;o<t.length;o++){var a=this._endoSplit(e[o]),s=t[o],u=s._getBeta();a.k1.negative&&(a.k1.ineg(),s=s.neg(!0)),a.k2.negative&&(a.k2.ineg(),u=u.neg(!0)),n[2*o]=s,n[2*o+1]=u,i[2*o]=a.k1,i[2*o+1]=a.k2;}for(var c=this._wnafMulAdd(1,n,i,2*o,r),l=0;l<2*o;l++)n[l]=null,i[l]=null;return c},yo(wo,go.BasePoint),bo.prototype.point=function(t,e,r){return new wo(this,t,e,r)},bo.prototype.pointFromJSON=function(t,e){return wo.fromJSON(this,t,e)},wo.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var r=this.curve,n=function(t){return r.point(t.x.redMul(r.endo.beta),t.y)};t.beta=e,e.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(n)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(n)}};}return e}},wo.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},wo.fromJSON=function(t,e,r){"string"==typeof e&&(e=JSON.parse(e));var n=t.point(e[0],e[1],r);if(!e[2])return n;function i(e){return t.point(e[0],e[1],r)}var o=e[2];return n.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[n].concat(o.doubles.points.map(i))},naf:o.naf&&{wnd:o.naf.wnd,points:[n].concat(o.naf.points.map(i))}},n},wo.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},wo.prototype.isInfinity=function(){return this.inf},wo.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);var e=this.y.redSub(t.y);0!==e.cmpn(0)&&(e=e.redMul(this.x.redSub(t.x).redInvm()));var r=e.redSqr().redISub(this.x).redISub(t.x),n=e.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},wo.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);var e=this.curve.a,r=this.x.redSqr(),n=t.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(e).redMul(n),o=i.redSqr().redISub(this.x.redAdd(this.x)),a=i.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)},wo.prototype.getX=function(){return this.x.fromRed()},wo.prototype.getY=function(){return this.y.fromRed()},wo.prototype.mul=function(t){return t=new po(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)},wo.prototype.mulAdd=function(t,e,r){var n=[this,e],i=[t,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},wo.prototype.jmulAdd=function(t,e,r){var n=[this,e],i=[t,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)},wo.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))},wo.prototype.neg=function(t){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var r=this.precomputed,n=function(t){return t.neg()};e.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}};}return e},wo.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},yo(_o,go.BasePoint),bo.prototype.jpoint=function(t,e,r){return new _o(this,t,e,r)},_o.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),e=t.redSqr(),r=this.x.redMul(e),n=this.y.redMul(e).redMul(t);return this.curve.point(r,n)},_o.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},_o.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(e),i=t.x.redMul(r),o=this.y.redMul(e.redMul(t.z)),a=t.y.redMul(r.redMul(this.z)),s=n.redSub(i),u=o.redSub(a);if(0===s.cmpn(0))return 0!==u.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=s.redSqr(),l=c.redMul(s),f=n.redMul(c),h=u.redSqr().redIAdd(l).redISub(f).redISub(f),d=u.redMul(f.redISub(h)).redISub(o.redMul(l)),p=this.z.redMul(t.z).redMul(s);return this.curve.jpoint(h,d,p)},_o.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var e=this.z.redSqr(),r=this.x,n=t.x.redMul(e),i=this.y,o=t.y.redMul(e).redMul(this.z),a=r.redSub(n),s=i.redSub(o);if(0===a.cmpn(0))return 0!==s.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),c=u.redMul(a),l=r.redMul(u),f=s.redSqr().redIAdd(c).redISub(l).redISub(l),h=s.redMul(l.redISub(f)).redISub(i.redMul(c)),d=this.z.redMul(a);return this.curve.jpoint(f,h,d)},_o.prototype.dblp=function(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var e;if(this.curve.zeroA||this.curve.threeA){var r=this;for(e=0;e<t;e++)r=r.dbl();return r}var n=this.curve.a,i=this.curve.tinv,o=this.x,a=this.y,s=this.z,u=s.redSqr().redSqr(),c=a.redAdd(a);for(e=0;e<t;e++){var l=o.redSqr(),f=c.redSqr(),h=f.redSqr(),d=l.redAdd(l).redIAdd(l).redIAdd(n.redMul(u)),p=o.redMul(f),y=d.redSqr().redISub(p.redAdd(p)),g=p.redISub(y),m=d.redMul(g);m=m.redIAdd(m).redISub(h);var b=c.redMul(s);e+1<t&&(u=u.redMul(h)),o=y,s=b,c=m;}return this.curve.jpoint(o,c.redMul(i),s)},_o.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},_o.prototype._zeroDbl=function(){var t,e,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),a=this.x.redAdd(i).redSqr().redISub(n).redISub(o);a=a.redIAdd(a);var s=n.redAdd(n).redIAdd(n),u=s.redSqr().redISub(a).redISub(a),c=o.redIAdd(o);c=(c=c.redIAdd(c)).redIAdd(c),t=u,e=s.redMul(a.redISub(u)).redISub(c),r=this.y.redAdd(this.y);}else {var l=this.x.redSqr(),f=this.y.redSqr(),h=f.redSqr(),d=this.x.redAdd(f).redSqr().redISub(l).redISub(h);d=d.redIAdd(d);var p=l.redAdd(l).redIAdd(l),y=p.redSqr(),g=h.redIAdd(h);g=(g=g.redIAdd(g)).redIAdd(g),t=y.redISub(d).redISub(d),e=p.redMul(d.redISub(t)).redISub(g),r=(r=this.y.redMul(this.z)).redIAdd(r);}return this.curve.jpoint(t,e,r)},_o.prototype._threeDbl=function(){var t,e,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),a=this.x.redAdd(i).redSqr().redISub(n).redISub(o);a=a.redIAdd(a);var s=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),u=s.redSqr().redISub(a).redISub(a);t=u;var c=o.redIAdd(o);c=(c=c.redIAdd(c)).redIAdd(c),e=s.redMul(a.redISub(u)).redISub(c),r=this.y.redAdd(this.y);}else {var l=this.z.redSqr(),f=this.y.redSqr(),h=this.x.redMul(f),d=this.x.redSub(l).redMul(this.x.redAdd(l));d=d.redAdd(d).redIAdd(d);var p=h.redIAdd(h),y=(p=p.redIAdd(p)).redAdd(p);t=d.redSqr().redISub(y),r=this.y.redAdd(this.z).redSqr().redISub(f).redISub(l);var g=f.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g),e=d.redMul(p.redISub(t)).redISub(g);}return this.curve.jpoint(t,e,r)},_o.prototype._dbl=function(){var t=this.curve.a,e=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),o=e.redSqr(),a=r.redSqr(),s=o.redAdd(o).redIAdd(o).redIAdd(t.redMul(i)),u=e.redAdd(e),c=(u=u.redIAdd(u)).redMul(a),l=s.redSqr().redISub(c.redAdd(c)),f=c.redISub(l),h=a.redSqr();h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var d=s.redMul(f).redISub(h),p=r.redAdd(r).redMul(n);return this.curve.jpoint(l,d,p)},_o.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),e=this.y.redSqr(),r=this.z.redSqr(),n=e.redSqr(),i=t.redAdd(t).redIAdd(t),o=i.redSqr(),a=this.x.redAdd(e).redSqr().redISub(t).redISub(n),s=(a=(a=(a=a.redIAdd(a)).redAdd(a).redIAdd(a)).redISub(o)).redSqr(),u=n.redIAdd(n);u=(u=(u=u.redIAdd(u)).redIAdd(u)).redIAdd(u);var c=i.redIAdd(a).redSqr().redISub(o).redISub(s).redISub(u),l=e.redMul(c);l=(l=l.redIAdd(l)).redIAdd(l);var f=this.x.redMul(s).redISub(l);f=(f=f.redIAdd(f)).redIAdd(f);var h=this.y.redMul(c.redMul(u.redISub(c)).redISub(a.redMul(s)));h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var d=this.z.redAdd(a).redSqr().redISub(r).redISub(s);return this.curve.jpoint(f,h,d)},_o.prototype.mul=function(t,e){return t=new po(t,e),this.curve._wnafMul(this,t)},_o.prototype.eq=function(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return !0;var e=this.z.redSqr(),r=t.z.redSqr();if(0!==this.x.redMul(r).redISub(t.x.redMul(e)).cmpn(0))return !1;var n=e.redMul(this.z),i=r.redMul(t.z);return 0===this.y.redMul(i).redISub(t.y.redMul(n)).cmpn(0)},_o.prototype.eqXToP=function(t){var e=this.z.redSqr(),r=t.toRed(this.curve.red).redMul(e);if(0===this.x.cmp(r))return !0;for(var n=t.clone(),i=this.curve.redN.redMul(e);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return !1;if(r.redIAdd(i),0===this.x.cmp(r))return !0}},_o.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},_o.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var So=kr$1.exports,Eo=Or$1.exports,Io=lo,Ao=$i;function ko(t){Io.call(this,"mont",t),this.a=new So(t.a,16).toRed(this.red),this.b=new So(t.b,16).toRed(this.red),this.i4=new So(4).toRed(this.red).redInvm(),this.two=new So(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two));}Eo(ko,Io);var Do=ko;function xo(t,e,r){Io.BasePoint.call(this,t,"projective"),null===e&&null===r?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new So(e,16),this.z=new So(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)));}ko.prototype.validate=function(t){var e=t.normalize().x,r=e.redSqr(),n=r.redMul(e).redAdd(r.redMul(this.a)).redAdd(e);return 0===n.redSqrt().redSqr().cmp(n)},Eo(xo,Io.BasePoint),ko.prototype.decodePoint=function(t,e){return this.point(Ao.toArray(t,e),1)},ko.prototype.point=function(t,e){return new xo(this,t,e)},ko.prototype.pointFromJSON=function(t){return xo.fromJSON(this,t)},xo.prototype.precompute=function(){},xo.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},xo.fromJSON=function(t,e){return new xo(t,e[0],e[1]||t.one)},xo.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},xo.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},xo.prototype.dbl=function(){var t=this.x.redAdd(this.z).redSqr(),e=this.x.redSub(this.z).redSqr(),r=t.redSub(e),n=t.redMul(e),i=r.redMul(e.redAdd(this.curve.a24.redMul(r)));return this.curve.point(n,i)},xo.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},xo.prototype.diffAdd=function(t,e){var r=this.x.redAdd(this.z),n=this.x.redSub(this.z),i=t.x.redAdd(t.z),o=t.x.redSub(t.z).redMul(r),a=i.redMul(n),s=e.z.redMul(o.redAdd(a).redSqr()),u=e.x.redMul(o.redISub(a).redSqr());return this.curve.point(s,u)},xo.prototype.mul=function(t){for(var e=t.clone(),r=this,n=this.curve.point(null,null),i=[];0!==e.cmpn(0);e.iushrn(1))i.push(e.andln(1));for(var o=i.length-1;o>=0;o--)0===i[o]?(r=r.diffAdd(n,this),n=n.dbl()):(n=r.diffAdd(n,this),r=r.dbl());return n},xo.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},xo.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},xo.prototype.eq=function(t){return 0===this.getX().cmp(t.getX())},xo.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},xo.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var To=$i,Po=kr$1.exports,Oo=Or$1.exports,Ro=lo,Co=To.assert;function Mo(t){this.twisted=1!=(0|t.a),this.mOneA=this.twisted&&-1==(0|t.a),this.extended=this.mOneA,Ro.call(this,"edwards",t),this.a=new Po(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new Po(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new Po(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),Co(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|t.c);}Oo(Mo,Ro);var No=Mo;function jo(t,e,r,n,i){Ro.BasePoint.call(this,t,"projective"),null===e&&null===r&&null===n?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new Po(e,16),this.y=new Po(r,16),this.z=n?new Po(n,16):this.curve.one,this.t=i&&new Po(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))));}Mo.prototype._mulA=function(t){return this.mOneA?t.redNeg():this.a.redMul(t)},Mo.prototype._mulC=function(t){return this.oneC?t:this.c.redMul(t)},Mo.prototype.jpoint=function(t,e,r,n){return this.point(t,e,r,n)},Mo.prototype.pointFromX=function(t,e){(t=new Po(t,16)).red||(t=t.toRed(this.red));var r=t.redSqr(),n=this.c2.redSub(this.a.redMul(r)),i=this.one.redSub(this.c2.redMul(this.d).redMul(r)),o=n.redMul(i.redInvm()),a=o.redSqrt();if(0!==a.redSqr().redSub(o).cmp(this.zero))throw new Error("invalid point");var s=a.fromRed().isOdd();return (e&&!s||!e&&s)&&(a=a.redNeg()),this.point(t,a)},Mo.prototype.pointFromY=function(t,e){(t=new Po(t,16)).red||(t=t.toRed(this.red));var r=t.redSqr(),n=r.redSub(this.c2),i=r.redMul(this.d).redMul(this.c2).redSub(this.a),o=n.redMul(i.redInvm());if(0===o.cmp(this.zero)){if(e)throw new Error("invalid point");return this.point(this.zero,t)}var a=o.redSqrt();if(0!==a.redSqr().redSub(o).cmp(this.zero))throw new Error("invalid point");return a.fromRed().isOdd()!==e&&(a=a.redNeg()),this.point(a,t)},Mo.prototype.validate=function(t){if(t.isInfinity())return !0;t.normalize();var e=t.x.redSqr(),r=t.y.redSqr(),n=e.redMul(this.a).redAdd(r),i=this.c2.redMul(this.one.redAdd(this.d.redMul(e).redMul(r)));return 0===n.cmp(i)},Oo(jo,Ro.BasePoint),Mo.prototype.pointFromJSON=function(t){return jo.fromJSON(this,t)},Mo.prototype.point=function(t,e,r,n){return new jo(this,t,e,r,n)},jo.fromJSON=function(t,e){return new jo(t,e[0],e[1],e[2])},jo.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},jo.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},jo.prototype._extDbl=function(){var t=this.x.redSqr(),e=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var n=this.curve._mulA(t),i=this.x.redAdd(this.y).redSqr().redISub(t).redISub(e),o=n.redAdd(e),a=o.redSub(r),s=n.redSub(e),u=i.redMul(a),c=o.redMul(s),l=i.redMul(s),f=a.redMul(o);return this.curve.point(u,c,f,l)},jo.prototype._projDbl=function(){var t,e,r,n,i,o,a=this.x.redAdd(this.y).redSqr(),s=this.x.redSqr(),u=this.y.redSqr();if(this.curve.twisted){var c=(n=this.curve._mulA(s)).redAdd(u);this.zOne?(t=a.redSub(s).redSub(u).redMul(c.redSub(this.curve.two)),e=c.redMul(n.redSub(u)),r=c.redSqr().redSub(c).redSub(c)):(i=this.z.redSqr(),o=c.redSub(i).redISub(i),t=a.redSub(s).redISub(u).redMul(o),e=c.redMul(n.redSub(u)),r=c.redMul(o));}else n=s.redAdd(u),i=this.curve._mulC(this.z).redSqr(),o=n.redSub(i).redSub(i),t=this.curve._mulC(a.redISub(n)).redMul(o),e=this.curve._mulC(n).redMul(s.redISub(u)),r=n.redMul(o);return this.curve.point(t,e,r)},jo.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},jo.prototype._extAdd=function(t){var e=this.y.redSub(this.x).redMul(t.y.redSub(t.x)),r=this.y.redAdd(this.x).redMul(t.y.redAdd(t.x)),n=this.t.redMul(this.curve.dd).redMul(t.t),i=this.z.redMul(t.z.redAdd(t.z)),o=r.redSub(e),a=i.redSub(n),s=i.redAdd(n),u=r.redAdd(e),c=o.redMul(a),l=s.redMul(u),f=o.redMul(u),h=a.redMul(s);return this.curve.point(c,l,h,f)},jo.prototype._projAdd=function(t){var e,r,n=this.z.redMul(t.z),i=n.redSqr(),o=this.x.redMul(t.x),a=this.y.redMul(t.y),s=this.curve.d.redMul(o).redMul(a),u=i.redSub(s),c=i.redAdd(s),l=this.x.redAdd(this.y).redMul(t.x.redAdd(t.y)).redISub(o).redISub(a),f=n.redMul(u).redMul(l);return this.curve.twisted?(e=n.redMul(c).redMul(a.redSub(this.curve._mulA(o))),r=u.redMul(c)):(e=n.redMul(c).redMul(a.redSub(o)),r=this.curve._mulC(u).redMul(c)),this.curve.point(f,e,r)},jo.prototype.add=function(t){return this.isInfinity()?t:t.isInfinity()?this:this.curve.extended?this._extAdd(t):this._projAdd(t)},jo.prototype.mul=function(t){return this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve._wnafMul(this,t)},jo.prototype.mulAdd=function(t,e,r){return this.curve._wnafMulAdd(1,[this,e],[t,r],2,!1)},jo.prototype.jmulAdd=function(t,e,r){return this.curve._wnafMulAdd(1,[this,e],[t,r],2,!0)},jo.prototype.normalize=function(){if(this.zOne)return this;var t=this.z.redInvm();return this.x=this.x.redMul(t),this.y=this.y.redMul(t),this.t&&(this.t=this.t.redMul(t)),this.z=this.curve.one,this.zOne=!0,this},jo.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},jo.prototype.getX=function(){return this.normalize(),this.x.fromRed()},jo.prototype.getY=function(){return this.normalize(),this.y.fromRed()},jo.prototype.eq=function(t){return this===t||0===this.getX().cmp(t.getX())&&0===this.getY().cmp(t.getY())},jo.prototype.eqXToP=function(t){var e=t.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(e))return !0;for(var r=t.clone(),n=this.curve.redN.redMul(this.z);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return !1;if(e.redIAdd(n),0===this.x.cmp(e))return !0}},jo.prototype.toP=jo.prototype.normalize,jo.prototype.mixedAdd=jo.prototype.add,function(t){var e=t;e.base=lo,e.short=vo,e.mont=Do,e.edwards=No;}(no);var Bo={},Lo={},Fo={},Uo=Yr,zo=Or$1.exports;function Ko(t,e){return 55296==(64512&t.charCodeAt(e))&&(!(e<0||e+1>=t.length)&&56320==(64512&t.charCodeAt(e+1)))}function qo(t){return (t>>>24|t>>>8&65280|t<<8&16711680|(255&t)<<24)>>>0}function Ho(t){return 1===t.length?"0"+t:t}function Vo(t){return 7===t.length?"0"+t:6===t.length?"00"+t:5===t.length?"000"+t:4===t.length?"0000"+t:3===t.length?"00000"+t:2===t.length?"000000"+t:1===t.length?"0000000"+t:t}Fo.inherits=zo,Fo.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return [];var r=[];if("string"==typeof t)if(e){if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),i=0;i<t.length;i+=2)r.push(parseInt(t[i]+t[i+1],16));}else for(var n=0,i=0;i<t.length;i++){var o=t.charCodeAt(i);o<128?r[n++]=o:o<2048?(r[n++]=o>>6|192,r[n++]=63&o|128):Ko(t,i)?(o=65536+((1023&o)<<10)+(1023&t.charCodeAt(++i)),r[n++]=o>>18|240,r[n++]=o>>12&63|128,r[n++]=o>>6&63|128,r[n++]=63&o|128):(r[n++]=o>>12|224,r[n++]=o>>6&63|128,r[n++]=63&o|128);}else for(i=0;i<t.length;i++)r[i]=0|t[i];return r},Fo.toHex=function(t){for(var e="",r=0;r<t.length;r++)e+=Ho(t[r].toString(16));return e},Fo.htonl=qo,Fo.toHex32=function(t,e){for(var r="",n=0;n<t.length;n++){var i=t[n];"little"===e&&(i=qo(i)),r+=Vo(i.toString(16));}return r},Fo.zero2=Ho,Fo.zero8=Vo,Fo.join32=function(t,e,r,n){var i=r-e;Uo(i%4==0);for(var o=new Array(i/4),a=0,s=e;a<o.length;a++,s+=4){var u;u="big"===n?t[s]<<24|t[s+1]<<16|t[s+2]<<8|t[s+3]:t[s+3]<<24|t[s+2]<<16|t[s+1]<<8|t[s],o[a]=u>>>0;}return o},Fo.split32=function(t,e){for(var r=new Array(4*t.length),n=0,i=0;n<t.length;n++,i+=4){var o=t[n];"big"===e?(r[i]=o>>>24,r[i+1]=o>>>16&255,r[i+2]=o>>>8&255,r[i+3]=255&o):(r[i+3]=o>>>24,r[i+2]=o>>>16&255,r[i+1]=o>>>8&255,r[i]=255&o);}return r},Fo.rotr32=function(t,e){return t>>>e|t<<32-e},Fo.rotl32=function(t,e){return t<<e|t>>>32-e},Fo.sum32=function(t,e){return t+e>>>0},Fo.sum32_3=function(t,e,r){return t+e+r>>>0},Fo.sum32_4=function(t,e,r,n){return t+e+r+n>>>0},Fo.sum32_5=function(t,e,r,n,i){return t+e+r+n+i>>>0},Fo.sum64=function(t,e,r,n){var i=t[e],o=n+t[e+1]>>>0,a=(o<n?1:0)+r+i;t[e]=a>>>0,t[e+1]=o;},Fo.sum64_hi=function(t,e,r,n){return (e+n>>>0<e?1:0)+t+r>>>0},Fo.sum64_lo=function(t,e,r,n){return e+n>>>0},Fo.sum64_4_hi=function(t,e,r,n,i,o,a,s){var u=0,c=e;return u+=(c=c+n>>>0)<e?1:0,u+=(c=c+o>>>0)<o?1:0,t+r+i+a+(u+=(c=c+s>>>0)<s?1:0)>>>0},Fo.sum64_4_lo=function(t,e,r,n,i,o,a,s){return e+n+o+s>>>0},Fo.sum64_5_hi=function(t,e,r,n,i,o,a,s,u,c){var l=0,f=e;return l+=(f=f+n>>>0)<e?1:0,l+=(f=f+o>>>0)<o?1:0,l+=(f=f+s>>>0)<s?1:0,t+r+i+a+u+(l+=(f=f+c>>>0)<c?1:0)>>>0},Fo.sum64_5_lo=function(t,e,r,n,i,o,a,s,u,c){return e+n+o+s+c>>>0},Fo.rotr64_hi=function(t,e,r){return (e<<32-r|t>>>r)>>>0},Fo.rotr64_lo=function(t,e,r){return (t<<32-r|e>>>r)>>>0},Fo.shr64_hi=function(t,e,r){return t>>>r},Fo.shr64_lo=function(t,e,r){return (t<<32-r|e>>>r)>>>0};var Wo={},Jo=Fo,Yo=Yr;function Zo(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32;}Wo.BlockHash=Zo,Zo.prototype.update=function(t,e){if(t=Jo.toArray(t,e),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){var r=(t=this.pending).length%this._delta8;this.pending=t.slice(t.length-r,t.length),0===this.pending.length&&(this.pending=null),t=Jo.join32(t,0,t.length-r,this.endian);for(var n=0;n<t.length;n+=this._delta32)this._update(t,n,n+this._delta32);}return this},Zo.prototype.digest=function(t){return this.update(this._pad()),Yo(null===this.pending),this._digest(t)},Zo.prototype._pad=function(){var t=this.pendingTotal,e=this._delta8,r=e-(t+this.padLength)%e,n=new Array(r+this.padLength);n[0]=128;for(var i=1;i<r;i++)n[i]=0;if(t<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)n[i++]=0;n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=t>>>24&255,n[i++]=t>>>16&255,n[i++]=t>>>8&255,n[i++]=255&t;}else for(n[i++]=255&t,n[i++]=t>>>8&255,n[i++]=t>>>16&255,n[i++]=t>>>24&255,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,o=8;o<this.padLength;o++)n[i++]=0;return n};var Go={},Xo={},$o=Fo.rotr32;function Qo(t,e,r){return t&e^~t&r}function ta(t,e,r){return t&e^t&r^e&r}function ea(t,e,r){return t^e^r}Xo.ft_1=function(t,e,r,n){return 0===t?Qo(e,r,n):1===t||3===t?ea(e,r,n):2===t?ta(e,r,n):void 0},Xo.ch32=Qo,Xo.maj32=ta,Xo.p32=ea,Xo.s0_256=function(t){return $o(t,2)^$o(t,13)^$o(t,22)},Xo.s1_256=function(t){return $o(t,6)^$o(t,11)^$o(t,25)},Xo.g0_256=function(t){return $o(t,7)^$o(t,18)^t>>>3},Xo.g1_256=function(t){return $o(t,17)^$o(t,19)^t>>>10};var ra=Fo,na=Wo,ia=Xo,oa=ra.rotl32,aa=ra.sum32,sa=ra.sum32_5,ua=ia.ft_1,ca=na.BlockHash,la=[1518500249,1859775393,2400959708,3395469782];function fa(){if(!(this instanceof fa))return new fa;ca.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80);}ra.inherits(fa,ca);var ha=fa;fa.blockSize=512,fa.outSize=160,fa.hmacStrength=80,fa.padLength=64,fa.prototype._update=function(t,e){for(var r=this.W,n=0;n<16;n++)r[n]=t[e+n];for(;n<r.length;n++)r[n]=oa(r[n-3]^r[n-8]^r[n-14]^r[n-16],1);var i=this.h[0],o=this.h[1],a=this.h[2],s=this.h[3],u=this.h[4];for(n=0;n<r.length;n++){var c=~~(n/20),l=sa(oa(i,5),ua(c,o,a,s),u,r[n],la[c]);u=s,s=a,a=oa(o,30),o=i,i=l;}this.h[0]=aa(this.h[0],i),this.h[1]=aa(this.h[1],o),this.h[2]=aa(this.h[2],a),this.h[3]=aa(this.h[3],s),this.h[4]=aa(this.h[4],u);},fa.prototype._digest=function(t){return "hex"===t?ra.toHex32(this.h,"big"):ra.split32(this.h,"big")};var da=Fo,pa=Wo,ya=Xo,ga=Yr,ma=da.sum32,ba=da.sum32_4,va=da.sum32_5,wa=ya.ch32,_a=ya.maj32,Sa=ya.s0_256,Ea=ya.s1_256,Ia=ya.g0_256,Aa=ya.g1_256,ka=pa.BlockHash,Da=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function xa(){if(!(this instanceof xa))return new xa;ka.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=Da,this.W=new Array(64);}da.inherits(xa,ka);var Ta=xa;xa.blockSize=512,xa.outSize=256,xa.hmacStrength=192,xa.padLength=64,xa.prototype._update=function(t,e){for(var r=this.W,n=0;n<16;n++)r[n]=t[e+n];for(;n<r.length;n++)r[n]=ba(Aa(r[n-2]),r[n-7],Ia(r[n-15]),r[n-16]);var i=this.h[0],o=this.h[1],a=this.h[2],s=this.h[3],u=this.h[4],c=this.h[5],l=this.h[6],f=this.h[7];for(ga(this.k.length===r.length),n=0;n<r.length;n++){var h=va(f,Ea(u),wa(u,c,l),this.k[n],r[n]),d=ma(Sa(i),_a(i,o,a));f=l,l=c,c=u,u=ma(s,h),s=a,a=o,o=i,i=ma(h,d);}this.h[0]=ma(this.h[0],i),this.h[1]=ma(this.h[1],o),this.h[2]=ma(this.h[2],a),this.h[3]=ma(this.h[3],s),this.h[4]=ma(this.h[4],u),this.h[5]=ma(this.h[5],c),this.h[6]=ma(this.h[6],l),this.h[7]=ma(this.h[7],f);},xa.prototype._digest=function(t){return "hex"===t?da.toHex32(this.h,"big"):da.split32(this.h,"big")};var Pa=Fo,Oa=Ta;function Ra(){if(!(this instanceof Ra))return new Ra;Oa.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428];}Pa.inherits(Ra,Oa);var Ca=Ra;Ra.blockSize=512,Ra.outSize=224,Ra.hmacStrength=192,Ra.padLength=64,Ra.prototype._digest=function(t){return "hex"===t?Pa.toHex32(this.h.slice(0,7),"big"):Pa.split32(this.h.slice(0,7),"big")};var Ma=Fo,Na=Wo,ja=Yr,Ba=Ma.rotr64_hi,La=Ma.rotr64_lo,Fa=Ma.shr64_hi,Ua=Ma.shr64_lo,za=Ma.sum64,Ka=Ma.sum64_hi,qa=Ma.sum64_lo,Ha=Ma.sum64_4_hi,Va=Ma.sum64_4_lo,Wa=Ma.sum64_5_hi,Ja=Ma.sum64_5_lo,Ya=Na.BlockHash,Za=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Ga(){if(!(this instanceof Ga))return new Ga;Ya.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=Za,this.W=new Array(160);}Ma.inherits(Ga,Ya);var Xa=Ga;function $a(t,e,r,n,i){var o=t&r^~t&i;return o<0&&(o+=4294967296),o}function Qa(t,e,r,n,i,o){var a=e&n^~e&o;return a<0&&(a+=4294967296),a}function ts(t,e,r,n,i){var o=t&r^t&i^r&i;return o<0&&(o+=4294967296),o}function es(t,e,r,n,i,o){var a=e&n^e&o^n&o;return a<0&&(a+=4294967296),a}function rs(t,e){var r=Ba(t,e,28)^Ba(e,t,2)^Ba(e,t,7);return r<0&&(r+=4294967296),r}function ns(t,e){var r=La(t,e,28)^La(e,t,2)^La(e,t,7);return r<0&&(r+=4294967296),r}function is(t,e){var r=Ba(t,e,14)^Ba(t,e,18)^Ba(e,t,9);return r<0&&(r+=4294967296),r}function os(t,e){var r=La(t,e,14)^La(t,e,18)^La(e,t,9);return r<0&&(r+=4294967296),r}function as(t,e){var r=Ba(t,e,1)^Ba(t,e,8)^Fa(t,e,7);return r<0&&(r+=4294967296),r}function ss(t,e){var r=La(t,e,1)^La(t,e,8)^Ua(t,e,7);return r<0&&(r+=4294967296),r}function us(t,e){var r=Ba(t,e,19)^Ba(e,t,29)^Fa(t,e,6);return r<0&&(r+=4294967296),r}function cs(t,e){var r=La(t,e,19)^La(e,t,29)^Ua(t,e,6);return r<0&&(r+=4294967296),r}Ga.blockSize=1024,Ga.outSize=512,Ga.hmacStrength=192,Ga.padLength=128,Ga.prototype._prepareBlock=function(t,e){for(var r=this.W,n=0;n<32;n++)r[n]=t[e+n];for(;n<r.length;n+=2){var i=us(r[n-4],r[n-3]),o=cs(r[n-4],r[n-3]),a=r[n-14],s=r[n-13],u=as(r[n-30],r[n-29]),c=ss(r[n-30],r[n-29]),l=r[n-32],f=r[n-31];r[n]=Ha(i,o,a,s,u,c,l,f),r[n+1]=Va(i,o,a,s,u,c,l,f);}},Ga.prototype._update=function(t,e){this._prepareBlock(t,e);var r=this.W,n=this.h[0],i=this.h[1],o=this.h[2],a=this.h[3],s=this.h[4],u=this.h[5],c=this.h[6],l=this.h[7],f=this.h[8],h=this.h[9],d=this.h[10],p=this.h[11],y=this.h[12],g=this.h[13],m=this.h[14],b=this.h[15];ja(this.k.length===r.length);for(var v=0;v<r.length;v+=2){var w=m,_=b,S=is(f,h),E=os(f,h),I=$a(f,h,d,p,y),A=Qa(f,h,d,p,y,g),k=this.k[v],D=this.k[v+1],x=r[v],T=r[v+1],P=Wa(w,_,S,E,I,A,k,D,x,T),O=Ja(w,_,S,E,I,A,k,D,x,T);w=rs(n,i),_=ns(n,i),S=ts(n,i,o,a,s),E=es(n,i,o,a,s,u);var R=Ka(w,_,S,E),C=qa(w,_,S,E);m=y,b=g,y=d,g=p,d=f,p=h,f=Ka(c,l,P,O),h=qa(l,l,P,O),c=s,l=u,s=o,u=a,o=n,a=i,n=Ka(P,O,R,C),i=qa(P,O,R,C);}za(this.h,0,n,i),za(this.h,2,o,a),za(this.h,4,s,u),za(this.h,6,c,l),za(this.h,8,f,h),za(this.h,10,d,p),za(this.h,12,y,g),za(this.h,14,m,b);},Ga.prototype._digest=function(t){return "hex"===t?Ma.toHex32(this.h,"big"):Ma.split32(this.h,"big")};var ls=Fo,fs=Xa;function hs(){if(!(this instanceof hs))return new hs;fs.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428];}ls.inherits(hs,fs);var ds=hs;hs.blockSize=1024,hs.outSize=384,hs.hmacStrength=192,hs.padLength=128,hs.prototype._digest=function(t){return "hex"===t?ls.toHex32(this.h.slice(0,12),"big"):ls.split32(this.h.slice(0,12),"big")},Go.sha1=ha,Go.sha224=Ca,Go.sha256=Ta,Go.sha384=ds,Go.sha512=Xa;var ps={},ys=Fo,gs=Wo,ms=ys.rotl32,bs=ys.sum32,vs=ys.sum32_3,ws=ys.sum32_4,_s=gs.BlockHash;function Ss(){if(!(this instanceof Ss))return new Ss;_s.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little";}function Es(t,e,r,n){return t<=15?e^r^n:t<=31?e&r|~e&n:t<=47?(e|~r)^n:t<=63?e&n|r&~n:e^(r|~n)}function Is(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function As(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}ys.inherits(Ss,_s),ps.ripemd160=Ss,Ss.blockSize=512,Ss.outSize=160,Ss.hmacStrength=192,Ss.padLength=64,Ss.prototype._update=function(t,e){for(var r=this.h[0],n=this.h[1],i=this.h[2],o=this.h[3],a=this.h[4],s=r,u=n,c=i,l=o,f=a,h=0;h<80;h++){var d=bs(ms(ws(r,Es(h,n,i,o),t[ks[h]+e],Is(h)),xs[h]),a);r=a,a=o,o=ms(i,10),i=n,n=d,d=bs(ms(ws(s,Es(79-h,u,c,l),t[Ds[h]+e],As(h)),Ts[h]),f),s=f,f=l,l=ms(c,10),c=u,u=d;}d=vs(this.h[1],i,l),this.h[1]=vs(this.h[2],o,f),this.h[2]=vs(this.h[3],a,s),this.h[3]=vs(this.h[4],r,u),this.h[4]=vs(this.h[0],n,c),this.h[0]=d;},Ss.prototype._digest=function(t){return "hex"===t?ys.toHex32(this.h,"little"):ys.split32(this.h,"little")};var ks=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],Ds=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],xs=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],Ts=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],Ps=Fo,Os=Yr;function Rs(t,e,r){if(!(this instanceof Rs))return new Rs(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(Ps.toArray(e,r));}var Cs=Rs;Rs.prototype._init=function(t){t.length>this.blockSize&&(t=(new this.Hash).update(t).digest()),Os(t.length<=this.blockSize);for(var e=t.length;e<this.blockSize;e++)t.push(0);for(e=0;e<t.length;e++)t[e]^=54;for(this.inner=(new this.Hash).update(t),e=0;e<t.length;e++)t[e]^=106;this.outer=(new this.Hash).update(t);},Rs.prototype.update=function(t,e){return this.inner.update(t,e),this},Rs.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)},function(t){var e=Lo;e.utils=Fo,e.common=Wo,e.sha=Go,e.ripemd=ps,e.hmac=Cs,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160;}();var Ms={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}};!function(t){var e,r=Bo,n=Lo,i=no,o=$i.assert;function a(t){"short"===t.type?this.curve=new i.short(t):"edwards"===t.type?this.curve=new i.edwards(t):this.curve=new i.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,o(this.g.validate(),"Invalid curve"),o(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O");}function s(t,e){Object.defineProperty(r,t,{configurable:!0,enumerable:!0,get:function(){var n=new a(e);return Object.defineProperty(r,t,{configurable:!0,enumerable:!0,value:n}),n}});}r.PresetCurve=a,s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:n.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:n.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:n.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:n.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:n.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:n.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:n.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{e=Ms;}catch(t){e=void 0;}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:n.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",e]});}();var Ns=Lo,js=Qi,Bs=Yr;function Ls(t){if(!(this instanceof Ls))return new Ls(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=js.toArray(t.entropy,t.entropyEnc||"hex"),r=js.toArray(t.nonce,t.nonceEnc||"hex"),n=js.toArray(t.pers,t.persEnc||"hex");Bs(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n);}var Fs=Ls;Ls.prototype._init=function(t,e,r){var n=t.concat(e).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656;},Ls.prototype._hmac=function(){return new Ns.hmac(this.hash,this.K)},Ls.prototype._update=function(t){var e=this._hmac().update(this.V).update([0]);t&&(e=e.update(t)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest());},Ls.prototype.reseed=function(t,e,r,n){"string"!=typeof e&&(n=r,r=e,e=null),t=js.toArray(t,e),r=js.toArray(r,n),Bs(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(r||[])),this._reseed=1;},Ls.prototype.generate=function(t,e,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof e&&(n=r,r=e,e=null),r&&(r=js.toArray(r,n||"hex"),this._update(r));for(var i=[];i.length<t;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var o=i.slice(0,t);return this._update(r),this._reseed++,js.encode(o,e)};var Us=kr$1.exports,zs=$i.assert;function Ks(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc);}var qs=Ks;Ks.fromPublic=function(t,e,r){return e instanceof Ks?e:new Ks(t,{pub:e,pubEnc:r})},Ks.fromPrivate=function(t,e,r){return e instanceof Ks?e:new Ks(t,{priv:e,privEnc:r})},Ks.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},Ks.prototype.getPublic=function(t,e){return "string"==typeof t&&(e=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,t):this.pub},Ks.prototype.getPrivate=function(t){return "hex"===t?this.priv.toString(16,2):this.priv},Ks.prototype._importPrivate=function(t,e){this.priv=new Us(t,e||16),this.priv=this.priv.umod(this.ec.curve.n);},Ks.prototype._importPublic=function(t,e){if(t.x||t.y)return "mont"===this.ec.curve.type?zs(t.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||zs(t.x&&t.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,e);},Ks.prototype.derive=function(t){return t.validate()||zs(t.validate(),"public point not validated"),t.mul(this.priv).getX()},Ks.prototype.sign=function(t,e,r){return this.ec.sign(t,this,e,r)},Ks.prototype.verify=function(t,e){return this.ec.verify(t,e,this)},Ks.prototype.inspect=function(){return "<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var Hs=kr$1.exports,Vs=$i,Ws=Vs.assert;function Js(t,e){if(t instanceof Js)return t;this._importDER(t,e)||(Ws(t.r&&t.s,"Signature without r or s"),this.r=new Hs(t.r,16),this.s=new Hs(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam);}var Ys=Js;function Zs(){this.place=0;}function Gs(t,e){var r=t[e.place++];if(!(128&r))return r;var n=15&r;if(0===n||n>4)return !1;for(var i=0,o=0,a=e.place;o<n;o++,a++)i<<=8,i|=t[a],i>>>=0;return !(i<=127)&&(e.place=a,i)}function Xs(t){for(var e=0,r=t.length-1;!t[e]&&!(128&t[e+1])&&e<r;)e++;return 0===e?t:t.slice(e)}function $s(t,e){if(e<128)t.push(e);else {var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(128|r);--r;)t.push(e>>>(r<<3)&255);t.push(e);}}Js.prototype._importDER=function(t,e){t=Vs.toArray(t,e);var r=new Zs;if(48!==t[r.place++])return !1;var n=Gs(t,r);if(!1===n)return !1;if(n+r.place!==t.length)return !1;if(2!==t[r.place++])return !1;var i=Gs(t,r);if(!1===i)return !1;var o=t.slice(r.place,i+r.place);if(r.place+=i,2!==t[r.place++])return !1;var a=Gs(t,r);if(!1===a)return !1;if(t.length!==a+r.place)return !1;var s=t.slice(r.place,a+r.place);if(0===o[0]){if(!(128&o[1]))return !1;o=o.slice(1);}if(0===s[0]){if(!(128&s[1]))return !1;s=s.slice(1);}return this.r=new Hs(o),this.s=new Hs(s),this.recoveryParam=null,!0},Js.prototype.toDER=function(t){var e=this.r.toArray(),r=this.s.toArray();for(128&e[0]&&(e=[0].concat(e)),128&r[0]&&(r=[0].concat(r)),e=Xs(e),r=Xs(r);!(r[0]||128&r[1]);)r=r.slice(1);var n=[2];$s(n,e.length),(n=n.concat(e)).push(2),$s(n,r.length);var i=n.concat(r),o=[48];return $s(o,i.length),o=o.concat(i),Vs.encode(o,t)};var Qs=kr$1.exports,tu=Fs,eu=$i,ru=Bo,nu=eo.exports,iu=eu.assert,ou=qs,au=Ys;function su(t){if(!(this instanceof su))return new su(t);"string"==typeof t&&(iu(Object.prototype.hasOwnProperty.call(ru,t),"Unknown curve "+t),t=ru[t]),t instanceof ru.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash;}var uu=su;su.prototype.keyPair=function(t){return new ou(this,t)},su.prototype.keyFromPrivate=function(t,e){return ou.fromPrivate(this,t,e)},su.prototype.keyFromPublic=function(t,e){return ou.fromPublic(this,t,e)},su.prototype.genKeyPair=function(t){t||(t={});for(var e=new tu({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||nu(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),n=this.n.sub(new Qs(2));;){var i=new Qs(e.generate(r));if(!(i.cmp(n)>0))return i.iaddn(1),this.keyFromPrivate(i)}},su.prototype._truncateToN=function(t,e){var r=8*t.byteLength()-this.n.bitLength();return r>0&&(t=t.ushrn(r)),!e&&t.cmp(this.n)>=0?t.sub(this.n):t},su.prototype.sign=function(t,e,r,n){"object"==typeof r&&(n=r,r=null),n||(n={}),e=this.keyFromPrivate(e,r),t=this._truncateToN(new Qs(t,16));for(var i=this.n.byteLength(),o=e.getPrivate().toArray("be",i),a=t.toArray("be",i),s=new tu({hash:this.hash,entropy:o,nonce:a,pers:n.pers,persEnc:n.persEnc||"utf8"}),u=this.n.sub(new Qs(1)),c=0;;c++){var l=n.k?n.k(c):new Qs(s.generate(this.n.byteLength()));if(!((l=this._truncateToN(l,!0)).cmpn(1)<=0||l.cmp(u)>=0)){var f=this.g.mul(l);if(!f.isInfinity()){var h=f.getX(),d=h.umod(this.n);if(0!==d.cmpn(0)){var p=l.invm(this.n).mul(d.mul(e.getPrivate()).iadd(t));if(0!==(p=p.umod(this.n)).cmpn(0)){var y=(f.getY().isOdd()?1:0)|(0!==h.cmp(d)?2:0);return n.canonical&&p.cmp(this.nh)>0&&(p=this.n.sub(p),y^=1),new au({r:d,s:p,recoveryParam:y})}}}}}},su.prototype.verify=function(t,e,r,n){t=this._truncateToN(new Qs(t,16)),r=this.keyFromPublic(r,n);var i=(e=new au(e,"hex")).r,o=e.s;if(i.cmpn(1)<0||i.cmp(this.n)>=0)return !1;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return !1;var a,s=o.invm(this.n),u=s.mul(t).umod(this.n),c=s.mul(i).umod(this.n);return this.curve._maxwellTrick?!(a=this.g.jmulAdd(u,r.getPublic(),c)).isInfinity()&&a.eqXToP(i):!(a=this.g.mulAdd(u,r.getPublic(),c)).isInfinity()&&0===a.getX().umod(this.n).cmp(i)},su.prototype.recoverPubKey=function(t,e,r,n){iu((3&r)===r,"The recovery param is more than two bits"),e=new au(e,n);var i=this.n,o=new Qs(t),a=e.r,s=e.s,u=1&r,c=r>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&c)throw new Error("Unable to find sencond key candinate");a=c?this.curve.pointFromX(a.add(this.curve.n),u):this.curve.pointFromX(a,u);var l=e.r.invm(i),f=i.sub(o).mul(l).umod(i),h=s.mul(l).umod(i);return this.g.mulAdd(f,a,h)},su.prototype.getKeyRecoveryParam=function(t,e,r,n){if(null!==(e=new au(e,n)).recoveryParam)return e.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(t,e,i);}catch(t){continue}if(o.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var cu=$i,lu=cu.assert,fu=cu.parseBytes,hu=cu.cachedProperty;function du(t,e){this.eddsa=t,this._secret=fu(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=fu(e.pub);}du.fromPublic=function(t,e){return e instanceof du?e:new du(t,{pub:e})},du.fromSecret=function(t,e){return e instanceof du?e:new du(t,{secret:e})},du.prototype.secret=function(){return this._secret},hu(du,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),hu(du,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),hu(du,"privBytes",(function(){var t=this.eddsa,e=this.hash(),r=t.encodingLength-1,n=e.slice(0,t.encodingLength);return n[0]&=248,n[r]&=127,n[r]|=64,n})),hu(du,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),hu(du,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),hu(du,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),du.prototype.sign=function(t){return lu(this._secret,"KeyPair can only verify"),this.eddsa.sign(t,this)},du.prototype.verify=function(t,e){return this.eddsa.verify(t,e,this)},du.prototype.getSecret=function(t){return lu(this._secret,"KeyPair is public only"),cu.encode(this.secret(),t)},du.prototype.getPublic=function(t){return cu.encode(this.pubBytes(),t)};var pu=du,yu=kr$1.exports,gu=$i,mu=gu.assert,bu=gu.cachedProperty,vu=gu.parseBytes;function wu(t,e){this.eddsa=t,"object"!=typeof e&&(e=vu(e)),Array.isArray(e)&&(e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),mu(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof yu&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded;}bu(wu,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),bu(wu,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),bu(wu,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),bu(wu,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),wu.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},wu.prototype.toHex=function(){return gu.encode(this.toBytes(),"hex").toUpperCase()};var _u=wu,Su=Lo,Eu=Bo,Iu=$i,Au=Iu.assert,ku=Iu.parseBytes,Du=pu,xu=_u;function Tu(t){if(Au("ed25519"===t,"only tested with ed25519 so far"),!(this instanceof Tu))return new Tu(t);t=Eu[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=Su.sha512;}var Pu=Tu;Tu.prototype.sign=function(t,e){t=ku(t);var r=this.keyFromSecret(e),n=this.hashInt(r.messagePrefix(),t),i=this.g.mul(n),o=this.encodePoint(i),a=this.hashInt(o,r.pubBytes(),t).mul(r.priv()),s=n.add(a).umod(this.curve.n);return this.makeSignature({R:i,S:s,Rencoded:o})},Tu.prototype.verify=function(t,e,r){t=ku(t),e=this.makeSignature(e);var n=this.keyFromPublic(r),i=this.hashInt(e.Rencoded(),n.pubBytes(),t),o=this.g.mul(e.S());return e.R().add(n.pub().mul(i)).eq(o)},Tu.prototype.hashInt=function(){for(var t=this.hash(),e=0;e<arguments.length;e++)t.update(arguments[e]);return Iu.intFromLE(t.digest()).umod(this.curve.n)},Tu.prototype.keyFromPublic=function(t){return Du.fromPublic(this,t)},Tu.prototype.keyFromSecret=function(t){return Du.fromSecret(this,t)},Tu.prototype.makeSignature=function(t){return t instanceof xu?t:new xu(this,t)},Tu.prototype.encodePoint=function(t){var e=t.getY().toArray("le",this.encodingLength);return e[this.encodingLength-1]|=t.getX().isOdd()?128:0,e},Tu.prototype.decodePoint=function(t){var e=(t=Iu.parseBytes(t)).length-1,r=t.slice(0,e).concat(-129&t[e]),n=0!=(128&t[e]),i=Iu.intFromLE(r);return this.curve.pointFromY(i,n)},Tu.prototype.encodeInt=function(t){return t.toArray("le",this.encodingLength)},Tu.prototype.decodeInt=function(t){return Iu.intFromLE(t)},Tu.prototype.isPoint=function(t){return t instanceof this.pointClass},function(t){var e=Gi;e.version=Xi,e.utils=$i,e.rand=eo.exports,e.curve=no,e.curves=Bo,e.ec=uu,e.eddsa=Pu;}();var Ou={},Ru={};!function(t){var e=yt$1&&yt$1.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(t,"__esModule",{value:!0}),t.PBES2ESParams=t.PBKDF2Params=t.PBES2Params=t.PBEParameter=t.EncryptedPrivateKeyInfo=t.OneAsymmetricKey=t.SubjectPublicKeyInfo=t.KeyStructure=void 0;var r=e(Ar$1);t.KeyStructure=r.default.define("KeyStructure",(function(){this.choice({subjectPublicKeyInfo:this.use(t.SubjectPublicKeyInfo),oneAsymmetricKey:this.use(t.OneAsymmetricKey),encryptedPrivateKeyInfo:this.use(t.EncryptedPrivateKeyInfo)});})),t.SubjectPublicKeyInfo=r.default.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(n),this.key("subjectPublicKey").bitstr());})),t.OneAsymmetricKey=r.default.define("OneAsymmetricKey",(function(){this.seq().obj(this.key("version").use(i),this.key("privateKeyAlgorithm").use(n),this.key("privateKey").octstr(),this.key("attributes").implicit(0).optional().any(),this.key("publicKey").implicit(1).optional().bitstr());})),t.EncryptedPrivateKeyInfo=r.default.define("EncryptedPrivateKeyInfo",(function(){this.seq().obj(this.key("encryptionAlgorithm").use(n),this.key("encryptedData").octstr());})),t.PBEParameter=r.default.define("PBEParameter",(function(){this.seq().obj(this.key("salt").octstr(8),this.key("iterationCount").int());})),t.PBES2Params=r.default.define("PBES2Params",(function(){this.seq().obj(this.key("keyDerivationFunc").use(n),this.key("encryptionScheme").use(n));})),t.PBKDF2Params=r.default.define("PBKDF2Params",(function(){this.seq().obj(this.key("salt").choice({specified:this.octstr(),otherSource:this.use(n)}),this.key("iterationCount").int(),this.key("keyLength").int().optional(),this.key("prf").use(n).def({algorithm:[1,2,840,113549,2,7],parameters:ei.from([5,0])}));})),t.PBES2ESParams={"des-ede3-cbc":r.default.define("DesEde3CbcParams",(function(){this.octstr();})),"aes128-cbc":r.default.define("Aes128CbcParams",(function(){this.octstr();})),"aes192-cbc":r.default.define("Aes192CbcParams",(function(){this.octstr();})),"aes256-cbc":r.default.define("Aes256CbcParams",(function(){this.octstr();}))};var n=r.default.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional().any());})),i=r.default.define("Version",(function(){this.int();}));}(Ru),function(t){var e=yt$1&&yt$1.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}});}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r];}),r=yt$1&&yt$1.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e});}:function(t,e){t.default=e;}),n=yt$1&&yt$1.__importStar||function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&e(n,t,i);return r(n,t),n},i=yt$1&&yt$1.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(t,"__esModule",{value:!0}),t.appendLeadingZeros=t.pruneLeadingZeros=t.getJwkType=t.getSec1KeyType=t.getAsn1KeyType=t.isAsn1Public=t.isAsn1Encrypted=void 0;var o=i(Un$1),a=n(Bn$1),s=Ru;t.isAsn1Encrypted=function(e,r){var n;void 0===r&&(r="pem");try{n=(0,t.getAsn1KeyType)(e,r);}catch(t){return !1}return "encryptedPrivate"===n};t.isAsn1Public=function(e,r){var n;void 0===r&&(r="pem");try{n=(0,t.getAsn1KeyType)(e,r);}catch(t){return !1}return "public"===n};t.getAsn1KeyType=function(t,e){void 0===e&&(e="pem");var r="pem"===e?o.default.formatter.pemToBin(t):t,n=s.KeyStructure.decode(ei.from(r),"der");if("encryptedPrivateKeyInfo"===n.type)return "encryptedPrivate";if("oneAsymmetricKey"===n.type)return "private";if("subjectPublicKeyInfo"===n.type)return "public";throw new Error("NotSpkiNorPkcs8Key")};t.getSec1KeyType=function(t,e){var r=a.namedCurves[e].payloadSize,n=t instanceof Uint8Array?t:o.default.encoder.hexStringToArrayBuffer(t);if(n.length<=r)return "private";if(n.length===2*r+1&&4===n[0]||n.length===r+1&&(2===n[0]||3===n[0]))return "public";throw new Error("UnsupportedKeyStructure")};t.getJwkType=function(t){if("EC"===t.kty){if(t.x&&t.y&&t.d)return "private";if(t.x&&t.y)return "public";throw new Error("InvalidECKey")}if("RSA"===t.kty){if(t.n&&t.e&&t.d&&t.p&&t.q&&t.dp&&t.dq&&t.qi)return "private";if(t.n&&t.e)return "public";throw new Error("InvalidRSAKey")}throw new Error("UnsupportedJWKType")};t.pruneLeadingZeros=function(t){for(var e=0,r=0;r<t.length&&0===t[r];r++)e++;var n=new Uint8Array(t.length-e);return n.set(t.slice(e,t.length)),n};t.appendLeadingZeros=function(t,e){if(t.length>e)throw new Error("InvalidLength");var r=new Uint8Array(e);return r.set(t,e-t.length),r};}(Ou);var Cu=yt$1&&yt$1.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}});}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r];}),Mu=yt$1&&yt$1.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e});}:function(t,e){t.default=e;}),Nu=yt$1&&yt$1.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&Cu(e,t,r);return Mu(e,t),e},ju=yt$1&&yt$1.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Fn$1,"__esModule",{value:!0}),Fn$1.toJwk=Fn$1.fromJwk=void 0;var Bu=Nu(Bn$1),Lu=ju(Un$1),Fu=Nu(Gi),Uu=Ou,zu=Fu.ec;Fn$1.fromJwk=function(t,e){var r=e.outputPublic,n=e.outputFormat,i=void 0===n?"binary":n,o=e.compact,a=void 0!==o&&o,s=(0, Uu.getJwkType)(t);if("public"===("boolean"==typeof r&&r?"public":s)){var u=Lu.default.encoder.decodeBase64Url(t.x),c=Lu.default.encoder.decodeBase64Url(t.y),l=void 0;return a?((l=new Uint8Array(u.length+1))[0]=255&2+(1&c.slice(-1)[0]),l.set(u,1)):((l=new Uint8Array(u.length+c.length+1))[0]=4,l.set(u,1),l.set(c,u.length+1)),"string"===i?Lu.default.encoder.arrayBufferToHexString(l):l}if(!t.d)throw new Error("InvalidKey");var f=Lu.default.encoder.decodeBase64Url(t.d);return "string"===i?Lu.default.encoder.arrayBufferToHexString(f):f};Fn$1.toJwk=function(t,e,r){var n=r.outputPublic;if(Object.keys(Bu.namedCurves).indexOf(e)<0)throw new Error("UnsupportedCurve");var i=(0, Uu.getSec1KeyType)(t,e),o="boolean"==typeof n&&n?"public":i,a="string"==typeof t?Lu.default.encoder.hexStringToArrayBuffer(t):t,s=Bu.namedCurves[e].indutnyName,u=new zu(s),c="public"===i?u.keyFromPublic(a):u.keyFromPrivate(a),l=new Uint8Array(c.getPublic("array")),f=Bu.namedCurves[e].payloadSize,h=l.slice(1,f+1),d=l.slice(f+1,2*f+1),p={kty:"EC",crv:e,x:Lu.default.encoder.encodeBase64Url(h),y:Lu.default.encoder.encodeBase64Url(d)};return "private"===o&&(p.d=Lu.default.encoder.encodeBase64Url(a)),p};var Ku=yt$1&&yt$1.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}});}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r];}),qu=yt$1&&yt$1.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e});}:function(t,e){t.default=e;}),Hu=yt$1&&yt$1.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&Ku(e,t,r);return qu(e,t),e},Vu=yt$1&&yt$1.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ir$1,"__esModule",{value:!0}),Ir$1.toJWK=Ir$1.fromJWK=void 0;var Wu=Vu(Ar$1),Ju=Hu(Bn$1),Yu=Fn$1;Ir$1.fromJWK=function(t,e,r){void 0===r&&(r=!1);var n=(0, Yu.fromJwk)(t,{outputFormat:"binary",outputPublic:!0,compact:r}),i=Ju.publicKeyAlgorithms.EC.oid,o={unused:0,data:Array.from(n)},a=Zu.encode({type:"namedCurve",value:Ju.namedCurves[t.crv].oid},"der"),s={algorithm:i,parameters:a},u={};if("public"===e)u.subjectPublicKey=o,u.algorithm=s;else if("private"===e){var c=(0, Yu.fromJwk)(t,{outputFormat:"binary",outputPublic:!1,compact:r});u.version=0,u.privateKeyAlgorithm=s,u.privateKey=Gu.encode({version:1,privateKey:Array.from(c),parameters:a,publicKey:o},"der");}return u};Ir$1.toJWK=function(t,e){if("public"===e){t.algorithm.parameters=Zu.decode(t.algorithm.parameters,"der");var r=new Uint8Array(t.subjectPublicKey.data),n=Ju.getAlgorithmFromOid(t.algorithm.parameters.value,Ju.namedCurves);return (0, Yu.toJwk)(r,n[0],{outputPublic:!0})}t.privateKeyAlgorithm.parameters=Zu.decode(t.privateKeyAlgorithm.parameters,"der");try{t.privateKey=Gu.decode(t.privateKey,"der");}catch(e){t.privateKey=Xu.decode(t.privateKey,"der");}var i=new Uint8Array(t.privateKey.privateKey);if((n=Ju.getAlgorithmFromOid(t.privateKeyAlgorithm.parameters.value,Ju.namedCurves)).length<1)throw new Error("UnsupportedCurve");return (0, Yu.toJwk)(i,n[0],{outputPublic:!1})};var Zu=Wu.default.define("ECParameters",(function(){this.choice({namedCurve:this.objid()});})),Gu=Wu.default.define("ECPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").explicit(0).optional().any(),this.key("publicKey").explicit(1).optional().bitstr());})),Xu=Wu.default.define("ECPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("publicKey").explicit(1).optional().bitstr());})),$u={},Qu=yt$1&&yt$1.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}});}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r];}),tc=yt$1&&yt$1.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e});}:function(t,e){t.default=e;}),ec=yt$1&&yt$1.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&Qu(e,t,r);return tc(e,t),e},rc=yt$1&&yt$1.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty($u,"__esModule",{value:!0}),$u.toJwk=$u.fromJwk=void 0;var nc=rc(Ar$1),ic=rc(Un$1),oc=ec(vt$1).Buffer,ac=ec(Bn$1),sc=Ou;$u.fromJwk=function(t,e){var r={algorithm:ac.publicKeyAlgorithms.RSA.oid,parameters:oc.from([5,0])},n=ic.default.encoder.decodeBase64Url(t.n),i=n.length,o=i%128==0?i:i+(128-i%128),a=new nc.default.bignum((0, sc.appendLeadingZeros)(n,o)),s=new nc.default.bignum(ic.default.encoder.decodeBase64Url(t.e)),u={};return "public"===e?(u.subjectPublicKey={unused:0,data:uc.encode({modulus:a,publicExponent:s},"der")},u.algorithm=r):"private"===e&&(u.version=0,u.privateKeyAlgorithm=r,u.privateKey=cc.encode({version:0,modulus:a,publicExponent:s,privateExponent:new nc.default.bignum((0, sc.appendLeadingZeros)(ic.default.encoder.decodeBase64Url(t.d),o)),prime1:new nc.default.bignum((0, sc.appendLeadingZeros)(ic.default.encoder.decodeBase64Url(t.p),o)),prime2:new nc.default.bignum((0, sc.appendLeadingZeros)(ic.default.encoder.decodeBase64Url(t.q),o)),exponent1:new nc.default.bignum((0, sc.appendLeadingZeros)(ic.default.encoder.decodeBase64Url(t.dp),o)),exponent2:new nc.default.bignum((0, sc.appendLeadingZeros)(ic.default.encoder.decodeBase64Url(t.dq),o)),coefficient:new nc.default.bignum((0, sc.appendLeadingZeros)(ic.default.encoder.decodeBase64Url(t.qi),o))},"der")),u};$u.toJwk=function(t,e){if("public"===e){t.subjectPublicKey.data=uc.decode(t.subjectPublicKey.data,"der");var r=t.subjectPublicKey.data.modulus,n=t.subjectPublicKey.data.publicExponent,i=(a=r.byteLength())%128==0?a:a+(128-a%128);return r=new Uint8Array(r.toArray("be",i)),n=new Uint8Array(n.toArray("be",n.byteLength())),{kty:"RSA",n:ic.default.encoder.encodeBase64Url((0, sc.pruneLeadingZeros)(r)),e:ic.default.encoder.encodeBase64Url((0, sc.pruneLeadingZeros)(n))}}t.privateKey=cc.decode(t.privateKey,"der");var o={};o.modulus=t.privateKey.modulus;var a,s=(a=o.modulus.byteLength())%128==0?a:a+(128-a%128);o.modulus=new Uint8Array(o.modulus.toArray("be",s)),o.publicExponent=new Uint8Array(t.privateKey.publicExponent.toArray("be",t.privateKey.publicExponent.byteLength())),o.privateExponent=new Uint8Array(t.privateKey.privateExponent.toArray("be",s));return ["prime1","prime2","exponent1","exponent2","coefficient"].forEach((function(e){o[e]=new Uint8Array(t.privateKey[e].toArray("be",s>>1));})),{kty:"RSA",n:ic.default.encoder.encodeBase64Url((0, sc.pruneLeadingZeros)(o.modulus)),e:ic.default.encoder.encodeBase64Url((0, sc.pruneLeadingZeros)(o.publicExponent)),d:ic.default.encoder.encodeBase64Url((0, sc.pruneLeadingZeros)(o.privateExponent)),p:ic.default.encoder.encodeBase64Url((0, sc.pruneLeadingZeros)(o.prime1)),q:ic.default.encoder.encodeBase64Url((0, sc.pruneLeadingZeros)(o.prime2)),dp:ic.default.encoder.encodeBase64Url((0, sc.pruneLeadingZeros)(o.exponent1)),dq:ic.default.encoder.encodeBase64Url((0, sc.pruneLeadingZeros)(o.exponent2)),qi:ic.default.encoder.encodeBase64Url((0, sc.pruneLeadingZeros)(o.coefficient))}};var uc=nc.default.define("RSAPublicKey",(function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int());})),cc=nc.default.define("RSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int(),this.key("otherPrimeInfos").optional().use(lc));})),lc=nc.default.define("OtherPrimeInfos",(function(){this.seqof(fc);})),fc=nc.default.define("OtherPrimeInfo",(function(){this.seq().obj(this.key("prime").int(),this.key("exponent").int(),this.key("coefficient").int());})),hc={},dc={},pc={readUInt32BE:function(t,e){return (t[0+e]<<24|t[1+e]<<16|t[2+e]<<8|t[3+e])>>>0},writeUInt32BE:function(t,e,r){t[0+r]=e>>>24,t[1+r]=e>>>16&255,t[2+r]=e>>>8&255,t[3+r]=255&e;},ip:function(t,e,r,n){for(var i=0,o=0,a=6;a>=0;a-=2){for(var s=0;s<=24;s+=8)i<<=1,i|=e>>>s+a&1;for(s=0;s<=24;s+=8)i<<=1,i|=t>>>s+a&1;}for(a=6;a>=0;a-=2){for(s=1;s<=25;s+=8)o<<=1,o|=e>>>s+a&1;for(s=1;s<=25;s+=8)o<<=1,o|=t>>>s+a&1;}r[n+0]=i>>>0,r[n+1]=o>>>0;},rip:function(t,e,r,n){for(var i=0,o=0,a=0;a<4;a++)for(var s=24;s>=0;s-=8)i<<=1,i|=e>>>s+a&1,i<<=1,i|=t>>>s+a&1;for(a=4;a<8;a++)for(s=24;s>=0;s-=8)o<<=1,o|=e>>>s+a&1,o<<=1,o|=t>>>s+a&1;r[n+0]=i>>>0,r[n+1]=o>>>0;},pc1:function(t,e,r,n){for(var i=0,o=0,a=7;a>=5;a--){for(var s=0;s<=24;s+=8)i<<=1,i|=e>>s+a&1;for(s=0;s<=24;s+=8)i<<=1,i|=t>>s+a&1;}for(s=0;s<=24;s+=8)i<<=1,i|=e>>s+a&1;for(a=1;a<=3;a++){for(s=0;s<=24;s+=8)o<<=1,o|=e>>s+a&1;for(s=0;s<=24;s+=8)o<<=1,o|=t>>s+a&1;}for(s=0;s<=24;s+=8)o<<=1,o|=t>>s+a&1;r[n+0]=i>>>0,r[n+1]=o>>>0;},r28shl:function(t,e){return t<<e&268435455|t>>>28-e}},yc=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];pc.pc2=function(t,e,r,n){for(var i=0,o=0,a=yc.length>>>1,s=0;s<a;s++)i<<=1,i|=t>>>yc[s]&1;for(s=a;s<yc.length;s++)o<<=1,o|=e>>>yc[s]&1;r[n+0]=i>>>0,r[n+1]=o>>>0;},pc.expand=function(t,e,r){var n=0,i=0;n=(1&t)<<5|t>>>27;for(var o=23;o>=15;o-=4)n<<=6,n|=t>>>o&63;for(o=11;o>=3;o-=4)i|=t>>>o&63,i<<=6;i|=(31&t)<<1|t>>>31,e[r+0]=n>>>0,e[r+1]=i>>>0;};var gc=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];pc.substitute=function(t,e){for(var r=0,n=0;n<4;n++){r<<=4,r|=gc[64*n+(t>>>18-6*n&63)];}for(n=0;n<4;n++){r<<=4,r|=gc[256+64*n+(e>>>18-6*n&63)];}return r>>>0};var mc=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];pc.permute=function(t){for(var e=0,r=0;r<mc.length;r++)e<<=1,e|=t>>>mc[r]&1;return e>>>0},pc.padSplit=function(t,e,r){for(var n=t.toString(2);n.length<e;)n="0"+n;for(var i=[],o=0;o<e;o+=r)i.push(n.slice(o,o+r));return i.join(" ")};var bc=Yr;function vc(t){this.options=t,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0;}var wc=vc;vc.prototype._init=function(){},vc.prototype.update=function(t){return 0===t.length?[]:"decrypt"===this.type?this._updateDecrypt(t):this._updateEncrypt(t)},vc.prototype._buffer=function(t,e){for(var r=Math.min(this.buffer.length-this.bufferOff,t.length-e),n=0;n<r;n++)this.buffer[this.bufferOff+n]=t[e+n];return this.bufferOff+=r,r},vc.prototype._flushBuffer=function(t,e){return this._update(this.buffer,0,t,e),this.bufferOff=0,this.blockSize},vc.prototype._updateEncrypt=function(t){var e=0,r=0,n=(this.bufferOff+t.length)/this.blockSize|0,i=new Array(n*this.blockSize);0!==this.bufferOff&&(e+=this._buffer(t,e),this.bufferOff===this.buffer.length&&(r+=this._flushBuffer(i,r)));for(var o=t.length-(t.length-e)%this.blockSize;e<o;e+=this.blockSize)this._update(t,e,i,r),r+=this.blockSize;for(;e<t.length;e++,this.bufferOff++)this.buffer[this.bufferOff]=t[e];return i},vc.prototype._updateDecrypt=function(t){for(var e=0,r=0,n=Math.ceil((this.bufferOff+t.length)/this.blockSize)-1,i=new Array(n*this.blockSize);n>0;n--)e+=this._buffer(t,e),r+=this._flushBuffer(i,r);return e+=this._buffer(t,e),i},vc.prototype.final=function(t){var e,r;return t&&(e=this.update(t)),r="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),e?e.concat(r):r},vc.prototype._pad=function(t,e){if(0===e)return !1;for(;e<t.length;)t[e++]=0;return !0},vc.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return [];var t=new Array(this.blockSize);return this._update(this.buffer,0,t,0),t},vc.prototype._unpad=function(t){return t},vc.prototype._finalDecrypt=function(){bc.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var t=new Array(this.blockSize);return this._flushBuffer(t,0),this._unpad(t)};var _c=Yr,Sc=Or$1.exports,Ec=pc,Ic=wc;function Ac(){this.tmp=new Array(2),this.keys=null;}function kc(t){Ic.call(this,t);var e=new Ac;this._desState=e,this.deriveKeys(e,t.key);}Sc(kc,Ic);var Dc=kc;kc.create=function(t){return new kc(t)};var xc=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];kc.prototype.deriveKeys=function(t,e){t.keys=new Array(32),_c.equal(e.length,this.blockSize,"Invalid key length");var r=Ec.readUInt32BE(e,0),n=Ec.readUInt32BE(e,4);Ec.pc1(r,n,t.tmp,0),r=t.tmp[0],n=t.tmp[1];for(var i=0;i<t.keys.length;i+=2){var o=xc[i>>>1];r=Ec.r28shl(r,o),n=Ec.r28shl(n,o),Ec.pc2(r,n,t.keys,i);}},kc.prototype._update=function(t,e,r,n){var i=this._desState,o=Ec.readUInt32BE(t,e),a=Ec.readUInt32BE(t,e+4);Ec.ip(o,a,i.tmp,0),o=i.tmp[0],a=i.tmp[1],"encrypt"===this.type?this._encrypt(i,o,a,i.tmp,0):this._decrypt(i,o,a,i.tmp,0),o=i.tmp[0],a=i.tmp[1],Ec.writeUInt32BE(r,o,n),Ec.writeUInt32BE(r,a,n+4);},kc.prototype._pad=function(t,e){for(var r=t.length-e,n=e;n<t.length;n++)t[n]=r;return !0},kc.prototype._unpad=function(t){for(var e=t[t.length-1],r=t.length-e;r<t.length;r++)_c.equal(t[r],e);return t.slice(0,t.length-e)},kc.prototype._encrypt=function(t,e,r,n,i){for(var o=e,a=r,s=0;s<t.keys.length;s+=2){var u=t.keys[s],c=t.keys[s+1];Ec.expand(a,t.tmp,0),u^=t.tmp[0],c^=t.tmp[1];var l=Ec.substitute(u,c),f=a;a=(o^Ec.permute(l))>>>0,o=f;}Ec.rip(a,o,n,i);},kc.prototype._decrypt=function(t,e,r,n,i){for(var o=r,a=e,s=t.keys.length-2;s>=0;s-=2){var u=t.keys[s],c=t.keys[s+1];Ec.expand(o,t.tmp,0),u^=t.tmp[0],c^=t.tmp[1];var l=Ec.substitute(u,c),f=o;o=(a^Ec.permute(l))>>>0,a=f;}Ec.rip(o,a,n,i);};var Tc={},Pc=Yr,Oc=Or$1.exports,Rc={};function Cc(t){Pc.equal(t.length,8,"Invalid IV length"),this.iv=new Array(8);for(var e=0;e<this.iv.length;e++)this.iv[e]=t[e];}Tc.instantiate=function(t){function e(e){t.call(this,e),this._cbcInit();}Oc(e,t);for(var r=Object.keys(Rc),n=0;n<r.length;n++){var i=r[n];e.prototype[i]=Rc[i];}return e.create=function(t){return new e(t)},e},Rc._cbcInit=function(){var t=new Cc(this.options.iv);this._cbcState=t;},Rc._update=function(t,e,r,n){var i=this._cbcState,o=this.constructor.super_.prototype,a=i.iv;if("encrypt"===this.type){for(var s=0;s<this.blockSize;s++)a[s]^=t[e+s];o._update.call(this,a,0,r,n);for(s=0;s<this.blockSize;s++)a[s]=r[n+s];}else {o._update.call(this,t,e,r,n);for(s=0;s<this.blockSize;s++)r[n+s]^=a[s];for(s=0;s<this.blockSize;s++)a[s]=t[e+s];}};var Mc=Yr,Nc=Or$1.exports,jc=wc,Bc=Dc;function Lc(t,e){Mc.equal(e.length,24,"Invalid key length");var r=e.slice(0,8),n=e.slice(8,16),i=e.slice(16,24);this.ciphers="encrypt"===t?[Bc.create({type:"encrypt",key:r}),Bc.create({type:"decrypt",key:n}),Bc.create({type:"encrypt",key:i})]:[Bc.create({type:"decrypt",key:i}),Bc.create({type:"encrypt",key:n}),Bc.create({type:"decrypt",key:r})];}function Fc(t){jc.call(this,t);var e=new Lc(this.type,this.options.key);this._edeState=e;}Nc(Fc,jc);var Uc=Fc;Fc.create=function(t){return new Fc(t)},Fc.prototype._update=function(t,e,r,n){var i=this._edeState;i.ciphers[0]._update(t,e,r,n),i.ciphers[1]._update(r,n,r,n),i.ciphers[2]._update(r,n,r,n);},Fc.prototype._pad=Bc.prototype._pad,Fc.prototype._unpad=Bc.prototype._unpad,dc.utils=pc,dc.Cipher=wc,dc.DES=Dc,dc.CBC=Tc,dc.EDE=Uc;var zc={},Kc={},qc={},Hc={},Vc={},Wc={},Jc={exports:{}},Yc={exports:{}};
	/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
	!function(t,e){var r=vt$1,n=r.Buffer;function i(t,e){for(var r in t)e[r]=t[r];}function o(t,e,r){return n(t,e,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=o),o.prototype=Object.create(n.prototype),i(n,o),o.from=function(t,e,r){if("number"==typeof t)throw new TypeError("Argument must not be a number");return n(t,e,r)},o.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError("Argument must be a number");var i=n(t);return void 0!==e?"string"==typeof r?i.fill(e,r):i.fill(e):i.fill(0),i},o.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n(t)},o.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)};}(Yc,Yc.exports);var Zc=Yc.exports.Buffer,Gc=yt$1.crypto||yt$1.msCrypto;Gc&&Gc.getRandomValues?Jc.exports=function(t,e){if(t>4294967295)throw new RangeError("requested too many random bytes");var r=Zc.allocUnsafe(t);if(t>0)if(t>65536)for(var n=0;n<t;n+=65536)Gc.getRandomValues(r.slice(n,n+65536));else Gc.getRandomValues(r);if("function"==typeof e)return de$1((function(){e(null,r);}));return r}:Jc.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")};var Xc,$c={exports:{}},Qc="object"==typeof Reflect?Reflect:null,tl=Qc&&"function"==typeof Qc.apply?Qc.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)};Xc=Qc&&"function"==typeof Qc.ownKeys?Qc.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var el=Number.isNaN||function(t){return t!=t};function rl(){rl.init.call(this);}$c.exports=rl,$c.exports.once=function(t,e){return new Promise((function(r,n){function i(r){t.removeListener(e,o),n(r);}function o(){"function"==typeof t.removeListener&&t.removeListener("error",i),r([].slice.call(arguments));}hl(t,e,o,{once:!0}),"error"!==e&&function(t,e,r){"function"==typeof t.on&&hl(t,"error",e,r);}(t,i,{once:!0});}))},rl.EventEmitter=rl,rl.prototype._events=void 0,rl.prototype._eventsCount=0,rl.prototype._maxListeners=void 0;var nl=10;function il(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function ol(t){return void 0===t._maxListeners?rl.defaultMaxListeners:t._maxListeners}function al(t,e,r,n){var i,o,a,s;if(il(r),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),o=t._events),a=o[e]),void 0===a)a=o[e]=r,++t._eventsCount;else if("function"==typeof a?a=o[e]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),(i=ol(t))>0&&a.length>i&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=a.length,s=u,console&&console.warn&&console.warn(s);}return t}function sl(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function ul(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=sl.bind(n);return i.listener=r,n.wrapFn=i,i}function cl(t,e,r){var n=t._events;if(void 0===n)return [];var i=n[e];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(i):fl(i,i.length)}function ll(t){var e=this._events;if(void 0!==e){var r=e[t];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function fl(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function hl(t,e,r,n){if("function"==typeof t.on)n.once?t.once(e,r):t.on(e,r);else {if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(o){n.once&&t.removeEventListener(e,i),r(o);}));}}Object.defineProperty(rl,"defaultMaxListeners",{enumerable:!0,get:function(){return nl},set:function(t){if("number"!=typeof t||t<0||el(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");nl=t;}}),rl.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0;},rl.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||el(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},rl.prototype.getMaxListeners=function(){return ol(this)},rl.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var n="error"===t,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return !1;if(n){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var s=i[t];if(void 0===s)return !1;if("function"==typeof s)tl(s,this,e);else {var u=s.length,c=fl(s,u);for(r=0;r<u;++r)tl(c[r],this,e);}return !0},rl.prototype.addListener=function(t,e){return al(this,t,e,!1)},rl.prototype.on=rl.prototype.addListener,rl.prototype.prependListener=function(t,e){return al(this,t,e,!0)},rl.prototype.once=function(t,e){return il(e),this.on(t,ul(this,t,e)),this},rl.prototype.prependOnceListener=function(t,e){return il(e),this.prependListener(t,ul(this,t,e)),this},rl.prototype.removeListener=function(t,e){var r,n,i,o,a;if(il(e),void 0===(n=this._events))return this;if(void 0===(r=n[t]))return this;if(r===e||r.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===e||r[o].listener===e){a=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop();}(r,i),1===r.length&&(n[t]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",t,a||e);}return this},rl.prototype.off=rl.prototype.removeListener,rl.prototype.removeAllListeners=function(t){var e,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[t]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=r[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},rl.prototype.listeners=function(t){return cl(this,t,!0)},rl.prototype.rawListeners=function(t){return cl(this,t,!1)},rl.listenerCount=function(t,e){return "function"==typeof t.listenerCount?t.listenerCount(e):ll.call(t,e)},rl.prototype.listenerCount=ll,rl.prototype.eventNames=function(){return this._eventsCount>0?Xc(this._events):[]};var dl=$c.exports,pl="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});}:function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t;};function yl(){this.head=null,this.tail=null,this.length=0;}yl.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length;},yl.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length;},yl.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},yl.prototype.clear=function(){this.head=this.tail=null,this.length=0;},yl.prototype.join=function(t){if(0===this.length)return "";for(var e=this.head,r=""+e.data;e=e.next;)r+=t+e.data;return r},yl.prototype.concat=function(t){if(0===this.length)return vt$1.Buffer.alloc(0);if(1===this.length)return this.head.data;for(var e=vt$1.Buffer.allocUnsafe(t>>>0),r=this.head,n=0;r;)r.data.copy(e,n),n+=r.data.length,r=r.next;return e};var gl=Yc.exports.Buffer,ml=gl.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return !0;default:return !1}};var bl=vl;function vl(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return "utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return "utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return "utf16le";case"latin1":case"binary":return "latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0;}}(t);if("string"!=typeof e&&(gl.isEncoding===ml||!ml(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=Sl,this.end=El,e=4;break;case"utf8":this.fillLast=_l,e=4;break;case"base64":this.text=Il,this.end=Al,e=3;break;default:return this.write=kl,void(this.end=Dl)}this.lastNeed=0,this.lastTotal=0,this.lastChar=gl.allocUnsafe(e);}function wl(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function _l(t){var e=this.lastTotal-this.lastNeed,r=function(t,e,r){if(128!=(192&e[0]))return t.lastNeed=0,"";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,""}}(this,t);return void 0!==r?r:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function Sl(t,e){if((t.length-e)%2==0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function El(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function Il(t,e){var r=(t.length-e)%3;return 0===r?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function Al(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function kl(t){return t.toString(this.encoding)}function Dl(t){return t&&t.length?this.write(t):""}function xl(t,e){t=t||{},this.objectMode=!!t.objectMode,e instanceof rf&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var r=t.highWaterMark,n=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n,this.highWaterMark=~~this.highWaterMark,this.buffer=new yl,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(this.decoder=new bl(t.encoding),this.encoding=t.encoding);}function Tl(t){if(!(this instanceof Tl))return new Tl(t);this._readableState=new xl(t,this),this.readable=!0,t&&"function"==typeof t.read&&(this._read=t.read),dl.call(this);}function Pl(t,e,r,n,i){var o=function(t,e){var r=null;Bi(e)||"string"==typeof e||null==e||t.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));return r}(e,r);if(o)t.emit("error",o);else if(null===r)e.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length);}e.ended=!0,Rl(t);}(t,e);else if(e.objectMode||r&&r.length>0)if(e.ended&&!i){var a=new Error("stream.push() after EOF");t.emit("error",a);}else if(e.endEmitted&&i){var s=new Error("stream.unshift() after end event");t.emit("error",s);}else {var u;!e.decoder||i||n||(r=e.decoder.write(r),u=!e.objectMode&&0===r.length),i||(e.reading=!1),u||(e.flowing&&0===e.length&&!e.sync?(t.emit("data",r),t.read(0)):(e.length+=e.objectMode?1:r.length,i?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&Rl(t))),function(t,e){e.readingMore||(e.readingMore=!0,de$1(Ml,t,e));}(t,e);}else i||(e.reading=!1);return function(t){return !t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(e)}vl.prototype.write=function(t){if(0===t.length)return "";var e,r;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return "";r=this.lastNeed,this.lastNeed=0;}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""},vl.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"":e},vl.prototype.text=function(t,e){var r=function(t,e,r){var n=e.length-1;if(n<r)return 0;var i=wl(e[n]);if(i>=0)return i>0&&(t.lastNeed=i-1),i;if(--n<r||-2===i)return 0;if((i=wl(e[n]))>=0)return i>0&&(t.lastNeed=i-2),i;if(--n<r||-2===i)return 0;if((i=wl(e[n]))>=0)return i>0&&(2===i?i=0:t.lastNeed=i-3),i;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)},vl.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length;},Tl.ReadableState=xl,pl(Tl,dl),Tl.prototype.push=function(t,e){var r=this._readableState;return r.objectMode||"string"!=typeof t||(e=e||r.defaultEncoding)!==r.encoding&&(t=ei.from(t,e),e=""),Pl(this,r,t,e,!1)},Tl.prototype.unshift=function(t){return Pl(this,this._readableState,t,"",!0)},Tl.prototype.isPaused=function(){return !1===this._readableState.flowing},Tl.prototype.setEncoding=function(t){return this._readableState.decoder=new bl(t),this._readableState.encoding=t,this};function Ol(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=8388608?t=8388608:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function Rl(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,e.sync?de$1(Cl,t):Cl(t));}function Cl(t){t.emit("readable"),Bl(t);}function Ml(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(t.read(0),r!==e.length);)r=e.length;e.readingMore=!1;}function Nl(t){t.read(0);}function jl(t,e){e.reading||t.read(0),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),Bl(t),e.flowing&&!e.reading&&t.read(0);}function Bl(t){for(var e=t._readableState;e.flowing&&null!==t.read(););}function Ll(t,e){return 0===e.length?null:(e.objectMode?r=e.buffer.shift():!t||t>=e.length?(r=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):r=function(t,e,r){var n;t<e.head.data.length?(n=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):n=t===e.head.data.length?e.shift():r?function(t,e){var r=e.head,n=1,i=r.data;t-=i.length;for(;r=r.next;){var o=r.data,a=t>o.length?o.length:t;if(a===o.length?i+=o:i+=o.slice(0,t),0===(t-=a)){a===o.length?(++n,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(a));break}++n;}return e.length-=n,i}(t,e):function(t,e){var r=ei.allocUnsafe(t),n=e.head,i=1;n.data.copy(r),t-=n.data.length;for(;n=n.next;){var o=n.data,a=t>o.length?o.length:t;if(o.copy(r,r.length-t,0,a),0===(t-=a)){a===o.length?(++i,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(a));break}++i;}return e.length-=i,r}(t,e);return n}(t,e.buffer,e.decoder),r);var r;}function Fl(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,de$1(Ul,e,t));}function Ul(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"));}function zl(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return -1}function Kl(){}function ql(t,e,r){this.chunk=t,this.encoding=e,this.callback=r,this.next=null;}function Hl(t,e){Object.defineProperty(this,"buffer",{get:function(){return console.log("_writableState.buffer is deprecated. Use _writableState.getBuffer instead."),this.getBuffer()}}),t=t||{},this.objectMode=!!t.objectMode,e instanceof rf&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var r=t.highWaterMark,n=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var i=!1===t.decodeStrings;this.decodeStrings=!i,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0;}(r),e)!function(t,e,r,n,i){--e.pendingcb,r?de$1(i,n):i(n);t._writableState.errorEmitted=!0,t.emit("error",n);}(t,r,n,e,i);else {var o=Zl(r);o||r.corked||r.bufferProcessing||!r.bufferedRequest||Yl(t,r),n?de$1(Jl,t,r,o,i):Jl(t,r,o,i);}}(e,t);},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new $l(this);}function Vl(t){if(!(this instanceof Vl||this instanceof rf))return new Vl(t);this._writableState=new Hl(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev)),$c.exports.EventEmitter.call(this);}function Wl(t,e,r,n,i,o,a){e.writelen=n,e.writecb=a,e.writing=!0,e.sync=!0,r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1;}function Jl(t,e,r,n){r||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));}(t,e),e.pendingcb--,n(),Xl(t,e);}function Yl(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),o=e.corkedRequestsFree;o.entry=r;for(var a=0;r;)i[a]=r,r=r.next,a+=1;Wl(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new $l(e);}else {for(;r;){var s=r.chunk,u=r.encoding,c=r.callback;if(Wl(t,e,!1,e.objectMode?1:s.length,s,u,c),r=r.next,e.writing)break}null===r&&(e.lastBufferedRequest=null);}e.bufferedRequestCount=0,e.bufferedRequest=r,e.bufferProcessing=!1;}function Zl(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function Gl(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"));}function Xl(t,e){var r=Zl(e);return r&&(0===e.pendingcb?(Gl(t,e),e.finished=!0,t.emit("finish")):Gl(t,e)),r}function $l(t){var e=this;this.next=null,this.entry=null,this.finish=function(r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next;}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e;};}Tl.prototype.read=function(t){t=parseInt(t,10);var e=this._readableState,r=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return 0===e.length&&e.ended?Fl(this):Rl(this),null;if(0===(t=Ol(t,e))&&e.ended)return 0===e.length&&Fl(this),null;var n,i=e.needReadable;return (0===e.length||e.length-t<e.highWaterMark)&&(i=!0),e.ended||e.reading?i=!1:i&&(e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=Ol(r,e))),null===(n=t>0?Ll(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&Fl(this)),null!==n&&this.emit("data",n),n},Tl.prototype._read=function(t){this.emit("error",new Error("not implemented"));},Tl.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);}n.pipesCount+=1;var i=!e||!1!==e.end?a:c;function o(t){t===r&&c();}function a(){t.end();}n.endEmitted?de$1(i):r.once("end",i),t.on("unpipe",o);var s=function(t){return function(){var e=t._readableState;e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&t.listeners("data").length&&(e.flowing=!0,Bl(t));}}(r);t.on("drain",s);var u=!1;function c(){t.removeListener("close",d),t.removeListener("finish",p),t.removeListener("drain",s),t.removeListener("error",h),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",c),r.removeListener("data",f),u=!0,!n.awaitDrain||t._writableState&&!t._writableState.needDrain||s();}var l=!1;function f(e){l=!1,!1!==t.write(e)||l||((1===n.pipesCount&&n.pipes===t||n.pipesCount>1&&-1!==zl(n.pipes,t))&&!u&&(r._readableState.awaitDrain++,l=!0),r.pause());}function h(e){var r;y(),t.removeListener("error",h),0===(r="error",t.listeners(r).length)&&t.emit("error",e);}function d(){t.removeListener("finish",p),y();}function p(){t.removeListener("close",d),y();}function y(){r.unpipe(t);}return r.on("data",f),function(t,e,r){if("function"==typeof t.prependListener)return t.prependListener(e,r);t._events&&t._events[e]?Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]:t.on(e,r);}(t,"error",h),t.once("close",d),t.once("finish",p),t.emit("pipe",r),n.flowing||r.resume(),t},Tl.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this)),this;if(!t){var r=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var i=0;i<n;i++)r[i].emit("unpipe",this);return this}var o=zl(e.pipes,t);return -1===o||(e.pipes.splice(o,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this)),this},Tl.prototype.on=function(t,e){var r=dl.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&Rl(this):de$1(Nl,this));}return r},Tl.prototype.addListener=Tl.prototype.on,Tl.prototype.resume=function(){var t=this._readableState;return t.flowing||(t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,de$1(jl,t,e));}(this,t)),this},Tl.prototype.pause=function(){return !1!==this._readableState.flowing&&(this._readableState.flowing=!1,this.emit("pause")),this},Tl.prototype.wrap=function(t){var e=this._readableState,r=!1,n=this;for(var i in t.on("end",(function(){if(e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&n.push(t);}n.push(null);})),t.on("data",(function(i){(e.decoder&&(i=e.decoder.write(i)),e.objectMode&&null==i)||(e.objectMode||i&&i.length)&&(n.push(i)||(r=!0,t.pause()));})),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));return function(t,e){for(var r=0,n=t.length;r<n;r++)e(t[r],r);}(["error","close","destroy","pause","resume"],(function(e){t.on(e,n.emit.bind(n,e));})),n._read=function(e){r&&(r=!1,t.resume());},n},Tl._fromList=Ll,Vl.WritableState=Hl,pl(Vl,$c.exports.EventEmitter),Hl.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},Vl.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"));},Vl.prototype.write=function(t,e,r){var n=this._writableState,i=!1;return "function"==typeof e&&(r=e,e=null),vt$1.Buffer.isBuffer(t)?e="buffer":e||(e=n.defaultEncoding),"function"!=typeof r&&(r=Kl),n.ended?function(t,e){var r=new Error("write after end");t.emit("error",r),de$1(e,r);}(this,r):function(t,e,r,n){var i=!0,o=!1;return null===r?o=new TypeError("May not write null values to stream"):vt$1.Buffer.isBuffer(r)||"string"==typeof r||void 0===r||e.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(t.emit("error",o),de$1(n,o),i=!1),i}(this,n,t,r)&&(n.pendingcb++,i=function(t,e,r,n,i){r=function(t,e,r){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=vt$1.Buffer.from(e,r));return e}(e,r,n),vt$1.Buffer.isBuffer(r)&&(n="buffer");var o=e.objectMode?1:r.length;e.length+=o;var a=e.length<e.highWaterMark;a||(e.needDrain=!0);if(e.writing||e.corked){var s=e.lastBufferedRequest;e.lastBufferedRequest=new ql(r,n,i),s?s.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1;}else Wl(t,e,!1,o,r,n,i);return a}(this,n,t,e,r)),i},Vl.prototype.cork=function(){this._writableState.corked++;},Vl.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||Yl(this,t));},Vl.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Vl.prototype._write=function(t,e,r){r(new Error("not implemented"));},Vl.prototype._writev=null,Vl.prototype.end=function(t,e,r){var n=this._writableState;"function"==typeof t?(r=t,t=null,e=null):"function"==typeof e&&(r=e,e=null),null!=t&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(t,e,r){e.ending=!0,Xl(t,e),r&&(e.finished?de$1(r):t.once("finish",r));e.ended=!0,t.writable=!1;}(this,n,r);},pl(rf,Tl);for(var Ql=Object.keys(Vl.prototype),tf=0;tf<Ql.length;tf++){var ef=Ql[tf];rf.prototype[ef]||(rf.prototype[ef]=Vl.prototype[ef]);}function rf(t){if(!(this instanceof rf))return new rf(t);Tl.call(this,t),Vl.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",nf);}function nf(){this.allowHalfOpen||this._writableState.ended||de$1(of,this);}function of(t){t.end();}function af(t){this.afterTransform=function(e,r){return function(t,e,r){var n=t._transformState;n.transforming=!1;var i=n.writecb;if(!i)return t.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,null!=r&&t.push(r);i(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark);}(t,e,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null;}function sf(t){if(!(this instanceof sf))return new sf(t);rf.call(this,t),this._transformState=new af(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.once("prefinish",(function(){"function"==typeof this._flush?this._flush((function(t){uf(e,t);})):uf(e);}));}function uf(t,e){if(e)return t.emit("error",e);var r=t._writableState,n=t._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(n.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}function cf(t){if(!(this instanceof cf))return new cf(t);sf.call(this,t);}function lf(){dl.call(this);}pl(sf,rf),sf.prototype.push=function(t,e){return this._transformState.needTransform=!1,rf.prototype.push.call(this,t,e)},sf.prototype._transform=function(t,e,r){throw new Error("Not implemented")},sf.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark);}},sf.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0;},pl(cf,sf),cf.prototype._transform=function(t,e,r){r(null,t);},pl(lf,dl),lf.Readable=Tl,lf.Writable=Vl,lf.Duplex=rf,lf.Transform=sf,lf.PassThrough=cf,lf.Stream=lf,lf.prototype.pipe=function(t,e){var r=this;function n(e){t.writable&&!1===t.write(e)&&r.pause&&r.pause();}function i(){r.readable&&r.resume&&r.resume();}r.on("data",n),t.on("drain",i),t._isStdio||e&&!1===e.end||(r.on("end",a),r.on("close",s));var o=!1;function a(){o||(o=!0,t.end());}function s(){o||(o=!0,"function"==typeof t.destroy&&t.destroy());}function u(t){if(c(),0===dl.listenerCount(this,"error"))throw t}function c(){r.removeListener("data",n),t.removeListener("drain",i),r.removeListener("end",a),r.removeListener("close",s),r.removeListener("error",u),t.removeListener("error",u),r.removeListener("end",c),r.removeListener("close",c),t.removeListener("close",c);}return r.on("error",u),t.on("error",u),r.on("end",c),r.on("close",c),t.on("close",c),t.emit("pipe",r),t};var ff=mt$1(Object.freeze({__proto__:null,default:lf,Readable:Tl,Writable:Vl,Duplex:rf,Transform:sf,PassThrough:cf,Stream:lf})),hf=Yc.exports.Buffer,df=ff.Transform;function pf(t){df.call(this),this._block=hf.allocUnsafe(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1;}(0, Or$1.exports)(pf,df),pf.prototype._transform=function(t,e,r){var n=null;try{this.update(t,e);}catch(t){n=t;}r(n);},pf.prototype._flush=function(t){var e=null;try{this.push(this.digest());}catch(t){e=t;}t(e);},pf.prototype.update=function(t,e){if(function(t,e){if(!hf.isBuffer(t)&&"string"!=typeof t)throw new TypeError(e+" must be a string or a buffer")}(t,"Data"),this._finalized)throw new Error("Digest already called");hf.isBuffer(t)||(t=hf.from(t,e));for(var r=this._block,n=0;this._blockOffset+t.length-n>=this._blockSize;){for(var i=this._blockOffset;i<this._blockSize;)r[i++]=t[n++];this._update(),this._blockOffset=0;}for(;n<t.length;)r[this._blockOffset++]=t[n++];for(var o=0,a=8*t.length;a>0;++o)this._length[o]+=a,(a=this._length[o]/4294967296|0)>0&&(this._length[o]-=4294967296*a);return this},pf.prototype._update=function(){throw new Error("_update is not implemented")},pf.prototype.digest=function(t){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var e=this._digest();void 0!==t&&(e=e.toString(t)),this._block.fill(0),this._blockOffset=0;for(var r=0;r<4;++r)this._length[r]=0;return e},pf.prototype._digest=function(){throw new Error("_digest is not implemented")};var yf=pf,gf=Or$1.exports,mf=yf,bf=Yc.exports.Buffer,vf=new Array(16);function wf(){mf.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878;}function _f(t,e){return t<<e|t>>>32-e}function Sf(t,e,r,n,i,o,a){return _f(t+(e&r|~e&n)+i+o|0,a)+e|0}function Ef(t,e,r,n,i,o,a){return _f(t+(e&n|r&~n)+i+o|0,a)+e|0}function If(t,e,r,n,i,o,a){return _f(t+(e^r^n)+i+o|0,a)+e|0}function Af(t,e,r,n,i,o,a){return _f(t+(r^(e|~n))+i+o|0,a)+e|0}gf(wf,mf),wf.prototype._update=function(){for(var t=vf,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);var r=this._a,n=this._b,i=this._c,o=this._d;r=Sf(r,n,i,o,t[0],3614090360,7),o=Sf(o,r,n,i,t[1],3905402710,12),i=Sf(i,o,r,n,t[2],606105819,17),n=Sf(n,i,o,r,t[3],3250441966,22),r=Sf(r,n,i,o,t[4],4118548399,7),o=Sf(o,r,n,i,t[5],1200080426,12),i=Sf(i,o,r,n,t[6],2821735955,17),n=Sf(n,i,o,r,t[7],4249261313,22),r=Sf(r,n,i,o,t[8],1770035416,7),o=Sf(o,r,n,i,t[9],2336552879,12),i=Sf(i,o,r,n,t[10],4294925233,17),n=Sf(n,i,o,r,t[11],2304563134,22),r=Sf(r,n,i,o,t[12],1804603682,7),o=Sf(o,r,n,i,t[13],4254626195,12),i=Sf(i,o,r,n,t[14],2792965006,17),r=Ef(r,n=Sf(n,i,o,r,t[15],1236535329,22),i,o,t[1],4129170786,5),o=Ef(o,r,n,i,t[6],3225465664,9),i=Ef(i,o,r,n,t[11],643717713,14),n=Ef(n,i,o,r,t[0],3921069994,20),r=Ef(r,n,i,o,t[5],3593408605,5),o=Ef(o,r,n,i,t[10],38016083,9),i=Ef(i,o,r,n,t[15],3634488961,14),n=Ef(n,i,o,r,t[4],3889429448,20),r=Ef(r,n,i,o,t[9],568446438,5),o=Ef(o,r,n,i,t[14],3275163606,9),i=Ef(i,o,r,n,t[3],4107603335,14),n=Ef(n,i,o,r,t[8],1163531501,20),r=Ef(r,n,i,o,t[13],2850285829,5),o=Ef(o,r,n,i,t[2],4243563512,9),i=Ef(i,o,r,n,t[7],1735328473,14),r=If(r,n=Ef(n,i,o,r,t[12],2368359562,20),i,o,t[5],4294588738,4),o=If(o,r,n,i,t[8],2272392833,11),i=If(i,o,r,n,t[11],1839030562,16),n=If(n,i,o,r,t[14],4259657740,23),r=If(r,n,i,o,t[1],2763975236,4),o=If(o,r,n,i,t[4],1272893353,11),i=If(i,o,r,n,t[7],4139469664,16),n=If(n,i,o,r,t[10],3200236656,23),r=If(r,n,i,o,t[13],681279174,4),o=If(o,r,n,i,t[0],3936430074,11),i=If(i,o,r,n,t[3],3572445317,16),n=If(n,i,o,r,t[6],76029189,23),r=If(r,n,i,o,t[9],3654602809,4),o=If(o,r,n,i,t[12],3873151461,11),i=If(i,o,r,n,t[15],530742520,16),r=Af(r,n=If(n,i,o,r,t[2],3299628645,23),i,o,t[0],4096336452,6),o=Af(o,r,n,i,t[7],1126891415,10),i=Af(i,o,r,n,t[14],2878612391,15),n=Af(n,i,o,r,t[5],4237533241,21),r=Af(r,n,i,o,t[12],1700485571,6),o=Af(o,r,n,i,t[3],2399980690,10),i=Af(i,o,r,n,t[10],4293915773,15),n=Af(n,i,o,r,t[1],2240044497,21),r=Af(r,n,i,o,t[8],1873313359,6),o=Af(o,r,n,i,t[15],4264355552,10),i=Af(i,o,r,n,t[6],2734768916,15),n=Af(n,i,o,r,t[13],1309151649,21),r=Af(r,n,i,o,t[4],4149444226,6),o=Af(o,r,n,i,t[11],3174756917,10),i=Af(i,o,r,n,t[2],718787259,15),n=Af(n,i,o,r,t[9],3951481745,21),this._a=this._a+r|0,this._b=this._b+n|0,this._c=this._c+i|0,this._d=this._d+o|0;},wf.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=bf.allocUnsafe(16);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t};var kf=wf,Df=vt$1.Buffer,xf=Or$1.exports,Tf=yf,Pf=new Array(16),Of=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],Rf=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Cf=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],Mf=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],Nf=[0,1518500249,1859775393,2400959708,2840853838],jf=[1352829926,1548603684,1836072691,2053994217,0];function Bf(){Tf.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520;}function Lf(t,e){return t<<e|t>>>32-e}function Ff(t,e,r,n,i,o,a,s){return Lf(t+(e^r^n)+o+a|0,s)+i|0}function Uf(t,e,r,n,i,o,a,s){return Lf(t+(e&r|~e&n)+o+a|0,s)+i|0}function zf(t,e,r,n,i,o,a,s){return Lf(t+((e|~r)^n)+o+a|0,s)+i|0}function Kf(t,e,r,n,i,o,a,s){return Lf(t+(e&n|r&~n)+o+a|0,s)+i|0}function qf(t,e,r,n,i,o,a,s){return Lf(t+(e^(r|~n))+o+a|0,s)+i|0}xf(Bf,Tf),Bf.prototype._update=function(){for(var t=Pf,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);for(var r=0|this._a,n=0|this._b,i=0|this._c,o=0|this._d,a=0|this._e,s=0|this._a,u=0|this._b,c=0|this._c,l=0|this._d,f=0|this._e,h=0;h<80;h+=1){var d,p;h<16?(d=Ff(r,n,i,o,a,t[Of[h]],Nf[0],Cf[h]),p=qf(s,u,c,l,f,t[Rf[h]],jf[0],Mf[h])):h<32?(d=Uf(r,n,i,o,a,t[Of[h]],Nf[1],Cf[h]),p=Kf(s,u,c,l,f,t[Rf[h]],jf[1],Mf[h])):h<48?(d=zf(r,n,i,o,a,t[Of[h]],Nf[2],Cf[h]),p=zf(s,u,c,l,f,t[Rf[h]],jf[2],Mf[h])):h<64?(d=Kf(r,n,i,o,a,t[Of[h]],Nf[3],Cf[h]),p=Uf(s,u,c,l,f,t[Rf[h]],jf[3],Mf[h])):(d=qf(r,n,i,o,a,t[Of[h]],Nf[4],Cf[h]),p=Ff(s,u,c,l,f,t[Rf[h]],jf[4],Mf[h])),r=a,a=o,o=Lf(i,10),i=n,n=d,s=f,f=l,l=Lf(c,10),c=u,u=p;}var y=this._b+i+l|0;this._b=this._c+o+f|0,this._c=this._d+a+s|0,this._d=this._e+r+u|0,this._e=this._a+n+c|0,this._a=y;},Bf.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=Df.alloc?Df.alloc(20):new Df(20);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t.writeInt32LE(this._e,16),t};var Hf=Bf,Vf={exports:{}},Wf=Yc.exports.Buffer;function Jf(t,e){this._block=Wf.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0;}Jf.prototype.update=function(t,e){"string"==typeof t&&(e=e||"utf8",t=Wf.from(t,e));for(var r=this._block,n=this._blockSize,i=t.length,o=this._len,a=0;a<i;){for(var s=o%n,u=Math.min(i-a,n-s),c=0;c<u;c++)r[s+c]=t[a+c];a+=u,(o+=u)%n==0&&this._update(r);}return this._len+=i,this},Jf.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=8*this._len;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else {var n=(4294967295&r)>>>0,i=(r-n)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4);}this._update(this._block);var o=this._hash();return t?o.toString(t):o},Jf.prototype._update=function(){throw new Error("_update must be implemented by subclass")};var Yf=Jf,Zf=Or$1.exports,Gf=Yf,Xf=Yc.exports.Buffer,$f=[1518500249,1859775393,-1894007588,-899497514],Qf=new Array(80);function th(){this.init(),this._w=Qf,Gf.call(this,64,56);}function eh(t){return t<<30|t>>>2}function rh(t,e,r,n){return 0===t?e&r|~e&n:2===t?e&r|e&n|r&n:e^r^n}Zf(th,Gf),th.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},th.prototype._update=function(t){for(var e,r=this._w,n=0|this._a,i=0|this._b,o=0|this._c,a=0|this._d,s=0|this._e,u=0;u<16;++u)r[u]=t.readInt32BE(4*u);for(;u<80;++u)r[u]=r[u-3]^r[u-8]^r[u-14]^r[u-16];for(var c=0;c<80;++c){var l=~~(c/20),f=0|((e=n)<<5|e>>>27)+rh(l,i,o,a)+s+r[c]+$f[l];s=a,a=o,o=eh(i),i=n,n=f;}this._a=n+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=a+this._d|0,this._e=s+this._e|0;},th.prototype._hash=function(){var t=Xf.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t};var nh=th,ih=Or$1.exports,oh=Yf,ah=Yc.exports.Buffer,sh=[1518500249,1859775393,-1894007588,-899497514],uh=new Array(80);function ch(){this.init(),this._w=uh,oh.call(this,64,56);}function lh(t){return t<<5|t>>>27}function fh(t){return t<<30|t>>>2}function hh(t,e,r,n){return 0===t?e&r|~e&n:2===t?e&r|e&n|r&n:e^r^n}ih(ch,oh),ch.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},ch.prototype._update=function(t){for(var e,r=this._w,n=0|this._a,i=0|this._b,o=0|this._c,a=0|this._d,s=0|this._e,u=0;u<16;++u)r[u]=t.readInt32BE(4*u);for(;u<80;++u)r[u]=(e=r[u-3]^r[u-8]^r[u-14]^r[u-16])<<1|e>>>31;for(var c=0;c<80;++c){var l=~~(c/20),f=lh(n)+hh(l,i,o,a)+s+r[c]+sh[l]|0;s=a,a=o,o=fh(i),i=n,n=f;}this._a=n+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=a+this._d|0,this._e=s+this._e|0;},ch.prototype._hash=function(){var t=ah.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t};var dh=ch,ph=Or$1.exports,yh=Yf,gh=Yc.exports.Buffer,mh=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],bh=new Array(64);function vh(){this.init(),this._w=bh,yh.call(this,64,56);}function wh(t,e,r){return r^t&(e^r)}function _h(t,e,r){return t&e|r&(t|e)}function Sh(t){return (t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function Eh(t){return (t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function Ih(t){return (t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}ph(vh,yh),vh.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},vh.prototype._update=function(t){for(var e,r=this._w,n=0|this._a,i=0|this._b,o=0|this._c,a=0|this._d,s=0|this._e,u=0|this._f,c=0|this._g,l=0|this._h,f=0;f<16;++f)r[f]=t.readInt32BE(4*f);for(;f<64;++f)r[f]=0|(((e=r[f-2])>>>17|e<<15)^(e>>>19|e<<13)^e>>>10)+r[f-7]+Ih(r[f-15])+r[f-16];for(var h=0;h<64;++h){var d=l+Eh(s)+wh(s,u,c)+mh[h]+r[h]|0,p=Sh(n)+_h(n,i,o)|0;l=c,c=u,u=s,s=a+d|0,a=o,o=i,i=n,n=d+p|0;}this._a=n+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=a+this._d|0,this._e=s+this._e|0,this._f=u+this._f|0,this._g=c+this._g|0,this._h=l+this._h|0;},vh.prototype._hash=function(){var t=gh.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t};var Ah=vh,kh=Or$1.exports,Dh=Ah,xh=Yf,Th=Yc.exports.Buffer,Ph=new Array(64);function Oh(){this.init(),this._w=Ph,xh.call(this,64,56);}kh(Oh,Dh),Oh.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},Oh.prototype._hash=function(){var t=Th.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t};var Rh=Oh,Ch=Or$1.exports,Mh=Yf,Nh=Yc.exports.Buffer,jh=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],Bh=new Array(160);function Lh(){this.init(),this._w=Bh,Mh.call(this,128,112);}function Fh(t,e,r){return r^t&(e^r)}function Uh(t,e,r){return t&e|r&(t|e)}function zh(t,e){return (t>>>28|e<<4)^(e>>>2|t<<30)^(e>>>7|t<<25)}function Kh(t,e){return (t>>>14|e<<18)^(t>>>18|e<<14)^(e>>>9|t<<23)}function qh(t,e){return (t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7}function Hh(t,e){return (t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)}function Vh(t,e){return (t>>>19|e<<13)^(e>>>29|t<<3)^t>>>6}function Wh(t,e){return (t>>>19|e<<13)^(e>>>29|t<<3)^(t>>>6|e<<26)}function Jh(t,e){return t>>>0<e>>>0?1:0}Ch(Lh,Mh),Lh.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},Lh.prototype._update=function(t){for(var e=this._w,r=0|this._ah,n=0|this._bh,i=0|this._ch,o=0|this._dh,a=0|this._eh,s=0|this._fh,u=0|this._gh,c=0|this._hh,l=0|this._al,f=0|this._bl,h=0|this._cl,d=0|this._dl,p=0|this._el,y=0|this._fl,g=0|this._gl,m=0|this._hl,b=0;b<32;b+=2)e[b]=t.readInt32BE(4*b),e[b+1]=t.readInt32BE(4*b+4);for(;b<160;b+=2){var v=e[b-30],w=e[b-30+1],_=qh(v,w),S=Hh(w,v),E=Vh(v=e[b-4],w=e[b-4+1]),I=Wh(w,v),A=e[b-14],k=e[b-14+1],D=e[b-32],x=e[b-32+1],T=S+k|0,P=_+A+Jh(T,S)|0;P=(P=P+E+Jh(T=T+I|0,I)|0)+D+Jh(T=T+x|0,x)|0,e[b]=P,e[b+1]=T;}for(var O=0;O<160;O+=2){P=e[O],T=e[O+1];var R=Uh(r,n,i),C=Uh(l,f,h),M=zh(r,l),N=zh(l,r),j=Kh(a,p),B=Kh(p,a),L=jh[O],F=jh[O+1],U=Fh(a,s,u),z=Fh(p,y,g),K=m+B|0,q=c+j+Jh(K,m)|0;q=(q=(q=q+U+Jh(K=K+z|0,z)|0)+L+Jh(K=K+F|0,F)|0)+P+Jh(K=K+T|0,T)|0;var H=N+C|0,V=M+R+Jh(H,N)|0;c=u,m=g,u=s,g=y,s=a,y=p,a=o+q+Jh(p=d+K|0,d)|0,o=i,d=h,i=n,h=f,n=r,f=l,r=q+V+Jh(l=K+H|0,K)|0;}this._al=this._al+l|0,this._bl=this._bl+f|0,this._cl=this._cl+h|0,this._dl=this._dl+d|0,this._el=this._el+p|0,this._fl=this._fl+y|0,this._gl=this._gl+g|0,this._hl=this._hl+m|0,this._ah=this._ah+r+Jh(this._al,l)|0,this._bh=this._bh+n+Jh(this._bl,f)|0,this._ch=this._ch+i+Jh(this._cl,h)|0,this._dh=this._dh+o+Jh(this._dl,d)|0,this._eh=this._eh+a+Jh(this._el,p)|0,this._fh=this._fh+s+Jh(this._fl,y)|0,this._gh=this._gh+u+Jh(this._gl,g)|0,this._hh=this._hh+c+Jh(this._hl,m)|0;},Lh.prototype._hash=function(){var t=Nh.allocUnsafe(64);function e(e,r,n){t.writeInt32BE(e,n),t.writeInt32BE(r,n+4);}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t};var Yh=Lh,Zh=Or$1.exports,Gh=Yh,Xh=Yf,$h=Yc.exports.Buffer,Qh=new Array(160);function td(){this.init(),this._w=Qh,Xh.call(this,128,112);}Zh(td,Gh),td.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},td.prototype._hash=function(){var t=$h.allocUnsafe(48);function e(e,r,n){t.writeInt32BE(e,n),t.writeInt32BE(r,n+4);}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t};var ed=td,rd=Vf.exports=function(t){t=t.toLowerCase();var e=rd[t];if(!e)throw new Error(t+" is not supported (we accept pull requests)");return new e};rd.sha=nh,rd.sha1=dh,rd.sha224=Rh,rd.sha256=Ah,rd.sha384=ed,rd.sha512=Yh;var nd={},id=Yc.exports.Buffer,od=id.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return !0;default:return !1}};function ad(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return "utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return "utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return "utf16le";case"latin1":case"binary":return "latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0;}}(t);if("string"!=typeof e&&(id.isEncoding===od||!od(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=cd,this.end=ld,e=4;break;case"utf8":this.fillLast=ud,e=4;break;case"base64":this.text=fd,this.end=hd,e=3;break;default:return this.write=dd,void(this.end=pd)}this.lastNeed=0,this.lastTotal=0,this.lastChar=id.allocUnsafe(e);}function sd(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function ud(t){var e=this.lastTotal-this.lastNeed,r=function(t,e,r){if(128!=(192&e[0]))return t.lastNeed=0,"";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,""}}(this,t);return void 0!==r?r:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function cd(t,e){if((t.length-e)%2==0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function ld(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function fd(t,e){var r=(t.length-e)%3;return 0===r?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function hd(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function dd(t){return t.toString(this.encoding)}function pd(t){return t&&t.length?this.write(t):""}nd.StringDecoder=ad,ad.prototype.write=function(t){if(0===t.length)return "";var e,r;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return "";r=this.lastNeed,this.lastNeed=0;}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""},ad.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"":e},ad.prototype.text=function(t,e){var r=function(t,e,r){var n=e.length-1;if(n<r)return 0;var i=sd(e[n]);if(i>=0)return i>0&&(t.lastNeed=i-1),i;if(--n<r||-2===i)return 0;if((i=sd(e[n]))>=0)return i>0&&(t.lastNeed=i-2),i;if(--n<r||-2===i)return 0;if((i=sd(e[n]))>=0)return i>0&&(2===i?i=0:t.lastNeed=i-3),i;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)},ad.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length;};var yd=Yc.exports.Buffer,gd=ff.Transform,md=nd.StringDecoder;function bd(t){gd.call(this),this.hashMode="string"==typeof t,this.hashMode?this[t]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null;}(0, Or$1.exports)(bd,gd),bd.prototype.update=function(t,e,r){"string"==typeof t&&(t=yd.from(t,e));var n=this._update(t);return this.hashMode?this:(r&&(n=this._toString(n,r)),n)},bd.prototype.setAutoPadding=function(){},bd.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},bd.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},bd.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},bd.prototype._transform=function(t,e,r){var n;try{this.hashMode?this._update(t):this.push(this._update(t));}catch(t){n=t;}finally{r(n);}},bd.prototype._flush=function(t){var e;try{this.push(this.__final());}catch(t){e=t;}t(e);},bd.prototype._finalOrDigest=function(t){var e=this.__final()||yd.alloc(0);return t&&(e=this._toString(e,t,!0)),e},bd.prototype._toString=function(t,e,r){if(this._decoder||(this._decoder=new md(e),this._encoding=e),this._encoding!==e)throw new Error("can't switch encodings");var n=this._decoder.write(t);return r&&(n+=this._decoder.end()),n};var vd=bd,wd=Or$1.exports,_d=kf,Sd=Hf,Ed=Vf.exports,Id=vd;function Ad(t){Id.call(this,"digest"),this._hash=t;}wd(Ad,Id),Ad.prototype._update=function(t){this._hash.update(t);},Ad.prototype._final=function(){return this._hash.digest()};var kd=function(t){return "md5"===(t=t.toLowerCase())?new _d:"rmd160"===t||"ripemd160"===t?new Sd:new Ad(Ed(t))},Dd=kd,xd=Or$1.exports,Td=Yc.exports.Buffer,Pd=vd,Od=Td.alloc(128);function Rd(t,e){Pd.call(this,"digest"),"string"==typeof e&&(e=Td.from(e)),this._alg=t,this._key=e,e.length>64?e=t(e):e.length<64&&(e=Td.concat([e,Od],64));for(var r=this._ipad=Td.allocUnsafe(64),n=this._opad=Td.allocUnsafe(64),i=0;i<64;i++)r[i]=54^e[i],n[i]=92^e[i];this._hash=[r];}xd(Rd,Pd),Rd.prototype._update=function(t){this._hash.push(t);},Rd.prototype._final=function(){var t=this._alg(Td.concat(this._hash));return this._alg(Td.concat([this._opad,t]))};var Cd=Rd,Md=kf,Nd=function(t){return (new Md).update(t).digest()},jd=Or$1.exports,Bd=Cd,Ld=vd,Fd=Yc.exports.Buffer,Ud=Nd,zd=Hf,Kd=Vf.exports,qd=Fd.alloc(128);function Hd(t,e){Ld.call(this,"digest"),"string"==typeof e&&(e=Fd.from(e));var r="sha512"===t||"sha384"===t?128:64;(this._alg=t,this._key=e,e.length>r)?e=("rmd160"===t?new zd:Kd(t)).update(e).digest():e.length<r&&(e=Fd.concat([e,qd],r));for(var n=this._ipad=Fd.allocUnsafe(r),i=this._opad=Fd.allocUnsafe(r),o=0;o<r;o++)n[o]=54^e[o],i[o]=92^e[o];this._hash="rmd160"===t?new zd:Kd(t),this._hash.update(n);}jd(Hd,Ld),Hd.prototype._update=function(t){this._hash.update(t);},Hd.prototype._final=function(){var t=this._hash.digest();return ("rmd160"===this._alg?new zd:Kd(this._alg)).update(this._opad).update(t).digest()};var Vd,Wd=function(t,e){return "rmd160"===(t=t.toLowerCase())||"ripemd160"===t?new Hd("rmd160",e):"md5"===t?new Bd(Ud,e):new Hd(t,e)},Jd={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}},Yd=Jd,Zd={},Gd=Math.pow(2,30)-1,Xd=function(t,e){if("number"!=typeof t)throw new TypeError("Iterations not a number");if(t<0)throw new TypeError("Bad iterations");if("number"!=typeof e)throw new TypeError("Key length not a number");if(e<0||e>Gd||e!=e)throw new TypeError("Bad key length")};if(yt$1.process&&yt$1.process.browser)Vd="utf-8";else if(yt$1.process&&yt$1.process.version){Vd=parseInt(ke$1.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary";}else Vd="utf-8";var $d=Vd,Qd=Yc.exports.Buffer,tp=function(t,e,r){if(Qd.isBuffer(t))return t;if("string"==typeof t)return Qd.from(t,e);if(ArrayBuffer.isView(t))return Qd.from(t.buffer);throw new TypeError(r+" must be a string, a Buffer, a typed array or a DataView")},ep=Nd,rp=Hf,np=Vf.exports,ip=Yc.exports.Buffer,op=Xd,ap=$d,sp=tp,up=ip.alloc(128),cp={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function lp(t,e,r){var n=function(t){function e(e){return np(t).update(e).digest()}function r(t){return (new rp).update(t).digest()}return "rmd160"===t||"ripemd160"===t?r:"md5"===t?ep:e}(t),i="sha512"===t||"sha384"===t?128:64;e.length>i?e=n(e):e.length<i&&(e=ip.concat([e,up],i));for(var o=ip.allocUnsafe(i+cp[t]),a=ip.allocUnsafe(i+cp[t]),s=0;s<i;s++)o[s]=54^e[s],a[s]=92^e[s];var u=ip.allocUnsafe(i+r+4);o.copy(u,0,0,i),this.ipad1=u,this.ipad2=o,this.opad=a,this.alg=t,this.blocksize=i,this.hash=n,this.size=cp[t];}lp.prototype.run=function(t,e){return t.copy(e,this.blocksize),this.hash(e).copy(this.opad,this.blocksize),this.hash(this.opad)};var fp,hp,dp=function(t,e,r,n,i){op(r,n);var o=new lp(i=i||"sha1",t=sp(t,ap,"Password"),(e=sp(e,ap,"Salt")).length),a=ip.allocUnsafe(n),s=ip.allocUnsafe(e.length+4);e.copy(s,0,0,e.length);for(var u=0,c=cp[i],l=Math.ceil(n/c),f=1;f<=l;f++){s.writeUInt32BE(f,e.length);for(var h=o.run(s,o.ipad1),d=h,p=1;p<r;p++){d=o.run(d,o.ipad2);for(var y=0;y<c;y++)h[y]^=d[y];}h.copy(a,u),u+=c;}return a},pp=Yc.exports.Buffer,yp=Xd,gp=$d,mp=dp,bp=tp,vp=yt$1.crypto&&yt$1.crypto.subtle,wp={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},_p=[];function Sp(){return hp||(hp=yt$1.process&&yt$1.process.nextTick?yt$1.process.nextTick:yt$1.queueMicrotask?yt$1.queueMicrotask:yt$1.setImmediate?yt$1.setImmediate:yt$1.setTimeout)}function Ep(t,e,r,n,i){return vp.importKey("raw",t,{name:"PBKDF2"},!1,["deriveBits"]).then((function(t){return vp.deriveBits({name:"PBKDF2",salt:e,iterations:r,hash:{name:i}},t,n<<3)})).then((function(t){return pp.from(t)}))}Zd.pbkdf2=function(t,e,r,n,i,o){"function"==typeof i&&(o=i,i=void 0);var a=wp[(i=i||"sha1").toLowerCase()];if(a&&"function"==typeof yt$1.Promise){if(yp(r,n),t=bp(t,gp,"Password"),e=bp(e,gp,"Salt"),"function"!=typeof o)throw new Error("No callback provided to pbkdf2");!function(t,e){t.then((function(t){Sp()((function(){e(null,t);}));}),(function(t){Sp()((function(){e(t);}));}));}(function(t){if(yt$1.process&&!yt$1.process.browser)return Promise.resolve(!1);if(!vp||!vp.importKey||!vp.deriveBits)return Promise.resolve(!1);if(void 0!==_p[t])return _p[t];var e=Ep(fp=fp||pp.alloc(8),fp,10,128,t).then((function(){return !0})).catch((function(){return !1}));return _p[t]=e,e}(a).then((function(o){return o?Ep(t,e,r,n,a):mp(t,e,r,n,i)})),o);}else Sp()((function(){var a;try{a=mp(t,e,r,n,i);}catch(t){return o(t)}o(null,a);}));},Zd.pbkdf2Sync=dp;var Ip={},Ap=vd,kp=dc,Dp=Or$1.exports,xp=Yc.exports.Buffer,Tp={"des-ede3-cbc":kp.CBC.instantiate(kp.EDE),"des-ede3":kp.EDE,"des-ede-cbc":kp.CBC.instantiate(kp.EDE),"des-ede":kp.EDE,"des-cbc":kp.CBC.instantiate(kp.DES),"des-ecb":kp.DES};Tp.des=Tp["des-cbc"],Tp.des3=Tp["des-ede3-cbc"];var Pp=Op;function Op(t){Ap.call(this);var e,r=t.mode.toLowerCase(),n=Tp[r];e=t.decrypt?"decrypt":"encrypt";var i=t.key;xp.isBuffer(i)||(i=xp.from(i)),"des-ede"!==r&&"des-ede-cbc"!==r||(i=xp.concat([i,i.slice(0,8)]));var o=t.iv;xp.isBuffer(o)||(o=xp.from(o)),this._des=n.create({key:i,iv:o,type:e});}Dp(Op,Ap),Op.prototype._update=function(t){return xp.from(this._des.update(t))},Op.prototype._final=function(){return xp.from(this._des.final())};var Rp={},Cp={},Mp={encrypt:function(t,e){return t._cipher.encryptBlock(e)},decrypt:function(t,e){return t._cipher.decryptBlock(e)}},Np={},jp=function(t,e){for(var r=Math.min(t.length,e.length),n=new ei(r),i=0;i<r;++i)n[i]=t[i]^e[i];return n},Bp=jp;Np.encrypt=function(t,e){var r=Bp(e,t._prev);return t._prev=t._cipher.encryptBlock(r),t._prev},Np.decrypt=function(t,e){var r=t._prev;t._prev=e;var n=t._cipher.decryptBlock(e);return Bp(n,r)};var Lp={},Fp=Yc.exports.Buffer,Up=jp;function zp(t,e,r){var n=e.length,i=Up(e,t._cache);return t._cache=t._cache.slice(n),t._prev=Fp.concat([t._prev,r?e:i]),i}Lp.encrypt=function(t,e,r){for(var n,i=Fp.allocUnsafe(0);e.length;){if(0===t._cache.length&&(t._cache=t._cipher.encryptBlock(t._prev),t._prev=Fp.allocUnsafe(0)),!(t._cache.length<=e.length)){i=Fp.concat([i,zp(t,e,r)]);break}n=t._cache.length,i=Fp.concat([i,zp(t,e.slice(0,n),r)]),e=e.slice(n);}return i};var Kp={},qp=Yc.exports.Buffer;function Hp(t,e,r){var n=t._cipher.encryptBlock(t._prev)[0]^e;return t._prev=qp.concat([t._prev.slice(1),qp.from([r?e:n])]),n}Kp.encrypt=function(t,e,r){for(var n=e.length,i=qp.allocUnsafe(n),o=-1;++o<n;)i[o]=Hp(t,e[o],r);return i};var Vp={},Wp=Yc.exports.Buffer;function Jp(t,e,r){for(var n,i,o=-1,a=0;++o<8;)n=e&1<<7-o?128:0,a+=(128&(i=t._cipher.encryptBlock(t._prev)[0]^n))>>o%8,t._prev=Yp(t._prev,r?n:i);return a}function Yp(t,e){var r=t.length,n=-1,i=Wp.allocUnsafe(t.length);for(t=Wp.concat([t,Wp.from([e])]);++n<r;)i[n]=t[n]<<1|t[n+1]>>7;return i}Vp.encrypt=function(t,e,r){for(var n=e.length,i=Wp.allocUnsafe(n),o=-1;++o<n;)i[o]=Jp(t,e[o],r);return i};var Zp={},Gp=jp;function Xp(t){return t._prev=t._cipher.encryptBlock(t._prev),t._prev}Zp.encrypt=function(t,e){for(;t._cache.length<e.length;)t._cache=ei.concat([t._cache,Xp(t)]);var r=t._cache.slice(0,e.length);return t._cache=t._cache.slice(e.length),Gp(e,r)};var $p={};var Qp=function(t){for(var e,r=t.length;r--;){if(255!==(e=t.readUInt8(r))){e++,t.writeUInt8(e,r);break}t.writeUInt8(0,r);}},ty=jp,ey=Yc.exports.Buffer,ry=Qp;function ny(t){var e=t._cipher.encryptBlockRaw(t._prev);return ry(t._prev),e}$p.encrypt=function(t,e){var r=Math.ceil(e.length/16),n=t._cache.length;t._cache=ey.concat([t._cache,ey.allocUnsafe(16*r)]);for(var i=0;i<r;i++){var o=ny(t),a=n+16*i;t._cache.writeUInt32BE(o[0],a+0),t._cache.writeUInt32BE(o[1],a+4),t._cache.writeUInt32BE(o[2],a+8),t._cache.writeUInt32BE(o[3],a+12);}var s=t._cache.slice(0,e.length);return t._cache=t._cache.slice(e.length),ty(e,s)};var iy={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}},oy={ECB:Mp,CBC:Np,CFB:Lp,CFB8:Kp,CFB1:Vp,OFB:Zp,CTR:$p,GCM:$p},ay=iy;for(var sy in ay)ay[sy].module=oy[ay[sy].mode];var uy=ay,cy={},ly=Yc.exports.Buffer;function fy(t){ly.isBuffer(t)||(t=ly.from(t));for(var e=t.length/4|0,r=new Array(e),n=0;n<e;n++)r[n]=t.readUInt32BE(4*n);return r}function hy(t){for(;0<t.length;t++)t[0]=0;}function dy(t,e,r,n,i){for(var o,a,s,u,c=r[0],l=r[1],f=r[2],h=r[3],d=t[0]^e[0],p=t[1]^e[1],y=t[2]^e[2],g=t[3]^e[3],m=4,b=1;b<i;b++)o=c[d>>>24]^l[p>>>16&255]^f[y>>>8&255]^h[255&g]^e[m++],a=c[p>>>24]^l[y>>>16&255]^f[g>>>8&255]^h[255&d]^e[m++],s=c[y>>>24]^l[g>>>16&255]^f[d>>>8&255]^h[255&p]^e[m++],u=c[g>>>24]^l[d>>>16&255]^f[p>>>8&255]^h[255&y]^e[m++],d=o,p=a,y=s,g=u;return o=(n[d>>>24]<<24|n[p>>>16&255]<<16|n[y>>>8&255]<<8|n[255&g])^e[m++],a=(n[p>>>24]<<24|n[y>>>16&255]<<16|n[g>>>8&255]<<8|n[255&d])^e[m++],s=(n[y>>>24]<<24|n[g>>>16&255]<<16|n[d>>>8&255]<<8|n[255&p])^e[m++],u=(n[g>>>24]<<24|n[d>>>16&255]<<16|n[p>>>8&255]<<8|n[255&y])^e[m++],[o>>>=0,a>>>=0,s>>>=0,u>>>=0]}var py=[0,1,2,4,8,16,32,64,128,27,54],yy=function(){for(var t=new Array(256),e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;for(var r=[],n=[],i=[[],[],[],[]],o=[[],[],[],[]],a=0,s=0,u=0;u<256;++u){var c=s^s<<1^s<<2^s<<3^s<<4;c=c>>>8^255&c^99,r[a]=c,n[c]=a;var l=t[a],f=t[l],h=t[f],d=257*t[c]^16843008*c;i[0][a]=d<<24|d>>>8,i[1][a]=d<<16|d>>>16,i[2][a]=d<<8|d>>>24,i[3][a]=d,d=16843009*h^65537*f^257*l^16843008*a,o[0][c]=d<<24|d>>>8,o[1][c]=d<<16|d>>>16,o[2][c]=d<<8|d>>>24,o[3][c]=d,0===a?a=s=1:(a=l^t[t[t[h^l]]],s^=t[t[s]]);}return {SBOX:r,INV_SBOX:n,SUB_MIX:i,INV_SUB_MIX:o}}();function gy(t){this._key=fy(t),this._reset();}gy.blockSize=16,gy.keySize=32,gy.prototype.blockSize=gy.blockSize,gy.prototype.keySize=gy.keySize,gy.prototype._reset=function(){for(var t=this._key,e=t.length,r=e+6,n=4*(r+1),i=[],o=0;o<e;o++)i[o]=t[o];for(o=e;o<n;o++){var a=i[o-1];o%e==0?(a=a<<8|a>>>24,a=yy.SBOX[a>>>24]<<24|yy.SBOX[a>>>16&255]<<16|yy.SBOX[a>>>8&255]<<8|yy.SBOX[255&a],a^=py[o/e|0]<<24):e>6&&o%e==4&&(a=yy.SBOX[a>>>24]<<24|yy.SBOX[a>>>16&255]<<16|yy.SBOX[a>>>8&255]<<8|yy.SBOX[255&a]),i[o]=i[o-e]^a;}for(var s=[],u=0;u<n;u++){var c=n-u,l=i[c-(u%4?0:4)];s[u]=u<4||c<=4?l:yy.INV_SUB_MIX[0][yy.SBOX[l>>>24]]^yy.INV_SUB_MIX[1][yy.SBOX[l>>>16&255]]^yy.INV_SUB_MIX[2][yy.SBOX[l>>>8&255]]^yy.INV_SUB_MIX[3][yy.SBOX[255&l]];}this._nRounds=r,this._keySchedule=i,this._invKeySchedule=s;},gy.prototype.encryptBlockRaw=function(t){return dy(t=fy(t),this._keySchedule,yy.SUB_MIX,yy.SBOX,this._nRounds)},gy.prototype.encryptBlock=function(t){var e=this.encryptBlockRaw(t),r=ly.allocUnsafe(16);return r.writeUInt32BE(e[0],0),r.writeUInt32BE(e[1],4),r.writeUInt32BE(e[2],8),r.writeUInt32BE(e[3],12),r},gy.prototype.decryptBlock=function(t){var e=(t=fy(t))[1];t[1]=t[3],t[3]=e;var r=dy(t,this._invKeySchedule,yy.INV_SUB_MIX,yy.INV_SBOX,this._nRounds),n=ly.allocUnsafe(16);return n.writeUInt32BE(r[0],0),n.writeUInt32BE(r[3],4),n.writeUInt32BE(r[2],8),n.writeUInt32BE(r[1],12),n},gy.prototype.scrub=function(){hy(this._keySchedule),hy(this._invKeySchedule),hy(this._key);},cy.AES=gy;var my=Yc.exports.Buffer,by=my.alloc(16,0);function vy(t){var e=my.allocUnsafe(16);return e.writeUInt32BE(t[0]>>>0,0),e.writeUInt32BE(t[1]>>>0,4),e.writeUInt32BE(t[2]>>>0,8),e.writeUInt32BE(t[3]>>>0,12),e}function wy(t){this.h=t,this.state=my.alloc(16,0),this.cache=my.allocUnsafe(0);}wy.prototype.ghash=function(t){for(var e=-1;++e<t.length;)this.state[e]^=t[e];this._multiply();},wy.prototype._multiply=function(){for(var t,e,r,n=[(t=this.h).readUInt32BE(0),t.readUInt32BE(4),t.readUInt32BE(8),t.readUInt32BE(12)],i=[0,0,0,0],o=-1;++o<128;){for(0!=(this.state[~~(o/8)]&1<<7-o%8)&&(i[0]^=n[0],i[1]^=n[1],i[2]^=n[2],i[3]^=n[3]),r=0!=(1&n[3]),e=3;e>0;e--)n[e]=n[e]>>>1|(1&n[e-1])<<31;n[0]=n[0]>>>1,r&&(n[0]=n[0]^225<<24);}this.state=vy(i);},wy.prototype.update=function(t){var e;for(this.cache=my.concat([this.cache,t]);this.cache.length>=16;)e=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(e);},wy.prototype.final=function(t,e){return this.cache.length&&this.ghash(my.concat([this.cache,by],16)),this.ghash(vy([0,t,0,e])),this.state};var _y=wy,Sy=cy,Ey=Yc.exports.Buffer,Iy=vd,Ay=Or$1.exports,ky=_y,Dy=jp,xy=Qp;function Ty(t,e,r,n){Iy.call(this);var i=Ey.alloc(4,0);this._cipher=new Sy.AES(e);var o=this._cipher.encryptBlock(i);this._ghash=new ky(o),r=function(t,e,r){if(12===e.length)return t._finID=Ey.concat([e,Ey.from([0,0,0,1])]),Ey.concat([e,Ey.from([0,0,0,2])]);var n=new ky(r),i=e.length,o=i%16;n.update(e),o&&(o=16-o,n.update(Ey.alloc(o,0))),n.update(Ey.alloc(8,0));var a=8*i,s=Ey.alloc(8);s.writeUIntBE(a,0,8),n.update(s),t._finID=n.state;var u=Ey.from(t._finID);return xy(u),u}(this,r,o),this._prev=Ey.from(r),this._cache=Ey.allocUnsafe(0),this._secCache=Ey.allocUnsafe(0),this._decrypt=n,this._alen=0,this._len=0,this._mode=t,this._authTag=null,this._called=!1;}Ay(Ty,Iy),Ty.prototype._update=function(t){if(!this._called&&this._alen){var e=16-this._alen%16;e<16&&(e=Ey.alloc(e,0),this._ghash.update(e));}this._called=!0;var r=this._mode.encrypt(this,t);return this._decrypt?this._ghash.update(t):this._ghash.update(r),this._len+=t.length,r},Ty.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var t=Dy(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(t,e){var r=0;t.length!==e.length&&r++;for(var n=Math.min(t.length,e.length),i=0;i<n;++i)r+=t[i]^e[i];return r}(t,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=t,this._cipher.scrub();},Ty.prototype.getAuthTag=function(){if(this._decrypt||!Ey.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},Ty.prototype.setAuthTag=function(t){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=t;},Ty.prototype.setAAD=function(t){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(t),this._alen+=t.length;};var Py=Ty,Oy=cy,Ry=Yc.exports.Buffer,Cy=vd;function My(t,e,r,n){Cy.call(this),this._cipher=new Oy.AES(e),this._prev=Ry.from(r),this._cache=Ry.allocUnsafe(0),this._secCache=Ry.allocUnsafe(0),this._decrypt=n,this._mode=t;}(0, Or$1.exports)(My,Cy),My.prototype._update=function(t){return this._mode.encrypt(this,t,this._decrypt)},My.prototype._final=function(){this._cipher.scrub();};var Ny=My,jy=Yc.exports.Buffer,By=kf;var Ly=function(t,e,r,n){if(jy.isBuffer(t)||(t=jy.from(t,"binary")),e&&(jy.isBuffer(e)||(e=jy.from(e,"binary")),8!==e.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var i=r/8,o=jy.alloc(i),a=jy.alloc(n||0),s=jy.alloc(0);i>0||n>0;){var u=new By;u.update(s),u.update(t),e&&u.update(e),s=u.digest();var c=0;if(i>0){var l=o.length-i;c=Math.min(i,s.length),s.copy(o,l,0,c),i-=c;}if(c<s.length&&n>0){var f=a.length-n,h=Math.min(n,s.length-c);s.copy(a,f,c,c+h),n-=h;}}return s.fill(0),{key:o,iv:a}},Fy=uy,Uy=Py,zy=Yc.exports.Buffer,Ky=Ny,qy=vd,Hy=cy,Vy=Ly;function Wy(t,e,r){qy.call(this),this._cache=new Yy,this._cipher=new Hy.AES(e),this._prev=zy.from(r),this._mode=t,this._autopadding=!0;}(0, Or$1.exports)(Wy,qy),Wy.prototype._update=function(t){var e,r;this._cache.add(t);for(var n=[];e=this._cache.get();)r=this._mode.encrypt(this,e),n.push(r);return zy.concat(n)};var Jy=zy.alloc(16,16);function Yy(){this.cache=zy.allocUnsafe(0);}function Zy(t,e,r){var n=Fy[t.toLowerCase()];if(!n)throw new TypeError("invalid suite type");if("string"==typeof e&&(e=zy.from(e)),e.length!==n.key/8)throw new TypeError("invalid key length "+e.length);if("string"==typeof r&&(r=zy.from(r)),"GCM"!==n.mode&&r.length!==n.iv)throw new TypeError("invalid iv length "+r.length);return "stream"===n.type?new Ky(n.module,e,r):"auth"===n.type?new Uy(n.module,e,r):new Wy(n.module,e,r)}Wy.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return t=this._mode.encrypt(this,t),this._cipher.scrub(),t;if(!t.equals(Jy))throw this._cipher.scrub(),new Error("data not multiple of block length")},Wy.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},Yy.prototype.add=function(t){this.cache=zy.concat([this.cache,t]);},Yy.prototype.get=function(){if(this.cache.length>15){var t=this.cache.slice(0,16);return this.cache=this.cache.slice(16),t}return null},Yy.prototype.flush=function(){for(var t=16-this.cache.length,e=zy.allocUnsafe(t),r=-1;++r<t;)e.writeUInt8(t,r);return zy.concat([this.cache,e])},Cp.createCipheriv=Zy,Cp.createCipher=function(t,e){var r=Fy[t.toLowerCase()];if(!r)throw new TypeError("invalid suite type");var n=Vy(e,!1,r.key,r.iv);return Zy(t,n.key,n.iv)};var Gy={},Xy=Py,$y=Yc.exports.Buffer,Qy=uy,tg=Ny,eg=vd,rg=cy,ng=Ly;function ig(t,e,r){eg.call(this),this._cache=new og,this._last=void 0,this._cipher=new rg.AES(e),this._prev=$y.from(r),this._mode=t,this._autopadding=!0;}function og(){this.cache=$y.allocUnsafe(0);}function ag(t,e,r){var n=Qy[t.toLowerCase()];if(!n)throw new TypeError("invalid suite type");if("string"==typeof r&&(r=$y.from(r)),"GCM"!==n.mode&&r.length!==n.iv)throw new TypeError("invalid iv length "+r.length);if("string"==typeof e&&(e=$y.from(e)),e.length!==n.key/8)throw new TypeError("invalid key length "+e.length);return "stream"===n.type?new tg(n.module,e,r,!0):"auth"===n.type?new Xy(n.module,e,r,!0):new ig(n.module,e,r)}(0, Or$1.exports)(ig,eg),ig.prototype._update=function(t){var e,r;this._cache.add(t);for(var n=[];e=this._cache.get(this._autopadding);)r=this._mode.decrypt(this,e),n.push(r);return $y.concat(n)},ig.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return function(t){var e=t[15];if(e<1||e>16)throw new Error("unable to decrypt data");var r=-1;for(;++r<e;)if(t[r+(16-e)]!==e)throw new Error("unable to decrypt data");if(16===e)return;return t.slice(0,16-e)}(this._mode.decrypt(this,t));if(t)throw new Error("data not multiple of block length")},ig.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},og.prototype.add=function(t){this.cache=$y.concat([this.cache,t]);},og.prototype.get=function(t){var e;if(t){if(this.cache.length>16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e}else if(this.cache.length>=16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e;return null},og.prototype.flush=function(){if(this.cache.length)return this.cache},Gy.createDecipher=function(t,e){var r=Qy[t.toLowerCase()];if(!r)throw new TypeError("invalid suite type");var n=ng(e,!1,r.key,r.iv);return ag(t,n.key,n.iv)},Gy.createDecipheriv=ag;var sg=Cp,ug=Gy,cg=iy;Rp.createCipher=Rp.Cipher=sg.createCipher,Rp.createCipheriv=Rp.Cipheriv=sg.createCipheriv,Rp.createDecipher=Rp.Decipher=ug.createDecipher,Rp.createDecipheriv=Rp.Decipheriv=ug.createDecipheriv,Rp.listCiphers=Rp.getCiphers=function(){return Object.keys(cg)};var lg={};!function(t){t["des-ecb"]={key:8,iv:0},t["des-cbc"]=t.des={key:8,iv:8},t["des-ede3-cbc"]=t.des3={key:24,iv:8},t["des-ede3"]={key:24,iv:0},t["des-ede-cbc"]={key:16,iv:8},t["des-ede"]={key:16,iv:0};}(lg);var fg=Pp,hg=Rp,dg=uy,pg=lg,yg=Ly;function gg(t,e,r){if(t=t.toLowerCase(),dg[t])return hg.createCipheriv(t,e,r);if(pg[t])return new fg({key:e,iv:r,mode:t});throw new TypeError("invalid suite type")}function mg(t,e,r){if(t=t.toLowerCase(),dg[t])return hg.createDecipheriv(t,e,r);if(pg[t])return new fg({key:e,iv:r,mode:t,decrypt:!0});throw new TypeError("invalid suite type")}Ip.createCipher=Ip.Cipher=function(t,e){var r,n;if(t=t.toLowerCase(),dg[t])r=dg[t].key,n=dg[t].iv;else {if(!pg[t])throw new TypeError("invalid suite type");r=8*pg[t].key,n=pg[t].iv;}var i=yg(e,!1,r,n);return gg(t,i.key,i.iv)},Ip.createCipheriv=Ip.Cipheriv=gg,Ip.createDecipher=Ip.Decipher=function(t,e){var r,n;if(t=t.toLowerCase(),dg[t])r=dg[t].key,n=dg[t].iv;else {if(!pg[t])throw new TypeError("invalid suite type");r=8*pg[t].key,n=pg[t].iv;}var i=yg(e,!1,r,n);return mg(t,i.key,i.iv)},Ip.createDecipheriv=Ip.Decipheriv=mg,Ip.listCiphers=Ip.getCiphers=function(){return Object.keys(pg).concat(hg.getCiphers())};var bg={},vg=kr$1.exports,wg=eo.exports;function _g(t){this.rand=t||new wg.Rand;}var Sg=_g;_g.create=function(t){return new _g(t)},_g.prototype._randbelow=function(t){var e=t.bitLength(),r=Math.ceil(e/8);do{var n=new vg(this.rand.generate(r));}while(n.cmp(t)>=0);return n},_g.prototype._randrange=function(t,e){var r=e.sub(t);return t.add(this._randbelow(r))},_g.prototype.test=function(t,e,r){var n=t.bitLength(),i=vg.mont(t),o=new vg(1).toRed(i);e||(e=Math.max(1,n/48|0));for(var a=t.subn(1),s=0;!a.testn(s);s++);for(var u=t.shrn(s),c=a.toRed(i);e>0;e--){var l=this._randrange(new vg(2),a);r&&r(l);var f=l.toRed(i).redPow(u);if(0!==f.cmp(o)&&0!==f.cmp(c)){for(var h=1;h<s;h++){if(0===(f=f.redSqr()).cmp(o))return !1;if(0===f.cmp(c))break}if(h===s)return !1}}return !0},_g.prototype.getDivisor=function(t,e){var r=t.bitLength(),n=vg.mont(t),i=new vg(1).toRed(n);e||(e=Math.max(1,r/48|0));for(var o=t.subn(1),a=0;!o.testn(a);a++);for(var s=t.shrn(a),u=o.toRed(n);e>0;e--){var c=this._randrange(new vg(2),o),l=t.gcd(c);if(0!==l.cmpn(1))return l;var f=c.toRed(n).redPow(s);if(0!==f.cmp(i)&&0!==f.cmp(u)){for(var h=1;h<a;h++){if(0===(f=f.redSqr()).cmp(i))return f.fromRed().subn(1).gcd(t);if(0===f.cmp(u))break}if(h===a)return (f=f.redSqr()).fromRed().subn(1).gcd(t)}}return !1};var Eg=Jc.exports,Ig=Lg;Lg.simpleSieve=jg,Lg.fermatTest=Bg;var Ag=kr$1.exports,kg=new Ag(24),Dg=new Sg,xg=new Ag(1),Tg=new Ag(2),Pg=new Ag(5);new Ag(16),new Ag(8);var Og=new Ag(10),Rg=new Ag(3);new Ag(7);var Cg=new Ag(11),Mg=new Ag(4);new Ag(12);var Ng=null;function jg(t){for(var e=function(){if(null!==Ng)return Ng;var t=[];t[0]=2;for(var e=1,r=3;r<1048576;r+=2){for(var n=Math.ceil(Math.sqrt(r)),i=0;i<e&&t[i]<=n&&r%t[i]!=0;i++);e!==i&&t[i]<=n||(t[e++]=r);}return Ng=t,t}(),r=0;r<e.length;r++)if(0===t.modn(e[r]))return 0===t.cmpn(e[r]);return !0}function Bg(t){var e=Ag.mont(t);return 0===Tg.toRed(e).redPow(t.subn(1)).fromRed().cmpn(1)}function Lg(t,e){if(t<16)return new Ag(2===e||5===e?[140,123]:[140,39]);var r,n;for(e=new Ag(e);;){for(r=new Ag(Eg(Math.ceil(t/8)));r.bitLength()>t;)r.ishrn(1);if(r.isEven()&&r.iadd(xg),r.testn(1)||r.iadd(Tg),e.cmp(Tg)){if(!e.cmp(Pg))for(;r.mod(Og).cmp(Rg);)r.iadd(Mg);}else for(;r.mod(kg).cmp(Cg);)r.iadd(Mg);if(jg(n=r.shrn(1))&&jg(r)&&Bg(n)&&Bg(r)&&Dg.test(n)&&Dg.test(r))return r}}var Fg={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}},Ug=kr$1.exports,zg=new Sg,Kg=new Ug(24),qg=new Ug(11),Hg=new Ug(10),Vg=new Ug(3),Wg=new Ug(7),Jg=Ig,Yg=Jc.exports,Zg=Qg;function Gg(t,e){return e=e||"utf8",Bi(t)||(t=new ei(t,e)),this._pub=new Ug(t),this}function Xg(t,e){return e=e||"utf8",Bi(t)||(t=new ei(t,e)),this._priv=new Ug(t),this}var $g={};function Qg(t,e,r){this.setGenerator(e),this.__prime=new Ug(t),this._prime=Ug.mont(this.__prime),this._primeLen=t.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,r?(this.setPublicKey=Gg,this.setPrivateKey=Xg):this._primeCode=8;}function tm(t,e){var r=new ei(t.toArray());return e?r.toString(e):r}Object.defineProperty(Qg.prototype,"verifyError",{enumerable:!0,get:function(){return "number"!=typeof this._primeCode&&(this._primeCode=function(t,e){var r=e.toString("hex"),n=[r,t.toString(16)].join("_");if(n in $g)return $g[n];var i,o=0;if(t.isEven()||!Jg.simpleSieve||!Jg.fermatTest(t)||!zg.test(t))return o+=1,o+="02"===r||"05"===r?8:4,$g[n]=o,o;switch(zg.test(t.shrn(1))||(o+=2),r){case"02":t.mod(Kg).cmp(qg)&&(o+=8);break;case"05":(i=t.mod(Hg)).cmp(Vg)&&i.cmp(Wg)&&(o+=8);break;default:o+=4;}return $g[n]=o,o}(this.__prime,this.__gen)),this._primeCode}}),Qg.prototype.generateKeys=function(){return this._priv||(this._priv=new Ug(Yg(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},Qg.prototype.computeSecret=function(t){var e=new ei((t=(t=new Ug(t)).toRed(this._prime)).redPow(this._priv).fromRed().toArray()),r=this.getPrime();if(e.length<r.length){var n=new ei(r.length-e.length);n.fill(0),e=ei.concat([n,e]);}return e},Qg.prototype.getPublicKey=function(t){return tm(this._pub,t)},Qg.prototype.getPrivateKey=function(t){return tm(this._priv,t)},Qg.prototype.getPrime=function(t){return tm(this.__prime,t)},Qg.prototype.getGenerator=function(t){return tm(this._gen,t)},Qg.prototype.setGenerator=function(t,e){return e=e||"utf8",Bi(t)||(t=new ei(t,e)),this.__gen=t,this._gen=new Ug(t),this};var em=Ig,rm=Fg,nm=Zg;var im={binary:!0,hex:!0,base64:!0};bg.DiffieHellmanGroup=bg.createDiffieHellmanGroup=bg.getDiffieHellman=function(t){var e=new ei(rm[t].prime,"hex"),r=new ei(rm[t].gen,"hex");return new nm(e,r)},bg.createDiffieHellman=bg.DiffieHellman=function t(e,r,n,i){return Bi(r)||void 0===im[r]?t(e,"binary",r,n):(r=r||"binary",i=i||"binary",Bi(n=n||new ei([2]))||(n=new ei(n,i)),"number"==typeof e?new nm(em(e,n),n,!0):(Bi(e)||(e=new ei(e,r)),new nm(e,n,!0)))};var om={exports:{}},am=kr$1.exports,sm=Jc.exports;function um(t){var e,r=t.modulus.byteLength();do{e=new am(sm(r));}while(e.cmp(t.modulus)>=0||!e.umod(t.prime1)||!e.umod(t.prime2));return e}function cm(t,e){var r=function(t){var e=um(t);return {blinder:e.toRed(am.mont(t.modulus)).redPow(new am(t.publicExponent)).fromRed(),unblinder:e.invm(t.modulus)}}(e),n=e.modulus.byteLength(),i=new am(t).mul(r.blinder).umod(e.modulus),o=i.toRed(am.mont(e.prime1)),a=i.toRed(am.mont(e.prime2)),s=e.coefficient,u=e.prime1,c=e.prime2,l=o.redPow(e.exponent1).fromRed(),f=a.redPow(e.exponent2).fromRed(),h=l.isub(f).imul(s).umod(u).imul(c);return f.iadd(h).imul(r.unblinder).umod(e.modulus).toArrayLike(ei,"be",n)}cm.getr=um;var lm=cm,fm={},hm=Ar$1,dm=hm.define("Time",(function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()});})),pm=hm.define("AttributeTypeValue",(function(){this.seq().obj(this.key("type").objid(),this.key("value").any());})),ym=hm.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional());})),gm=hm.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(ym),this.key("subjectPublicKey").bitstr());})),mm=hm.define("RelativeDistinguishedName",(function(){this.setof(pm);})),bm=hm.define("RDNSequence",(function(){this.seqof(mm);})),vm=hm.define("Name",(function(){this.choice({rdnSequence:this.use(bm)});})),wm=hm.define("Validity",(function(){this.seq().obj(this.key("notBefore").use(dm),this.key("notAfter").use(dm));})),_m=hm.define("Extension",(function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr());})),Sm=hm.define("TBSCertificate",(function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(ym),this.key("issuer").use(vm),this.key("validity").use(wm),this.key("subject").use(vm),this.key("subjectPublicKeyInfo").use(gm),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(_m).optional());})),Em=hm.define("X509Certificate",(function(){this.seq().obj(this.key("tbsCertificate").use(Sm),this.key("signatureAlgorithm").use(ym),this.key("signatureValue").bitstr());})),Im=Ar$1;fm.certificate=Em;var Am=Im.define("RSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int());}));fm.RSAPrivateKey=Am;var km=Im.define("RSAPublicKey",(function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int());}));fm.RSAPublicKey=km;var Dm=Im.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(xm),this.key("subjectPublicKey").bitstr());}));fm.PublicKey=Dm;var xm=Im.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional());})),Tm=Im.define("PrivateKeyInfo",(function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(xm),this.key("subjectPrivateKey").octstr());}));fm.PrivateKey=Tm;var Pm=Im.define("EncryptedPrivateKeyInfo",(function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr());}));fm.EncryptedPrivateKey=Pm;var Om=Im.define("DSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int());}));fm.DSAPrivateKey=Om,fm.DSAparam=Im.define("DSAparam",(function(){this.int();}));var Rm=Im.define("ECPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(Cm),this.key("publicKey").optional().explicit(1).bitstr());}));fm.ECPrivateKey=Rm;var Cm=Im.define("ECParameters",(function(){this.choice({namedCurve:this.objid()});}));fm.signature=Im.define("signature",(function(){this.seq().obj(this.key("r").int(),this.key("s").int());}));var Mm=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,Nm=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,jm=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,Bm=Ly,Lm=Rp,Fm=Yc.exports.Buffer,Um=fm,zm={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"},Km=function(t,e){var r,n=t.toString(),i=n.match(Mm);if(i){var o="aes"+i[1],a=Fm.from(i[2],"hex"),s=Fm.from(i[3].replace(/[\r\n]/g,""),"base64"),u=Bm(e,a.slice(0,8),parseInt(i[1],10)).key,c=[],l=Lm.createDecipheriv(o,u,a);c.push(l.update(s)),c.push(l.final()),r=Fm.concat(c);}else {var f=n.match(jm);r=Fm.from(f[2].replace(/[\r\n]/g,""),"base64");}return {tag:n.match(Nm)[1],data:r}},qm=Rp,Hm=Zd,Vm=Yc.exports.Buffer,Wm=Jm;function Jm(t){var e;"object"!=typeof t||Vm.isBuffer(t)||(e=t.passphrase,t=t.key),"string"==typeof t&&(t=Vm.from(t));var r,n,i=Km(t,e),o=i.tag,a=i.data;switch(o){case"CERTIFICATE":n=Um.certificate.decode(a,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(n||(n=Um.PublicKey.decode(a,"der")),r=n.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return Um.RSAPublicKey.decode(n.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return n.subjectPrivateKey=n.subjectPublicKey,{type:"ec",data:n};case"1.2.840.10040.4.1":return n.algorithm.params.pub_key=Um.DSAparam.decode(n.subjectPublicKey.data,"der"),{type:"dsa",data:n.algorithm.params};default:throw new Error("unknown key id "+r)}case"ENCRYPTED PRIVATE KEY":a=function(t,e){var r=t.algorithm.decrypt.kde.kdeparams.salt,n=parseInt(t.algorithm.decrypt.kde.kdeparams.iters.toString(),10),i=zm[t.algorithm.decrypt.cipher.algo.join(".")],o=t.algorithm.decrypt.cipher.iv,a=t.subjectPrivateKey,s=parseInt(i.split("-")[1],10)/8,u=Hm.pbkdf2Sync(e,r,n,s,"sha1"),c=qm.createDecipheriv(i,u,o),l=[];return l.push(c.update(a)),l.push(c.final()),Vm.concat(l)}(a=Um.EncryptedPrivateKey.decode(a,"der"),e);case"PRIVATE KEY":switch(r=(n=Um.PrivateKey.decode(a,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return Um.RSAPrivateKey.decode(n.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return {curve:n.algorithm.curve,privateKey:Um.ECPrivateKey.decode(n.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return n.algorithm.params.priv_key=Um.DSAparam.decode(n.subjectPrivateKey,"der"),{type:"dsa",params:n.algorithm.params};default:throw new Error("unknown key id "+r)}case"RSA PUBLIC KEY":return Um.RSAPublicKey.decode(a,"der");case"RSA PRIVATE KEY":return Um.RSAPrivateKey.decode(a,"der");case"DSA PRIVATE KEY":return {type:"dsa",params:Um.DSAPrivateKey.decode(a,"der")};case"EC PRIVATE KEY":return {curve:(a=Um.ECPrivateKey.decode(a,"der")).parameters.value,privateKey:a.privateKey};default:throw new Error("unknown key type "+o)}}Jm.signature=Um.signature;var Ym={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"},Zm=Yc.exports.Buffer,Gm=Wd,Xm=lm,$m=Gi.ec,Qm=kr$1.exports,tb=Wm,eb=Ym;function rb(t,e,r,n){if((t=Zm.from(t.toArray())).length<e.byteLength()){var i=Zm.alloc(e.byteLength()-t.length);t=Zm.concat([i,t]);}var o=r.length,a=function(t,e){t=(t=nb(t,e)).mod(e);var r=Zm.from(t.toArray());if(r.length<e.byteLength()){var n=Zm.alloc(e.byteLength()-r.length);r=Zm.concat([n,r]);}return r}(r,e),s=Zm.alloc(o);s.fill(1);var u=Zm.alloc(o);return u=Gm(n,u).update(s).update(Zm.from([0])).update(t).update(a).digest(),s=Gm(n,u).update(s).digest(),{k:u=Gm(n,u).update(s).update(Zm.from([1])).update(t).update(a).digest(),v:s=Gm(n,u).update(s).digest()}}function nb(t,e){var r=new Qm(t),n=(t.length<<3)-e.bitLength();return n>0&&r.ishrn(n),r}function ib(t,e,r){var n,i;do{for(n=Zm.alloc(0);8*n.length<t.bitLength();)e.v=Gm(r,e.k).update(e.v).digest(),n=Zm.concat([n,e.v]);i=nb(n,t),e.k=Gm(r,e.k).update(e.v).update(Zm.from([0])).digest(),e.v=Gm(r,e.k).update(e.v).digest();}while(-1!==i.cmp(t));return i}function ob(t,e,r,n){return t.toRed(Qm.mont(r)).redPow(e).fromRed().mod(n)}om.exports=function(t,e,r,n,i){var o=tb(e);if(o.curve){if("ecdsa"!==n&&"ecdsa/rsa"!==n)throw new Error("wrong private key type");return function(t,e){var r=eb[e.curve.join(".")];if(!r)throw new Error("unknown curve "+e.curve.join("."));var n=new $m(r).keyFromPrivate(e.privateKey).sign(t);return Zm.from(n.toDER())}(t,o)}if("dsa"===o.type){if("dsa"!==n)throw new Error("wrong private key type");return function(t,e,r){var n,i=e.params.priv_key,o=e.params.p,a=e.params.q,s=e.params.g,u=new Qm(0),c=nb(t,a).mod(a),l=!1,f=rb(i,a,t,r);for(;!1===l;)u=ob(s,n=ib(a,f,r),o,a),0===(l=n.invm(a).imul(c.add(i.mul(u))).mod(a)).cmpn(0)&&(l=!1,u=new Qm(0));return function(t,e){t=t.toArray(),e=e.toArray(),128&t[0]&&(t=[0].concat(t));128&e[0]&&(e=[0].concat(e));var r=[48,t.length+e.length+4,2,t.length];return r=r.concat(t,[2,e.length],e),Zm.from(r)}(u,l)}(t,o,r)}if("rsa"!==n&&"ecdsa/rsa"!==n)throw new Error("wrong private key type");t=Zm.concat([i,t]);for(var a=o.modulus.byteLength(),s=[0,1];t.length+s.length+1<a;)s.push(255);s.push(0);for(var u=-1;++u<t.length;)s.push(t[u]);return Xm(s,o)},om.exports.getKey=rb,om.exports.makeKey=ib;var ab=Yc.exports.Buffer,sb=kr$1.exports,ub=Gi.ec,cb=Wm,lb=Ym;function fb(t,e){if(t.cmpn(0)<=0)throw new Error("invalid sig");if(t.cmp(e)>=e)throw new Error("invalid sig")}var hb=function(t,e,r,n,i){var o=cb(r);if("ec"===o.type){if("ecdsa"!==n&&"ecdsa/rsa"!==n)throw new Error("wrong public key type");return function(t,e,r){var n=lb[r.data.algorithm.curve.join(".")];if(!n)throw new Error("unknown curve "+r.data.algorithm.curve.join("."));var i=new ub(n),o=r.data.subjectPrivateKey.data;return i.verify(e,t,o)}(t,e,o)}if("dsa"===o.type){if("dsa"!==n)throw new Error("wrong public key type");return function(t,e,r){var n=r.data.p,i=r.data.q,o=r.data.g,a=r.data.pub_key,s=cb.signature.decode(t,"der"),u=s.s,c=s.r;fb(u,i),fb(c,i);var l=sb.mont(n),f=u.invm(i);return 0===o.toRed(l).redPow(new sb(e).mul(f).mod(i)).fromRed().mul(a.toRed(l).redPow(c.mul(f).mod(i)).fromRed()).mod(n).mod(i).cmp(c)}(t,e,o)}if("rsa"!==n&&"ecdsa/rsa"!==n)throw new Error("wrong public key type");e=ab.concat([i,e]);for(var a=o.modulus.byteLength(),s=[1],u=0;e.length+s.length+2<a;)s.push(255),u++;s.push(0);for(var c=-1;++c<e.length;)s.push(e[c]);s=ab.from(s);var l=sb.mont(o.modulus);t=(t=new sb(t).toRed(l)).redPow(new sb(o.publicExponent)),t=ab.from(t.fromRed().toArray());var f=u<8?1:0;for(a=Math.min(t.length,s.length),t.length!==s.length&&(f=1),c=-1;++c<a;)f|=t[c]^s[c];return 0===f},db=Yc.exports.Buffer,pb=kd,yb=ff,gb=Or$1.exports,mb=om.exports,bb=hb,vb=Jd;function wb(t){yb.Writable.call(this);var e=vb[t];if(!e)throw new Error("Unknown message digest");this._hashType=e.hash,this._hash=pb(e.hash),this._tag=e.id,this._signType=e.sign;}function _b(t){yb.Writable.call(this);var e=vb[t];if(!e)throw new Error("Unknown message digest");this._hash=pb(e.hash),this._tag=e.id,this._signType=e.sign;}function Sb(t){return new wb(t)}function Eb(t){return new _b(t)}Object.keys(vb).forEach((function(t){vb[t].id=db.from(vb[t].id,"hex"),vb[t.toLowerCase()]=vb[t];})),gb(wb,yb.Writable),wb.prototype._write=function(t,e,r){this._hash.update(t),r();},wb.prototype.update=function(t,e){return "string"==typeof t&&(t=db.from(t,e)),this._hash.update(t),this},wb.prototype.sign=function(t,e){this.end();var r=this._hash.digest(),n=mb(r,t,this._hashType,this._signType,this._tag);return e?n.toString(e):n},gb(_b,yb.Writable),_b.prototype._write=function(t,e,r){this._hash.update(t),r();},_b.prototype.update=function(t,e){return "string"==typeof t&&(t=db.from(t,e)),this._hash.update(t),this},_b.prototype.verify=function(t,e,r){"string"==typeof e&&(e=db.from(e,r)),this.end();var n=this._hash.digest();return bb(e,n,t,this._signType,this._tag)};var Ib={Sign:Sb,Verify:Eb,createSign:Sb,createVerify:Eb},Ab=Gi,kb=kr$1.exports,Db={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function xb(t){this.curveType=Db[t],this.curveType||(this.curveType={name:t}),this.curve=new Ab.ec(this.curveType.name),this.keys=void 0;}function Tb(t,e,r){Array.isArray(t)||(t=t.toArray());var n=new ei(t);if(r&&n.length<r){var i=new ei(r-n.length);i.fill(0),n=ei.concat([i,n]);}return e?n.toString(e):n}Db.p224=Db.secp224r1,Db.p256=Db.secp256r1=Db.prime256v1,Db.p192=Db.secp192r1=Db.prime192v1,Db.p384=Db.secp384r1,Db.p521=Db.secp521r1,xb.prototype.generateKeys=function(t,e){return this.keys=this.curve.genKeyPair(),this.getPublicKey(t,e)},xb.prototype.computeSecret=function(t,e,r){return e=e||"utf8",Bi(t)||(t=new ei(t,e)),Tb(this.curve.keyFromPublic(t).getPublic().mul(this.keys.getPrivate()).getX(),r,this.curveType.byteLength)},xb.prototype.getPublicKey=function(t,e){var r=this.keys.getPublic("compressed"===e,!0);return "hybrid"===e&&(r[r.length-1]%2?r[0]=7:r[0]=6),Tb(r,t)},xb.prototype.getPrivateKey=function(t){return Tb(this.keys.getPrivate(),t)},xb.prototype.setPublicKey=function(t,e){return e=e||"utf8",Bi(t)||(t=new ei(t,e)),this.keys._importPublic(t),this},xb.prototype.setPrivateKey=function(t,e){e=e||"utf8",Bi(t)||(t=new ei(t,e));var r=new kb(t);return r=r.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(r),this};var Pb={},Ob=kd,Rb=Yc.exports.Buffer,Cb=function(t,e){for(var r,n=Rb.alloc(0),i=0;n.length<e;)r=Mb(i++),n=Rb.concat([n,Ob("sha1").update(t).update(r).digest()]);return n.slice(0,e)};function Mb(t){var e=Rb.allocUnsafe(4);return e.writeUInt32BE(t,0),e}var Nb=function(t,e){for(var r=t.length,n=-1;++n<r;)t[n]^=e[n];return t},jb=kr$1.exports,Bb=Yc.exports.Buffer;var Lb=function(t,e){return Bb.from(t.toRed(jb.mont(e.modulus)).redPow(new jb(e.publicExponent)).fromRed().toArray())},Fb=Wm,Ub=Jc.exports,zb=kd,Kb=Cb,qb=Nb,Hb=kr$1.exports,Vb=Lb,Wb=lm,Jb=Yc.exports.Buffer,Yb=function(t,e,r){var n;n=t.padding?t.padding:r?1:4;var i,o=Fb(t);if(4===n)i=function(t,e){var r=t.modulus.byteLength(),n=e.length,i=zb("sha1").update(Jb.alloc(0)).digest(),o=i.length,a=2*o;if(n>r-a-2)throw new Error("message too long");var s=Jb.alloc(r-n-a-2),u=r-o-1,c=Ub(o),l=qb(Jb.concat([i,s,Jb.alloc(1,1),e],u),Kb(c,u)),f=qb(c,Kb(l,o));return new Hb(Jb.concat([Jb.alloc(1),f,l],r))}(o,e);else if(1===n)i=function(t,e,r){var n,i=e.length,o=t.modulus.byteLength();if(i>o-11)throw new Error("message too long");n=r?Jb.alloc(o-i-3,255):function(t){var e,r=Jb.allocUnsafe(t),n=0,i=Ub(2*t),o=0;for(;n<t;)o===i.length&&(i=Ub(2*t),o=0),(e=i[o++])&&(r[n++]=e);return r}(o-i-3);return new Hb(Jb.concat([Jb.from([0,r?1:2]),n,Jb.alloc(1),e],o))}(o,e,r);else {if(3!==n)throw new Error("unknown padding");if((i=new Hb(e)).cmp(o.modulus)>=0)throw new Error("data too long for modulus")}return r?Wb(i,o):Vb(i,o)};var Zb=Wm,Gb=Cb,Xb=Nb,$b=kr$1.exports,Qb=lm,tv=kd,ev=Lb,rv=Yc.exports.Buffer,nv=function(t,e,r){var n;n=t.padding?t.padding:r?1:4;var i,o=Zb(t),a=o.modulus.byteLength();if(e.length>a||new $b(e).cmp(o.modulus)>=0)throw new Error("decryption error");i=r?ev(new $b(e),o):Qb(e,o);var s=rv.alloc(a-i.length);if(i=rv.concat([s,i],a),4===n)return function(t,e){var r=t.modulus.byteLength(),n=tv("sha1").update(rv.alloc(0)).digest(),i=n.length;if(0!==e[0])throw new Error("decryption error");var o=e.slice(1,i+1),a=e.slice(i+1),s=Xb(o,Gb(a,i)),u=Xb(a,Gb(s,r-i-1));if(function(t,e){t=rv.from(t),e=rv.from(e);var r=0,n=t.length;t.length!==e.length&&(r++,n=Math.min(t.length,e.length));var i=-1;for(;++i<n;)r+=t[i]^e[i];return r}(n,u.slice(0,i)))throw new Error("decryption error");var c=i;for(;0===u[c];)c++;if(1!==u[c++])throw new Error("decryption error");return u.slice(c)}(o,i);if(1===n)return function(t,e,r){var n=e.slice(0,2),i=2,o=0;for(;0!==e[i++];)if(i>=e.length){o++;break}var a=e.slice(2,i-1);("0002"!==n.toString("hex")&&!r||"0001"!==n.toString("hex")&&r)&&o++;a.length<8&&o++;if(o)throw new Error("decryption error");return e.slice(i)}(0,i,r);if(3===n)return i;throw new Error("unknown padding")};!function(t){t.publicEncrypt=Yb,t.privateDecrypt=nv,t.privateEncrypt=function(e,r){return t.publicEncrypt(e,r,!0)},t.publicDecrypt=function(e,r){return t.privateDecrypt(e,r,!0)};}(Pb);var iv={};function ov(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var av=Yc.exports,sv=(av.Buffer),uv=av.kMaxLength,cv=yt$1.crypto||yt$1.msCrypto,lv=Math.pow(2,32)-1;function fv(t,e){if("number"!=typeof t||t!=t)throw new TypeError("offset must be a number");if(t>lv||t<0)throw new TypeError("offset must be a uint32");if(t>uv||t>e)throw new RangeError("offset out of range")}function hv(t,e,r){if("number"!=typeof t||t!=t)throw new TypeError("size must be a number");if(t>lv||t<0)throw new TypeError("size must be a uint32");if(t+e>r||t>uv)throw new RangeError("buffer too small")}function dv(t,e,r,n){var i=t.buffer,o=new Uint8Array(i,e,r);return cv.getRandomValues(o),n?void de$1((function(){n(null,t);})):t}cv&&cv.getRandomValues?(iv.randomFill=function(t,e,r,n){if(!(sv.isBuffer(t)||t instanceof yt$1.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof e)n=e,e=0,r=t.length;else if("function"==typeof r)n=r,r=t.length-e;else if("function"!=typeof n)throw new TypeError('"cb" argument must be a function');return fv(e,t.length),hv(r,e,t.length),dv(t,e,r,n)},iv.randomFillSync=function(t,e,r){void 0===e&&(e=0);if(!(sv.isBuffer(t)||t instanceof yt$1.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');fv(e,t.length),void 0===r&&(r=t.length-e);return hv(r,e,t.length),dv(t,e,r)}):(iv.randomFill=ov,iv.randomFillSync=ov);var pv=Wc.randomBytes=Wc.rng=Wc.pseudoRandomBytes=Wc.prng=Jc.exports,yv=Wc.createHash=Wc.Hash=kd,gv=Wc.createHmac=Wc.Hmac=Wd,mv=Yd,bv=Object.keys(mv),vv=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(bv);Wc.getHashes=function(){return vv};var wv=Zd;Wc.pbkdf2=wv.pbkdf2,Wc.pbkdf2Sync=wv.pbkdf2Sync;var _v=Ip;Wc.Cipher=_v.Cipher,Wc.createCipher=_v.createCipher,Wc.Cipheriv=_v.Cipheriv,Wc.createCipheriv=_v.createCipheriv,Wc.Decipher=_v.Decipher,Wc.createDecipher=_v.createDecipher,Wc.Decipheriv=_v.Decipheriv,Wc.createDecipheriv=_v.createDecipheriv,Wc.getCiphers=_v.getCiphers,Wc.listCiphers=_v.listCiphers;var Sv=bg;Wc.DiffieHellmanGroup=Sv.DiffieHellmanGroup,Wc.createDiffieHellmanGroup=Sv.createDiffieHellmanGroup,Wc.getDiffieHellman=Sv.getDiffieHellman,Wc.createDiffieHellman=Sv.createDiffieHellman,Wc.DiffieHellman=Sv.DiffieHellman;var Ev=Ib;Wc.createSign=Ev.createSign,Wc.Sign=Ev.Sign,Wc.createVerify=Ev.createVerify,Wc.Verify=Ev.Verify,Wc.createECDH=function(t){return new xb(t)};var Iv=Pb;Wc.publicEncrypt=Iv.publicEncrypt,Wc.privateEncrypt=Iv.privateEncrypt,Wc.publicDecrypt=Iv.publicDecrypt,Wc.privateDecrypt=Iv.privateDecrypt;var Av=iv;Wc.randomFill=Av.randomFill,Wc.randomFillSync=Av.randomFillSync,Wc.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))},Wc.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6};var kv=Wc;Object.defineProperty(Vc,"__esModule",{value:!0}),Vc.getCrypto=Vc.getRootWebCrypto=Vc.getWebCrypto=Vc.getNodeCrypto=void 0;var Dv=function(){return "undefined"!=typeof window?void 0:Wc};Vc.getNodeCrypto=Dv;var xv=function(){if("undefined"!=typeof window&&window.crypto)return window.crypto.subtle};Vc.getWebCrypto=xv;var Tv=function(){if("undefined"!=typeof window&&window.crypto)return window.crypto};Vc.getRootWebCrypto=Tv;var Pv=function(){var t=xv(),e=Dv();return void 0!==e?{name:"nodeCrypto",crypto:e}:void 0!==t?{name:"webCrypto",crypto:t}:{name:void 0}};Vc.getCrypto=Pv,Vc.default={getNodeCrypto:Dv,getWebCrypto:xv,getRootWebCrypto:Tv,getCrypto:Pv};var Ov={};Object.defineProperty(Ov,"__esModule",{value:!0});Ov.default={hashes:{"SHA3-512":{nodeName:"sha3-512",hashSize:64},"SHA3-384":{nodeName:"sha3-384",hashSize:48},"SHA3-256":{nodeName:"sha3-256",hashSize:32},"SHA3-224":{nodeName:"sha3-224",hashSize:28},"SHA-256":{nodeName:"sha256",hashSize:32},"SHA-384":{nodeName:"sha384",hashSize:48},"SHA-512":{nodeName:"sha512",hashSize:64},"SHA-1":{nodeName:"sha1",hashSize:20},MD5:{nodeName:"md5",hashSize:16}}};var Rv,Cv,Mv={exports:{}},Nv={exports:{}};Rv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Cv={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&Cv.rotl(t,8)|4278255360&Cv.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=Cv.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],r=0,n=0;r<t.length;r++,n+=8)e[n>>>5]|=t[r]<<24-n%32;return e},wordsToBytes:function(t){for(var e=[],r=0;r<32*t.length;r+=8)e.push(t[r>>>5]>>>24-r%32&255);return e},bytesToHex:function(t){for(var e=[],r=0;r<t.length;r++)e.push((t[r]>>>4).toString(16)),e.push((15&t[r]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(parseInt(t.substr(r,2),16));return e},bytesToBase64:function(t){for(var e=[],r=0;r<t.length;r+=3)for(var n=t[r]<<16|t[r+1]<<8|t[r+2],i=0;i<4;i++)8*r+6*i<=8*t.length?e.push(Rv.charAt(n>>>6*(3-i)&63)):e.push("=");return e.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var e=[],r=0,n=0;r<t.length;n=++r%4)0!=n&&e.push((Rv.indexOf(t.charAt(r-1))&Math.pow(2,-2*n+8)-1)<<2*n|Rv.indexOf(t.charAt(r))>>>6-2*n);return e}},Nv.exports=Cv;var jv={utf8:{stringToBytes:function(t){return jv.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(jv.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],r=0;r<t.length;r++)e.push(255&t.charCodeAt(r));return e},bytesToString:function(t){for(var e=[],r=0;r<t.length;r++)e.push(String.fromCharCode(t[r]));return e.join("")}}},Bv=jv,Lv=function(t){return null!=t&&(Fv(t)||function(t){return "function"==typeof t.readFloatLE&&"function"==typeof t.slice&&Fv(t.slice(0,0))}(t)||!!t._isBuffer)};function Fv(t){return !!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}!function(){var t=Nv.exports,e=Bv.utf8,r=Lv,n=Bv.bin,i=function(o,a){o.constructor==String?o=a&&"binary"===a.encoding?n.stringToBytes(o):e.stringToBytes(o):r(o)?o=Array.prototype.slice.call(o,0):Array.isArray(o)||o.constructor===Uint8Array||(o=o.toString());for(var s=t.bytesToWords(o),u=8*o.length,c=1732584193,l=-271733879,f=-1732584194,h=271733878,d=0;d<s.length;d++)s[d]=16711935&(s[d]<<8|s[d]>>>24)|4278255360&(s[d]<<24|s[d]>>>8);s[u>>>5]|=128<<u%32,s[14+(u+64>>>9<<4)]=u;var p=i._ff,y=i._gg,g=i._hh,m=i._ii;for(d=0;d<s.length;d+=16){var b=c,v=l,w=f,_=h;c=p(c,l,f,h,s[d+0],7,-680876936),h=p(h,c,l,f,s[d+1],12,-389564586),f=p(f,h,c,l,s[d+2],17,606105819),l=p(l,f,h,c,s[d+3],22,-1044525330),c=p(c,l,f,h,s[d+4],7,-176418897),h=p(h,c,l,f,s[d+5],12,1200080426),f=p(f,h,c,l,s[d+6],17,-1473231341),l=p(l,f,h,c,s[d+7],22,-45705983),c=p(c,l,f,h,s[d+8],7,1770035416),h=p(h,c,l,f,s[d+9],12,-1958414417),f=p(f,h,c,l,s[d+10],17,-42063),l=p(l,f,h,c,s[d+11],22,-1990404162),c=p(c,l,f,h,s[d+12],7,1804603682),h=p(h,c,l,f,s[d+13],12,-40341101),f=p(f,h,c,l,s[d+14],17,-1502002290),c=y(c,l=p(l,f,h,c,s[d+15],22,1236535329),f,h,s[d+1],5,-165796510),h=y(h,c,l,f,s[d+6],9,-1069501632),f=y(f,h,c,l,s[d+11],14,643717713),l=y(l,f,h,c,s[d+0],20,-373897302),c=y(c,l,f,h,s[d+5],5,-701558691),h=y(h,c,l,f,s[d+10],9,38016083),f=y(f,h,c,l,s[d+15],14,-660478335),l=y(l,f,h,c,s[d+4],20,-405537848),c=y(c,l,f,h,s[d+9],5,568446438),h=y(h,c,l,f,s[d+14],9,-1019803690),f=y(f,h,c,l,s[d+3],14,-187363961),l=y(l,f,h,c,s[d+8],20,1163531501),c=y(c,l,f,h,s[d+13],5,-1444681467),h=y(h,c,l,f,s[d+2],9,-51403784),f=y(f,h,c,l,s[d+7],14,1735328473),c=g(c,l=y(l,f,h,c,s[d+12],20,-1926607734),f,h,s[d+5],4,-378558),h=g(h,c,l,f,s[d+8],11,-2022574463),f=g(f,h,c,l,s[d+11],16,1839030562),l=g(l,f,h,c,s[d+14],23,-35309556),c=g(c,l,f,h,s[d+1],4,-1530992060),h=g(h,c,l,f,s[d+4],11,1272893353),f=g(f,h,c,l,s[d+7],16,-155497632),l=g(l,f,h,c,s[d+10],23,-1094730640),c=g(c,l,f,h,s[d+13],4,681279174),h=g(h,c,l,f,s[d+0],11,-358537222),f=g(f,h,c,l,s[d+3],16,-722521979),l=g(l,f,h,c,s[d+6],23,76029189),c=g(c,l,f,h,s[d+9],4,-640364487),h=g(h,c,l,f,s[d+12],11,-421815835),f=g(f,h,c,l,s[d+15],16,530742520),c=m(c,l=g(l,f,h,c,s[d+2],23,-995338651),f,h,s[d+0],6,-198630844),h=m(h,c,l,f,s[d+7],10,1126891415),f=m(f,h,c,l,s[d+14],15,-1416354905),l=m(l,f,h,c,s[d+5],21,-57434055),c=m(c,l,f,h,s[d+12],6,1700485571),h=m(h,c,l,f,s[d+3],10,-1894986606),f=m(f,h,c,l,s[d+10],15,-1051523),l=m(l,f,h,c,s[d+1],21,-2054922799),c=m(c,l,f,h,s[d+8],6,1873313359),h=m(h,c,l,f,s[d+15],10,-30611744),f=m(f,h,c,l,s[d+6],15,-1560198380),l=m(l,f,h,c,s[d+13],21,1309151649),c=m(c,l,f,h,s[d+4],6,-145523070),h=m(h,c,l,f,s[d+11],10,-1120210379),f=m(f,h,c,l,s[d+2],15,718787259),l=m(l,f,h,c,s[d+9],21,-343485551),c=c+b>>>0,l=l+v>>>0,f=f+w>>>0,h=h+_>>>0;}return t.endian([c,l,f,h])};i._ff=function(t,e,r,n,i,o,a){var s=t+(e&r|~e&n)+(i>>>0)+a;return (s<<o|s>>>32-o)+e},i._gg=function(t,e,r,n,i,o,a){var s=t+(e&n|r&~n)+(i>>>0)+a;return (s<<o|s>>>32-o)+e},i._hh=function(t,e,r,n,i,o,a){var s=t+(e^r^n)+(i>>>0)+a;return (s<<o|s>>>32-o)+e},i._ii=function(t,e,r,n,i,o,a){var s=t+(r^(e|~n))+(i>>>0)+a;return (s<<o|s>>>32-o)+e},i._blocksize=16,i._digestsize=16,Mv.exports=function(e,r){if(null==e)throw new Error("Illegal argument "+e);var o=t.wordsToBytes(i(e,r));return r&&r.asBytes?o:r&&r.asString?n.bytesToString(o):t.bytesToHex(o)};}();var Uv={},zv={},Kv={},qv={},Hv=function(t,e){return function(r,n){var i=2*n,o=2*e;r[i]=t[o],r[i+1]=t[o+1];}};!function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e,r=(e=Hv)&&e.__esModule?e:{default:e};var n=function(t){for(var e=t.A,n=t.C,i=0;i<25;i+=5){for(var o=0;o<5;o++)(0, r.default)(e,i+o)(n,o);for(var a=0;a<5;a++){var s=2*(i+a),u=(a+1)%5*2,c=(a+2)%5*2;e[s]^=~n[u]&n[c],e[s+1]^=~n[u+1]&n[c+1];}}};t.default=n;}(qv);var Vv={},Wv={};!function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=new Uint32Array([0,1,0,32898,2147483648,32906,2147483648,2147516416,0,32907,0,2147483649,2147483648,2147516545,2147483648,32777,0,138,0,136,0,2147516425,0,2147483658,0,2147516555,2147483648,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,0,32778,2147483648,2147483658,2147483648,2147516545,2147483648,32896,0,2147483649,2147483648,2147516424]);t.default=e;}(Wv),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e,r=(e=Wv)&&e.__esModule?e:{default:e};var n=function(t){var e=t.A,n=2*t.roundIndex;e[0]^=r.default[n],e[1]^=r.default[n+1];};t.default=n;}(Vv);var Jv={},Yv={};!function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=[10,7,11,17,18,3,5,16,8,21,24,4,15,23,19,13,12,2,20,14,22,9,6,1];t.default=e;}(Yv);var Zv={};!function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=[1,3,6,10,15,21,28,36,45,55,2,14,27,41,56,8,25,43,62,18,39,61,20,44];t.default=e;}(Zv),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=i(Yv),r=i(Zv),n=i(Hv);function i(t){return t&&t.__esModule?t:{default:t}}var o=function(t){var i=t.A,o=t.C,a=t.W;(0, n.default)(i,1)(a,0);for(var s=0,u=0,c=0,l=32,f=0;f<24;f++){var h=e.default[f],d=r.default[f];(0, n.default)(i,h)(o,0),s=a[0],u=a[1],l=32-d,a[c=d<32?0:1]=s<<d|u>>>l,a[(c+1)%2]=u<<d|s>>>l,(0, n.default)(a,0)(i,h),(0, n.default)(o,0)(a,0);}};t.default=o;}(Jv);var Gv={};!function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e,r=(e=Hv)&&e.__esModule?e:{default:e};var n=function(t){for(var e=t.A,n=t.C,i=t.D,o=t.W,a=0,s=0,u=0;u<5;u++){var c=2*u,l=2*(u+5),f=2*(u+10),h=2*(u+15),d=2*(u+20);n[c]=e[c]^e[l]^e[f]^e[h]^e[d],n[c+1]=e[c+1]^e[l+1]^e[f+1]^e[h+1]^e[d+1];}for(var p=0;p<5;p++){(0, r.default)(n,(p+1)%5)(o,0),a=o[0],s=o[1],o[0]=a<<1|s>>>31,o[1]=s<<1|a>>>31,i[2*p]=n[(p+4)%5*2]^o[0],i[2*p+1]=n[(p+4)%5*2+1]^o[1];for(var y=0;y<25;y+=5)e[2*(y+p)]^=i[2*p],e[2*(y+p)+1]^=i[2*p+1];}};t.default=n;}(Gv),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=o(qv),r=o(Vv),n=o(Jv),i=o(Gv);function o(t){return t&&t.__esModule?t:{default:t}}var a=function(){var t=new Uint32Array(10),o=new Uint32Array(10),a=new Uint32Array(2);return function(s){for(var u=0;u<24;u++)(0, i.default)({A:s,C:t,D:o,W:a}),(0, n.default)({A:s,C:t,W:a}),(0, e.default)({A:s,C:t}),(0, r.default)({A:s,roundIndex:u});t.fill(0),o.fill(0),a.fill(0);}};t.default=a;}(Kv),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e,r=vt$1,n=(e=Kv)&&e.__esModule?e:{default:e};var i=function(t,e){for(var r=0;r<t.length;r+=8){var n=r/4;e[n]^=t[r+7]<<24|t[r+6]<<16|t[r+5]<<8|t[r+4],e[n+1]^=t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r];}return e},o=function(t,e){for(var r=0;r<e.length;r+=8){var n=r/4;e[r]=t[n+1],e[r+1]=t[n+1]>>>8,e[r+2]=t[n+1]>>>16,e[r+3]=t[n+1]>>>24,e[r+4]=t[n],e[r+5]=t[n]>>>8,e[r+6]=t[n]>>>16,e[r+7]=t[n]>>>24;}return e},a=function(t){var e=this,a=t.capacity,s=t.padding,u=(0, n.default)(),c=a/8,l=200-a/4,f=0,h=new Uint32Array(50),d=r.Buffer.allocUnsafe(l);return this.absorb=function(t){for(var r=0;r<t.length;r++)d[f]=t[r],(f+=1)>=l&&(i(d,h),u(h),f=0);return e},this.squeeze=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={buffer:t.buffer||r.Buffer.allocUnsafe(c),padding:t.padding||s,queue:r.Buffer.allocUnsafe(d.length),state:new Uint32Array(h.length)};d.copy(e.queue);for(var n=0;n<h.length;n++)e.state[n]=h[n];e.queue.fill(0,f),e.queue[f]|=e.padding,e.queue[l-1]|=128,i(e.queue,e.state);for(var a=0;a<e.buffer.length;a+=l)u(e.state),o(e.state,e.buffer.slice(a,a+l));return e.buffer},this.reset=function(){return d.fill(0),h.fill(0),f=0,e},this};t.default=a;}(zv),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.SHAKE=t.SHA3Hash=t.SHA3=t.Keccak=void 0;var e,r=vt$1,n=(e=zv)&&e.__esModule?e:{default:e};var i=function(t){var e=t.allowedSizes,i=t.defaultSize,o=t.padding;return function t(){var a=this,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;if(!this||this.constructor!==t)return new t(s);if(e&&!e.includes(s))throw new Error("Unsupported hash length");var u=new n.default({capacity:s});return this.update=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";if(r.Buffer.isBuffer(t))return u.absorb(t),a;if("string"==typeof t)return a.update(r.Buffer.from(t,e));throw new TypeError("Not a string or buffer")},this.digest=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"binary",e="string"==typeof t?{format:t}:t,r=u.squeeze({buffer:e.buffer,padding:e.padding||o});return e.format&&"binary"!==e.format?r.toString(e.format):r},this.reset=function(){return u.reset(),a},this}},o=i({allowedSizes:[224,256,384,512],defaultSize:512,padding:1});t.Keccak=o;var a=i({allowedSizes:[224,256,384,512],defaultSize:512,padding:6});t.SHA3=a;var s=i({allowedSizes:[128,256],defaultSize:256,padding:31});t.SHAKE=s;var u=o;t.SHA3Hash=u,a.SHA3Hash=u;var c=a;t.default=c;}(Uv);var Xv=yt$1&&yt$1.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}});}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r];}),$v=yt$1&&yt$1.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e});}:function(t,e){t.default=e;}),Qv=yt$1&&yt$1.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&Xv(e,t,r);return $v(e,t),e},tw=yt$1&&yt$1.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{u(n.next(t));}catch(t){o(t);}}function s(t){try{u(n.throw(t));}catch(t){o(t);}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e);}))).then(a,s);}u((n=n.apply(t,e||[])).next());}))},ew=yt$1&&yt$1.__generator||function(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a);}catch(t){o=[6,t],n=0;}finally{r=i=0;}if(5&o[0])throw o[1];return {value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},rw=yt$1&&yt$1.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Hc,"__esModule",{value:!0}),Hc.compute=void 0;var nw=Qv(Vc),iw=rw(Ov),ow=rw(Mv.exports),aw=Uv,sw=Qv(Lo);Hc.compute=function(t,e){return void 0===e&&(e="SHA-256"),tw(void 0,void 0,void 0,(function(){var r,n,i,o,a;return ew(this,(function(s){switch(s.label){case 0:r=nw.getCrypto(),o=!0,s.label=1;case 1:return s.trys.push([1,5,,6]),"webCrypto"!==r.name||"function"!=typeof r.crypto.digest?[3,3]:[4,r.crypto.digest(e,t)];case 2:return n=s.sent(),[3,4];case 3:"nodeCrypto"===r.name?n=uw(e,t,r.crypto):o=!1,s.label=4;case 4:return [3,6];case 5:return (a=s.sent())instanceof Error&&(i=a.message),o=!1,[3,6];case 6:if(!o)try{n=cw(e,t);}catch(t){throw t instanceof Error?(i=(void 0===i?"":i)+" => "+t.message,new Error("UnsupportedEnvironment: "+i)):new Error("UnsupportedEnvironment")}return [2,new Uint8Array(n)]}}))}))};var uw=function(t,e,r){var n=iw.default.hashes[t].nodeName,i=r.createHash(n);return i.update(e),i.digest()},cw=function(t,e){var r;if("MD5"===t)r=(0, ow.default)(Array.from(e),{asBytes:!0});else if(["SHA3-512","SHA3-384","SHA3-256","SHA3-224"].indexOf(t)>=0){var n=8*iw.default.hashes[t].hashSize,i=new aw.SHA3(n),o=vt$1.Buffer;i.update(o.from(e)),r=i.digest("binary");}else r=sw[iw.default.hashes[t].nodeName]().update(e).digest();return new Uint8Array(r)};!function(t){var e=yt$1&&yt$1.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}});}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r];}),r=yt$1&&yt$1.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e});}:function(t,e){t.default=e;}),n=yt$1&&yt$1.__importStar||function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&e(n,t,i);return r(n,t),n};Object.defineProperty(t,"__esModule",{value:!0}),t.compute=void 0;var i=n(Hc);t.compute=i.compute,t.default={compute:t.compute};}(qc);var lw={},fw={},hw={};Object.defineProperty(hw,"__esModule",{value:!0});hw.default={hashes:{"SHA3-512":{nodeName:"sha3-512",hashSize:64,blockSize:72},"SHA3-384":{nodeName:"sha3-384",hashSize:48,blockSize:104},"SHA3-256":{nodeName:"sha3-256",hashSize:32,blockSize:136},"SHA3-224":{nodeName:"sha3-224",hashSize:28,blockSize:144},"SHA-256":{nodeName:"sha256",hashSize:32,blockSize:64},"SHA-384":{nodeName:"sha384",hashSize:48,blockSize:128},"SHA-512":{nodeName:"sha512",hashSize:64,blockSize:128},"SHA-1":{nodeName:"sha1",hashSize:20,blockSize:64},MD5:{nodeName:"md5",hashSize:16,blockSize:64}}},function(t){var e=yt$1&&yt$1.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}});}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r];}),r=yt$1&&yt$1.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e});}:function(t,e){t.default=e;}),n=yt$1&&yt$1.__importStar||function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&e(n,t,i);return r(n,t),n},i=yt$1&&yt$1.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{u(n.next(t));}catch(t){o(t);}}function s(t){try{u(n.throw(t));}catch(t){o(t);}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e);}))).then(a,s);}u((n=n.apply(t,e||[])).next());}))},o=yt$1&&yt$1.__generator||function(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a);}catch(t){o=[6,t],n=0;}finally{r=i=0;}if(5&o[0])throw o[1];return {value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},a=yt$1&&yt$1.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(t,"__esModule",{value:!0}),t.verify=t.compute=void 0;var s=a(hw),u=n(Vc),c=a(qc);t.compute=function(t,e,r){return void 0===r&&(r="SHA-256"),i(void 0,void 0,void 0,(function(){var n,i,a,c,f,h,d,p;return o(this,(function(o){switch(o.label){case 0:n=u.getCrypto(),c=!0,o.label=1;case 1:return o.trys.push([1,6,,7]),"webCrypto"!==n.name||"function"!=typeof n.crypto.importKey||"function"!=typeof n.crypto.sign?[3,4]:[4,n.crypto.importKey("raw",t,{name:"HMAC",hash:{name:r}},!1,["sign","verify"])];case 2:return f=o.sent(),[4,n.crypto.sign({name:"HMAC",hash:{name:r}},f,e)];case 3:return i=o.sent(),[3,5];case 4:"nodeCrypto"===n.name?(h=n.crypto.createHmac(s.default.hashes[r].nodeName,t),i=h.update(e).digest()):c=!1,o.label=5;case 5:return [3,7];case 6:return (d=o.sent())instanceof Error&&(a=d.message),c=!1,[3,7];case 7:if(c)return [3,11];o.label=8;case 8:return o.trys.push([8,10,,11]),[4,l(t,e,r)];case 9:return i=o.sent(),[3,11];case 10:throw (p=o.sent())instanceof Error?(a=a+" => "+p.message,new Error("UnsupportedEnvironments: "+a)):new Error("UnsupportedEnvironments");case 11:return [2,new Uint8Array(i)]}}))}))};var l=function(t,e,r){return i(void 0,void 0,void 0,(function(){var n,i,a,u,l,f,h,d;return o(this,(function(o){switch(o.label){case 0:return n=s.default.hashes[r].blockSize,i=s.default.hashes[r].hashSize,t.length>n?[4,c.default.compute(t,r)]:[3,2];case 1:t=o.sent(),o.label=2;case 2:return (a=new Uint8Array(n)).set(t),u=a.map((function(t){return 255&(54^t)})),l=a.map((function(t){return 255&(92^t)})),(f=new Uint8Array(n+e.length)).set(u),f.set(e,n),[4,c.default.compute(f,r)];case 3:return h=o.sent(),(d=new Uint8Array(n+i)).set(l),d.set(h,n),[2,c.default.compute(d,r)]}}))}))};t.verify=function(e,r,n,a){return void 0===a&&(a="SHA-256"),i(void 0,void 0,void 0,(function(){var i;return o(this,(function(o){switch(o.label){case 0:return [4,(0, t.compute)(e,r,a)];case 1:return i=o.sent(),[2,n.toString()===i.toString()]}}))}))};}(fw),function(t){var e=yt$1&&yt$1.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}});}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r];}),r=yt$1&&yt$1.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e});}:function(t,e){t.default=e;}),n=yt$1&&yt$1.__importStar||function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&e(n,t,i);return r(n,t),n};Object.defineProperty(t,"__esModule",{value:!0}),t.verify=t.compute=void 0;var i=n(fw);t.compute=i.compute,t.verify=i.verify,t.default={compute:t.compute,verify:t.verify};}(lw);var dw={};Object.defineProperty(dw,"__esModule",{value:!0});dw.default={hashes:{"SHA3-512":{hashSize:64},"SHA3-384":{hashSize:48},"SHA3-256":{hashSize:32},"SHA3-224":{hashSize:28},"SHA-256":{hashSize:32},"SHA-384":{hashSize:48},"SHA-512":{hashSize:64},"SHA-1":{hashSize:20},MD5:{hashSize:16}}};var pw=yt$1&&yt$1.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{u(n.next(t));}catch(t){o(t);}}function s(t){try{u(n.throw(t));}catch(t){o(t);}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e);}))).then(a,s);}u((n=n.apply(t,e||[])).next());}))},yw=yt$1&&yt$1.__generator||function(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a);}catch(t){o=[6,t],n=0;}finally{r=i=0;}if(5&o[0])throw o[1];return {value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},gw=yt$1&&yt$1.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Kc,"__esModule",{value:!0}),Kc.pbkdf1=Kc.pbkdf2=void 0;var mw=gw(Un$1),bw=gw(qc),vw=gw(lw),ww=gw(dw);Kc.pbkdf2=function(t,e,r,n,i){return pw(void 0,void 0,void 0,(function(){var o,a,s,u,c,l,f,h;return yw(this,(function(d){switch(d.label){case 0:if(r<=0)throw new Error("InvalidIterationCount");if(n<=0)throw new Error("InvalidDerivedKeyLength");if(o="string"==typeof t?mw.default.encoder.stringToArrayBuffer(t):t,a=ww.default.hashes[i].hashSize,n>(Math.pow(2,32)-1)*a)throw new Error("DerivedKeyTooLong");for(s=Math.ceil(n/a),u=n-(s-1)*a,c=function(t){return pw(void 0,void 0,void 0,(function(){var n,a,s,u;return yw(this,(function(c){switch(c.label){case 0:return (n=new Uint8Array(e.length+4)).set(e),n.set(_w(t+1,4),e.length),[4,vw.default.compute(o,n,i)];case 1:a=c.sent(),s=new Uint8Array(a),u=1,c.label=2;case 2:return u<r?[4,vw.default.compute(o,a,i)]:[3,5];case 3:a=c.sent(),s=a.map((function(t,e){return t^s[e]})),c.label=4;case 4:return u++,[3,2];case 5:return [2,{index:t,value:s}]}}))}))},l=[],f=new Uint8Array(n),h=0;h<s;h++)l.push(c(h));return [4,Promise.all(l)];case 1:return d.sent().forEach((function(t){t.index!==s-1?f.set(t.value,t.index*a):f.set(t.value.slice(0,u),t.index*a);})),[2,f]}}))}))};var _w=function(t,e){for(var r=new Uint8Array(e),n=0;n<e;n++)r[n]=t>>8*(e-n-1);return r};Kc.pbkdf1=function(t,e,r,n,i){return pw(void 0,void 0,void 0,(function(){var o,a;return yw(this,(function(s){switch(s.label){case 0:if(r<=0)throw new Error("InvalidIterationCount");if(n<=0)throw new Error("InvalidDerivedKeyLength");if("string"==typeof t&&(t=mw.default.encoder.stringToArrayBuffer(t)),n>ww.default.hashes[i].hashSize)throw new Error("DerivedKeyTooLong");(o=new Uint8Array(t.length+e.length)).set(t),o.set(e,t.length),a=0,s.label=1;case 1:return a<r?[4,bw.default.compute(o,i)]:[3,4];case 2:o=s.sent(),s.label=3;case 3:return a++,[3,1];case 4:return [2,o.slice(0,n)]}}))}))},function(t){var e=yt$1&&yt$1.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}});}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r];}),r=yt$1&&yt$1.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e});}:function(t,e){t.default=e;}),n=yt$1&&yt$1.__importStar||function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&e(n,t,i);return r(n,t),n};Object.defineProperty(t,"__esModule",{value:!0}),t.pbkdf1=t.pbkdf2=void 0;var i=n(Kc);t.pbkdf2=i.pbkdf2,t.pbkdf1=i.pbkdf1,t.default={pbkdf2:t.pbkdf2,pbkdf1:t.pbkdf1};}(zc);var Sw={},Ew={},Iw={},Aw={};Object.defineProperty(Aw,"__esModule",{value:!0});var kw={"AES-KW":{nodePrefix:"id-aes",nodeSuffix:"-wrap",ivLength:8,staticIvLength:!0,defaultIv:new Uint8Array([166,166,166,166,166,166,166,166])}};Aw.default={ciphers:{"AES-GCM":{nodePrefix:"aes-",nodeSuffix:"-gcm",ivLength:12,tagLength:16,staticIvLength:!0},"AES-CBC":{nodePrefix:"aes-",nodeSuffix:"-cbc",ivLength:16,staticIvLength:!0},"AES-CTR":{nodePrefix:"aes-",nodeSuffix:"-ctr",ivLength:12,staticIvLength:!1}},wrapKeys:kw},function(t){var e=yt$1&&yt$1.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(t,"__esModule",{value:!0}),t.decrypt=t.encrypt=t.unwrapKey=t.wrapKey=void 0;var r=e(Aw);t.wrapKey=function(e,r,n,i){var o=n.name,a=n.iv;return (0, t.encrypt)(e,r,{name:o,iv:a},i,!0)};t.unwrapKey=function(e,r,n,i){var o=n.name,a=n.iv;return (0, t.decrypt)(e,r,{name:o,iv:a},i,!0)};t.encrypt=function(t,e,i,o,a){var s=i.name,u=i.iv,c=i.additionalData,l=i.tagLength;void 0===a&&(a=!1);var f,h,d,p,y=n(s,e.byteLength,a?r.default.wrapKeys:r.default.ciphers);switch(s){case"AES-GCM":(f=o.createCipheriv(y,e,u,{authTagLength:l})).setAAD(c);break;case"AES-CTR":if(0===u.length||u.length>16)throw new Error("InvalidIVLength");var g=new Uint8Array(16);g.set(u),g[15]+=1,f=o.createCipheriv(y,e,g);break;default:f=o.createCipheriv(y,e,u);}try{h=new Uint8Array(f.update(t)),d=new Uint8Array(f.final()),p=new Uint8Array([]),"AES-GCM"===s&&(p=new Uint8Array(f.getAuthTag()));}catch(t){throw new Error("NodeCrypto_EncryptionFailure")}var m=new Uint8Array(h.length+d.length+p.length);return m.set(h),m.set(d,h.length),m.set(p,h.length+d.length),m};t.decrypt=function(t,e,i,o,a){var s=i.name,u=i.iv,c=i.additionalData,l=i.tagLength;void 0===a&&(a=!1);var f,h,d,p,y=n(s,e.byteLength,a?r.default.wrapKeys:r.default.ciphers);switch(s){case"AES-GCM":(f=o.createDecipheriv(y,e,u,{authTagLength:l})).setAAD(c),h=t.slice(0,t.length-l);var g=t.slice(t.length-l);f.setAuthTag(g);break;case"AES-CTR":if(0===u.length||u.length>16)throw new Error("InvalidIVLength");var m=new Uint8Array(16);m.set(u),m[15]+=1,f=o.createDecipheriv(y,e,m),h=t;break;default:f=o.createDecipheriv(y,e,u),h=t;}try{d=f.update(h),p=f.final();}catch(t){throw new Error("NodeCrypto_DecryptionFailure")}var b=new Uint8Array(p.length+d.length);return b.set(d),b.set(p,d.length),b};var n=function(t,e,r){var n=r[t].nodePrefix;return (n=""+n+(8*e).toString())+r[t].nodeSuffix};}(Iw);var Dw={},xw=yt$1&&yt$1.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{u(n.next(t));}catch(t){o(t);}}function s(t){try{u(n.throw(t));}catch(t){o(t);}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e);}))).then(a,s);}u((n=n.apply(t,e||[])).next());}))},Tw=yt$1&&yt$1.__generator||function(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a);}catch(t){o=[6,t],n=0;}finally{r=i=0;}if(5&o[0])throw o[1];return {value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(Dw,"__esModule",{value:!0}),Dw.decrypt=Dw.encrypt=Dw.unwrapKey=Dw.wrapKey=void 0;Dw.wrapKey=function(t,e,r,n){var i=r.name,o=r.iv;return xw(void 0,void 0,void 0,(function(){var r,a,s,u;return Tw(this,(function(c){switch(c.label){case 0:return c.trys.push([0,4,,5]),[4,n.importKey("raw",e,{name:i},!1,["wrapKey","unwrapKey"])];case 1:return r=c.sent(),[4,n.importKey("raw",t,{name:i},!0,["wrapKey","unwrapKey"])];case 2:return a=c.sent(),[4,n.wrapKey("raw",a,r,{name:i,iv:o})];case 3:return s=c.sent(),[2,new Uint8Array(s)];case 4:throw (u=c.sent())instanceof Error?new Error("WebCrypto_FailedToWrapKey - "+u.message):new Error("WebCrypto_FailedToWrapKey");case 5:return [2]}}))}))};Dw.unwrapKey=function(t,e,r,n){var i=r.name,o=r.iv;return xw(void 0,void 0,void 0,(function(){var r,a,s,u;return Tw(this,(function(c){switch(c.label){case 0:return c.trys.push([0,4,,5]),[4,n.importKey("raw",e,{name:i},!1,["wrapKey","unwrapKey"])];case 1:return r=c.sent(),[4,n.unwrapKey("raw",t,r,{name:i,iv:o},{name:"AES-GCM"},!0,["encrypt","decrypt"])];case 2:return a=c.sent(),s=Uint8Array.bind,[4,n.exportKey("raw",a)];case 3:return [2,new(s.apply(Uint8Array,[void 0,c.sent()]))];case 4:throw (u=c.sent())instanceof Error?new Error("WebCrypto_FailedToUnwrapKey - "+u.message):new Error("WebCrypto_FailedToUnwrapKey");case 5:return [2]}}))}))};Dw.encrypt=function(t,e,r,n){var i=r.name,o=void 0===i?"AES-GCM":i,a=r.iv,s=r.additionalData,u=r.tagLength;return xw(void 0,void 0,void 0,(function(){var r,i,c,l;return Tw(this,(function(f){switch(f.label){case 0:r=Pw({name:o,iv:a,additionalData:s,tagLength:u}),f.label=1;case 1:return f.trys.push([1,4,,5]),[4,n.importKey("raw",e,r,!1,["encrypt","decrypt"])];case 2:return i=f.sent(),[4,n.encrypt(r,i,t)];case 3:return c=f.sent(),[2,new Uint8Array(c)];case 4:throw (l=f.sent())instanceof Error?new Error("WebCrypto_EncryptionFailure: "+l.message):new Error("WebCrypto_EncryptionFailure");case 5:return [2]}}))}))};Dw.decrypt=function(t,e,r,n){var i=r.name,o=r.iv,a=r.additionalData,s=r.tagLength;return xw(void 0,void 0,void 0,(function(){var r,u,c,l;return Tw(this,(function(f){switch(f.label){case 0:r=Pw({name:i,iv:o,additionalData:a,tagLength:s}),f.label=1;case 1:return f.trys.push([1,4,,5]),[4,n.importKey("raw",e,r,!1,["encrypt","decrypt"])];case 2:return u=f.sent(),[4,n.decrypt(r,u,t)];case 3:return c=f.sent(),[2,new Uint8Array(c)];case 4:throw (l=f.sent())instanceof Error?new Error("WebCrypto_DecryptionFailure: "+l.message):new Error("WebCrypto_DecryptionFailure");case 5:return [2]}}))}))};var Pw=function(t){var e=t.name,r=t.iv,n=t.additionalData,i=t.tagLength,o={name:e,iv:r,additionalData:n,tagLength:i};switch(e){case"AES-GCM":o.tagLength=8*i;break;case"AES-CBC":break;case"AES-CTR":if(0===r.length||r.length>16)throw new Error("InvalidIVLength");o.counter=new Uint8Array(16),o.counter.set(r),o.counter[15]+=1,o.length=128;}return o},Ow=yt$1&&yt$1.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}});}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r];}),Rw=yt$1&&yt$1.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e});}:function(t,e){t.default=e;}),Cw=yt$1&&yt$1.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&Ow(e,t,r);return Rw(e,t),e},Mw=yt$1&&yt$1.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{u(n.next(t));}catch(t){o(t);}}function s(t){try{u(n.throw(t));}catch(t){o(t);}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e);}))).then(a,s);}u((n=n.apply(t,e||[])).next());}))},Nw=yt$1&&yt$1.__generator||function(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a);}catch(t){o=[6,t],n=0;}finally{r=i=0;}if(5&o[0])throw o[1];return {value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},jw=yt$1&&yt$1.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ew,"__esModule",{value:!0}),Ew.unwrapKey=Ew.wrapKey=Ew.decrypt=Ew.encrypt=void 0;var Bw=Cw(Vc),Lw=Cw(Iw),Fw=Cw(Dw),Uw=jw(Aw),zw=function(t){var e=t.name,r=t.iv,n=t.tagLength;if(Uw.default.ciphers[e].ivLength){if(!(r instanceof Uint8Array))throw new Error("InvalidArguments");if(r.byteLength<2||r.byteLength>16)throw new Error("InvalidIVLength");if(Uw.default.ciphers[e].staticIvLength&&Uw.default.ciphers[e].ivLength!==r.byteLength)throw new Error("InvalidIVLength")}if(Uw.default.ciphers[e].tagLength&&n){if(!Number.isInteger(n))throw new Error("InvalidArguments");if(n<4||n>16)throw new Error("InvalidTagLength")}};Ew.encrypt=function(t,e,r){var n=r.name,i=void 0===n?"AES-GCM":n,o=r.iv,a=r.additionalData,s=void 0===a?new Uint8Array([]):a,u=r.tagLength;return Mw(void 0,void 0,void 0,(function(){var r;return Nw(this,(function(n){if(zw({name:i,iv:o,tagLength:u}),Uw.default.ciphers[i].tagLength&&!u&&(u=Uw.default.ciphers[i].tagLength),"webCrypto"===(r=Bw.getCrypto()).name){if("function"!=typeof r.crypto.importKey||"function"!=typeof r.crypto.encrypt)throw new Error("UnsupportedWebCrypto");return [2,Fw.encrypt(t,e,{name:i,iv:o,additionalData:s,tagLength:u},r.crypto)]}if("nodeCrypto"===r.name)return [2,Lw.encrypt(t,e,{name:i,iv:o,additionalData:s,tagLength:u},r.crypto)];throw new Error("UnsupportedEnvironment")}))}))};Ew.decrypt=function(t,e,r){var n=r.name,i=void 0===n?"AES-GCM":n,o=r.iv,a=r.additionalData,s=void 0===a?new Uint8Array([]):a,u=r.tagLength;return Mw(void 0,void 0,void 0,(function(){var r;return Nw(this,(function(n){if(zw({name:i,iv:o,tagLength:u}),Uw.default.ciphers[i].tagLength&&!u&&(u=Uw.default.ciphers[i].tagLength),"webCrypto"===(r=Bw.getCrypto()).name){if("function"!=typeof r.crypto.importKey||"function"!=typeof r.crypto.decrypt)throw new Error("UnsupportedWebCrypto");return [2,Fw.decrypt(t,e,{name:i,iv:o,additionalData:s,tagLength:u},r.crypto)]}if("nodeCrypto"===r.name)return [2,Lw.decrypt(t,e,{name:i,iv:o,additionalData:s,tagLength:u},r.crypto)];throw new Error("UnsupportedEnvironment")}))}))};Ew.wrapKey=function(t,e,r){var n=r.name;return Mw(void 0,void 0,void 0,(function(){var r,i;return Nw(this,(function(o){if(t.length%8>0)throw new Error("WrappedKeyMustBeMultipleOf8");if(r=Bw.getCrypto(),i=Uw.default.wrapKeys["AES-KW"].defaultIv,"webCrypto"===r.name){if("function"!=typeof r.crypto.importKey||"function"!=typeof r.crypto.wrapKey)throw new Error("UnsupportedWebCrypto");return [2,Fw.wrapKey(t,e,{name:n,iv:i},r.crypto)]}if("nodeCrypto"===r.name)return [2,Lw.wrapKey(t,e,{name:n,iv:i},r.crypto)];throw new Error("UnsupportedEnvironment")}))}))};Ew.unwrapKey=function(t,e,r){var n=r.name;return Mw(void 0,void 0,void 0,(function(){var r,i;return Nw(this,(function(o){if(r=Bw.getCrypto(),i=Uw.default.wrapKeys["AES-KW"].defaultIv,"webCrypto"===r.name){if("function"!=typeof r.crypto.importKey||"function"!=typeof r.crypto.unwrapKey)throw new Error("UnsupportedWebCrypto");return [2,Fw.unwrapKey(t,e,{name:n,iv:i},r.crypto)]}if("nodeCrypto"===r.name)return [2,Lw.unwrapKey(t,e,{name:n,iv:i},r.crypto)];throw new Error("UnsupportedEnvironment")}))}))},function(t){var e=yt$1&&yt$1.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}});}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r];}),r=yt$1&&yt$1.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e});}:function(t,e){t.default=e;}),n=yt$1&&yt$1.__importStar||function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&e(n,t,i);return r(n,t),n};Object.defineProperty(t,"__esModule",{value:!0}),t.unwrapKey=t.wrapKey=t.decrypt=t.encrypt=void 0;var i=n(Ew);t.encrypt=i.encrypt,t.decrypt=i.decrypt,t.wrapKey=i.wrapKey,t.unwrapKey=i.unwrapKey,t.default={encrypt:t.encrypt,decrypt:t.decrypt,wrapKey:t.wrapKey,unwrapKey:t.unwrapKey};}(Sw);var Kw={},qw={};!function(t){var e=yt$1&&yt$1.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}});}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r];}),r=yt$1&&yt$1.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e});}:function(t,e){t.default=e;}),n=yt$1&&yt$1.__importStar||function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&e(n,t,i);return r(n,t),n};Object.defineProperty(t,"__esModule",{value:!0}),t.getRandomBytes=t.getRandomSampledString=t.getRandomAsciiString=t.getRandomString=void 0;var i=n(Vc);t.getRandomString=function(e){for(var r=(0, t.getRandomBytes)(e),n=(0, t.getRandomBytes)(e),i="",o=0;o<e;o++)n[o]=n[o]%3,r[o]=0===n[o]?r[o]%10+48:r[o]%26+(1===n[o]?65:97),i+=String.fromCharCode(r[o]);return i};t.getRandomAsciiString=function(e){for(var r=(0, t.getRandomBytes)(e),n="",i=0;i<e;i++)r[i]=r[i]%94+32,n+=String.fromCharCode(r[i]);return n};t.getRandomSampledString=function(e,r){var n=r.length;if(0===n)return "";for(var i=(0, t.getRandomBytes)(e),o="",a=0;a<e;a++)o+=r[i[a]%n];return o};t.getRandomBytes=function(t){var e=i.getRootWebCrypto(),r=i.getNodeCrypto();if(void 0!==e&&"function"==typeof e.getRandomValues){var n=new Uint8Array(t);return e.getRandomValues(n),n}if(void 0!==r)return new Uint8Array(r.randomBytes(t));throw new Error("UnsupportedEnvironment")};}(qw),function(t){var e=yt$1&&yt$1.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}});}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r];}),r=yt$1&&yt$1.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e});}:function(t,e){t.default=e;}),n=yt$1&&yt$1.__importStar||function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&e(n,t,i);return r(n,t),n};Object.defineProperty(t,"__esModule",{value:!0}),t.getRandomSampledString=t.getRandomString=t.getRandomAsciiString=t.getRandomBytes=void 0;var i=n(qw);t.getRandomBytes=i.getRandomBytes,t.getRandomAsciiString=i.getRandomAsciiString,t.getRandomString=i.getRandomString,t.getRandomSampledString=i.getRandomSampledString,t.default={getRandomBytes:t.getRandomBytes,getRandomAsciiString:t.getRandomAsciiString,getRandomString:t.getRandomString,getRandomSampledString:t.getRandomSampledString};}(Kw);var Hw=yt$1&&yt$1.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}});}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r];}),Vw=yt$1&&yt$1.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e});}:function(t,e){t.default=e;}),Ww=yt$1&&yt$1.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&Hw(e,t,r);return Vw(e,t),e},Jw=yt$1&&yt$1.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{u(n.next(t));}catch(t){o(t);}}function s(t){try{u(n.throw(t));}catch(t){o(t);}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e);}))).then(a,s);}u((n=n.apply(t,e||[])).next());}))},Yw=yt$1&&yt$1.__generator||function(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a);}catch(t){o=[6,t],n=0;}finally{r=i=0;}if(5&o[0])throw o[1];return {value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Zw=yt$1&&yt$1.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(hc,"__esModule",{value:!0}),hc.decryptEncryptedPrivateKeyInfo=hc.encryptEncryptedPrivateKeyInfo=void 0;var Gw=Ww(Bn$1),Xw=Ru,$w=Zw(dc),Qw=Ww(vt$1),t_=Zw(Ar$1),e_=Zw(Un$1),r_=Zw(zc),n_=Zw(Sw),i_=Zw(Kw),o_=Qw.Buffer,a_=t_.default.bignum;hc.encryptEncryptedPrivateKeyInfo=function(t,e){return void 0===e&&(e={passphrase:""}),Jw(void 0,void 0,void 0,(function(){var r,n;return Yw(this,(function(i){switch(i.label){case 0:return void 0===e.algorithm&&(e.algorithm="pbes2"),void 0===e.iterationCount&&(e.iterationCount=2048),"pbes2"!==e.algorithm?[3,2]:(void 0===e.cipher&&(e.cipher="aes256-cbc"),void 0===e.prf&&(e.prf="hmacWithSHA256"),[4,c_(t,e.passphrase,"pbkdf2",e.prf,e.iterationCount,e.cipher)]);case 1:return r=i.sent(),[2,s_(r)];case 2:return [4,f_(t,e.passphrase,e.algorithm,e.iterationCount)];case 3:return (n=i.sent()).encryptionAlgorithm.algorithm=Gw.passwordBasedEncryptionSchemes[n.encryptionAlgorithm.algorithm].oid,n.encryptionAlgorithm.parameters=Xw.PBEParameter.encode(n.encryptionAlgorithm.parameters,"der"),[2,Xw.EncryptedPrivateKeyInfo.encode(n,"der")]}}))}))};hc.decryptEncryptedPrivateKeyInfo=function(t,e){return Jw(void 0,void 0,void 0,(function(){var r;return Yw(this,(function(n){switch(n.label){case 0:return (r={}).encryptionAlgorithm={algorithm:Gw.getAlgorithmFromOidStrict(t.encryptionAlgorithm.algorithm,Gw.passwordBasedEncryptionSchemes)},"pbes2"===r.encryptionAlgorithm.algorithm?r.encryptionAlgorithm.parameters=u_(t.encryptionAlgorithm.parameters):r.encryptionAlgorithm.parameters=Xw.PBEParameter.decode(t.encryptionAlgorithm.parameters,"der"),r.encryptedData=t.encryptedData,"pbes2"!==r.encryptionAlgorithm.algorithm?[3,2]:[4,l_(r,e)];case 1:case 3:return [2,n.sent()];case 2:return [4,h_(r,e)]}}))}))};var s_=function(t){var e={encryptionAlgorithm:{}};e.encryptionAlgorithm.algorithm=Gw.passwordBasedEncryptionSchemes[t.encryptionAlgorithm.algorithm].oid;var r=t.encryptionAlgorithm.parameters.keyDerivationFunc;if("pbkdf2"!==r.algorithm)throw new Error("UnsupportedKDF");r.parameters.prf.algorithm=Gw.pbkdf2Prfs[r.parameters.prf.algorithm].oid,r.parameters=Xw.PBKDF2Params.encode(r.parameters,"der"),r.algorithm=Gw.keyDerivationFunctions[r.algorithm].oid;var n=t.encryptionAlgorithm.parameters.encryptionScheme;if(!(Object.keys(Xw.PBES2ESParams).indexOf(n.algorithm)>=0))throw new Error("UnsupportedCipher");return n.parameters=Xw.PBES2ESParams[n.algorithm].encode(n.parameters,"der"),n.algorithm=Gw.encryptionSchemes[n.algorithm].oid,e.encryptionAlgorithm.parameters=Xw.PBES2Params.encode({keyDerivationFunc:r,encryptionScheme:n},"der"),e.encryptedData=t.encryptedData,Xw.EncryptedPrivateKeyInfo.encode(e,"der")},u_=function(t){var e,r,n,i=Xw.PBES2Params.decode(t,"der"),o=Gw.getAlgorithmFromOidStrict(i.keyDerivationFunc.algorithm,Gw.keyDerivationFunctions);if("pbkdf2"!==o)throw new Error("UnsupportedKDF");var a=Xw.PBKDF2Params.decode(i.keyDerivationFunc.parameters,"der");n={algorithm:Gw.getAlgorithmFromOidStrict(a.prf.algorithm,Gw.pbkdf2Prfs),parameters:a.prf.parameters},e=a.iterationCount,r={type:a.salt.type,value:a.salt.value};var s=Gw.getAlgorithmFromOidStrict(i.encryptionScheme.algorithm,Gw.encryptionSchemes);if(!(Object.keys(Xw.PBES2ESParams).indexOf(s)>=0))throw new Error("UnsupportedCipher");return {keyDerivationFunc:{algorithm:o,parameters:{salt:r,iterationCount:e,prf:n}},encryptionScheme:{algorithm:s,parameters:Xw.PBES2ESParams[s].decode(i.encryptionScheme.parameters,"der")}}},c_=function(t,e,r,n,i,o){return Jw(void 0,void 0,void 0,(function(){var a,s,u,c,l,f,h,d,p,y,g,m;return Yw(this,(function(b){switch(b.label){case 0:return a=e_.default.encoder.stringToArrayBuffer(e),[4,i_.default.getRandomBytes(Gw.keyDerivationFunctions[r].defaultSaltLen)];case 1:return s=b.sent(),u=Gw.encryptionSchemes[o].keyLength,"pbkdf2"!==r?[3,3]:[4,r_.default.pbkdf2(a,s,i,u,Gw.pbkdf2Prfs[n].hash)];case 2:return c=b.sent(),[3,4];case 3:throw new Error("UnsupportedKDF");case 4:return "des-ede3-cbc"!==o?[3,6]:(d=(h=o_).from,[4,i_.default.getRandomBytes(Gw.encryptionSchemes[o].ivLength)]);case 5:return l=d.apply(h,[b.sent()]),p=$w.default.CBC.instantiate($w.default.EDE),y=p.create({type:"encrypt",key:o_.from(c),iv:l}),f=o_.from(y.update(t).concat(y.final())),[3,10];case 6:return "aes128-cbc"!==o&&"aes192-cbc"!==o&&"aes256-cbc"!==o?[3,9]:[4,i_.default.getRandomBytes(Gw.encryptionSchemes[o].ivLength)];case 7:return l=b.sent(),m=(g=o_).from,[4,n_.default.encrypt(new Uint8Array(t),c,{name:"AES-CBC",iv:l})];case 8:return f=m.apply(g,[b.sent()]),l=o_.from(l),[3,10];case 9:throw new Error("UnsupportedCipher");case 10:return [2,{encryptedData:f,encryptionAlgorithm:{algorithm:"pbes2",parameters:{keyDerivationFunc:{algorithm:r,parameters:{salt:{type:"specified",value:o_.from(s)},iterationCount:new a_(i),prf:{algorithm:n,parameters:o_.from([5,0])}}},encryptionScheme:{algorithm:o,parameters:l}}}}]}}))}))},l_=function(t,e){return Jw(void 0,void 0,void 0,(function(){var r,n,i,o,a,s,u,c,l,f,h,d,p,y;return Yw(this,(function(g){switch(g.label){case 0:if(r=t.encryptionAlgorithm.parameters.keyDerivationFunc,n=t.encryptionAlgorithm.parameters.encryptionScheme,i=Gw.encryptionSchemes[n.algorithm].keyLength,"pbkdf2"!==r.algorithm)return [3,2];if(a=e_.default.encoder.stringToArrayBuffer(e),"specified"!==r.parameters.salt.type)throw new Error("UnsupportedSaltSource");return s=new Uint8Array(r.parameters.salt.value),u=r.parameters.iterationCount.toNumber(),c=r.parameters.prf.algorithm,[4,r_.default.pbkdf2(a,s,u,i,Gw.pbkdf2Prfs[c].hash)];case 1:return o=g.sent(),[3,3];case 2:throw new Error("UnsupportedKDF");case 3:return "des-ede3-cbc"!==n.algorithm?[3,4]:(d=n.parameters,f=$w.default.CBC.instantiate($w.default.EDE),h=f.create({type:"decrypt",key:o,iv:d}),l=o_.from(h.update(t.encryptedData).concat(h.final())),[3,7]);case 4:return "aes128-cbc"!==n.algorithm&&"aes192-cbc"!==n.algorithm&&"aes256-cbc"!==n.algorithm?[3,6]:(d=new Uint8Array(n.parameters),y=(p=o_).from,[4,n_.default.decrypt(new Uint8Array(t.encryptedData),o,{name:"AES-CBC",iv:d})]);case 5:return l=y.apply(p,[g.sent()]),[3,7];case 6:throw new Error("UnsupportedEncryptionAlgorithm");case 7:return [2,Xw.OneAsymmetricKey.decode(l,"der")]}}))}))},f_=function(t,e,r,n){return Jw(void 0,void 0,void 0,(function(){var i,o,a,s,u,c,l,f,h;return Yw(this,(function(d){switch(d.label){case 0:return i=e_.default.encoder.stringToArrayBuffer(e),[4,i_.default.getRandomBytes(8)];case 1:return o=d.sent(),a=Gw.passwordBasedEncryptionSchemes[r].hash,[4,r_.default.pbkdf1(i,o,n,16,a)];case 2:if(s=d.sent(),u=s.slice(0,8),c=s.slice(8,16),"DES-CBC"!==Gw.passwordBasedEncryptionSchemes[r].encrypt)throw new Error("UnsupportedEncryptionAlgorithm");return f=$w.default.CBC.instantiate($w.default.DES),h=f.create({type:"encrypt",key:u,iv:c}),l=o_.from(h.update(t).concat(h.final())),[2,{encryptionAlgorithm:{algorithm:r,parameters:{salt:o_.from(o),iterationCount:new a_(n)}},encryptedData:l}]}}))}))},h_=function(t,e){return Jw(void 0,void 0,void 0,(function(){var r,n,i,o,a,s,u,c,l,f;return Yw(this,(function(h){switch(h.label){case 0:return r=e_.default.encoder.stringToArrayBuffer(e),n=new Uint8Array(t.encryptionAlgorithm.parameters.salt),i=Gw.passwordBasedEncryptionSchemes[t.encryptionAlgorithm.algorithm].hash,o=t.encryptionAlgorithm.parameters.iterationCount.toNumber(),[4,r_.default.pbkdf1(r,n,o,16,i)];case 1:if(a=h.sent(),s=a.slice(0,8),u=a.slice(8,16),"DES-CBC"!==Gw.passwordBasedEncryptionSchemes[t.encryptionAlgorithm.algorithm].encrypt)throw new Error("UnsupportedEncryptionAlgorithm");return l=$w.default.CBC.instantiate($w.default.DES),f=l.create({type:"decrypt",key:s,iv:u}),c=o_.from(f.update(t.encryptedData).concat(f.final())),[2,Xw.OneAsymmetricKey.decode(c,"der")]}}))}))},d_=yt$1&&yt$1.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}});}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r];}),p_=yt$1&&yt$1.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e});}:function(t,e){t.default=e;}),y_=yt$1&&yt$1.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&d_(e,t,r);return p_(e,t),e},g_=yt$1&&yt$1.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{u(n.next(t));}catch(t){o(t);}}function s(t){try{u(n.throw(t));}catch(t){o(t);}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e);}))).then(a,s);}u((n=n.apply(t,e||[])).next());}))},m_=yt$1&&yt$1.__generator||function(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a);}catch(t){o=[6,t],n=0;}finally{r=i=0;}if(5&o[0])throw o[1];return {value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},b_=yt$1&&yt$1.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Er$1,"__esModule",{value:!0}),Er$1.toJwk=Er$1.fromJwk=void 0;var v_=y_(Ir$1),w_=y_($u),__=Bn$1,S_=b_(Un$1),E_=y_(vt$1),I_=Ru,A_=hc,k_=Ou,D_=E_.Buffer;Er$1.fromJwk=function(t,e,r){var n=r.outputPublic,i=r.compact,o=void 0!==i&&i,a=r.encOptions;return g_(void 0,void 0,void 0,(function(){var r,i,s,u;return m_(this,(function(c){switch(c.label){case 0:return r=(0, k_.getJwkType)(t),i="boolean"==typeof n&&n?"public":r,"EC"===t.kty?s=v_.fromJWK(t,i,o):"RSA"===t.kty&&(s=w_.fromJwk(t,i)),"public"!==i?[3,1]:(u=I_.SubjectPublicKeyInfo.encode(s,"der"),[3,3]);case 1:return u=I_.OneAsymmetricKey.encode(s,"der"),void 0!==a&&void 0!==a.passphrase&&a.passphrase.length>0?[4,(0, A_.encryptEncryptedPrivateKeyInfo)(u,a)]:[3,3];case 2:u=c.sent(),i="encryptedPrivate",c.label=3;case 3:return u=new Uint8Array(u),[2,"pem"===e?S_.default.formatter.binToPem(u,i):u]}}))}))};Er$1.toJwk=function(t,e,r){var n=r.outputPublic,i=r.passphrase;return g_(void 0,void 0,void 0,(function(){var r,o,a,s;return m_(this,(function(u){switch(u.label){case 0:r="pem"===e?S_.default.formatter.pemToBin(t):t;try{o=I_.KeyStructure.decode(D_.from(r),"der");}catch(t){throw new Error("FailedToDecodeKey")}return "subjectPublicKeyInfo"!==o.type?[3,1]:(a="public",o=o.value,[3,4]);case 1:return a="boolean"==typeof n&&n?"public":"private","encryptedPrivateKeyInfo"!==o.type?[3,3]:[4,(0, A_.decryptEncryptedPrivateKeyInfo)(o.value,i)];case 2:return o=u.sent(),[3,4];case 3:if("oneAsymmetricKey"!==o.type)throw new Error("UnsupportedKeyStructure");o=o.value,u.label=4;case 4:if((s=(0, __.getAlgorithmFromOid)("public"===a?o.algorithm.algorithm:o.privateKeyAlgorithm.algorithm,__.publicKeyAlgorithms)).length<1)throw new Error("UnsupportedKey");if("EC"===s[0])return [2,v_.toJWK(o,a)];if("RSA"===s[0])return [2,w_.toJwk(o,a)];throw new Error("InvalidKeyType")}}))}))};var x_=yt$1&&yt$1.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}});}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r];}),T_=yt$1&&yt$1.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e});}:function(t,e){t.default=e;}),P_=yt$1&&yt$1.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&x_(e,t,r);return T_(e,t),e},O_=yt$1&&yt$1.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{u(n.next(t));}catch(t){o(t);}}function s(t){try{u(n.throw(t));}catch(t){o(t);}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e);}))).then(a,s);}u((n=n.apply(t,e||[])).next());}))},R_=yt$1&&yt$1.__generator||function(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a);}catch(t){o=[6,t],n=0;}finally{r=i=0;}if(5&o[0])throw o[1];return {value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(Sr$1,"__esModule",{value:!0}),Sr$1.toJwkFrom=Sr$1.fromJwkTo=void 0;var C_=P_(Er$1),M_=P_(Fn$1);Sr$1.fromJwkTo=function(t,e,r){return void 0===t&&(t="pem"),void 0===r&&(r={}),O_(void 0,void 0,void 0,(function(){return R_(this,(function(n){switch(n.label){case 0:if("EC"!==e.kty&&"RSA"!==e.kty)throw new Error("UnsupportedKeyType");return "EC"===e.kty&&void 0===r.compact&&(r.compact=!1),"oct"===t&&"string"!==r.output&&(r.output="binary"),void 0===r.encryptParams&&(r.encryptParams={passphrase:""}),"der"!==t&&"pem"!==t||void 0!==r.encryptParams.passphrase||(r.encryptParams.passphrase=""),"der"!==t&&"pem"!==t?[3,2]:[4,C_.fromJwk(e,t,{outputPublic:r.outputPublic,compact:r.compact,encOptions:r.encryptParams})];case 1:return [2,n.sent()];case 2:if("oct"===t&&"EC"===e.kty)return [2,M_.fromJwk(e,{outputPublic:r.outputPublic,outputFormat:r.output,compact:r.compact})];throw new Error("UnsupportedConversion");case 3:return [2]}}))}))};Sr$1.toJwkFrom=function(t,e,r){return void 0===r&&(r={}),O_(void 0,void 0,void 0,(function(){return R_(this,(function(n){switch(n.label){case 0:if("oct"===t&&!r.namedCurve)throw new Error("InappropriateOptions");return "der"!==t&&"pem"!==t||void 0!==r.passphrase||(r.passphrase=""),"der"!==t&&"pem"!==t?[3,2]:[4,C_.toJwk(e,t,{outputPublic:r.outputPublic,passphrase:r.passphrase})];case 1:return [2,n.sent()];case 2:if("oct"===t)return [2,M_.toJwk(e,r.namedCurve,{outputPublic:r.outputPublic})];throw new Error("UnsupportedConversion");case 3:return [2]}}))}))};var N_={},j_=yt$1&&yt$1.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}});}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r];}),B_=yt$1&&yt$1.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e});}:function(t,e){t.default=e;}),L_=yt$1&&yt$1.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&j_(e,t,r);return B_(e,t),e},F_=yt$1&&yt$1.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{u(n.next(t));}catch(t){o(t);}}function s(t){try{u(n.throw(t));}catch(t){o(t);}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e);}))).then(a,s);}u((n=n.apply(t,e||[])).next());}))},U_=yt$1&&yt$1.__generator||function(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a);}catch(t){o=[6,t],n=0;}finally{r=i=0;}if(5&o[0])throw o[1];return {value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},z_=yt$1&&yt$1.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(N_,"__esModule",{value:!0}),N_.getJwkThumbprint=void 0;var K_=z_(Un$1),q_=z_(qc),H_=L_(vt$1).Buffer;N_.getJwkThumbprint=function(t,e,r){return void 0===e&&(e="SHA-256"),void 0===r&&(r="binary"),F_(void 0,void 0,void 0,(function(){var n,i,o;return U_(this,(function(a){switch(a.label){case 0:if(["hex","binary"].indexOf(r)<0)throw new Error("UnsupportedOutputFormat");if("EC"===t.kty)n=JSON.stringify({crv:t.crv,kty:t.kty,x:t.x,y:t.y});else {if("RSA"!==t.kty)throw new Error("UnsupportedKeyType");n=JSON.stringify({e:t.e,kty:t.kty,n:t.n});}return i=new Uint8Array(H_.from(n,"utf8")),[4,q_.default.compute(i,e)];case 1:return o=a.sent(),"hex"===r?[2,K_.default.encoder.arrayBufferToHexString(o)]:"base64"===r?[2,K_.default.encoder.encodeBase64(o)]:[2,o]}}))}))};var V_={exports:{}};!function(t,e){var r="__lodash_hash_undefined__",n=9007199254740991,i="[object Arguments]",o="[object Boolean]",a="[object Date]",s="[object Function]",u="[object GeneratorFunction]",c="[object Map]",l="[object Number]",f="[object Object]",h="[object Promise]",d="[object RegExp]",p="[object Set]",y="[object String]",g="[object Symbol]",m="[object WeakMap]",b="[object ArrayBuffer]",v="[object DataView]",w="[object Float32Array]",_="[object Float64Array]",S="[object Int8Array]",E="[object Int16Array]",I="[object Int32Array]",A="[object Uint8Array]",k="[object Uint8ClampedArray]",D="[object Uint16Array]",x="[object Uint32Array]",T=/\w*$/,P=/^\[object .+?Constructor\]$/,O=/^(?:0|[1-9]\d*)$/,R={};R[i]=R["[object Array]"]=R[b]=R[v]=R[o]=R[a]=R[w]=R[_]=R[S]=R[E]=R[I]=R[c]=R[l]=R[f]=R[d]=R[p]=R[y]=R[g]=R[A]=R[k]=R[D]=R[x]=!0,R["[object Error]"]=R[s]=R[m]=!1;var C="object"==typeof yt$1&&yt$1&&yt$1.Object===Object&&yt$1,M="object"==typeof self&&self&&self.Object===Object&&self,N=C||M||Function("return this")(),j=e&&!e.nodeType&&e,B=j&&t&&!t.nodeType&&t,L=B&&B.exports===j;function F(t,e){return t.set(e[0],e[1]),t}function U(t,e){return t.add(e),t}function z(t,e,r,n){var i=-1,o=t?t.length:0;for(n&&o&&(r=t[++i]);++i<o;)r=e(r,t[i],i,t);return r}function K(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"");}catch(t){}return e}function q(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t];})),r}function H(t,e){return function(r){return t(e(r))}}function V(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t;})),r}var W,J=Array.prototype,Y=Function.prototype,Z=Object.prototype,G=N["__core-js_shared__"],X=(W=/[^.]+$/.exec(G&&G.keys&&G.keys.IE_PROTO||""))?"Symbol(src)_1."+W:"",$=Y.toString,Q=Z.hasOwnProperty,tt=Z.toString,et=RegExp("^"+$.call(Q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),rt=L?N.Buffer:void 0,nt=N.Symbol,it=N.Uint8Array,ot=H(Object.getPrototypeOf,Object),at=Object.create,st=Z.propertyIsEnumerable,ut=J.splice,ct=Object.getOwnPropertySymbols,lt=rt?rt.isBuffer:void 0,ft=H(Object.keys,Object),ht=Lt(N,"DataView"),dt=Lt(N,"Map"),pt=Lt(N,"Promise"),gt=Lt(N,"Set"),mt=Lt(N,"WeakMap"),bt=Lt(Object,"create"),vt=qt(ht),wt=qt(dt),_t=qt(pt),St=qt(gt),Et=qt(mt),It=nt?nt.prototype:void 0,At=It?It.valueOf:void 0;function kt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1]);}}function Dt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1]);}}function xt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1]);}}function Tt(t){this.__data__=new Dt(t);}function Pt(t,e){var r=Vt(t)||function(t){return function(t){return function(t){return !!t&&"object"==typeof t}(t)&&Wt(t)}(t)&&Q.call(t,"callee")&&(!st.call(t,"callee")||tt.call(t)==i)}(t)?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],n=r.length,o=!!n;for(var a in t)!e&&!Q.call(t,a)||o&&("length"==a||zt(a,n))||r.push(a);return r}function Ot(t,e,r){var n=t[e];Q.call(t,e)&&Ht(n,r)&&(void 0!==r||e in t)||(t[e]=r);}function Rt(t,e){for(var r=t.length;r--;)if(Ht(t[r][0],e))return r;return -1}function Ct(t,e,r,n,h,m,P){var O;if(n&&(O=m?n(t,h,m,P):n(t)),void 0!==O)return O;if(!Zt(t))return t;var C=Vt(t);if(C){if(O=function(t){var e=t.length,r=t.constructor(e);e&&"string"==typeof t[0]&&Q.call(t,"index")&&(r.index=t.index,r.input=t.input);return r}(t),!e)return function(t,e){var r=-1,n=t.length;e||(e=Array(n));for(;++r<n;)e[r]=t[r];return e}(t,O)}else {var M=Ut(t),N=M==s||M==u;if(Jt(t))return function(t,e){if(e)return t.slice();var r=new t.constructor(t.length);return t.copy(r),r}(t,e);if(M==f||M==i||N&&!m){if(K(t))return m?t:{};if(O=function(t){return "function"!=typeof t.constructor||Kt(t)?{}:function(t){return Zt(t)?at(t):{}}(ot(t))}(N?{}:t),!e)return function(t,e){return jt(t,Ft(t),e)}(t,function(t,e){return t&&jt(e,Gt(e),t)}(O,t))}else {if(!R[M])return m?t:{};O=function(t,e,r,n){var i=t.constructor;switch(e){case b:return Nt(t);case o:case a:return new i(+t);case v:return function(t,e){var r=e?Nt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,n);case w:case _:case S:case E:case I:case A:case k:case D:case x:return function(t,e){var r=e?Nt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}(t,n);case c:return function(t,e,r){return z(e?r(q(t),!0):q(t),F,new t.constructor)}(t,n,r);case l:case y:return new i(t);case d:return function(t){var e=new t.constructor(t.source,T.exec(t));return e.lastIndex=t.lastIndex,e}(t);case p:return function(t,e,r){return z(e?r(V(t),!0):V(t),U,new t.constructor)}(t,n,r);case g:return s=t,At?Object(At.call(s)):{}}var s;}(t,M,Ct,e);}}P||(P=new Tt);var j=P.get(t);if(j)return j;if(P.set(t,O),!C)var B=r?function(t){return function(t,e,r){var n=e(t);return Vt(t)?n:function(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}(n,r(t))}(t,Gt,Ft)}(t):Gt(t);return function(t,e){for(var r=-1,n=t?t.length:0;++r<n&&!1!==e(t[r],r,t););}(B||t,(function(i,o){B&&(i=t[o=i]),Ot(O,o,Ct(i,e,r,n,o,t,P));})),O}function Mt(t){return !(!Zt(t)||(e=t,X&&X in e))&&(Yt(t)||K(t)?et:P).test(qt(t));var e;}function Nt(t){var e=new t.constructor(t.byteLength);return new it(e).set(new it(t)),e}function jt(t,e,r,n){r||(r={});for(var i=-1,o=e.length;++i<o;){var a=e[i],s=n?n(r[a],t[a],a,r,t):void 0;Ot(r,a,void 0===s?t[a]:s);}return r}function Bt(t,e){var r,n,i=t.__data__;return ("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof e?"string":"hash"]:i.map}function Lt(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return Mt(r)?r:void 0}kt.prototype.clear=function(){this.__data__=bt?bt(null):{};},kt.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},kt.prototype.get=function(t){var e=this.__data__;if(bt){var n=e[t];return n===r?void 0:n}return Q.call(e,t)?e[t]:void 0},kt.prototype.has=function(t){var e=this.__data__;return bt?void 0!==e[t]:Q.call(e,t)},kt.prototype.set=function(t,e){return this.__data__[t]=bt&&void 0===e?r:e,this},Dt.prototype.clear=function(){this.__data__=[];},Dt.prototype.delete=function(t){var e=this.__data__,r=Rt(e,t);return !(r<0)&&(r==e.length-1?e.pop():ut.call(e,r,1),!0)},Dt.prototype.get=function(t){var e=this.__data__,r=Rt(e,t);return r<0?void 0:e[r][1]},Dt.prototype.has=function(t){return Rt(this.__data__,t)>-1},Dt.prototype.set=function(t,e){var r=this.__data__,n=Rt(r,t);return n<0?r.push([t,e]):r[n][1]=e,this},xt.prototype.clear=function(){this.__data__={hash:new kt,map:new(dt||Dt),string:new kt};},xt.prototype.delete=function(t){return Bt(this,t).delete(t)},xt.prototype.get=function(t){return Bt(this,t).get(t)},xt.prototype.has=function(t){return Bt(this,t).has(t)},xt.prototype.set=function(t,e){return Bt(this,t).set(t,e),this},Tt.prototype.clear=function(){this.__data__=new Dt;},Tt.prototype.delete=function(t){return this.__data__.delete(t)},Tt.prototype.get=function(t){return this.__data__.get(t)},Tt.prototype.has=function(t){return this.__data__.has(t)},Tt.prototype.set=function(t,e){var r=this.__data__;if(r instanceof Dt){var n=r.__data__;if(!dt||n.length<199)return n.push([t,e]),this;r=this.__data__=new xt(n);}return r.set(t,e),this};var Ft=ct?H(ct,Object):function(){return []},Ut=function(t){return tt.call(t)};function zt(t,e){return !!(e=null==e?n:e)&&("number"==typeof t||O.test(t))&&t>-1&&t%1==0&&t<e}function Kt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Z)}function qt(t){if(null!=t){try{return $.call(t)}catch(t){}try{return t+""}catch(t){}}return ""}function Ht(t,e){return t===e||t!=t&&e!=e}(ht&&Ut(new ht(new ArrayBuffer(1)))!=v||dt&&Ut(new dt)!=c||pt&&Ut(pt.resolve())!=h||gt&&Ut(new gt)!=p||mt&&Ut(new mt)!=m)&&(Ut=function(t){var e=tt.call(t),r=e==f?t.constructor:void 0,n=r?qt(r):void 0;if(n)switch(n){case vt:return v;case wt:return c;case _t:return h;case St:return p;case Et:return m}return e});var Vt=Array.isArray;function Wt(t){return null!=t&&function(t){return "number"==typeof t&&t>-1&&t%1==0&&t<=n}(t.length)&&!Yt(t)}var Jt=lt||function(){return !1};function Yt(t){var e=Zt(t)?tt.call(t):"";return e==s||e==u}function Zt(t){var e=typeof t;return !!t&&("object"==e||"function"==e)}function Gt(t){return Wt(t)?Pt(t):function(t){if(!Kt(t))return ft(t);var e=[];for(var r in Object(t))Q.call(t,r)&&"constructor"!=r&&e.push(r);return e}(t)}t.exports=function(t){return Ct(t,!0,!0)};}(V_,V_.exports);var W_=yt$1&&yt$1.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{u(n.next(t));}catch(t){o(t);}}function s(t){try{u(n.throw(t));}catch(t){o(t);}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e);}))).then(a,s);}u((n=n.apply(t,e||[])).next());}))},J_=yt$1&&yt$1.__generator||function(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a);}catch(t){o=[6,t],n=0;}finally{r=i=0;}if(5&o[0])throw o[1];return {value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Y_=yt$1&&yt$1.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_r$1,"__esModule",{value:!0}),_r$1.Key=void 0;var Z_=Sr$1,G_=N_,X_=Y_(Un$1),$_=Ou,Q_=V_.exports,tS=function(){function t(t,e,r){void 0===r&&(r={});var n=Q_(e),i=Q_(r);if(this._type=null,this._jwk=null,this._der=null,this._oct={},this._isEncrypted=!1,this._current={jwk:!1,der:!1,oct:!1},"jwk"===t)this._setJwk(n);else if("der"===t||"pem"===t){if("der"===t&&!(n instanceof Uint8Array))throw new Error("DerKeyMustBeUint8Array");if("pem"===t&&"string"!=typeof n)throw new Error("PemKeyMustBeString");this._setAsn1(n,t);}else {if("oct"!==t)throw new Error("UnsupportedType");if("string"!=typeof i.namedCurve)throw new Error("namedCurveMustBeSpecified");if(!(n instanceof Uint8Array))throw new Error("OctetKeyMustBeUint8Array");this._setSec1(n,i.namedCurve);}}return t.prototype._setJwk=function(t){this._type=(0, $_.getJwkType)(t),this._jwk=t,this._isEncrypted&&(this._der=null),this._isEncrypted=!1,this._setCurrentStatus();},t.prototype._setAsn1=function(t,e){this._type=(0, $_.isAsn1Public)(t,e)?"public":"private",this._isEncrypted=(0, $_.isAsn1Encrypted)(t,e),this._der="pem"===e?X_.default.formatter.pemToBin(t):t,this._isEncrypted&&(this._jwk=null,this._oct={}),this._setCurrentStatus();},t.prototype._setSec1=function(t,e){this._type=(0, $_.getSec1KeyType)(t,e),this._oct={namedCurve:e,key:t},this._isEncrypted&&(this._der=null),this._isEncrypted=!1,this._setCurrentStatus();},t.prototype._setCurrentStatus=function(){this._current.jwk=null!==this._jwk&&("RSA"===this._jwk.kty||"EC"===this._jwk.kty),this._current.der=null!==this._der&&this._der.length>0,this._current.oct=void 0!==this._oct.key&&void 0!==this._oct.namedCurve&&this._oct.key.length>0;},t.prototype.export=function(t,e){return void 0===t&&(t="jwk"),void 0===e&&(e={}),W_(this,void 0,void 0,(function(){var r;return J_(this,(function(n){switch(n.label){case 0:if(this._isEncrypted&&"private"===this._type){if("der"!==t&&"pem"!==t||0!==Object.keys(e).length||!this._current.der)throw new Error("DecryptionRequired");return [2,"pem"===t?X_.default.formatter.binToPem(this._der,"encryptedPrivate"):this._der]}return this._current.jwk?(r=this._jwk,[3,6]):[3,1];case 1:return this._current.oct?[4,(0, Z_.toJwkFrom)("oct",this._oct.key,{namedCurve:this._oct.namedCurve})]:[3,3];case 2:case 4:return r=n.sent(),[3,6];case 3:return this._current.der?[4,(0, Z_.toJwkFrom)("der",this._der)]:[3,5];case 5:throw new Error("InvalidStatus");case 6:return this._setJwk(r),"der"!==t&&"pem"!==t?[3,8]:[4,(0, Z_.fromJwkTo)(t,r,{outputPublic:e.outputPublic,compact:e.compact,encryptParams:e.encryptParams})];case 7:case 9:return [2,n.sent()];case 8:return "oct"!==t?[3,10]:[4,(0, Z_.fromJwkTo)(t,r,{outputPublic:e.outputPublic,output:e.output,compact:e.compact})];case 10:return [2,r]}}))}))},t.prototype.encrypt=function(t){return W_(this,void 0,void 0,(function(){var e,r;return J_(this,(function(n){switch(n.label){case 0:if(this._isEncrypted)throw new Error("AlreadyEncrypted");return e={encryptParams:{passphrase:t}},r=this._setAsn1,[4,this.export("der",e)];case 1:return r.apply(this,[n.sent(),"der"]),[2,!0]}}))}))},t.prototype.decrypt=function(t){return W_(this,void 0,void 0,(function(){var e;return J_(this,(function(r){switch(r.label){case 0:if(!this._isEncrypted)throw new Error("NotEncrypted");return this._current.der?[4,(0, Z_.toJwkFrom)("der",this._der,{passphrase:t})]:[3,2];case 1:return e=r.sent(),[3,3];case 2:throw new Error("FailedToDecrypt");case 3:return this._setJwk(e),[2,!0]}}))}))},t.prototype.getJwkThumbprint=function(t,e){return void 0===t&&(t="SHA-256"),void 0===e&&(e="binary"),W_(this,void 0,void 0,(function(){var r;return J_(this,(function(n){switch(n.label){case 0:if(this._isEncrypted)throw new Error("DecryptionRequired");return r=G_.getJwkThumbprint,[4,this.export("jwk")];case 1:return [4,r.apply(void 0,[n.sent(),t,e])];case 2:return [2,n.sent()]}}))}))},Object.defineProperty(t.prototype,"keyType",{get:function(){var t=this;if(this._isEncrypted)throw new Error("DecryptionRequired");return new Promise((function(e,r){t.export("jwk").then((function(t){e(t.kty);})).catch((function(t){r(t);}));}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"jwkThumbprint",{get:function(){return this.getJwkThumbprint()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEncrypted",{get:function(){return this._isEncrypted},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPrivate",{get:function(){return "private"===this._type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"der",{get:function(){return this.export("der")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pem",{get:function(){return this.export("pem")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"jwk",{get:function(){return this.export("jwk")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oct",{get:function(){return this.export("oct",{output:"string"})},enumerable:!1,configurable:!0}),t}();_r$1.Key=tS,function(t){var e=yt$1&&yt$1.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}});}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r];}),r=yt$1&&yt$1.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e});}:function(t,e){t.default=e;}),n=yt$1&&yt$1.__importStar||function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&e(n,t,i);return r(n,t),n};Object.defineProperty(t,"__esModule",{value:!0}),t.Key=void 0;var i=n(_r$1);t.Key=i.Key,t.default={Key:t.Key};}(wr$1);var eS=gt$1(wr$1);class rS{static sort(t){t.sort(((t,e)=>"string"==typeof t?t<e?-1:t>e?1:0:t.compareTo(e)));}}class nS extends Map{get(t){for(let e of this.entries())if(e[0].equals(t))return e[1];return null}delete(t){for(let e of this.entries())if(e[0].equals(t))return super.delete(e[0]);return !1}has(t){for(let e of this.entries())if(e[0].equals(t))return !0;return !1}valuesAsSortedArray(){let t=Array.from(this.keys());return rS.sort(t),t.map((t=>this.get(t)))}}const iS=new e("DIDDocument");class oS extends at$1{constructor(t){super(),this.subject=t;}static clone(t,e){let r=new oS(t.subject);return r.context=t.context,r.controllers=t.controllers,r.controllerDocs=t.controllerDocs,r.effectiveController=t.effectiveController,r.multisig=t.multisig,r.publicKeys=t.publicKeys,r.authenticationKeys=t.authenticationKeys,r.authorizationKeys=t.authorizationKeys,r.defaultPublicKey=t.defaultPublicKey,r.credentials=t.credentials,r.services=t.services,r.expires=t.expires,e&&(r.proofs=t.proofs),r.metadata=t.metadata,r}getSubject(){return this.subject}canonicalId(t){return "string"==typeof t?jt$1.from(t,this.getSubject()):null==t||null!=t.getDid()?t:jt$1.from(t,this.getSubject())}checkAttachedStore(){if(!this.getMetadata().attachedStore())throw new g$1}checkIsPrimitive(){if(this.isCustomizedDid())throw new m$1(this.getSubject().toString())}checkIsCustomized(){if(!this.isCustomizedDid())throw new y$1(this.getSubject().toString())}checkHasEffectiveController(){if(null==this.getEffectiveController())throw new b$1(this.getSubject().toString())}isCustomizedDid(){return null==this.defaultPublicKey}getControllers(){return this.controllers}getControllerCount(){return this.controllers.length}getController(){return 1==this.controllers.length?this.controllers[0]:null}hasController(t=null){return t?void 0!==this.controllers.find((e=>e.equals(t))):0!=this.controllers.length}getControllerDocument(t){return this.controllerDocs.get(t)}getEffectiveController(){return this.effectiveController}getEffectiveControllerDocument(){return null==this.effectiveController?null:this.getControllerDocument(this.effectiveController)}setEffectiveController(t){if(this.checkIsCustomized(),null!=t){if(!this.hasController(t))throw new v$1("Not contoller for target DID");this.effectiveController=t;let e=this.getControllerDocument(this.effectiveController);e.getMetadata().attachedStore()||e.getMetadata().attachStore(this.getMetadata().getStore());}else this.effectiveController=t;}isMultiSignature(){return null!=this.multisig}getMultiSignature(){return this.multisig}getPublicKeyCount(){let t=this.publicKeys.size;if(this.hasController())for(let e of this.controllerDocs.values())t+=e.getAuthenticationKeyCount();return t}getPublicKeys(){let t=Array.from(this.publicKeys.values());if(this.hasController())for(let e of this.controllerDocs.values())t.push(...e.getAuthenticationKeys());return t}selectPublicKeys(t,e){Ot$1(null!=t||null!=e,"Invalid select args"),t=this.canonicalId(t);let r=[];for(let n of this.publicKeys.values())(null==t||n.getId().equals(t))&&(null!=e&&n.getType()!==e||r.push(n));if(this.hasController())for(let n of this.controllerDocs.values())r.push(...n.selectAuthenticationKeys(t,e));return r}getPublicKey(t){Ot$1(null!=t,"Invalid publicKey id"),t=this.canonicalId(t);let e=this.publicKeys.get(t);if(null==e&&this.hasController()){let r=this.getControllerDocument(t.getDid());null!=r&&(e=r.getAuthenticationKey(t));}return e}hasPublicKey(t){return null!=this.getPublicKey(this.canonicalId(t))}hasPrivateKey(t){return "string"==typeof t&&(t=this.canonicalId(t)),Ot$1(null!=t,"Invalid publicKey id"),!(!this.hasPublicKey(t)||!this.getMetadata().attachedStore())&&this.getMetadata().getStore().containsPrivateKey(t)}getDefaultPublicKeyId(){let t=this.getDefaultPublicKey();return null!=t?t.getId():null}getDefaultPublicKey(){return null!=this.defaultPublicKey?this.defaultPublicKey:null!=this.effectiveController?this.getControllerDocument(this.effectiveController).getDefaultPublicKey():null}derive(t,e){return r(this,void 0,void 0,(function*(){return Ot$1(null!=e&&""!==e,"Invalid storepass"),this.checkAttachedStore(),this.checkIsPrimitive(),RD.deserialize(yield this.getMetadata().getStore().loadPrivateKey(this.getDefaultPublicKeyId(),e)).deriveWithIndex(t).serializeBase58()}))}mapToDerivePath(t,e){let r=MS.encodeToBuffer(vt$1.Buffer.from(t,"utf-8")),n="m/",i=RS.wrap(r);for(;i.hasRemaining();){let t=i.readInt();n=t>=0?n.concat(t.toString()):n.concat((2147483647&t).toString()).concat("'"),n=n.concat("/");}return n=e>=0?n.concat(e.toString()):n.concat((2147483647&e).toString()).concat("'"),n}deriveFromIdentifier(t,e,n){return r(this,void 0,void 0,(function*(){Ot$1(t&&null!=t,"Invalid identifier"),this.checkAttachedStore(),this.checkIsPrimitive();let r=RD.deserialize(yield this.getMetadata().getStore().loadPrivateKey(this.getDefaultPublicKeyId(),n)),i=this.mapToDerivePath(t,e);return r.deriveWithPath(i).serializeBase58()}))}getAuthenticationKeyCount(){let t=this.authenticationKeys.size;if(this.hasController())for(let e of this.controllerDocs.values())t+=e.getAuthenticationKeyCount();return t}getAuthenticationKeys(){let t=Array.from(this.authenticationKeys.values());if(this.hasController())for(let e of this.controllerDocs.values())t.push(...e.getAuthenticationKeys());return t}selectAuthenticationKeys(t,e){Ot$1(null!=t||null!=e,"Invalid select args"),t=this.canonicalId(t);let r=[];for(let n of this.authenticationKeys.values())(null==t||n.getId().equals(t))&&(null!=e&&n.getType()!==e||r.push(n));if(this.hasController())for(let n of this.controllerDocs.values())r.push(...n.selectAuthenticationKeys(t,e));return r}getAuthenticationKey(t){Ot$1(null!=t,"Invalid publicKey id"),t=this.canonicalId(t);let e=this.authenticationKeys.get(t);if(null!=e)return e;if(this.hasController()){let e=this.controllerDocs.get(t.getDid());if(null!=e)return e.getAuthenticationKey(t)}return null}isAuthenticationKey(t){return null!=this.getAuthenticationKey(this.canonicalId(t))}getAuthorizationKeyCount(){return this.authorizationKeys.size}getAuthorizationKeys(){return Array.from(this.authorizationKeys.values())}selectAuthorizationKeys(t,e){Ot$1(null!=t||null!=e,"Invalid select args"),t=this.canonicalId(t);let r=[];for(let n of this.authorizationKeys.values())(null==t||n.getId().equals(t))&&(null!=e&&n.getType()!==e||r.push(n));return r}getAuthorizationKey(t){return Ot$1(null!=t,"Invalid publicKey id"),this.authorizationKeys.get(this.canonicalId(t))}isAuthorizationKey(t){return null!=this.getAuthorizationKey(t)}getCredentialCount(){return this.credentials.size}getCredentials(){return Array.from(this.credentials.values())}selectCredentials(t,e){Ot$1(null!=t||null!=e,"Invalid select args"),t=this.canonicalId(t);let r=[];for(let n of this.credentials.values())(null==t||n.getId().equals(t))&&(null!=e&&n.getType().indexOf(e)<0||r.push(n));return r}getCredential(t){return Ot$1(null!=t,"Invalid Credential id"),this.credentials.get(this.canonicalId(t))}getServiceCount(){return this.services.size}getServices(){return Array.from(this.services.values())}selectServices(t,e){Ot$1(null!=t||null!=e,"Invalid select args"),t=this.canonicalId(t);let r=[];for(let n of this.services.values())(null==t||n.getId().equals(t))&&(null!=e&&n.getType()!==e||r.push(n));return r}getService(t){return Ot$1(null!=t,"Invalid service id"),this.services.get(this.canonicalId(t))}getExpires(){return this.expires}getLastModified(){return this.getProof().getCreated()}getSignature(){return this.getProof().getSignature()}getProof(){return this.getProofs()[0]}getProofs(){return this.proofs.valuesAsSortedArray()}getSerializeContextDid(){return this.getSubject()}toJSON(t=null){let e=t?new Nt$1(t):null,r={};if(this.context.length>0&&(r["@context"]=Array.from(this.context)),r.id=this.subject.toString(),this.controllers.length>0&&(r.controller=1==this.controllers.length?this.controllers[0].toString():Array.from(this.controllers,(t=>t.toString()))),this.multisig&&(r.multisig=this.multisig.toString()),this.publicKeys.size>0&&(r.publicKey=Array.from(this.publicKeys.valuesAsSortedArray(),(e=>e.toJSON(t)))),this.authenticationKeys.size>0&&(r.authentication=Array.from(this.authenticationKeys.valuesAsSortedArray(),(t=>t.getId().toString(e)))),this.authorizationKeys.size>0&&(r.authorization=Array.from(this.authorizationKeys.valuesAsSortedArray(),(t=>t.getId().toString(e)))),this.credentials.size>0&&(r.verifiableCredential=Array.from(this.credentials.valuesAsSortedArray(),(e=>e.toJSON(t)))),this.services.size>0&&(r.service=Array.from(this.services.valuesAsSortedArray(),(e=>e.toJSON(t)))),this.expires&&(r.expires=this.dateToString(this.expires)),this.proofs&&this.proofs.size>0){let e=this.proofs.valuesAsSortedArray();1==e.length?r.proof=e[0].toJSON(t):r.proof=Array.from(e,(e=>e.toJSON(t)));}return r}fromJSON(t,e=null){return r(this,void 0,void 0,(function*(){this.fromJSONOnly(t,e),this.controllers.length>0&&(yield this.resolveControllers());}))}resolveControllers(){return r(this,void 0,void 0,(function*(){if(this.controllerDocs.size===this.controllers.length)return;let t=[];for(let e of this.controllers){let r=e.resolve().then((t=>{if(null==t)throw new p$1("Can not resolve controller: "+e);if(this.controllerDocs.has(e))throw new p$1("Duplicated controller: "+e);this.controllerDocs.set(e,t);}));t.push(r);}try{yield Promise.all(t);}catch(t){throw new p$1("Can not resolve the controller's DID: "+t,t)}}))}fromJSONOnly(t,e=null){this.context=this.getContext("@context",t["@context"],{mandatory:!1,nullable:!1,defaultValue:[]}),this.subject=this.getDid("id",t.id,{mandatory:!0,nullable:!1,defaultValue:null}),e=this.subject,this.controllers=this.getDids("controller",t.controller,{mandatory:!1,nullable:!1,defaultValue:[]});let r=this.getString("multisig",t.multisig,{mandatory:!1,nullable:!1});if(r&&(this.multisig=oS.MultiSignature.fromString(r)),this.controllerDocs=new nS,this.controllers.length<=1){if(this.multisig)throw new p$1("Invalid multisig property")}else {if(null==this.multisig)throw new p$1("Missing multisig property");if(this.multisig.n()!=this.controllers.length)throw new p$1("Invalid multisig property")}if(this.publicKeys=new nS,t.publicKey){if(!Array.isArray(t.publicKey))throw new p$1("Invalid property: publicKey, type error.");for(let r of t.publicKey){let t,n=r;try{t=oS.PublicKey.deserialize(n,oS.PublicKey,e);}catch(t){throw new p$1("Invalid publicKey: "+n.id,t)}if(this.publicKeys.has(t.getId()))throw new p$1("Duplicated publicKey: "+t.getId());this.publicKeys.set(t.getId(),t);}}if(this.authenticationKeys=new nS,t.authentication){if(!Array.isArray(t.authentication))throw new p$1("Invalid property: authentication, type error.");for(let r of t.authentication){let t;if("string"==typeof r){let n=new jt$1(r,e);if(!this.publicKeys.has(n))throw new p$1("Not exists publicKey reference: "+n);t=this.publicKeys.get(n);}else {let n=r;try{t=oS.PublicKey.deserialize(n,oS.PublicKey,e);}catch(t){throw new p$1("Invalid publicKey: "+n.id,t)}if(this.publicKeys.has(t.getId()))throw new p$1("Duplicated publicKey: "+t.getId());this.publicKeys.set(t.getId(),t);}if(!t.getController().equals(e))throw new p$1("Invalid authentication key: "+t.getId());this.authenticationKeys.set(t.getId(),t);}}if(this.authorizationKeys=new nS,t.authorization){if(!Array.isArray(t.authorization))throw new p$1("Invalid property: authorization, type error.");for(let r of t.authorization){let t;if("string"==typeof r){let n=new jt$1(r,e);if(!this.publicKeys.has(n))throw new p$1("Not exists publicKey reference: "+n);t=this.publicKeys.get(n);}else {let n=r;try{t=oS.PublicKey.deserialize(n,oS.PublicKey,e);}catch(t){throw new p$1("Invalid publicKey: "+n.id,t)}if(this.publicKeys.has(t.getId()))throw new p$1("Duplicated publicKey: "+t.getId());this.publicKeys.set(t.getId(),t);}if(t.getController().equals(e))throw new p$1("Invalid authorization key: "+t.getId());this.authorizationKeys.set(t.getId(),t);}}if(this.controllers.length>0)1==this.controllers.length&&(this.effectiveController=this.controllers[0]);else {if(!this.publicKeys||0==this.publicKeys.size)throw new p$1("Missing publicKeys");for(let t of this.publicKeys.values())if(t.getController().equals(this.subject)){if(RD.toAddress(t.getPublicKeyBytes())===this.subject.getMethodSpecificId()){this.defaultPublicKey=t,this.authenticationKeys.has(t.getId())||this.authenticationKeys.set(t.getId(),t);break}}if(!this.defaultPublicKey)throw new p$1("Missing default public key")}if(this.credentials=new nS,t.verifiableCredential){if(!Array.isArray(t.verifiableCredential))throw new p$1("Invalid property: verifiableCredential, type error.");for(let r of t.verifiableCredential){let t,n=r;try{t=vr$1.deserialize(n,vr$1,e);}catch(t){throw new p$1("Invalid verifiableCredential: "+n.id,t)}if(this.credentials.has(t.getId()))throw new p$1("Duplicated verifiableCredential: "+t.getId());this.credentials.set(t.getId(),t);}}if(this.services=new nS,t.service){if(!Array.isArray(t.service))throw new p$1("Invalid property: service, type error.");for(let r of t.service){let t,n=r;try{t=oS.Service.deserialize(n,oS.Service,e);}catch(t){throw new p$1("Invalid service: "+n.id,t)}if(this.services.has(t.getId()))throw new p$1("Duplicated service: "+t.getId());this.services.set(t.getId(),t);}}if(this.expires=this.getDate("expires",t.expires,{mandatory:!0,nullable:!1}),!t.proof)throw new p$1("Missing property: proof");if(this.proofs=new nS,Array.isArray(t.proof))for(let r of t.proof){let t=r,n=oS.Proof.deserialize(t,oS.Proof,e);if(null==n.getCreator().getDid())throw new p$1("Invalid proof creater: "+n.getCreator());if(this.proofs.has(n.getCreator().getDid()))throw new p$1("Aleady exist proof from "+n.getCreator().getDid());this.proofs.set(n.getCreator().getDid(),n);}else {let r=t.proof;this.isCustomizedDid()||r.creator||(r.creator=this.getDefaultPublicKeyId().toString());let n=oS.Proof.deserialize(r,oS.Proof,e);if(null==n.getCreator().getDid())throw new p$1("Invalid proof creater: "+n.getCreator());this.proofs.set(n.getCreator().getDid(),n);}}setMetadata(t){this.metadata=t,this.subject.setMetadata(t);}getMetadata(){return null==this.metadata&&(this.metadata=new lt$1(this.getSubject())),this.metadata}getStore(){return this.getMetadata().getStore()}isExpired(){return gr$1().isAfter(gr$1(this.expires))}isGenuine(t=null){let e=null==this.multisig?1:this.multisig.m();if(this.proofs.size!=e)return null!=t&&(t.failed(this,"{}: proof size not matched with multisig, {} expected, actual is {}",this.getSubject(),this.multisig.m(),this.proofs.size),t.failed(this,"{}: is not genuine",this.getSubject())),!1;let r=oS.clone(this,!1).serialize(!0),n=NS.sha256Digest(vt$1.Buffer.from(r,"utf-8"));if(this.isCustomizedDid()){for(let e of this.proofs.values()){if(e.getType()!==mr$1.DEFAULT_PUBLICKEY_TYPE)return null!=t&&(t.failed(this,"{}: key type '{}' for proof is not supported",this.getSubject(),e.getType()),t.failed(this,"{}: is not genuine",this.getSubject())),!1;let r=this.getControllerDocument(e.getCreator().getDid());if(null==r)return null!=t&&(t.failed(this,"{}: can not resolve the document for controller '{}' to verify the proof",this.getSubject(),e.getCreator().getDid()),t.failed(this,"{}: is not genuine",this.getSubject())),!1;if(!r.isGenuine(t))return null!=t&&(t.failed(this,"{}: controller '{}' is not genuine, failed to verify the proof",this.getSubject(),e.getCreator().getDid()),t.failed(this,"{}: is not genuine",this.getSubject())),!1;if(!e.getCreator().equals(r.getDefaultPublicKeyId()))return null!=t&&(t.failed(this,"{}: key '{}' for proof is not default key of '{}'",this.getSubject(),e.getCreator(),e.getCreator().getDid()),t.failed(this,"{}: is not genuine",this.getSubject())),!1;if(!r.verifyDigest(e.getCreator(),e.getSignature(),n))return null!=t&&(t.failed(this,"{}: proof '{}' is invalid, signature mismatch",this.getSubject(),e.getCreator()),t.failed(this,"{}: is not genuine",this.getSubject())),!1}return null!=t&&t.succeeded(this,"{}: is genuine",this.getSubject()),!0}{let e=this.getProof();if(e.getType()!==mr$1.DEFAULT_PUBLICKEY_TYPE)return null!=t&&(t.failed(this,"{}: key type '{}' for proof is not supported",this.getSubject(),e.getType()),t.failed(this,"{}: is not genuine",this.getSubject())),!1;if(!e.getCreator().equals(this.getDefaultPublicKeyId()))return null!=t&&(t.failed(this,"{}: key '{}' for proof is not default key",this.getSubject(),e.getCreator()),t.failed(this,"{}: is not genuine",this.getSubject())),!1;let r=this.verifyDigest(e.getCreator(),e.getSignature(),n);return null!=t&&(r?t.succeeded(this,"{}: is genuine",this.getSubject()):(t.failed(this,"{}: can not verify the signature",this.getSubject()),t.failed(this,"{}: is not genuine",this.getSubject()))),r}}isDeactivated(){return r(this,void 0,void 0,(function*(){if(this.getMetadata().isDeactivated())return !0;let t=yield Mx.getInstance().resolveDidBiography(this.getSubject());if(null==t)return !1;let e=t.getStatus()==Tx.DEACTIVATED;return e&&this.getMetadata().setDeactivated(e),e}))}isQualified(){return null!=this.proofs&&0!=this.proofs.size&&this.proofs.size==(null==this.multisig?1:this.multisig.m())}isValid(t=null){return r(this,void 0,void 0,(function*(){if(yield this.isDeactivated())return null!=t&&(t.failed(this,"{}: is deactivated",this.getSubject()),t.failed(this,"{}: is invalid",this.getSubject())),!1;if(this.isExpired())return null!=t&&(t.failed(this,"{}: is expired",this.getSubject()),t.failed(this,"{}: is invalid",this.getSubject())),!1;if(!this.isGenuine(t))return null!=t&&t.failed(this,"{}: is invalid",this.getSubject()),!1;if(this.hasController())for(let e of this.controllerDocs.values()){if(yield e.isDeactivated())return null!=t&&(t.failed(this,"{}: controller '{}' is deactivated",this.getSubject(),e.getSubject()),t.failed(this,"{}: is invalid",this.getSubject())),!1;if(!e.isGenuine(t))return null!=t&&(t.failed(this,"{}: controller '{}' is not genuine",this.getSubject(),e.getSubject()),t.failed(this,"{}: is invalid",this.getSubject())),!1}return null!=t&&t.succeeded(this,"{}: is valid",this.getSubject()),!0}))}copy(){let t=new oS(this.subject);t.context=null==this.context?null:Array.from(this.context),t.controllers=Array.from(this.controllers),t.controllerDocs=new nS(this.controllerDocs),null!=this.multisig&&(t.multisig=oS.MultiSignature.newFromMultiSignature(this.multisig)),t.effectiveController=this.effectiveController,t.publicKeys=new nS(this.publicKeys),t.authenticationKeys=new nS(this.authenticationKeys),t.authorizationKeys=new nS(this.authorizationKeys),t.defaultPublicKey=this.defaultPublicKey,t.credentials=new nS(this.credentials),t.services=new nS(this.services),t.expires=this.expires,t.proofs=new nS(this.proofs);let e=this.getMetadata().clone();return t.setMetadata(e),t}clone(){let t=new oS(this.subject);return t.context=this.context,t.controllers=this.controllers,t.controllerDocs=this.controllerDocs,t.effectiveController=this.effectiveController,t.multisig=this.multisig,t.publicKeys=this.publicKeys,t.authenticationKeys=this.authenticationKeys,t.authorizationKeys=this.authorizationKeys,t.defaultPublicKey=this.defaultPublicKey,t.credentials=this.credentials,t.services=this.services,t.expires=this.expires,t.proofs=this.proofs,t.metadata=this.getMetadata().clone(),t}signWithId(t,e,...r){let n;Ot$1(e&&null!=e,"Invalid storepass"),Ot$1(null!=r&&r.length>0,"Invalid input data"),this.checkAttachedStore(),n="string"==typeof t?this.canonicalId(t):t;let i=MS.encodeToBuffer(...r);return this.signDigest(n,e,i)}signWithStorePass(t,...e){return this.signWithId(null,t,...e)}signWithTicket(t,e){return r(this,void 0,void 0,(function*(){return Ot$1(null!=t,"Invalid ticket"),Ot$1(e&&null!=e,"Invalid storepass"),this.checkAttachedStore(),yield t.seal(this,e),t}))}signWithDocument(t,e){return r(this,void 0,void 0,(function*(){if(Ot$1(null!=t,"Invalid document"),Ot$1(e&&null!=e,"Invalid storepass"),this.checkAttachedStore(),!t.isCustomizedDid())throw new y$1(t.getSubject().toString());if(!t.hasController(this.getSubject()))throw new v$1;if(this.isCustomizedDid()){if(null==this.getEffectiveController())throw new b$1(this.getSubject().toString())}else if(!t.hasController(this.getSubject()))throw new v$1(this.getSubject().toString());if(t.proofs.has(this.getSubject()))throw new w$1(this.getSubject().toString());let r=oS.Builder.newFromDocument(t).edit(this);try{return yield r.seal(e)}catch(t){throw new h$1(t)}}))}signDigest(t,e,r){Ot$1(e&&null!=e,"Invalid storepass"),Ot$1(null!=r&&r.length>0,"Invalid digest"),this.checkAttachedStore(),"string"==typeof t&&(t=this.canonicalId(t));let n=null!=t?this.getPublicKey(t):this.getDefaultPublicKey();if(null==n)throw null!=t?new I$1(t.toString()):new b$1(this.getSubject().toString());return this.getMetadata().getStore().sign(n.getId(),e,r)}verify(t,e,...r){Ot$1(e&&null!=e,"Invalid signature"),Ot$1(null!=r&&r.length>0,"Invalid digest");let n=NS.sha256Digest(...r);return this.verifyDigest(t,e,n)}verifyDigest(t,e,r){Ot$1(e&&null!=e,"Invalid signature"),Ot$1(null!=r&&r.length>0,"Invalid digest"),"string"==typeof t&&(t=this.canonicalId(t));let n=null!=t?this.getPublicKey(t):this.getDefaultPublicKey();if(null==n)throw new I$1(null!=t?t.toString():"No explicit publicKey");let i=n.getPublicKeyBytes(),o=vt$1.Buffer.from((a=e,jS.decode(a)),"hex");var a;return NS.verify(i,o,r)}getKeyProvider(){let t=this;return new class{getPublicKey(e=null){return r(this,void 0,void 0,(function*(){let r;if(r=null==e?t.getDefaultPublicKeyId():t.canonicalId(e),!t.hasPublicKey(r))return null;let n=t.getPublicKey(r).getPublicKeyBytes();const i=new eS.Key("oct",n,{namedCurve:"P-256"});let o=yield i.export("jwk"),a=Object.assign({},o);return yield Ue$1(a,"ES256",!0)}))}getPrivateKey(e=null,n){return r(this,void 0,void 0,(function*(){let r;r=null==e?t.getDefaultPublicKeyId():t.canonicalId(e);let i=t.getMetadata().getStore();if(!i.containsPrivateKey(r))return null;let o=RD.deserialize(yield i.loadPrivateKey(r,n));const a=new eS.Key("oct",o.getPrivateKeyBytes(),{namedCurve:"P-256"});let s=yield a.export("jwk"),u=Object.assign({},s);return yield Ue$1(u,"ES256",!0)}))}}}jwtBuilder(){return new sr$1(this.getSubject(),this.getKeyProvider()).setIssuer(this.getSubject().toString())}jwtParserBuilder(){let t=lr$1.newWithKeyProvider(this.getKeyProvider());return t.requireIssuer(this.getSubject().toString()),t}newCustomized(t,e,r){return this.newCustomizedDidWithController(t,[],1,e,r)}newCustomizedDidWithController(t,e,n,i,o){return r(this,void 0,void 0,(function*(){Ot$1(t&&null!=t,"Invalid DID"),Ot$1(i&&null!=i,"Invalid storepass"),this.checkAttachedStore();let r=Nt$1.from(t),a=[];e&&e.length&&e.forEach((t=>{let e=Nt$1.from(t);e.equals(this.getSubject())||a.includes(t)||a.push(e);})),Ot$1(n>=0&&n<=a.length+1,"Invalid multisig"),oS.log.info("Creating new DID {} with controller {}...",r,this.getSubject());let s=null;if(!o&&(s=yield r.resolve(!0),s))throw new l$1(r.toString());oS.log.info("Creating new DID {} with controller {}...",r,this.getSubject());let u=oS.Builder.newFromDID(r,this.getStore(),this);for(let t of a)yield u.addController(t);u.setMultiSignature(n);try{return s=yield u.seal(i),yield this.getStore().storeDid(s),s}catch(t){throw new h$1(t)}}))}createTransferTicket(t,e,n){return r(this,void 0,void 0,(function*(){Ot$1(t&&null!=t,"Invalid to"),Ot$1(e&&null!=e,"Invalid storepass");let r=n?yield n.resolve(!0):this;if(n){if(this.checkIsPrimitive(),this.checkAttachedStore(),!r)throw new P$1("DID not found: "+n.toString());if(yield r.isDeactivated())throw new c$1(n.toString());if(!r.isCustomizedDid())throw new y$1(n.toString());if(!r.hasController(this.getSubject()))throw new v$1(this.getSubject().toString())}else this.checkIsCustomized(),this.checkAttachedStore(),this.checkHasEffectiveController();let i=yield lS.newForDIDDocument(r,t);return yield i.seal(this,e),i}))}publishWithTicket(t,e,n,i=null){return r(this,void 0,void 0,(function*(){Ot$1(yield t.isValid(),"Invalid ticket"),Ot$1(t.getSubject().equals(this.getSubject()),"Ticket mismatch with current DID"),Ot$1(n&&null!=n,"Invalid storepass"),this.checkIsCustomized(),Ot$1(this.proofs.has(t.getTo()),"Document not signed by: "+t.getTo()),this.checkAttachedStore();let r="string"==typeof e?this.canonicalId(e):e;if(null==r&&null==this.getDefaultPublicKeyId())throw new b$1(this.getSubject().toString());let o=this.getSubject(),a=yield o.resolve(!0);if(null==a)throw new P$1("DID not found: "+o.toString());if(yield a.isDeactivated())throw new c$1(o.toString());if(null==r){if(r=this.getDefaultPublicKeyId(),null==r)throw new I$1("No sign key.")}else if(null==this.getAuthenticationKey(r))throw new I$1(r.toString());yield Mx.getInstance().transferDid(this,t,r,n,i);}))}publish(t,e=null,n=!1,i=null){return r(this,void 0,void 0,(function*(){Ot$1(t&&null!=t,"Invalid storepass"),this.checkAttachedStore();let r="string"==typeof e?this.canonicalId(e):e;if(null==r&&null==this.getDefaultPublicKeyId())throw new b$1(this.getSubject().toString());if(oS.log.info("Publishing DID {}, force={}...",this.getSubject(),n),!this.isGenuine())throw oS.log.error("Publish failed because document is not genuine."),new B$1(this.getSubject().toString());if(yield this.isDeactivated())throw oS.log.error("Publish failed because DID is deactivated."),new c$1(this.getSubject().toString());if(this.isExpired()&&!n)throw oS.log.error("Publish failed because document is expired."),oS.log.info("You can publish the expired document using force mode."),new L(this.getSubject().toString());let o=null,a=null,s=yield this.getSubject().resolve(!0);if(null!=s){if(yield s.isDeactivated())throw this.getMetadata().setDeactivated(!0),oS.log.error("Publish failed because DID is deactivated."),new c$1(this.getSubject().toString());if(this.isCustomizedDid()){let t=null==this.getMultiSignature()?oS.MultiSignature.ONE_OF_ONE:this.getMultiSignature(),e=null==s.getMultiSignature()?oS.MultiSignature.ONE_OF_ONE:s.getMultiSignature();if(!t.equals(e))throw new tt$1;let r=s.getControllers(),n=this.getControllers();if(r.length!=n.length)throw new tt$1;r.sort(),n.sort();for(let t=0;t<r.length;t++)if(!r[t].equals(n[t]))throw new tt$1}if(a=s.getProof().getSignature(),!n){let t=this.getMetadata().getPreviousSignature(),e=this.getMetadata().getSignature();if(null==t&&null==e)throw oS.log.error("Trying to publish over an existing document, but signatures information is missing. DID SDK doesn't know how to handle it, use force mode to ignore checks."),new F$1(this.getSubject().toString());if(null==t||null==e){if((null!=t?t:e)!==a)throw oS.log.error("Current copy not based on the latest on-chain copy, signature mismatch."),new F$1(this.getSubject().toString())}else if(e!==a&&t!==a)throw oS.log.error("Current copy not based on the latest on-chain copy, signature mismatch."),new F$1(this.getSubject().toString())}o=s.getMetadata().getTransactionId();}if(null==r)r=this.getDefaultPublicKeyId();else if(null==this.getAuthenticationKey(r))throw new I$1(r.toString());o&&null!=o?(oS.log.info("Try to publish[update] {}...",this.getSubject()),yield Mx.getInstance().updateDid(this,o,r,t,i)):(oS.log.info("Try to publish[create] {}...",this.getSubject()),yield Mx.getInstance().createDid(this,r,t,i)),null!=a&&this.getMetadata().setPreviousSignature(a),this.getMetadata().setSignature(this.getProof().getSignature());}))}publishUntrusted(t,e,n=null){return r(this,void 0,void 0,(function*(){if(Ot$1(null!=e&&""!=e,"Invalid storepass"),this.checkIsPrimitive(),this.checkAttachedStore(),null==t&&null==this.getDefaultPublicKeyId())throw new b$1(this.getSubject().toString());if(oS.log.info("Publishing untrusted DID {}...",this.getSubject()),!this.isGenuine())throw oS.log.error("Publish failed because document is not genuine."),new B$1(this.getSubject().toString());if(yield this.isDeactivated())throw oS.log.error("Publish failed because DID is deactivated."),new c$1(this.getSubject().toString());if(this.isExpired())throw oS.log.error("Publish failed because document is expired."),new L(this.getSubject().toString());let r=null,i=null,o=yield Mx.getInstance().resolveUntrustedDid(this.getSubject(),!0);if(null!=o){if(yield o.isDeactivated())throw this.getMetadata().setDeactivated(!0),oS.log.error("Publish failed because DID is deactivated."),new c$1(this.getSubject().toString());i=o.getProof().getSignature(),r=o.getMetadata().getTransactionId();}if(null==t)t=this.getDefaultPublicKeyId();else if(null==this.getAuthenticationKey(t))throw new I$1(t.toString());r&&null!=r?(oS.log.info("Try to publish[update] {}...",this.getSubject()),yield Mx.getInstance().updateDid(this,r,t,e,n)):(oS.log.info("Try to publish[create] {}...",this.getSubject()),yield Mx.getInstance().createDid(this,t,e,n)),null!=i&&this.getMetadata().setPreviousSignature(i),this.getMetadata().setSignature(this.getProof().getSignature());}))}deactivate(t=null,e,n=null){return r(this,void 0,void 0,(function*(){if(Ot$1(e&&null!=e,"Invalid storepass"),this.checkAttachedStore(),null==t&&null==this.getDefaultPublicKeyId())throw new b$1(this.getSubject().toString());let r=yield this.getSubject().resolve(!0);if(null==r)throw new P$1("DID not found: "+this.getSubject().toString());if(yield r.isDeactivated())throw new c$1(this.getSubject().toString());if(r.getMetadata().attachStore(this.getStore()),r.effectiveController=this.effectiveController,null==t)t=r.getDefaultPublicKeyId();else if(r.isCustomizedDid()){let e=this.getControllerDocument(t.getDid());if(null==e||!t.equals(e.getDefaultPublicKeyId()))throw new I$1(t.toString())}else if(!t.equals(r.getDefaultPublicKeyId())&&null==r.getAuthorizationKey(t))throw new I$1(t.toString());yield Mx.getInstance().deactivateDid(r,t,e,n);}))}deactivateTargetDID(t,e=null,n,i=null){return r(this,void 0,void 0,(function*(){if(Ot$1(null!=t,"Invalid target DID"),Ot$1(n&&null!=n,"Invalid storepass"),this.checkAttachedStore(),null==e&&null==this.getDefaultPublicKeyId())throw new b$1(this.getSubject().toString());let r=yield t.resolve(!0);if(null==r)throw new P$1("DID not found: "+t.toString());if(yield r.isDeactivated())throw new c$1(t.toString());if(r.getMetadata().attachStore(this.getStore()),r.isCustomizedDid()){if(!r.hasController(this.getSubject()))throw new v$1(this.getSubject().toString());if(null==e)e=this.getDefaultPublicKeyId();else if(!e.equals(this.getDefaultPublicKeyId()))throw new I$1(e.toString());yield Mx.getInstance().deactivateDid(r,e,n,i);}else {if(0==r.getAuthorizationKeyCount())throw new I$1("No authorization key from: "+t);let o=null;if(null==e)o=this.getAuthenticationKeys();else {let t=this.getAuthenticationKey(e);if(null==t)throw new I$1(e.toString());o=[],o.push(t);}let a=null,s=null;t:for(let t of o)for(let e of r.getAuthorizationKeys())if(e.getController().equals(this.getSubject())&&e.getPublicKeyBase58()===t.getPublicKeyBase58()){a=t.getId(),s=e.getId();break t}if(null==a||null==s)throw new I$1("No matched authorization key.");yield Mx.getInstance().deactivateTargetDid(r,s,this,a,n,i);}}))}static parseAsync(t){return r(this,void 0,void 0,(function*(){try{return yield at$1.deserializeAsync(t,oS)}catch(t){throw t instanceof p$1?t:new p$1(t)}}))}static _parseOnly(t){Ot$1(t&&""!==t,"Invalid JSON content");try{let e;e="string"==typeof t?JSON.parse(t):t;let r=new oS;return r.fromJSONOnly(e),r}catch(t){throw t instanceof p$1?t:new p$1(t)}}}oS.log=new e("DIDDocument"),oS.W3C_DID_CONTEXT="https://www.w3.org/ns/did/v1",oS.ELASTOS_DID_CONTEXT="https://ns.elastos.org/did/v1",oS.W3ID_SECURITY_CONTEXT="https://w3id.org/security/v1",function(t){class n extends at$1{constructor(t=null,e=null,r=null,n=mr$1.DEFAULT_PUBLICKEY_TYPE){super(),this.id=t,this.type=null!=n?n:mr$1.DEFAULT_PUBLICKEY_TYPE,this.controller=e,this.publicKeyBase58=r;}getId(){return this.id}getType(){return this.type}getController(){return this.controller}getPublicKeyBase58(){return this.publicKeyBase58}getPublicKeyBytes(){return OD.decode(this.publicKeyBase58)}equals(t){return this==t||this.getId().equals(t.getId())&&this.getType()===t.getType()&&this.getController().equals(t.getController())&&this.getPublicKeyBase58()===t.getPublicKeyBase58()}compareTo(t){let e=this.id.compareTo(t.id);return 0!=e?e:(e=this.publicKeyBase58.localeCompare(t.publicKeyBase58),0!=e?e:(e=this.type.localeCompare(t.type),0!=e?e:this.controller.compareTo(t.controller)))}toJSON(t=null){let e=t?new Nt$1(t):null,r={};return r.id=this.id.toString(e),e&&this.type===mr$1.DEFAULT_PUBLICKEY_TYPE||(r.type=this.type),e&&this.controller.equals(e)||(r.controller=this.controller.toString()),r.publicKeyBase58=this.publicKeyBase58,r}fromJSON(t,e=null){this.id=this.getDidUrl("publicKey.id",t.id,{mandatory:!0,nullable:!1,context:e}),this.type=this.getString("publicKey.type",t.type,{mandatory:!1,defaultValue:mr$1.DEFAULT_PUBLICKEY_TYPE}),this.controller=this.getDid("publicKey.controller",t.controller,{mandatory:!1,nullable:!1,defaultValue:e}),this.publicKeyBase58=this.getString("publicKey.publicKeyBase58",t.publicKeyBase58,{mandatory:!0,nullable:!1});}}t.PublicKey=n;t.Service=class extends at$1{constructor(t=null,e=null,r=null,n){super(),this.id=t,this.type=e,this.serviceEndpoint=r,this.properties=n?ut$1(n):{},Object.keys(this.properties).length>0&&(delete this.properties.id,delete this.properties.type,delete this.properties.serviceEndpoint);}getId(){return this.id}getType(){return this.type}getServiceEndpoint(){return this.serviceEndpoint}getProperties(){return Object.keys(this.properties).length>0?this.properties:null}equals(t){return this==t||this.getId().equals(t.getId())&&this.getType()===t.getType()&&this.getServiceEndpoint()===t.getServiceEndpoint()}compareTo(t){let e=this.id.compareTo(t.id);return 0!=e?e:(e=this.type.localeCompare(t.type),0!=e?e:this.serviceEndpoint.localeCompare(t.serviceEndpoint))}toJSON(t=null){let e=t?new Nt$1(t):null,r={};return r.id=this.id.toString(e),r.type=this.type,r.serviceEndpoint=this.serviceEndpoint,Object.assign(Object.assign({},r),this.properties)}fromJSON(t,e=null){this.id=this.getDidUrl("service.id",t.id,{mandatory:!0,nullable:!1,context:e}),this.type=this.getString("service.type",t.type,{mandatory:!0,nullable:!1}),this.serviceEndpoint=this.getString("service.serviceEndpoint",t.serviceEndpoint,{mandatory:!0,nullable:!1}),Object.keys(t).length>3&&(this.properties=ut$1(t),delete this.properties.id,delete this.properties.type,delete this.properties.serviceEndpoint);}};class o extends at$1{constructor(t=null,e=null,r=new Date,n=mr$1.DEFAULT_PUBLICKEY_TYPE){super(),this.type=n||mr$1.DEFAULT_PUBLICKEY_TYPE,this.created=void 0===r?new Date:null!==r?new Date(r):null,this.created&&this.created.setMilliseconds(0),this.creator=t,this.signature=e;}equals(t){return 0==this.compareTo(t)}getType(){return this.type}getCreated(){return this.created}getCreator(){return this.creator}getSignature(){return this.signature}compareTo(t){let e=this.created.getTime()-t.created.getTime();return 0==e&&(e=this.creator.compareTo(t.creator)),e}toJSON(t=null){let e=t?new Nt$1(t):null,r={};return e&&this.type===mr$1.DEFAULT_PUBLICKEY_TYPE||(r.type=this.type),this.created&&(r.created=this.dateToString(this.created)),r.creator=this.creator.toString(e),r.signatureValue=this.signature,r}fromJSON(t,e=null){this.type=this.getString("proof.type",t.type,{mandatory:!1,defaultValue:mr$1.DEFAULT_PUBLICKEY_TYPE}),this.created=this.getDate("proof.created",t.created,{mandatory:!1}),this.creator=this.getDidUrl("proof.creator",t.creator,{mandatory:!0,nullable:!1,context:e}),this.signature=this.getString("proof.signatureValue",t.signatureValue,{mandatory:!0,nullable:!1});}}t.Proof=o;class a{constructor(t,e){this.apply(t,e);}static fromString(t){if(!t||null==t)throw new i("Invalid multisig spec");let e=t.split(":");if(null==e||2!=e.length)throw new i("Invalid multisig spec");return new a(Number.parseInt(e[0]),Number.parseInt(e[1]))}static newFromMultiSignature(t){return new a(t.m(),t.n())}apply(t,e){Ot$1(e>0,"Invalid multisig spec: n should > 0"),Ot$1(t>0&&t<=e,"Invalid multisig spec: m should > 0 and <= n"),this.mv=t,this.nv=e;}m(){return this.mv}n(){return this.nv}equals(t){return this==t||this.mv==t.mv&&this.nv==t.nv}toString(){return this.mv.toString()+":"+this.nv.toString()}}a.ONE_OF_ONE=new a(1,1),t.MultiSignature=a;class s{constructor(){}static newFromDID(e,r,n){let i=new s;if(i.document=new t(e),Bt$1.isEnabledJsonLdContext()&&i.addDefaultContexts(),i.sourceDocument=i.document,void 0!==n)i.document.controllers=[],i.document.controllerDocs=new nS,i.document.controllers.push(n.getSubject()),i.document.controllerDocs.set(n.getSubject(),n),i.document.effectiveController=n.getSubject(),i.document.setMetadata(new lt$1(e,r)),i.controllerDoc=n;else {let t=new lt$1(e,r);i.document.setMetadata(t);}return i}static newFromDocument(t,e){let r=new s;return r.sourceDocument=t,r.document=t.copy(),void 0!==e&&(r.document.effectiveController=e.getSubject(),r.controllerDoc=e),r}edit(t){if(void 0!==t){if(this.document.checkIsCustomized(),!this.document.getMetadata().attachedStore()&&!t.getMetadata().attachedStore())throw new g$1;if(t.getMetadata().attachedStore()?this.document.getMetadata().attachStore(t.getMetadata().getStore()):t.getMetadata().attachStore(this.document.getMetadata().getStore()),!this.sourceDocument.hasController(t.getSubject()))throw new v$1(t.getSubject().toString());return this.document.effectiveController=t.getSubject(),this.controllerDoc=t,this}if(this.document.isCustomizedDid()){if(null==this.sourceDocument.getEffectiveController())throw new b$1("Unable to edit a customized DIDDocument without effective controller");return this.edit(this.sourceDocument.getEffectiveControllerDocument())}return this.document.checkAttachedStore(),this}canonicalId(t){return "string"==typeof t?jt$1.from(t,this.getSubject()):null==t||null!=t.getDid()?t:jt$1.from(t,this.getSubject())}invalidateProof(){null!=this.document.proofs&&0!=this.document.proofs.size&&this.document.proofs.clear();}checkNotSealed(){if(null==this.document)throw new R$1}checkIsCustomized(){if(!this.document.isCustomizedDid())throw new y$1(this.document.getSubject().toString())}addDefaultContexts(){return Bt$1.isEnabledJsonLdContext()?(null==this.document.context&&(this.document.context=[]),this.document.context.includes(t.W3C_DID_CONTEXT)||this.document.context.push(t.W3C_DID_CONTEXT),this.document.context.includes(t.ELASTOS_DID_CONTEXT)||this.document.context.push(t.ELASTOS_DID_CONTEXT),this.document.context.includes(t.W3ID_SECURITY_CONTEXT)||this.document.context.push(t.W3ID_SECURITY_CONTEXT)):iS.warn("JSON-LD context support not enabled"),this}addContext(t){return Bt$1.isEnabledJsonLdContext()?(null==this.document.context&&(this.document.context=[]),this.document.context.includes(t)||this.document.context.push(t)):iS.warn("JSON-LD context support not enabled"),this}getSubject(){return this.checkNotSealed(),this.document.getSubject()}addController(t){return r(this,void 0,void 0,(function*(){Ot$1(null!=t,"Invalid controller"),"string"==typeof t&&(t=Nt$1.from(t)),this.checkNotSealed(),this.checkIsCustomized(),Ot$1(!this.document.controllers.includes(t),"Controller already exists");let e=yield t.resolve(!0);if(null==e)throw new P$1("DID not found: "+t.toString());if(yield e.isDeactivated())throw new c$1(t.toString());if(e.isExpired())throw new L(t.toString());if(!e.isGenuine())throw new B$1(t.toString());if(e.isCustomizedDid())throw new m$1(t.toString());return this.document.controllers.push(t),this.document.controllerDocs.set(t,e),this.document.multisig=null,this.invalidateProof(),this}))}removeController(t){if(Ot$1(null!=t,"Invalid controller"),"string"==typeof t&&(t=Nt$1.from(t)),this.checkNotSealed(),this.checkIsCustomized(),t.equals(this.controllerDoc.getSubject()))throw new q$1(t.toString());let e=this.document.controllers.findIndex((e=>e.equals(t)));return -1!=e&&(this.document.controllers.splice(e,1),this.document.controllerDocs.delete(t),this.document.multisig=null,this.invalidateProof()),this}setMultiSignature(t){this.checkNotSealed(),this.checkIsCustomized(),Ot$1(t>=1,"Invalid signature count");let e=this.document.controllers.length;Ot$1(t<=e,"Signature count exceeds the upper limit");let r=null;return e>1&&(r=new a(t,e)),null==this.document.multisig&&null==r||null!=this.document.multisig&&null!=r&&this.document.multisig.equals(r)||(this.document.multisig=new a(t,e),this.invalidateProof()),this}addPublicKey(t){if(null==this.document.publicKeys)this.document.publicKeys=new nS,this.document.authenticationKeys=new nS,this.document.authorizationKeys=new nS;else for(let e of this.document.publicKeys.values()){if(e.getId().equals(t.getId()))throw new U$1("PublicKey id '"+t.getId()+"' already exist.");if(e.getPublicKeyBase58()===t.getPublicKeyBase58())throw new U$1("PublicKey '"+t.getPublicKeyBase58()+"' already exist.")}if(this.document.publicKeys.set(t.getId(),t),null==this.document.defaultPublicKey){RD.toAddress(t.getPublicKeyBytes())===this.getSubject().getMethodSpecificId()&&(this.document.defaultPublicKey=t,this.document.authenticationKeys.set(t.getId(),t));}this.invalidateProof();}createAndAddPublicKey(t,e,r,i="ECDSAsecp256r1"){return this.checkNotSealed(),"string"==typeof t&&(t=this.canonicalId(t)),void 0===r?r=null:"string"==typeof r&&(r=Nt$1.from(r)),Ot$1(null!=t&&(null==t.getDid()||t.getDid().equals(this.getSubject())),"Invalid publicKey id"),Ot$1(e&&null!=e,"Invalid publicKey"),null==r&&(r=this.getSubject()),this.addPublicKey(new n(this.canonicalId(t),r,e,i)),this}removePublicKey(t,e=!1){if(this.checkNotSealed(),Ot$1(null!=t,"Invalid publicKey id"),null==this.document.publicKeys||0==this.document.publicKeys.size)throw new K$1(t.toString());t=this.canonicalId(t);let r=this.document.publicKeys.get(t);if(null==r)throw new K$1(t.toString());if(null!=this.document.defaultPublicKey&&this.document.defaultPublicKey.getId().equals(t))throw new H$1(t.toString()+"is default key");if(!e&&(this.document.authenticationKeys.has(r.getId())||this.document.authorizationKeys.has(r.getId())))throw new H$1(t.toString());if(this.document.publicKeys.delete(t)){this.document.authenticationKeys.delete(t),this.document.authorizationKeys.delete(t);try{this.document.getMetadata().attachedStore()&&this.document.getMetadata().getStore().deletePrivateKey(t);}catch(t){s.log.error("INTERNAL - Remove private key",t);}this.invalidateProof();}return this}addExistingAuthenticationKey(t){if(Ot$1(null!=t,"Invalid publicKey id"),null==this.document.publicKeys||0==this.document.publicKeys.size)throw new K$1(t.toString());t=this.canonicalId(t);let e=this.document.publicKeys.get(t);if(null==e)throw new K$1(t.toString());if(!e.getController().equals(this.getSubject()))throw new z$1(t.toString());return this.document.authenticationKeys.has(t)||(this.document.authenticationKeys.set(t,e),this.invalidateProof()),this}addAuthenticationKey(t,e){this.checkNotSealed(),Ot$1(null!=t,"Invalid publicKey id"),"string"==typeof t&&(t=this.canonicalId(t)),Ot$1(null!=t&&(null==t.getDid()||t.getDid().equals(this.getSubject())),"Invalid publicKey id"),Ot$1(e&&null!=e,"Invalid publicKey");let r=new n(this.canonicalId(t),this.getSubject(),e);return this.addPublicKey(r),this.document.authenticationKeys.set(t,r),this}removeAuthenticationKey(t){if(this.checkNotSealed(),Ot$1(null!=t,"Invalid publicKey id"),null==this.document.publicKeys||0==this.document.publicKeys.size)throw new K$1(t.toString());t=this.canonicalId(t);let e=this.document.publicKeys.get(t);if(null==e||!this.document.authenticationKeys.has(e.getId()))throw new K$1(t.toString());if(null!=this.document.defaultPublicKey&&this.document.defaultPublicKey.getId().equals(t))throw new H$1("Cannot remove the default PublicKey from authentication.");if(!this.document.authenticationKeys.has(t))throw new K$1(t.toString());return this.document.authenticationKeys.delete(t),this.invalidateProof(),this}addExistingAuthorizationKey(t){if(this.checkNotSealed(),Ot$1(null!=t,"Invalid publicKey id"),this.document.isCustomizedDid())throw new m$1(this.getSubject().toString());if(null==this.document.publicKeys||0==this.document.publicKeys.size)throw new K$1(t.toString());t=this.canonicalId(t);let e=this.document.publicKeys.get(t);if(null==e)throw new K$1(t.toString());if(e.getController().equals(this.getSubject()))throw new z$1(t.toString());return this.document.authorizationKeys.has(t)||(this.document.authorizationKeys.set(t,e),this.invalidateProof()),this}addAuthorizationKey(t,e,r){if(this.checkNotSealed(),Ot$1(null!=t,"Invalid publicKey id"),"string"==typeof t&&(t=this.canonicalId(t)),"string"==typeof e&&(e=Nt$1.from(e)),Ot$1(null==t.getDid()||t.getDid().equals(this.getSubject()),"Invalid publicKey id"),Ot$1(r&&null!=r,"Invalid publicKey"),this.document.isCustomizedDid())throw new m$1(this.getSubject().toString());if(e.equals(this.getSubject()))throw new z$1("Key's controller is self.");let i=new n(this.canonicalId(t),e,r);return this.addPublicKey(i),this.document.authorizationKeys.set(t,i),this}authorizeDid(t,e,i){return r(this,void 0,void 0,(function*(){if(this.checkNotSealed(),Ot$1(null!=t&&(null==t.getDid()||t.getDid().equals(this.getSubject())),"Invalid publicKey id"),Ot$1(null!=e&&!e.equals(this.getSubject()),"Invalid controller"),this.document.isCustomizedDid())throw new m$1(this.getSubject().toString());let r=yield e.resolve();if(null==r)throw new P$1("DID not found: "+t.toString());if(yield r.isDeactivated())throw new c$1(e.toString());if(r.isExpired())throw new L(e.toString());if(!r.isGenuine())throw new B$1(e.toString());if(r.isCustomizedDid())throw new m$1(e.toString());null==i&&(i=r.getDefaultPublicKeyId());let o=r.getAuthenticationKey(i);if(null==o)throw new K$1(i.toString());let a=new n(this.canonicalId(t),e,o.getPublicKeyBase58(),o.getType());return this.addPublicKey(a),this.document.authorizationKeys.set(t,a),this}))}removeAuthorizationKey(t){this.checkNotSealed(),Ot$1(null!=t,"Invalid publicKey id");let e="string"==typeof t?this.canonicalId(t):t;if(null==this.document.publicKeys||0==this.document.publicKeys.size)throw new K$1(e.toString());if(e=this.canonicalId(e),null==this.document.publicKeys.get(e))throw new K$1(e.toString());if(!this.document.authorizationKeys.has(e))throw new K$1(e.toString());return this.document.authorizationKeys.delete(e),this.invalidateProof(),this}addCredential(t){return r(this,void 0,void 0,(function*(){if(this.checkNotSealed(),Ot$1(null!=t,"Invalid credential"),!t.getSubject().getId().equals(this.getSubject()))throw new z$1(t.getSubject().getId().toString());if(!(t.isSelfProclaimed()?yield (()=>r(this,void 0,void 0,(function*(){return new Promise(((e,r)=>{e(t.isGenuineInternal(this.document));}))})))():yield t.isGenuine()))throw new S$1(t.getId().toString());return this.addCredentialUncheck(t)}))}addCredentialUncheck(t){if(null==this.document.credentials)this.document.credentials=new nS;else if(this.document.credentials.has(t.getId()))throw new U$1(t.getId().toString());return this.document.credentials.set(t.getId(),t),this.invalidateProof(),this}createAndAddCredential(t,e,n=null,i=[],o=null){return r(this,void 0,void 0,(function*(){this.checkNotSealed(),Ot$1(null!=e,"Invalid publicKey id"),"string"==typeof e&&(e=this.canonicalId(e)),Ot$1(null!=e,"Invalid publicKey id"),Ot$1(null==e.getDid()||e.getDid().equals(this.getSubject()),"Invalid publicKey id"),Ot$1(t&&null!=t,"Invalid storepass");let r=new OS(this.document).issueFor(this.document.getSubject());null==o&&(o=this.document.getExpires());try{let a=yield r.id(this.canonicalId(e)).types(...i).properties(n).expirationDate(o).seal(t);return this.addCredentialUncheck(a)}catch(t){throw new h$1(t)}}))}removeCredential(t){if(this.checkNotSealed(),Ot$1(null!=t,"Invalid credential id"),null==this.document.credentials||0==this.document.credentials.size)throw new K$1(t.toString());if(!this.document.credentials.delete(this.canonicalId(t)))throw new K$1(t.toString());return this.invalidateProof(),this}addService(e,r,n,i){this.checkNotSealed(),Ot$1(null!=e,"Invalid publicKey id"),"string"==typeof e&&(e=this.canonicalId(e)),Ot$1(null!=e&&(null==e.getDid()||e.getDid().equals(this.getSubject())),"Invalid publicKey id"),Ot$1(r&&null!=r,"Invalid type"),Ot$1(n&&null!=n,"Invalid endpoint");let o=new t.Service(this.canonicalId(e),r,n,i);if(null==this.document.services)this.document.services=new nS;else if(this.document.services.has(o.getId()))throw new U$1("Service '"+o.getId()+"' already exist.");return this.document.services.set(o.getId(),o),this.invalidateProof(),this}removeService(t){if(this.checkNotSealed(),Ot$1(null!=t,"Invalid credential id"),"string"==typeof t&&(t=this.canonicalId(t)),null==this.document.services||0==this.document.services.size)throw new K$1(t.toString());if(!this.document.services.delete(this.canonicalId(t)))throw new K$1(t.toString());return this.invalidateProof(),this}getMaxExpires(){return gr$1().add(mr$1.MAX_VALID_YEARS,"years").toDate()}setDefaultExpires(){return this.checkNotSealed(),this.document.expires=this.getMaxExpires(),this.document.expires&&this.document.expires.setMilliseconds(0),this.invalidateProof(),this}setExpires(t){if(this.checkNotSealed(),Ot$1(null!=t,"Invalid expires"),t.setMilliseconds(0),gr$1(t).isAfter(this.getMaxExpires()))throw new i("Invalid expires, out of range.");return this.document.expires=t,this.invalidateProof(),this}removeProof(t){if(this.checkNotSealed(),Ot$1(null!=t,"Invalid controller"),null==this.document.proofs||0==this.document.proofs.size)return this;if(null==this.document.proofs.delete(t))throw new K$1("No proof signed by: "+t);return this}sanitize(){if(this.document.isCustomizedDid()){if(null==this.document.controllers||0==this.document.controllers.length)throw new p$1("Missing controllers");if(this.document.controllers.length>1){if(null==this.document.multisig)throw new p$1("Missing multisig");if(this.document.multisig.n()!=this.document.controllers.length)throw new p$1("Invalid multisig, not matched with controllers")}else if(null!=this.document.multisig)throw new p$1("Invalid multisig")}null!=this.document.context&&0!=this.document.context.length||(this.document.context=[]);let t=null==this.document.multisig?1:this.document.multisig.m();if(null!=this.document.proofs&&this.document.proofs.size==t)throw new R$1(this.getSubject().toString());null==this.document.controllers||0==this.document.controllers.length?(this.document.controllers=[],this.document.controllerDocs=new nS):rS.sort(this.document.controllers),null!=this.document.publicKeys&&0!=this.document.publicKeys.size||(this.document.publicKeys=new nS,this.document.authenticationKeys=new nS,this.document.authorizationKeys=new nS),null==this.document.credentials&&(this.document.credentials=new nS),null==this.document.services&&(this.document.services=new nS),null!=this.document.proofs&&0!=this.document.proofs.size||null==this.document.getExpires()&&this.setDefaultExpires(),null==this.document.proofs&&(this.document.proofs=new nS);}seal(t){return r(this,void 0,void 0,(function*(){this.checkNotSealed(),Ot$1(t&&null!=t,"Invalid storepass"),this.sanitize();let e=this.document.isCustomizedDid()?this.controllerDoc:this.document,r=e.getDefaultPublicKeyId();if(this.document.proofs.has(e.getSubject()))throw new w$1(e.getSubject().toString());let n=this.document.proofs;this.document.proofs=null;let i=this.document.serialize(!0);this.document.proofs=n;let a=yield this.document.signWithId(r,t,vt$1.Buffer.from(i)),s=new o(r,a);this.document.proofs.set(s.getCreator().getDid(),s);let u=this.document;return this.document=null,u}))}}s.log=new e("DIDDocumentBuilder"),t.Builder=s;}(oS||(oS={}));const aS=new e("RootIdentity");class sS{constructor(){}static newFromMnemonic(t,e){let r=new sS;return r.mnemonic=t,null==e&&(e=""),r.rootPrivateKey=RD.newWithMnemonic(t,e),r.preDerivedPublicKey=r.rootPrivateKey.deriveWithPath(RD.PRE_DERIVED_PUBLICKEY_PATH),r.index=0,r}static newFromPrivateKey(t){let e=new sS;return e.rootPrivateKey=t,e.preDerivedPublicKey=t.deriveWithPath(RD.PRE_DERIVED_PUBLICKEY_PATH),e.index=0,e}static newFromPreDerivedPublicKey(t,e){let r=new sS;return r.preDerivedPublicKey=t,r.index=e,r}static getIdFromMnemonic(t,e){return this.newFromMnemonic(t,e).getId()}static createFromMnemonic(t,e,r,n,o=!1){Ot$1(null!=t&&""!==t,"Invalid mnemonic"),Ot$1(null!=r,"Invalid DID store"),Ot$1(null!=n&&""!==n,"Invalid storepass");try{Ot$1(ix.checkIsValid(t),"Invalid mnemonic.");}catch(t){throw new i(t)}null==e&&(e="");let a=sS.newFromMnemonic(t,e);if(r.containsRootIdentity(a.getId())&&!o)throw new f$1(a.getId());return a.setMetadata(new sS.Metadata(a.getId(),r)),r.storeRootIdentity(a,n),a.wipe(),a}static createFromPrivateKey(t,e,r,n=!1){Ot$1(null!=t&&""!==t,"Invalid extended private key"),Ot$1(null!=e,"Invalid DID store"),Ot$1(null!=r&&""!==r,"Invalid storepass");let i=RD.deserializeBase58(t),o=sS.newFromPrivateKey(i);if(e.containsRootIdentity(o.getId())&&!n)throw new f$1(o.getId());return o.setMetadata(new sS.Metadata(o.getId(),e)),e.storeRootIdentity(o,r),o.wipe(),o}static createFromPreDerivedPublicKey(t,e){let r=null==t?null:RD.deserializeBase58(t);return sS.newFromPreDerivedPublicKey(r,e)}wipe(){this.rootPrivateKey.wipe(),this.mnemonic=null,this.rootPrivateKey=null;}getStore(){return this.metadata.getStore()}setMetadata(t){this.metadata=t;}static getId(t){return Ot$1(null!=t&&t.length>0,"Invalid key bytes"),kv.createHash("md5").update(t.toString("hex"),"hex").digest("hex")}getId(){return null==this.id&&(this.id=sS.getId(this.preDerivedPublicKey.serializePublicKey())),this.id}getAlias(){return this.metadata.getAlias()}setAlias(t){this.metadata.setAlias(t);}setAsDefault(){this.getStore().setDefaultRootIdentity(this);}getDefaultDid(){let t=this.metadata.getDefaultDid();return null==t?this.getDid(0):t}setDefaultDid(t){t instanceof Nt$1?this.metadata.setDefaultDid(t):this.metadata.setDefaultDid(Nt$1.from(t));}setDefaultDidByIndex(t){Ot$1(t>=0,"Invalid index"),this.metadata.setDefaultDid(this.getDid(t));}getMnemonic(){return this.mnemonic}getRootPrivateKey(){return this.rootPrivateKey}getPreDerivedPublicKey(){return this.preDerivedPublicKey}getIndex(){return this.index}setIndex(t){this.index=t,this.getStore().storeRootIdentity(this);}incrementIndex(){let t=++this.index;return this.getStore().storeRootIdentity(this),t}getDid(t){Ot$1(t>=0,"Invalid index");let e=this.preDerivedPublicKey.deriveWithIndex(0).deriveWithIndex(t);return new Nt$1(Nt$1.METHOD,e.getAddress())}getDidFromIdentifier(t,e=0){let r=this.preDerivedPublicKey.deriveWithPath(this.mapToDerivePath(t,e,!0));return new Nt$1(Nt$1.METHOD,r.getAddress())}static lazyCreateDidPrivateKey(t,e,n){return r(this,void 0,void 0,(function*(){let r=yield e.loadDid(t.getDid());if(null==r)throw aS.error("INTERNAL - Missing document for DID: {}",t.getDid()),new a$1("Missing document for DID: "+t.getDid());let i=r.getMetadata().getRootIdentityId();if(null==i)return null;let o=e.derive(i,RD.DERIVE_PATH_PREFIX+r.getMetadata().getIndex(),n),s=r.getPublicKey(t);if(null==s)throw aS.error("INTERNAL - Invalid public key: {}",t),new a$1("Invalid public key: "+t);if(o.getPublicKeyBase58()!==s.getPublicKeyBase58())throw aS.error("INTERNAL - Invalid DID metadata: {}",t.getDid()),new a$1("Invalid DID metadata: "+t.getDid());let u=o.serialize();return e.storePrivateKey(t,u,n),u}))}mapToDerivePath(t,e,r=!1){let n,i=MS.encodeToBuffer(Buffer.from(t,"utf-8")),o=RS.wrap(i);for(n=r?"m/":"";o.hasRemaining();){let t=o.readInt();n=n.concat((2147483647&t).toString()).concat("/");}return n=n.concat((2147483647&e).toString()),n}newDid(t,e,n=!1){return r(this,void 0,void 0,(function*(){Ot$1(null!=t&&""!==t,"Invalid storepass");let r=!1;void 0===e&&(e=this.getIndex(),r=!0),Ot$1(e>=0,"Invalid index");let i=this.getDid(e),o=yield this.getStore().loadDid(i);if(null!=o){if(yield o.isDeactivated())throw new c$1(i.toString());if(!n)throw new l$1("DID already exists in the store.")}try{if(o=yield i.resolve(),null!=o){if(yield o.isDeactivated())throw new c$1(i.toString());if(!n)throw new l$1("DID already published.")}}catch(t){if(t instanceof s$1&&!n)throw t}aS.debug("Creating new DID {} at index {}...",i.toString(),e);let a=this.getStore().derive(this.getId(),RD.DERIVE_PATH_PREFIX+e,t);try{let n=jt$1.from("#primary",i);this.getStore().storePrivateKey(n,a.serialize(),t);let s=oS.Builder.newFromDID(i,this.getStore());return s.addAuthenticationKey(n,a.getPublicKeyBase58()),o=yield s.seal(t),o.getMetadata().setRootIdentityId(this.getId()),o.getMetadata().setIndex(e),o.getMetadata().attachStore(this.getStore()),yield this.getStore().storeDid(o),r&&this.incrementIndex(),o}catch(t){throw new h$1(t)}finally{a.wipe();}}))}newDidFromIdentifier(t,e,n=0,i=!1){return r(this,void 0,void 0,(function*(){Ot$1(null!=t&&""!==t,"Invalid storepass"),Ot$1(null!=e&&""!==e,"Invalid identifier");let r=RD.PRE_DERIVED_PUBLICKEY_PATH+"/"+this.mapToDerivePath(e,n),o=this.getStore().derive(this.getId(),r,t),a=new Nt$1(Nt$1.METHOD,o.getAddress()),u=yield this.getStore().loadDid(a);if(null!=u){if(yield u.isDeactivated())throw new c$1(a.toString());if(!i)throw new l$1("DID already exists in the store.")}try{if(u=yield a.resolve(),null!=u){if(yield u.isDeactivated())throw new c$1(a.toString());if(!i)throw new l$1("DID already published.")}}catch(t){if(t instanceof s$1&&!i)throw t}aS.debug("Creating new DID {} with iden {}...",a.toString(),n);try{let r=jt$1.from("#primary",a);this.getStore().storePrivateKey(r,o.serialize(),t);let i=oS.Builder.newFromDID(a,this.getStore());return i.addAuthenticationKey(r,o.getPublicKeyBase58()),u=yield i.seal(t),u.getMetadata().setRootIdentityId(this.getId()),u.getMetadata().setExtra("application",e),u.getMetadata().setExtra("securityCode",n),u.getMetadata().attachStore(this.getStore()),yield this.getStore().storeDid(u),u}catch(t){throw new h$1(t)}finally{o.wipe();}}))}hasMnemonic(){return this.getStore().containsRootIdentityMnemonic(this.getId())}exportMnemonic(t){return Ot$1(null!=t&&""!==t,"Invalid storepass"),this.getStore().exportRootIdentityMnemonic(this.getId(),t)}synchronizeIndex(t,e=null){return r(this,void 0,void 0,(function*(){Ot$1(t>=0,"Invalid index"),null==e&&(e=lx.getInstance());let r=this.getDid(t);aS.info("Synchronize {}/{}...",r.toString(),t);let n=yield r.resolve(!0);if(null==n)return aS.info("Synchronize {}/{}...not exists",r.toString(),t),!1;aS.debug("Synchronize {}/{}..exists, got the on-chain copy.",r.toString(),t);let i=n,o=yield this.getStore().loadDid(r);if(null!=o)if(o.getMetadata().detachStore(),o.getSignature()===n.getSignature()||null!=o.getMetadata().getSignature()&&o.getProof().getSignature()===o.getMetadata().getSignature())i.getMetadata().merge(o.getMetadata());else {if(aS.debug("{} on-chain copy conflict with local copy.",r.toString()),i=e.merge(n,o),null==i||!i.getSubject().equals(r))throw aS.error("Conflict handle merge the DIDDocument error."),new a$1("deal with local modification error.");aS.debug("Conflict handle return the final copy.");}let s=i.getMetadata();return s.setPublished(n.getMetadata().getPublished()),s.setSignature(n.getProof().getSignature()),n.getMetadata().isDeactivated()&&s.setDeactivated(!0),s.setRootIdentityId(this.getId()),s.setIndex(t),null!=o&&o.getMetadata().attachStore(this.getStore()),yield this.getStore().storeDid(i),this.getStore().storeLazyPrivateKey(i.getDefaultPublicKeyId()),!0}))}synchronize(t=null){return r(this,void 0,void 0,(function*(){aS.info("Synchronize root identity {}...",this.getId());let e=this.getIndex()-1,r=0,n=0;for(;n<e||r<20;){(yield this.synchronizeIndex(n,t))?(n>e&&(e=n),r=0):n>e&&r++,n++;}e>=this.getIndex()&&this.setIndex(e+1);}))}}!function(t){class e extends ct$1{constructor(t=null,e=null){super(e),this.id=t;}setId(t){this.id=t;}setDefaultDid(t){this.put(e.DEFAULT_DID,t.toString());}getDefaultDid(){return Nt$1.from(this.get(e.DEFAULT_DID))}save(){if(this.attachedStore())try{this.getStore().storeRootIdentityMetadata(this.id,this);}catch(t){throw t instanceof a$1&&aS.error("INTERNAL - error store metadata for credential {}",this.id),t}}static parse(t,r=null){try{return at$1.deserialize(t,e,r)}catch(t){throw t instanceof et$1?t:new et$1(t)}}}e.DEFAULT_DID="defaultDid",t.Metadata=e;}(sS||(sS={}));const uS=new e("FileSystemStorage");class cS{constructor(t){this.storeRoot=new cx(t),this.currentDataDir=cS.DATA_DIR;}init(){return r(this,void 0,void 0,(function*(){this.storeRoot.exists()?yield this.checkStore():this.initializeStore();}))}initializeStore(){try{uS.debug("Initializing DID store at {}",this.storeRoot.getAbsolutePath()),this.storeRoot.createDirectory();let t=new ft$1;this.getFile(!0,this.currentDataDir,cS.METADATA).writeText(t.serialize());}catch(t){throw uS.error("Initialize DID store error",t),new Z$1('Initialize DIDStore "'+this.storeRoot.getAbsolutePath()+'" error.',t)}}checkStore(){if(uS.debug("Checking DID store at {}",this.storeRoot.getAbsolutePath()),this.storeRoot.isFile())throw uS.error("Path {} not a directory",this.storeRoot.getAbsolutePath()),new Z$1('Invalid DIDStore "'+this.storeRoot.getAbsolutePath()+'".');this.postOperations();let t=this.getDir(this.currentDataDir);if(!t.exists()){let t=this.storeRoot.list();if(null==t||0==t.length)return void this.initializeStore();throw uS.error("Path {} cannot be initialized as DID Store because it's not empty",this.storeRoot.getAbsolutePath()),new Z$1("Path cannot be initialized as DID Store because it's not empty \""+this.storeRoot.getAbsolutePath()+'".')}if(!t.isDirectory())throw uS.error("Path {} is not a DID store, missing data directory",this.storeRoot.getAbsolutePath()),new Z$1('Invalid DIDStore "'+this.storeRoot.getAbsolutePath()+'".');let e=this.getFile(!1,this.currentDataDir,cS.METADATA);if(!e.exists()||!e.isFile())throw uS.error("Path {} not a DID store, missing store metadata",this.storeRoot.getAbsolutePath()),new Z$1('Invalid DIDStore "'+this.storeRoot.getAbsolutePath()+'".');try{let t=e.readText(),r=ft$1.parse(t);if(r.getType()!==ft$1.DID_STORE_TYPE)throw new Z$1("Unknown DIDStore type");if(r.getVersion()!=ft$1.DID_STORE_VERSION)throw new Z$1("Unsupported DIDStore version")}catch(t){throw uS.error("Check DID store error, failed load store metadata",t),new Z$1("Can not check the store metadata",t)}}static toPath(t){return t.toString(t.getDid()).replace(";","+").replace("/","~").replace("?","!")}static toDIDURL(t,e){return e=e.replace("+",";").replace("~","/").replace("!","?"),jt$1.from(e,t)}static copyFile(t,e){e.writeText(t.readText());}getFile(t,...e){let r=null,n=this.storeRoot.getAbsolutePath();for(let t of e)n+=cx.SEPARATOR+t;return r=new cx(n),t&&r.getParentDirectory().createDirectory(),r}getDir(...t){let e=this.storeRoot.getAbsolutePath()+cx.SEPARATOR+t.join(cx.SEPARATOR);return new cx(e)}getLocation(){return this.storeRoot.toString()}getStoreRoot(){return this.storeRoot}storeMetadata(t){try{let e=this.getFile(!0,this.currentDataDir,cS.METADATA);null==t||t.isEmpty()?e.delete():e.writeText(t.serialize());}catch(t){throw new Z$1("Store DIDStore metadata error",t)}}loadMetadata(){try{let t=this.getFile(!1,this.currentDataDir,cS.METADATA),e=null;return t.exists()&&(e=ft$1.parse(t.readText())),e}catch(t){throw new Z$1("Load DIDStore metadata error",t)}}getRootIdentityFile(t,e,r){return this.getFile(r,this.currentDataDir,cS.ROOT_IDENTITIES_DIR,t,e)}getRootIdentityDir(t){return this.getDir(this.currentDataDir,cS.ROOT_IDENTITIES_DIR,t)}storeRootIdentityMetadata(t,e){try{let r=this.getRootIdentityFile(t,cS.METADATA,!0);null==e||e.isEmpty()?r.delete():r.writeText(e.serialize());}catch(e){throw new Z$1("Store root identity metadata error: "+t,e)}}loadRootIdentityMetadata(t){try{let e=this.getRootIdentityFile(t,cS.METADATA,!1),r=null;return e.exists()&&(r=sS.Metadata.parse(e.readText())),r}catch(e){throw new Z$1("Load root identity metadata error: "+t,e)}}storeRootIdentity(t,e,r,n,i){try{let o;null!=e&&(o=this.getRootIdentityFile(t,cS.ROOT_IDENTITY_MNEMONIC_FILE,!0),o.writeText(e)),null!=r&&(o=this.getRootIdentityFile(t,cS.ROOT_IDENTITY_PRIVATEKEY_FILE,!0),o.writeText(r)),null!=n&&(o=this.getRootIdentityFile(t,cS.ROOT_IDENTITY_PUBLICKEY_FILE,!0),o.writeText(n)),o=this.getRootIdentityFile(t,cS.ROOT_IDENTITY_INDEX_FILE,!0),o.writeText(i.toFixed());}catch(e){throw new Z$1("Store root identity error: "+t,e)}}loadRootIdentity(t){try{let e=this.getRootIdentityFile(t,cS.ROOT_IDENTITY_PUBLICKEY_FILE,!1);if(!e.exists())return null;let r=e.readText();e=this.getRootIdentityFile(t,cS.ROOT_IDENTITY_INDEX_FILE,!1);let n=Number.parseInt(e.readText());return sS.createFromPreDerivedPublicKey(r,n)}catch(e){throw new Z$1("Load public key for identity error: "+t,e)}}containsRootIdentity(t){return this.getRootIdentityDir(t).exists()}updateRootIdentityIndex(t,e){try{this.getRootIdentityFile(t,cS.ROOT_IDENTITY_INDEX_FILE,!1).writeText(""+e);}catch(e){throw new Z$1("Update index for indentiy error: "+t,e)}}loadRootIdentityPrivateKey(t){try{let e=this.getRootIdentityFile(t,cS.ROOT_IDENTITY_PRIVATEKEY_FILE,!1);return e.exists()?e.readText():null}catch(e){throw new Z$1("Load private key for identity error: "+t,e)}}deleteRootIdentity(t){let e=this.getRootIdentityDir(t);return !!e.exists()&&(e.delete(),!0)}listRootIdentities(){let t=this.getDir(this.currentDataDir,cS.ROOT_IDENTITIES_DIR);if(!t.exists())return [];let e=t.listFiles().filter((t=>{if(!t.isDirectory())return !1;let e=new cx(t,cS.ROOT_IDENTITY_PRIVATEKEY_FILE);return e.exists()&&e.isFile()}));if(null==e||0==e.length)return [];let r=[];for(let t of e){let e=this.loadRootIdentity(t.getName());r.push(e);}return r}containsRootIdenities(){let t=this.getDir(this.currentDataDir,cS.ROOT_IDENTITIES_DIR);if(!t.exists())return !1;let e=t.listFiles().filter((t=>t.isDirectory()));return null!=e&&e.length>0}loadRootIdentityMnemonic(t){try{return this.getRootIdentityFile(t,cS.ROOT_IDENTITY_MNEMONIC_FILE,!1).readText()}catch(e){throw new Z$1("Load mnemonic for identity error: "+t,e)}}getDidFile(t,e){return this.getFile(e,this.currentDataDir,cS.DID_DIR,t.getMethodSpecificId(),cS.DOCUMENT_FILE)}getDidMetadataFile(t,e){return this.getFile(e,this.currentDataDir,cS.DID_DIR,t.getMethodSpecificId(),cS.METADATA)}getDidDir(t){return this.getDir(this.currentDataDir,cS.DID_DIR,t.getMethodSpecificId())}storeDidMetadata(t,e){try{let r=this.getDidMetadataFile(t,!0);null==e||e.isEmpty()?r.delete():r.writeText(e.serialize());}catch(e){throw new Z$1("Store DID metadata error: "+t,e)}}loadDidMetadata(t){try{let e=this.getDidMetadataFile(t,!1),r=null;return e.exists()&&(r=lt$1.parse(e.readText())),r}catch(e){throw new Z$1("Load DID metadata error: "+t,e)}}storeDid(t){try{this.getDidFile(t.getSubject(),!0).writeText(t.serialize(!0));}catch(e){throw new Z$1("Store DID document error: "+t.getSubject(),e)}}loadDid(t){return r(this,void 0,void 0,(function*(){try{let e=this.getDidFile(t,!1);return e.exists()?yield oS.parseAsync(e.readText()):null}catch(e){throw new Z$1("Load DID document error: "+t,e)}}))}deleteDid(t){let e=this.getDidDir(t);return !!e.exists()&&(e.delete(),!0)}listDids(){let t=this.getDir(this.currentDataDir,cS.DID_DIR);if(!t.exists())return [];let e=t.listFiles().filter((t=>{if(!t.isDirectory())return !1;let e=new cx(t,cS.DOCUMENT_FILE);return e.exists()&&e.isFile()}));if(null==e||0==e.length)return [];let r=[];for(let t of e){let e=new Nt$1(Nt$1.METHOD,t.getName());r.push(e);}return r}containsDid(t){return this.getDidDir(t).exists()}containsDids(){let t=this.getDir(this.currentDataDir,cS.DID_DIR);if(!t.exists())return !1;let e=t.listFiles().filter((t=>t.isDirectory()));return null!=e&&e.length>0}getCredentialFile(t,e){return this.getFile(e,this.currentDataDir,cS.DID_DIR,t.getDid().getMethodSpecificId(),cS.CREDENTIALS_DIR,cS.toPath(t),cS.CREDENTIAL_FILE)}getCredentialMetadataFile(t,e){return this.getFile(e,this.currentDataDir,cS.DID_DIR,t.getDid().getMethodSpecificId(),cS.CREDENTIALS_DIR,cS.toPath(t),cS.METADATA)}getCredentialDir(t){return this.getDir(this.currentDataDir,cS.DID_DIR,t.getDid().getMethodSpecificId(),cS.CREDENTIALS_DIR,cS.toPath(t))}getCredentialsDir(t){return this.getDir(this.currentDataDir,cS.DID_DIR,t.getMethodSpecificId(),cS.CREDENTIALS_DIR)}storeCredentialMetadata(t,e){try{let r=this.getCredentialMetadataFile(t,!0);null==e||e.isEmpty()?r.delete():r.writeText(e.serialize());}catch(e){throw new Z$1("Store credential metadata error: "+t,e)}}loadCredentialMetadata(t){try{let e=this.getCredentialMetadataFile(t,!1);return e.exists()?fr$1.parse(e.readText()):null}catch(e){throw new Z$1("Load credential metadata error: "+t,e)}}storeCredential(t){try{this.getCredentialFile(t.getId(),!0).writeText(t.serialize(!0));}catch(e){throw new Z$1("Store credential error: "+t.getId(),e)}}loadCredential(t){try{let e=this.getCredentialFile(t,!1);return e.exists()?vr$1.parse(e.readText()):null}catch(e){throw new Z$1("Load credential error: "+t,e)}}containsCredential(t){return this.getCredentialDir(t).exists()}containsCredentials(t){let e=this.getCredentialsDir(t);if(!e.exists())return !1;let r=e.listFiles().filter((t=>t.isDirectory()));return null!=r&&r.length>0}deleteCredential(t){let e=this.getCredentialDir(t);return !!e.exists()&&(e.delete(),e=this.getCredentialsDir(t.getDid()),0==e.list().length&&e.delete(),!0)}listCredentials(t){let e=this.getCredentialsDir(t);if(!e.exists())return [];let r=e.listFiles().filter((t=>{if(!t.isDirectory())return !1;let e=new cx(t,cS.CREDENTIAL_FILE);return e.exists()&&e.isFile()}));if(null==r||0==r.length)return [];let n=[];for(let e of r)n.push(cS.toDIDURL(t,e.getName()));return n}getPrivateKeyFile(t,e){return this.getFile(e,this.currentDataDir,cS.DID_DIR,t.getDid().getMethodSpecificId(),cS.PRIVATEKEYS_DIR,cS.toPath(t))}getPrivateKeysDir(t){return this.getDir(this.currentDataDir,cS.DID_DIR,t.getMethodSpecificId(),cS.PRIVATEKEYS_DIR)}containsPrivateKey(t){return this.getPrivateKeyFile(t,!1).exists()}storePrivateKey(t,e){try{this.getPrivateKeyFile(t,!0).writeText(e);}catch(e){throw new Z$1("Store private key error: "+t,e)}}loadPrivateKey(t){try{let e=this.getPrivateKeyFile(t,!1);return e.exists()?e.readText():null}catch(e){throw new Z$1("Load private key error: "+t,e)}}containsPrivateKeys(t){let e=this.getPrivateKeysDir(t);if(!e.exists())return !1;let r=e.listFiles().filter((t=>t.isFile()));return null!=r&&r.length>0}deletePrivateKey(t){let e=this.getPrivateKeyFile(t,!1);if(e.exists()){e.delete();let r=this.getPrivateKeysDir(t.getDid());return 0==r.list().length&&r.delete(),!0}return !1}listPrivateKeys(t){let e=this.getPrivateKeysDir(t);if(!e.exists())return [];let r=e.listFiles().filter((t=>t.isFile()));if(null==r||0==r.length)return [];let n=[];for(let e of r)n.push(cS.toDIDURL(t,e.getName()));return n}needReencrypt(t){let e=["(.+)\\"+cx.SEPARATOR+cS.DATA_DIR+"\\"+cx.SEPARATOR+cS.ROOT_IDENTITIES_DIR+"\\"+cx.SEPARATOR+"(.+)\\"+cx.SEPARATOR+cS.ROOT_IDENTITY_PRIVATEKEY_FILE,"(.+)\\"+cx.SEPARATOR+cS.DATA_DIR+"\\"+cx.SEPARATOR+cS.ROOT_IDENTITIES_DIR+"\\"+cx.SEPARATOR+"(.+)\\"+cx.SEPARATOR+cS.ROOT_IDENTITY_MNEMONIC_FILE,"(.+)\\"+cx.SEPARATOR+cS.DATA_DIR+"\\"+cx.SEPARATOR+cS.DID_DIR+"\\"+cx.SEPARATOR+"(.+)\\"+cx.SEPARATOR+cS.PRIVATEKEYS_DIR+"\\"+cx.SEPARATOR+"(.+)"],r=t.getAbsolutePath();for(let t of e)if(r.match(t))return !0;return !1}copy(t,e,r){if(t.isDirectory()){let n=t;e.exists()||e.createDirectory();let i=n.list();for(let t of i){let i=new cx(n,t),o=new cx(e,t);this.copy(i,o,r);}}else if(this.needReencrypt(t)){let n=t.readText();e.writeText(r.reEncrypt(n));}else cS.copyFile(t,e);}postChangePassword(){let t=this.getDir(cS.DATA_DIR),e=this.getDir(cS.DATA_DIR+cS.JOURNAL_SUFFIX),r=(new Date).getTime()/1e3,n=this.getDir(cS.DATA_DIR+"_"+r),i=this.getFile(!1,"postChangePassword");i.exists()?(e.exists()&&(t.exists()&&t.rename(n.getAbsolutePath()),e.rename(t.getAbsolutePath())),i.delete()):e.exists()&&e.delete();}changePassword(t){try{let e=this.getDir(cS.DATA_DIR),r=this.getDir(cS.DATA_DIR+cS.JOURNAL_SUFFIX);this.copy(e,r,t),this.getFile(!0,"postChangePassword").createFile();}catch(t){if(t instanceof o)throw t;throw new Z$1("Change store password failed.")}finally{this.postChangePassword();}}postOperations(){this.getFile(!1,"postChangePassword").exists()&&this.postChangePassword();}}cS.DATA_DIR="data",cS.ROOT_IDENTITIES_DIR="roots",cS.ROOT_IDENTITY_MNEMONIC_FILE="mnemonic",cS.ROOT_IDENTITY_PRIVATEKEY_FILE="private",cS.ROOT_IDENTITY_PUBLICKEY_FILE="public",cS.ROOT_IDENTITY_INDEX_FILE="index",cS.DID_DIR="ids",cS.DOCUMENT_FILE="document",cS.CREDENTIALS_DIR="credentials",cS.CREDENTIAL_FILE="credential",cS.PRIVATEKEYS_DIR="privatekeys",cS.METADATA=".metadata",cS.JOURNAL_SUFFIX=".journal";class lS extends at$1{constructor(t=null,e=null,r=null){super(),this.id=t,this.to=e,this.txid=r;}static newForDIDDocument(t,e){return r(this,void 0,void 0,(function*(){if(Ot$1(null!=t,"Invalid target DID document"),Ot$1(null!=e,"Invalid to DID"),!t.isCustomizedDid())throw new y$1(t.getSubject().toString());let r=yield t.getSubject().resolve();t.getMetadata().setTransactionId(r.getMetadata().getTransactionId());let n=new lS(t.getSubject(),e,t.getMetadata().getTransactionId());return n.doc=t,n}))}static newWithTicket(t,e){let r=new lS(t.id,t.to,t.txid);return r.doc=t.doc,e&&(r.proofs=t.proofs),r}getSubject(){return this.id}getTo(){return this.to}getTransactionId(){return this.txid}getProof(){return this.getProofs()[0]}getProofs(){return this.proofs.valuesAsSortedArray()}getDocument(){return r(this,void 0,void 0,(function*(){return null==this.doc&&(this.doc=yield this.id.resolve()),this.doc}))}isGenuine(t=null){return r(this,void 0,void 0,(function*(){let e=yield this.getDocument();if(null==e)return null!=t&&(t.failed(this,"Ticket {}: can not resolve the owner document",this.getSubject()),t.failed(this,"Ticket {}: is not genuine",this.getSubject())),!1;if(!e.isGenuine(t))return null!=t&&(t.failed(this,"Ticket {}: the owner document is not genuine",this.getSubject()),t.failed(this,"Ticket {}: is not genuine",this.getSubject())),!1;if(e.getControllerCount()>1&&this.proofs.size!=e.getMultiSignature().m()||e.getControllerCount()<=1&&1!=this.proofs.size)return null!=t&&(t.failed(this,"Ticket {}: proof size not matched with multisig, {} expected, actual is {}",this.getSubject(),e.getMultiSignature().m(),e.proofs.size),t.failed(this,"Ticket {}: is not genuine",this.getSubject())),!1;let r=lS.newWithTicket(this,!1).serialize(!0),n=NS.sha256Digest(vt$1.Buffer.from(r,"utf-8"));for(let r of this.proofs.values()){if(r.getType()!==mr$1.DEFAULT_PUBLICKEY_TYPE)return null!=t&&(t.failed(this,"Ticket {}: key type '{}' for proof is not supported",this.getSubject(),r.getType()),t.failed(this,"Ticket {}: is not genuine",this.getSubject())),!1;let i=e.getControllerDocument(r.getVerificationMethod().getDid());if(null==i)return null!=t&&(t.failed(this,"Ticket {}: can not resolve the document for controller '{}' to verify the proof",this.getSubject(),r.getVerificationMethod().getDid()),t.failed(this,"Ticket {}: is not genuine",this.getSubject())),!1;if(!(yield i.isValid(t)))return null!=t&&(t.failed(this,"Ticket {}: controller '{}' is invalid, failed to verify the proof",this.getSubject(),r.getVerificationMethod().getDid()),t.failed(this,"Ticket {}: is not genuine",this.getSubject())),!1;if(!r.getVerificationMethod().equals(i.getDefaultPublicKeyId()))return null!=t&&(t.failed(this,"Ticket {}: key '{}' for proof is not default key of '{}'",this.getSubject(),r.getVerificationMethod(),r.getVerificationMethod().getDid()),t.failed(this,"Ticket {}: is not genuine",this.getSubject())),!1;if(!e.verifyDigest(r.getVerificationMethod(),r.getSignature(),n))return null!=t&&(t.failed(this,"Ticket {}: proof '{}' is invalid, signature mismatch",this.getSubject(),r.getVerificationMethod()),t.failed(this,"Ticket {}: is not genuine",this.getSubject())),!1}return null!=t&&t.succeeded(this,"Ticket {}: is genuine",this.getSubject()),!0}))}isValid(t=null){return r(this,void 0,void 0,(function*(){let e=yield this.getDocument();return null==e?(null!=t&&(t.failed(this,"Ticket {}: can not resolve the owners document",this.getSubject()),t.failed(this,"Ticket {}: is not valid",this.getSubject())),!1):(yield e.isValid(t))?(yield this.isGenuine(t))?this.txid!==e.getMetadata().getTransactionId()?(null!=t&&(t.failed(this,"Ticket {}: the transaction id already out date",this.getSubject()),t.failed(this,"Ticket {}: is not valid",this.getSubject())),!1):(null!=t&&t.succeeded(this,"Ticket {}: is valid",this.getSubject()),!0):(null!=t&&t.failed(this,"Ticket {}: is not valid",this.getSubject()),!1):(null!=t&&(t.failed(this,"Ticket {}: the owners document is not valid",this.getSubject()),t.failed(this,"Ticket {}: is not valid",this.getSubject())),!1)}))}isQualified(){return r(this,void 0,void 0,(function*(){if(null==this.proofs||0==this.proofs.size)return !1;let t=(yield this.getDocument()).getMultiSignature();return this.proofs.size==(null==t?1:t.m())}))}toJSON(t=null){let e={};if(e.id=this.id.toString(),e.to=this.to.toString(),e.txid=this.txid,this.proofs){let r=this.proofs.valuesAsSortedArray();1==r.length?e.proof=r[0].toJSON(t):e.proof=Array.from(r,(e=>e.toJSON(t)));}return e}fromJSON(t,e=null){if(this.id=this.getDid("id",t.id,{mandatory:!0,nullable:!1}),this.to=this.getDid("to",t.to,{mandatory:!0,nullable:!1}),this.txid=this.getString("txid",t.txid,{mandatory:!0,nullable:!1}),!t.proof)throw new _$1("Missing property: proof");if(this.proofs=new nS,Array.isArray(t.proof))for(let e of t.proof){let t=e,r=lS.Proof.deserialize(t,lS.Proof,this.id);if(null==r.getVerificationMethod().getDid())throw new _$1("Invalid verification method: "+r.getVerificationMethod());if(this.proofs.has(r.getVerificationMethod().getDid()))throw new _$1("Aleady exist proof from "+r.getVerificationMethod().getDid());this.proofs.set(r.getVerificationMethod().getDid(),r);}else {let e=t.proof,r=lS.Proof.deserialize(e,lS.Proof,this.id);if(null==r.getVerificationMethod().getDid())throw new _$1("Invalid verification method: "+r.getVerificationMethod());this.proofs.set(r.getVerificationMethod().getDid(),r);}}seal(t,e){return r(this,void 0,void 0,(function*(){try{if(yield this.isQualified())return;if(t.isCustomizedDid()){if(null==t.getEffectiveController())throw new b$1(t.getSubject().toString())}else try{if(!(yield this.getDocument()).hasController(t.getSubject()))throw new v$1(t.getSubject().toString())}catch(t){throw new h$1(t)}}catch(t){throw new h$1(t)}let r=t.getDefaultPublicKeyId();if(null==this.proofs)this.proofs=new nS;else if(this.proofs.has(r.getDid()))throw new w$1(r.getDid().toString());let n=lS.newWithTicket(this,!1).serialize(!0),i=yield t.signWithStorePass(e,vt$1.Buffer.from(n)),o=new lS.Proof(r,i);this.proofs.set(o.getVerificationMethod().getDid(),o);}))}static parse(t){try{return at$1.deserialize(t,lS)}catch(t){throw t instanceof _$1?t:new _$1(t)}}}!function(t){t.Proof=class extends at$1{constructor(t=null,e=null,r=new Date,n=mr$1.DEFAULT_PUBLICKEY_TYPE){super(),this.type=null!=n?n:mr$1.DEFAULT_PUBLICKEY_TYPE,this.created=null==r?new Date:r,this.created&&this.created.setMilliseconds(0),this.verificationMethod=t,this.signature=e;}getType(){return this.type}getVerificationMethod(){return this.verificationMethod}getCreated(){return this.created}getSignature(){return this.signature}equals(t){return 0===this.compareTo(t)}compareTo(t){let e=this.created.getTime()-t.created.getTime();return 0==e&&(e=this.verificationMethod.compareTo(t.verificationMethod)),e}toJSON(t=null){let e=t?new Nt$1(t):null,r={};return e&&this.type===mr$1.DEFAULT_PUBLICKEY_TYPE||(r.type=this.type),this.created&&(r.created=this.dateToString(this.created)),r.verificationMethod=this.verificationMethod.toString(e),r.signature=this.signature,r}fromJSON(t,e=null){this.type=this.getString("proof.type",t.type,{mandatory:!1,defaultValue:mr$1.DEFAULT_PUBLICKEY_TYPE}),this.created=this.getDate("proof.created",t.created,{mandatory:!1}),this.verificationMethod=this.getDidUrl("proof.verificationMethod",t.verificationMethod,{mandatory:!0,nullable:!1,context:e}),this.signature=this.getString("proof.signature",t.signature,{mandatory:!0,nullable:!1});}};}(lS||(lS={}));const fS=new e("VerifiableCredential");class hS extends at$1{constructor(t){super(),this.holder=t,this.credentials=new nS;}static newFromPresentation(t,e){let r=new hS;return r.context=t.context,r.id=t.id,r.type=t.type,r.holder=t.holder,r.created=t.created,r.credentials=t.credentials,e&&(r.proof=t.proof),r}getId(){return this.id?this.id:null}getType(){return this.type}getHolder(){return null!=this.holder?this.holder:this.proof.getVerificationMethod().getDid()}getCreated(){return null!=this.proof.getCreated()?this.proof.getCreated():this.created}getCredentialCount(){return this.credentials.size}getCredentials(){return this.credentials.valuesAsSortedArray()}getCredential(t){return Ot$1(null!=t,"Invalid credential id"),("string"==typeof t||null==t.getDid())&&(t=jt$1.from(t,this.getHolder())),this.credentials.get(t)}getProof(){return this.proof}isGenuine(t=null){return r(this,void 0,void 0,(function*(){let e=yield this.getHolder().resolve();if(null==e)return null!=t&&(t.failed(this,"VP {}: can not resolve the holder's document",this.getId()),t.failed(this,"VP {}: is not genuine",this.getId())),!1;if(!e.isGenuine(t))return null!=t&&(t.failed(this,"VP {}: holder's document is not genuine",this.getId()),t.failed(this,"VP {}: is not genuine",this.getId())),!1;if(this.proof.getType()!==mr$1.DEFAULT_PUBLICKEY_TYPE)return null!=t&&(t.failed(this,"VP {}: key type '{}' for proof is not supported",this.getId(),this.proof.getType()),t.failed(this,"VP {}: is not genuine",this.getId())),!1;if(!e.isAuthenticationKey(this.proof.getVerificationMethod()))return null!=t&&(t.failed(this,"VP {}: Key '{}' for proof is not an authencation key of '{}'",this.getId(),this.proof.getVerificationMethod(),this.proof.getVerificationMethod().getDid()),t.failed(this,"VP {}: is not genuine",this.getId())),!1;for(let e of this.credentials.values()){if(!e.getSubject().getId().equals(this.getHolder()))return null!=t&&(t.failed(this,"VP {}: credential '{}' not owned by the holder '{}'",this.getId(),e.getId(),this.getHolder()),t.failed(this,"VP {}: is not genuine",this.getId())),!1;if(!(yield e.isGenuine(t)))return null!=t&&(t.failed(this,"VP {}: credential '{}' is not genuine",this.getId(),e.getId()),t.failed(this,"VP {}: is not genuine",this.getId())),!1}let r=hS.newFromPresentation(this,!1).serialize(!0),n=e.verify(this.proof.getVerificationMethod(),this.proof.getSignature(),vt$1.Buffer.from(r),vt$1.Buffer.from(this.proof.getRealm()),vt$1.Buffer.from(this.proof.getNonce()));return null!=t&&(n?t.succeeded(this,"VP {}: is genuine",this.getId()):(t.failed(this,"VP {}: proof is invalid, signature mismatch",this.getId()),t.failed(this,"VP {}: is not genuine",this.getId()))),n}))}isValid(t=null){return r(this,void 0,void 0,(function*(){let e=yield this.getHolder().resolve();if(null==e)return null!=t&&(t.failed(this,"VP {}: can not resolve the holder's document",this.getId()),t.failed(this,"VP {}: is invalid",this.getId())),!1;if(yield e.isDeactivated())return null!=t&&(t.failed(this,"VP {}: holder's document is deactivate",this.getId()),t.failed(this,"VP {}: is invalid",this.getId())),!1;if(!e.isGenuine(t))return null!=t&&(t.failed(this,"VP {}: holder's document is genuine",this.getId()),t.failed(this,"VP {}: is invalid",this.getId())),!1;if(this.proof.getType()!==mr$1.DEFAULT_PUBLICKEY_TYPE)return null!=t&&(t.failed(this,"VP {}: Key type '{}' for proof is not supported",this.getId(),this.proof.getType()),t.failed(this,"VP {}: is invalid",this.getId())),!1;if(!e.isAuthenticationKey(this.proof.getVerificationMethod()))return null!=t&&(t.failed(this,"VP {}: Key '{}' for proof is not an authencation key of '{}'",this.getId(),this.proof.getVerificationMethod(),this.proof.getVerificationMethod().getDid()),t.failed(this,"VP {}: is invalid",this.getId())),!1;let r=hS.newFromPresentation(this,!1).serialize(!0);if(!e.verify(this.proof.getVerificationMethod(),this.proof.getSignature(),vt$1.Buffer.from(r),vt$1.Buffer.from(this.proof.getRealm()),vt$1.Buffer.from(this.proof.getNonce())))return null!=t&&(t.failed(this,"VP {}: proof is invalid, signature mismatch",this.getId()),t.failed(this,"VP {}: is invalid",this.getId())),!1;for(let e of this.credentials.values()){if(!e.getSubject().getId().equals(this.getHolder()))return null!=t&&(t.failed(this,"VP {}: credential '{}' not owned by the holder '{}'",this.getId(),e.getId(),this.getHolder()),t.failed(this,"VP {}: is not genuine",this.getId())),!1;if(!(yield e.isValid(t)))return null!=t&&(t.failed(this,"VP {}: credential '{}' is invalid",this.getId(),e.getId()),t.failed(this,"VP {}: is invalid",this.getId())),!1}return null!=t&&t.succeeded(this,"VP %s: is valid",this.getId()),!0}))}toJSON(t=null){let e={};return null!=this.context&&this.context.length>0&&(e["@context"]=Array.from(this.context)),this.id&&(e.id=this.id.toString()),e.type=1==this.type.length?this.type[0]:this.type,this.holder&&(e.holder=this.holder.toString()),this.created&&(e.created=this.dateToString(this.created)),e.verifiableCredential=Array.from(this.credentials.valuesAsSortedArray(),(t=>t.toJSON())),this.proof&&(e.proof=this.proof.toJSON()),e}fromJSON(t,e=null){if(this.context=this.getContext("@context",t["@context"],{mandatory:!1,nullable:!1,defaultValue:[]}),this.holder=this.getDid("holder",t.holder,{mandatory:!1,nullable:!1,defaultValue:null}),this.id=this.getDidUrl("id",t.id,{mandatory:!1,nullable:!1,context:this.holder,defaultValue:null}),this.type=this.getStrings("type",t.type,{mandatory:!0,nullable:!1,defaultValue:[hS.DEFAULT_PRESENTATION_TYPE]}),this.created=this.getDate("created",t.created,{mandatory:!1,nullable:!0}),!t.proof)throw new V$1("Missing property: proof");let r=t.proof;if(this.proof=hS.Proof.deserialize(r,hS.Proof,this.holder),null==this.created&&null==this.proof.getCreated())throw new V$1("Missing presentation create timestamp");if(this.credentials=new nS,t.verifiableCredential){if(!Array.isArray(t.verifiableCredential))throw new V$1("Invalid property: verifiableCredential, type error.");for(let e of t.verifiableCredential){let t,r=e;try{t=vr$1.deserialize(r,vr$1,this.holder);}catch(t){throw new V$1("credential invalid: "+r.id,t)}if(this.credentials.has(t.getId()))throw new V$1("Duplicated credential id: "+t.getId());this.credentials.set(t.getId(),t);}}}static parse(t){try{return at$1.deserialize(t,hS)}catch(t){throw t instanceof V$1?t:new V$1(t)}}static createFor(t,e,n){return r(this,void 0,void 0,(function*(){Ot$1(null!=t,"Invalid did"),Ot$1(null!=n,"Invalid store"),"string"==typeof t&&(t=Nt$1.from(t)),"string"==typeof e&&(e=jt$1.from(e,t));let r=yield n.loadDid(t);if(null==r)throw new P$1(t.toString());if(null==e)e=r.getDefaultPublicKeyId();else if(!r.isAuthenticationKey(e))throw new I$1(e.toString());if(!r.hasPrivateKey(e))throw new I$1("No private key: "+e);return new hS.Builder(r,e)}))}}hS.DEFAULT_PRESENTATION_TYPE="VerifiablePresentation",function(t){t.Builder=class{constructor(e,r){this.holder=e,this.signKey=r,this.presentation=new t(e.getSubject()),this.setDefaultType();}checkNotSealed(){if(null==this.presentation)throw new R$1}id(t){return this.checkNotSealed(),Ot$1(null!=t,"Invalid id"),"string"==typeof t&&(t=jt$1.from(t,this.holder.getSubject())),Ot$1(null!=t&&(null==t.getDid()||t.getDid().equals(this.holder.getSubject())),"Invalid id"),this.presentation.id=jt$1.from(t,this.holder.getSubject()),this}setDefaultType(){this.checkNotSealed(),Bt$1.isEnabledJsonLdContext()&&(null==this.presentation.context&&(this.presentation.context=[]),this.presentation.context.includes(vr$1.W3C_CREDENTIAL_CONTEXT)||this.presentation.context.push(vr$1.W3C_CREDENTIAL_CONTEXT),this.presentation.context.includes(vr$1.ELASTOS_CREDENTIAL_CONTEXT)||this.presentation.context.push(vr$1.ELASTOS_CREDENTIAL_CONTEXT)),null==this.presentation.type&&(this.presentation.type=[]),this.presentation.type.includes(t.DEFAULT_PRESENTATION_TYPE)||this.presentation.type.push(t.DEFAULT_PRESENTATION_TYPE);}typeWithContext(t,e){return this.checkNotSealed(),Rt$1(t,"Invalid type: "+t),Bt$1.isEnabledJsonLdContext()?(Rt$1(e,"Invalid context: "+e),null==this.presentation.context&&(this.presentation.context=[]),this.presentation.context.includes(e)||this.presentation.context.push(e)):fS.warn("JSON-LD context support not enabled"),null==this.presentation.type&&(this.presentation.type=[]),this.presentation.type.includes(t)||this.presentation.type.push(t),this}type(t){if(this.checkNotSealed(),Rt$1(t,"Invalid type: "+t),t.indexOf("#")<0)return this.typeWithContext(t,null);{let e=t.split("#",2);return this.typeWithContext(e[1],e[0])}}types(t){return this.checkNotSealed(),Ot$1(null!=t&&t.length>0,"Invalid types"),this.presentation.type=Array.from(t),this}credentials(...t){this.checkNotSealed();for(let e of t){if(!e.getSubject().getId().equals(this.holder.getSubject()))throw new z$1(e.getId().toString());if(this.presentation.credentials.has(e.getId()))throw new U$1(e.getId().toString());this.presentation.credentials.set(e.getId(),e);}return this}realm(t){return this.checkNotSealed(),Ot$1(t&&null!=t,"Invalid realm"),this._realm=t,this}nonce(t){return this.checkNotSealed(),Ot$1(t&&null!=t,"Invalid nonce"),this._nonce=t,this}seal(t){return r(this,void 0,void 0,(function*(){if(this.checkNotSealed(),Ot$1(t&&null!=t,"Invalid storepass"),null==this.presentation.type||0==this.presentation.type.length)throw new V$1("Missing presentation type");rS.sort(this.presentation.type),this.presentation.created=new Date,this.presentation.created&&this.presentation.created.setMilliseconds(0);let r=this.presentation.serialize(!0),n=yield this.holder.signWithId(this.signKey,t,vt$1.Buffer.from(r),vt$1.Buffer.from(this._realm),vt$1.Buffer.from(this._nonce)),i=new e(this.presentation.created,this.signKey,this._realm,this._nonce,n);this.presentation.proof=i;let o=this.presentation;return this.presentation=null,o}))}};class e extends at$1{constructor(t=null,e=null,r=null,n=null,i=null,o=mr$1.DEFAULT_PUBLICKEY_TYPE){super(),this.type=null!=o?o:mr$1.DEFAULT_PUBLICKEY_TYPE,null==t?(this.created=new Date,this.created&&this.created.setMilliseconds(0)):this.created=t,this.verificationMethod=e,this.realm=r,this.nonce=n,this.signature=i;}getType(){return this.type}getCreated(){return this.created}getVerificationMethod(){return this.verificationMethod}getRealm(){return this.realm}getNonce(){return this.nonce}getSignature(){return this.signature}toJSON(t=null){t&&new Nt$1(t);let e={};return e.type=this.type,this.created&&(e.created=this.dateToString(this.created)),e.verificationMethod=this.verificationMethod.toString(),e.realm=this.realm,e.nonce=this.nonce,e.signature=this.signature,e}fromJSON(t,e=null){this.type=this.getString("proof.type",t.type,{mandatory:!1,defaultValue:mr$1.DEFAULT_PUBLICKEY_TYPE}),this.created=this.getDate("created",t.created,{mandatory:!1,nullable:!0}),this.verificationMethod=this.getDidUrl("proof.verificationMethod",t.verificationMethod,{mandatory:!0,nullable:!1,context:e}),this.realm=this.getString("proof.realm",t.realm,{mandatory:!0,nullable:!1}),this.nonce=this.getString("proof.nonce",t.nonce,{mandatory:!0,nullable:!1}),this.signature=this.getString("proof.signature",t.signature,{mandatory:!0,nullable:!1});}}t.Proof=e;}(hS||(hS={}));var dS,yS=function t(e,r,n){function i(a,s){if(!r[a]){if(!e[a]){if(!s&&bt$1)return bt$1(a);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=r[a]={exports:{}};e[a][0].call(c.exports,(function(t){return i(e[a][1][t]||t)}),c,c.exports,t,e,r,n);}return r[a].exports}for(var o=bt$1,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(t,e,r){var n=t("./utils"),i=t("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(t){for(var e,r,i,a,s,u,c,l=[],f=0,h=t.length,d=h,p="string"!==n.getTypeOf(t);f<t.length;)d=h-f,i=p?(e=t[f++],r=f<h?t[f++]:0,f<h?t[f++]:0):(e=t.charCodeAt(f++),r=f<h?t.charCodeAt(f++):0,f<h?t.charCodeAt(f++):0),a=e>>2,s=(3&e)<<4|r>>4,u=1<d?(15&r)<<2|i>>6:64,c=2<d?63&i:64,l.push(o.charAt(a)+o.charAt(s)+o.charAt(u)+o.charAt(c));return l.join("")},r.decode=function(t){var e,r,n,a,s,u,c=0,l=0,f="data:";if(t.substr(0,f.length)===f)throw new Error("Invalid base64 input, it looks like a data url.");var h,d=3*(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(t.charAt(t.length-1)===o.charAt(64)&&d--,t.charAt(t.length-2)===o.charAt(64)&&d--,d%1!=0)throw new Error("Invalid base64 input, bad content length.");for(h=i.uint8array?new Uint8Array(0|d):new Array(0|d);c<t.length;)e=o.indexOf(t.charAt(c++))<<2|(a=o.indexOf(t.charAt(c++)))>>4,r=(15&a)<<4|(s=o.indexOf(t.charAt(c++)))>>2,n=(3&s)<<6|(u=o.indexOf(t.charAt(c++))),h[l++]=e,64!==s&&(h[l++]=r),64!==u&&(h[l++]=n);return h};},{"./support":30,"./utils":32}],2:[function(t,e,r){var n=t("./external"),i=t("./stream/DataWorker"),o=t("./stream/Crc32Probe"),a=t("./stream/DataLengthProbe");function s(t,e,r,n,i){this.compressedSize=t,this.uncompressedSize=e,this.crc32=r,this.compression=n,this.compressedContent=i;}s.prototype={getContentWorker:function(){var t=new i(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")),e=this;return t.on("end",(function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),t},getCompressedWorker:function(){return new i(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},s.createWorkerFrom=function(t,e,r){return t.pipe(new o).pipe(new a("uncompressedSize")).pipe(e.compressWorker(r)).pipe(new a("compressedSize")).withStreamInfo("compression",e)},e.exports=s;},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,e,r){var n=t("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(t){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},r.DEFLATE=t("./flate");},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,e,r){var n=t("./utils"),i=function(){for(var t,e=[],r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t;}return e}();e.exports=function(t,e){return void 0!==t&&t.length?"string"!==n.getTypeOf(t)?function(t,e,r,n){var o=i,a=n+r;t^=-1;for(var s=n;s<a;s++)t=t>>>8^o[255&(t^e[s])];return -1^t}(0|e,t,t.length,0):function(t,e,r,n){var o=i,a=n+r;t^=-1;for(var s=n;s<a;s++)t=t>>>8^o[255&(t^e.charCodeAt(s))];return -1^t}(0|e,t,t.length,0):0};},{"./utils":32}],5:[function(t,e,r){r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null;},{}],6:[function(t,e,r){var n=null;n="undefined"!=typeof Promise?Promise:t("lie"),e.exports={Promise:n};},{lie:37}],7:[function(t,e,r){var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=t("pako"),o=t("./utils"),a=t("./stream/GenericWorker"),s=n?"uint8array":"array";function u(t,e){a.call(this,"FlateWorker/"+t),this._pako=null,this._pakoAction=t,this._pakoOptions=e,this.meta={};}r.magic="\b\0",o.inherits(u,a),u.prototype.processChunk=function(t){this.meta=t.meta,null===this._pako&&this._createPako(),this._pako.push(o.transformTo(s,t.data),!1);},u.prototype.flush=function(){a.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0);},u.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null;},u.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var t=this;this._pako.onData=function(e){t.push({data:e,meta:t.meta});};},r.compressWorker=function(t){return new u("Deflate",t)},r.uncompressWorker=function(){return new u("Inflate",{})};},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,e,r){function n(t,e){var r,n="";for(r=0;r<e;r++)n+=String.fromCharCode(255&t),t>>>=8;return n}function i(t,e,r,i,a,l){var f,h,d=t.file,p=t.compression,y=l!==s.utf8encode,g=o.transformTo("string",l(d.name)),m=o.transformTo("string",s.utf8encode(d.name)),b=d.comment,v=o.transformTo("string",l(b)),w=o.transformTo("string",s.utf8encode(b)),_=m.length!==d.name.length,S=w.length!==b.length,E="",I="",A="",k=d.dir,D=d.date,x={crc32:0,compressedSize:0,uncompressedSize:0};e&&!r||(x.crc32=t.crc32,x.compressedSize=t.compressedSize,x.uncompressedSize=t.uncompressedSize);var T=0;e&&(T|=8),y||!_&&!S||(T|=2048);var P=0,O=0;k&&(P|=16),"UNIX"===a?(O=798,P|=function(t,e){var r=t;return t||(r=e?16893:33204),(65535&r)<<16}(d.unixPermissions,k)):(O=20,P|=function(t){return 63&(t||0)}(d.dosPermissions)),f=D.getUTCHours(),f<<=6,f|=D.getUTCMinutes(),f<<=5,f|=D.getUTCSeconds()/2,h=D.getUTCFullYear()-1980,h<<=4,h|=D.getUTCMonth()+1,h<<=5,h|=D.getUTCDate(),_&&(I=n(1,1)+n(u(g),4)+m,E+="up"+n(I.length,2)+I),S&&(A=n(1,1)+n(u(v),4)+w,E+="uc"+n(A.length,2)+A);var R="";return R+="\n\0",R+=n(T,2),R+=p.magic,R+=n(f,2),R+=n(h,2),R+=n(x.crc32,4),R+=n(x.compressedSize,4),R+=n(x.uncompressedSize,4),R+=n(g.length,2),R+=n(E.length,2),{fileRecord:c.LOCAL_FILE_HEADER+R+g+E,dirRecord:c.CENTRAL_FILE_HEADER+n(O,2)+R+n(v.length,2)+"\0\0\0\0"+n(P,4)+n(i,4)+g+E+v}}var o=t("../utils"),a=t("../stream/GenericWorker"),s=t("../utf8"),u=t("../crc32"),c=t("../signature");function l(t,e,r,n){a.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=e,this.zipPlatform=r,this.encodeFileName=n,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[];}o.inherits(l,a),l.prototype.push=function(t){var e=t.meta.percent||0,r=this.entriesCount,n=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,a.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:r?(e+100*(r-n-1))/r:100}}));},l.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var e=this.streamFiles&&!t.file.dir;if(e){var r=i(t,e,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r.fileRecord,meta:{percent:0}});}else this.accumulate=!0;},l.prototype.closedSource=function(t){this.accumulate=!1;var e=this.streamFiles&&!t.file.dir,r=i(t,e,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r.dirRecord),e)this.push({data:function(t){return c.DATA_DESCRIPTOR+n(t.crc32,4)+n(t.compressedSize,4)+n(t.uncompressedSize,4)}(t),meta:{percent:100}});else for(this.push({data:r.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null;},l.prototype.flush=function(){for(var t=this.bytesWritten,e=0;e<this.dirRecords.length;e++)this.push({data:this.dirRecords[e],meta:{percent:100}});var r=this.bytesWritten-t,i=function(t,e,r,i,a){var s=o.transformTo("string",a(i));return c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(t,2)+n(t,2)+n(e,4)+n(r,4)+n(s.length,2)+s}(this.dirRecords.length,r,t,this.zipComment,this.encodeFileName);this.push({data:i,meta:{percent:100}});},l.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume();},l.prototype.registerPrevious=function(t){this._sources.push(t);var e=this;return t.on("data",(function(t){e.processChunk(t);})),t.on("end",(function(){e.closedSource(e.previous.streamInfo),e._sources.length?e.prepareNextSource():e.end();})),t.on("error",(function(t){e.error(t);})),this},l.prototype.resume=function(){return !!a.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},l.prototype.error=function(t){var e=this._sources;if(!a.prototype.error.call(this,t))return !1;for(var r=0;r<e.length;r++)try{e[r].error(t);}catch(t){}return !0},l.prototype.lock=function(){a.prototype.lock.call(this);for(var t=this._sources,e=0;e<t.length;e++)t[e].lock();},e.exports=l;},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,e,r){var n=t("../compressions"),i=t("./ZipFileWorker");r.generateWorker=function(t,e,r){var o=new i(e.streamFiles,r,e.platform,e.encodeFileName),a=0;try{t.forEach((function(t,r){a++;var i=function(t,e){var r=t||e,i=n[r];if(!i)throw new Error(r+" is not a valid compression method !");return i}(r.options.compression,e.compression),s=r.options.compressionOptions||e.compressionOptions||{},u=r.dir,c=r.date;r._compressWorker(i,s).withStreamInfo("file",{name:t,dir:u,date:c,comment:r.comment||"",unixPermissions:r.unixPermissions,dosPermissions:r.dosPermissions}).pipe(o);})),o.entriesCount=a;}catch(t){o.error(t);}return o};},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,e,r){function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var t=new n;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t};}(n.prototype=t("./object")).loadAsync=t("./load"),n.support=t("./support"),n.defaults=t("./defaults"),n.version="3.7.1",n.loadAsync=function(t,e){return (new n).loadAsync(t,e)},n.external=t("./external"),e.exports=n;},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,e,r){var n=t("./utils"),i=t("./external"),o=t("./utf8"),a=t("./zipEntries"),s=t("./stream/Crc32Probe"),u=t("./nodejsUtils");function c(t){return new i.Promise((function(e,r){var n=t.decompressed.getContentWorker().pipe(new s);n.on("error",(function(t){r(t);})).on("end",(function(){n.streamInfo.crc32!==t.decompressed.crc32?r(new Error("Corrupted zip : CRC32 mismatch")):e();})).resume();}))}e.exports=function(t,e){var r=this;return e=n.extend(e||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),u.isNode&&u.isStream(t)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",t,!0,e.optimizedBinaryString,e.base64).then((function(t){var r=new a(e);return r.load(t),r})).then((function(t){var r=[i.Promise.resolve(t)],n=t.files;if(e.checkCRC32)for(var o=0;o<n.length;o++)r.push(c(n[o]));return i.Promise.all(r)})).then((function(t){for(var n=t.shift(),i=n.files,o=0;o<i.length;o++){var a=i[o];r.file(a.fileNameStr,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileCommentStr.length?a.fileCommentStr:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:e.createFolders});}return n.zipComment.length&&(r.comment=n.zipComment),r}))};},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,e,r){var n=t("../utils"),i=t("../stream/GenericWorker");function o(t,e){i.call(this,"Nodejs stream input adapter for "+t),this._upstreamEnded=!1,this._bindStream(e);}n.inherits(o,i),o.prototype._bindStream=function(t){var e=this;(this._stream=t).pause(),t.on("data",(function(t){e.push({data:t,meta:{percent:0}});})).on("error",(function(t){e.isPaused?this.generatedError=t:e.error(t);})).on("end",(function(){e.isPaused?e._upstreamEnded=!0:e.end();}));},o.prototype.pause=function(){return !!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return !!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=o;},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,e,r){var n=t("readable-stream").Readable;function i(t,e,r){n.call(this,e),this._helper=t;var i=this;t.on("data",(function(t,e){i.push(t)||i._helper.pause(),r&&r(e);})).on("error",(function(t){i.emit("error",t);})).on("end",(function(){i.push(null);}));}t("../utils").inherits(i,n),i.prototype._read=function(){this._helper.resume();},e.exports=i;},{"../utils":32,"readable-stream":16}],14:[function(t,e,r){e.exports={isNode:!0,newBufferFrom:function(t,e){if(ei.from&&ei.from!==Uint8Array.from)return ei.from(t,e);if("number"==typeof t)throw new Error('The "data" argument must not be a number');return new ei(t,e)},allocBuffer:function(t){if(ei.alloc)return ei.alloc(t);var e=new ei(t);return e.fill(0),e},isBuffer:function(t){return Bi(t)},isStream:function(t){return t&&"function"==typeof t.on&&"function"==typeof t.pause&&"function"==typeof t.resume}};},{}],15:[function(t,e,r){function n(t,e,r){var n,i=o.getTypeOf(e),s=o.extend(r||{},u);s.date=s.date||new Date,null!==s.compression&&(s.compression=s.compression.toUpperCase()),"string"==typeof s.unixPermissions&&(s.unixPermissions=parseInt(s.unixPermissions,8)),s.unixPermissions&&16384&s.unixPermissions&&(s.dir=!0),s.dosPermissions&&16&s.dosPermissions&&(s.dir=!0),s.dir&&(t=y(t)),s.createFolders&&(n=p(t))&&g.call(this,n,!0);var f="string"===i&&!1===s.binary&&!1===s.base64;r&&void 0!==r.binary||(s.binary=!f),(e instanceof c&&0===e.uncompressedSize||s.dir||!e||0===e.length)&&(s.base64=!1,s.binary=!0,e="",s.compression="STORE",i="string");var m=null;m=e instanceof c||e instanceof a?e:h.isNode&&h.isStream(e)?new d(t,e):o.prepareContent(t,e,s.binary,s.optimizedBinaryString,s.base64);var b=new l(t,m,s);this.files[t]=b;}var i=t("./utf8"),o=t("./utils"),a=t("./stream/GenericWorker"),s=t("./stream/StreamHelper"),u=t("./defaults"),c=t("./compressedObject"),l=t("./zipObject"),f=t("./generate"),h=t("./nodejsUtils"),d=t("./nodejs/NodejsStreamInputAdapter"),p=function(t){"/"===t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return 0<e?t.substring(0,e):""},y=function(t){return "/"!==t.slice(-1)&&(t+="/"),t},g=function(t,e){return e=void 0!==e?e:u.createFolders,t=y(t),this.files[t]||n.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]};function m(t){return "[object RegExp]"===Object.prototype.toString.call(t)}var b={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(t){var e,r,n;for(e in this.files)n=this.files[e],(r=e.slice(this.root.length,e.length))&&e.slice(0,this.root.length)===this.root&&t(r,n);},filter:function(t){var e=[];return this.forEach((function(r,n){t(r,n)&&e.push(n);})),e},file:function(t,e,r){if(1!==arguments.length)return t=this.root+t,n.call(this,t,e,r),this;if(m(t)){var i=t;return this.filter((function(t,e){return !e.dir&&i.test(t)}))}var o=this.files[this.root+t];return o&&!o.dir?o:null},folder:function(t){if(!t)return this;if(m(t))return this.filter((function(e,r){return r.dir&&t.test(e)}));var e=this.root+t,r=g.call(this,e),n=this.clone();return n.root=r.name,n},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!==t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var r=this.filter((function(e,r){return r.name.slice(0,t.length)===t})),n=0;n<r.length;n++)delete this.files[r[n].name];return this},generate:function(t){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(t){var e,r={};try{if((r=o.extend(t||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=r.type.toLowerCase(),r.compression=r.compression.toUpperCase(),"binarystring"===r.type&&(r.type="string"),!r.type)throw new Error("No output type specified.");o.checkSupport(r.type),"darwin"!==r.platform&&"freebsd"!==r.platform&&"linux"!==r.platform&&"sunos"!==r.platform||(r.platform="UNIX"),"win32"===r.platform&&(r.platform="DOS");var n=r.comment||this.comment||"";e=f.generateWorker(this,r,n);}catch(t){(e=new a("error")).error(t);}return new s(e,r.type||"string",r.mimeType)},generateAsync:function(t,e){return this.generateInternalStream(t).accumulate(e)},generateNodeStream:function(t,e){return (t=t||{}).type||(t.type="nodebuffer"),this.generateInternalStream(t).toNodejsStream(e)}};e.exports=b;},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,e,r){e.exports=t("stream");},{stream:void 0}],17:[function(t,e,r){var n=t("./DataReader");function i(t){n.call(this,t);for(var e=0;e<this.data.length;e++)t[e]=255&t[e];}t("../utils").inherits(i,n),i.prototype.byteAt=function(t){return this.data[this.zero+t]},i.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),r=t.charCodeAt(1),n=t.charCodeAt(2),i=t.charCodeAt(3),o=this.length-4;0<=o;--o)if(this.data[o]===e&&this.data[o+1]===r&&this.data[o+2]===n&&this.data[o+3]===i)return o-this.zero;return -1},i.prototype.readAndCheckSignature=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1),n=t.charCodeAt(2),i=t.charCodeAt(3),o=this.readData(4);return e===o[0]&&r===o[1]&&n===o[2]&&i===o[3]},i.prototype.readData=function(t){if(this.checkOffset(t),0===t)return [];var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=i;},{"../utils":32,"./DataReader":18}],18:[function(t,e,r){var n=t("../utils");function i(t){this.data=t,this.length=t.length,this.index=0,this.zero=0;}i.prototype={checkOffset:function(t){this.checkIndex(this.index+t);},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t;},skip:function(t){this.setIndex(this.index+t);},byteAt:function(t){},readInt:function(t){var e,r=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)r=(r<<8)+this.byteAt(e);return this.index+=t,r},readString:function(t){return n.transformTo("string",this.readData(t))},readData:function(t){},lastIndexOfSignature:function(t){},readAndCheckSignature:function(t){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}},e.exports=i;},{"../utils":32}],19:[function(t,e,r){var n=t("./Uint8ArrayReader");function i(t){n.call(this,t);}t("../utils").inherits(i,n),i.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=i;},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,e,r){var n=t("./DataReader");function i(t){n.call(this,t);}t("../utils").inherits(i,n),i.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},i.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},i.prototype.readAndCheckSignature=function(t){return t===this.readData(4)},i.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=i;},{"../utils":32,"./DataReader":18}],21:[function(t,e,r){var n=t("./ArrayReader");function i(t){n.call(this,t);}t("../utils").inherits(i,n),i.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=i;},{"../utils":32,"./ArrayReader":17}],22:[function(t,e,r){var n=t("../utils"),i=t("../support"),o=t("./ArrayReader"),a=t("./StringReader"),s=t("./NodeBufferReader"),u=t("./Uint8ArrayReader");e.exports=function(t){var e=n.getTypeOf(t);return n.checkSupport(e),"string"!==e||i.uint8array?"nodebuffer"===e?new s(t):i.uint8array?new u(n.transformTo("uint8array",t)):new o(n.transformTo("array",t)):new a(t)};},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,e,r){r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\b";},{}],24:[function(t,e,r){var n=t("./GenericWorker"),i=t("../utils");function o(t){n.call(this,"ConvertWorker to "+t),this.destType=t;}i.inherits(o,n),o.prototype.processChunk=function(t){this.push({data:i.transformTo(this.destType,t.data),meta:t.meta});},e.exports=o;},{"../utils":32,"./GenericWorker":28}],25:[function(t,e,r){var n=t("./GenericWorker"),i=t("../crc32");function o(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0);}t("../utils").inherits(o,n),o.prototype.processChunk=function(t){this.streamInfo.crc32=i(t.data,this.streamInfo.crc32||0),this.push(t);},e.exports=o;},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,e,r){var n=t("../utils"),i=t("./GenericWorker");function o(t){i.call(this,"DataLengthProbe for "+t),this.propName=t,this.withStreamInfo(t,0);}n.inherits(o,i),o.prototype.processChunk=function(t){if(t){var e=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=e+t.data.length;}i.prototype.processChunk.call(this,t);},e.exports=o;},{"../utils":32,"./GenericWorker":28}],27:[function(t,e,r){var n=t("../utils"),i=t("./GenericWorker");function o(t){i.call(this,"DataWorker");var e=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,t.then((function(t){e.dataIsReady=!0,e.data=t,e.max=t&&t.length||0,e.type=n.getTypeOf(t),e.isPaused||e._tickAndRepeat();}),(function(t){e.error(t);}));}n.inherits(o,i),o.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null;},o.prototype.resume=function(){return !!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0));},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return !1;var t=null,e=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":t=this.data.substring(this.index,e);break;case"uint8array":t=this.data.subarray(this.index,e);break;case"array":case"nodebuffer":t=this.data.slice(this.index,e);}return this.index=e,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=o;},{"../utils":32,"./GenericWorker":28}],28:[function(t,e,r){function n(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null;}n.prototype={push:function(t){this.emit("data",t);},end:function(){if(this.isFinished)return !1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0;}catch(t){this.emit("error",t);}return !0},error:function(t){return !this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,e){return this._listeners[t].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[];},emit:function(t,e){if(this._listeners[t])for(var r=0;r<this._listeners[t].length;r++)this._listeners[t][r].call(this,e);},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var e=this;return t.on("data",(function(t){e.processChunk(t);})),t.on("end",(function(){e.end();})),t.on("error",(function(t){e.error(t);})),this},pause:function(){return !this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return !1;var t=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},flush:function(){},processChunk:function(t){this.push(t);},withStreamInfo:function(t,e){return this.extraStreamInfo[t]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(t)&&(this.streamInfo[t]=this.extraStreamInfo[t]);},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock();},toString:function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t}},e.exports=n;},{}],29:[function(t,e,r){var n=t("../utils"),i=t("./ConvertWorker"),o=t("./GenericWorker"),a=t("../base64"),s=t("../support"),u=t("../external"),c=null;if(s.nodestream)try{c=t("../nodejs/NodejsStreamOutputAdapter");}catch(t){}function l(t,e){return new u.Promise((function(r,i){var o=[],s=t._internalType,u=t._outputType,c=t._mimeType;t.on("data",(function(t,r){o.push(t),e&&e(r);})).on("error",(function(t){o=[],i(t);})).on("end",(function(){try{var t=function(t,e,r){switch(t){case"blob":return n.newBlob(n.transformTo("arraybuffer",e),r);case"base64":return a.encode(e);default:return n.transformTo(t,e)}}(u,function(t,e){var r,n=0,i=null,o=0;for(r=0;r<e.length;r++)o+=e[r].length;switch(t){case"string":return e.join("");case"array":return Array.prototype.concat.apply([],e);case"uint8array":for(i=new Uint8Array(o),r=0;r<e.length;r++)i.set(e[r],n),n+=e[r].length;return i;case"nodebuffer":return ei.concat(e);default:throw new Error("concat : unsupported type '"+t+"'")}}(s,o),c);r(t);}catch(t){i(t);}o=[];})).resume();}))}function f(t,e,r){var a=e;switch(e){case"blob":case"arraybuffer":a="uint8array";break;case"base64":a="string";}try{this._internalType=a,this._outputType=e,this._mimeType=r,n.checkSupport(a),this._worker=t.pipe(new i(a)),t.lock();}catch(t){this._worker=new o("error"),this._worker.error(t);}}f.prototype={accumulate:function(t){return l(this,t)},on:function(t,e){var r=this;return "data"===t?this._worker.on(t,(function(t){e.call(r,t.data,t.meta);})):this._worker.on(t,(function(){n.delay(e,arguments,r);})),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(t){if(n.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:"nodebuffer"!==this._outputType},t)}},e.exports=f;},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,e,r){if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,r.nodebuffer=!0,r.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)r.blob=!1;else {var n=new ArrayBuffer(0);try{r.blob=0===new Blob([n],{type:"application/zip"}).size;}catch(t){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(n),r.blob=0===i.getBlob("application/zip").size;}catch(t){r.blob=!1;}}}try{r.nodestream=!!t("readable-stream").Readable;}catch(t){r.nodestream=!1;}},{"readable-stream":16}],31:[function(t,e,r){for(var n=t("./utils"),i=t("./support"),o=t("./nodejsUtils"),a=t("./stream/GenericWorker"),s=new Array(256),u=0;u<256;u++)s[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function c(){a.call(this,"utf-8 decode"),this.leftOver=null;}function l(){a.call(this,"utf-8 encode");}s[254]=s[254]=1,r.utf8encode=function(t){return i.nodebuffer?o.newBufferFrom(t,"utf-8"):function(t){var e,r,n,o,a,s=t.length,u=0;for(o=0;o<s;o++)55296==(64512&(r=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(n=t.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(n-56320),o++),u+=r<128?1:r<2048?2:r<65536?3:4;for(e=i.uint8array?new Uint8Array(u):new Array(u),o=a=0;a<u;o++)55296==(64512&(r=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(n=t.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(n-56320),o++),r<128?e[a++]=r:(r<2048?e[a++]=192|r>>>6:(r<65536?e[a++]=224|r>>>12:(e[a++]=240|r>>>18,e[a++]=128|r>>>12&63),e[a++]=128|r>>>6&63),e[a++]=128|63&r);return e}(t)},r.utf8decode=function(t){return i.nodebuffer?n.transformTo("nodebuffer",t).toString("utf-8"):function(t){var e,r,i,o,a=t.length,u=new Array(2*a);for(e=r=0;e<a;)if((i=t[e++])<128)u[r++]=i;else if(4<(o=s[i]))u[r++]=65533,e+=o-1;else {for(i&=2===o?31:3===o?15:7;1<o&&e<a;)i=i<<6|63&t[e++],o--;1<o?u[r++]=65533:i<65536?u[r++]=i:(i-=65536,u[r++]=55296|i>>10&1023,u[r++]=56320|1023&i);}return u.length!==r&&(u.subarray?u=u.subarray(0,r):u.length=r),n.applyFromCharCode(u)}(t=n.transformTo(i.uint8array?"uint8array":"array",t))},n.inherits(c,a),c.prototype.processChunk=function(t){var e=n.transformTo(i.uint8array?"uint8array":"array",t.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var o=e;(e=new Uint8Array(o.length+this.leftOver.length)).set(this.leftOver,0),e.set(o,this.leftOver.length);}else e=this.leftOver.concat(e);this.leftOver=null;}var a=function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;0<=r&&128==(192&t[r]);)r--;return r<0||0===r?e:r+s[t[r]]>e?r:e}(e),u=e;a!==e.length&&(i.uint8array?(u=e.subarray(0,a),this.leftOver=e.subarray(a,e.length)):(u=e.slice(0,a),this.leftOver=e.slice(a,e.length))),this.push({data:r.utf8decode(u),meta:t.meta});},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null);},r.Utf8DecodeWorker=c,n.inherits(l,a),l.prototype.processChunk=function(t){this.push({data:r.utf8encode(t.data),meta:t.meta});},r.Utf8EncodeWorker=l;},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,e,r){var n=t("./support"),i=t("./base64"),o=t("./nodejsUtils"),a=t("set-immediate-shim"),s=t("./external");function u(t){return t}function c(t,e){for(var r=0;r<t.length;++r)e[r]=255&t.charCodeAt(r);return e}r.newBlob=function(t,e){r.checkSupport("blob");try{return new Blob([t],{type:e})}catch(r){try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return n.append(t),n.getBlob(e)}catch(t){throw new Error("Bug : can't construct the Blob.")}}};var l={stringifyByChunk:function(t,e,r){var n=[],i=0,o=t.length;if(o<=r)return String.fromCharCode.apply(null,t);for(;i<o;)"array"===e||"nodebuffer"===e?n.push(String.fromCharCode.apply(null,t.slice(i,Math.min(i+r,o)))):n.push(String.fromCharCode.apply(null,t.subarray(i,Math.min(i+r,o)))),i+=r;return n.join("")},stringifyByChar:function(t){for(var e="",r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(t){return !1}}(),nodebuffer:function(){try{return n.nodebuffer&&1===String.fromCharCode.apply(null,o.allocBuffer(1)).length}catch(t){return !1}}()}};function f(t){var e=65536,n=r.getTypeOf(t),i=!0;if("uint8array"===n?i=l.applyCanBeUsed.uint8array:"nodebuffer"===n&&(i=l.applyCanBeUsed.nodebuffer),i)for(;1<e;)try{return l.stringifyByChunk(t,n,e)}catch(t){e=Math.floor(e/2);}return l.stringifyByChar(t)}function h(t,e){for(var r=0;r<t.length;r++)e[r]=t[r];return e}r.applyFromCharCode=f;var d={};d.string={string:u,array:function(t){return c(t,new Array(t.length))},arraybuffer:function(t){return d.string.uint8array(t).buffer},uint8array:function(t){return c(t,new Uint8Array(t.length))},nodebuffer:function(t){return c(t,o.allocBuffer(t.length))}},d.array={string:f,array:u,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return o.newBufferFrom(t)}},d.arraybuffer={string:function(t){return f(new Uint8Array(t))},array:function(t){return h(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:u,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return o.newBufferFrom(new Uint8Array(t))}},d.uint8array={string:f,array:function(t){return h(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:u,nodebuffer:function(t){return o.newBufferFrom(t)}},d.nodebuffer={string:f,array:function(t){return h(t,new Array(t.length))},arraybuffer:function(t){return d.nodebuffer.uint8array(t).buffer},uint8array:function(t){return h(t,new Uint8Array(t.length))},nodebuffer:u},r.transformTo=function(t,e){if(e=e||"",!t)return e;r.checkSupport(t);var n=r.getTypeOf(e);return d[n][t](e)},r.getTypeOf=function(t){return "string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":n.nodebuffer&&o.isBuffer(t)?"nodebuffer":n.uint8array&&t instanceof Uint8Array?"uint8array":n.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(t){if(!n[t.toLowerCase()])throw new Error(t+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(t){var e,r,n="";for(r=0;r<(t||"").length;r++)n+="\\x"+((e=t.charCodeAt(r))<16?"0":"")+e.toString(16).toUpperCase();return n},r.delay=function(t,e,r){a((function(){t.apply(r||null,e||[]);}));},r.inherits=function(t,e){function r(){}r.prototype=e.prototype,t.prototype=new r;},r.extend=function(){var t,e,r={};for(t=0;t<arguments.length;t++)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&void 0===r[e]&&(r[e]=arguments[t][e]);return r},r.prepareContent=function(t,e,o,a,u){return s.Promise.resolve(e).then((function(t){return n.blob&&(t instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(t)))&&"undefined"!=typeof FileReader?new s.Promise((function(e,r){var n=new FileReader;n.onload=function(t){e(t.target.result);},n.onerror=function(t){r(t.target.error);},n.readAsArrayBuffer(t);})):t})).then((function(e){var l=r.getTypeOf(e);return l?("arraybuffer"===l?e=r.transformTo("uint8array",e):"string"===l&&(u?e=i.decode(e):o&&!0!==a&&(e=function(t){return c(t,n.uint8array?new Uint8Array(t.length):new Array(t.length))}(e))),e):s.Promise.reject(new Error("Can't read the data of '"+t+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))};},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"set-immediate-shim":54}],33:[function(t,e,r){var n=t("./reader/readerFor"),i=t("./utils"),o=t("./signature"),a=t("./zipEntry"),s=(t("./utf8"),t("./support"));function u(t){this.files=[],this.loadOptions=t;}u.prototype={checkSignature:function(t){if(!this.reader.readAndCheckSignature(t)){this.reader.index-=4;var e=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(e)+", expected "+i.pretty(t)+")")}},isSignature:function(t,e){var r=this.reader.index;this.reader.setIndex(t);var n=this.reader.readString(4)===e;return this.reader.setIndex(r),n},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=s.uint8array?"uint8array":"array",r=i.transformTo(e,t);this.zipComment=this.loadOptions.decodeFileName(r);},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,r,n=this.zip64EndOfCentralSize-44;0<n;)t=this.reader.readInt(2),e=this.reader.readInt(4),r=this.reader.readData(e),this.zip64ExtensibleData[t]={id:t,length:e,value:r};},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes();},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(t=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(t<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(t);var e=t;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral();}var r=this.centralDirOffset+this.centralDirSize;this.zip64&&(r+=20,r+=12+this.zip64EndOfCentralSize);var n=e-r;if(0<n)this.isSignature(e,o.CENTRAL_FILE_HEADER)||(this.reader.zero=n);else if(n<0)throw new Error("Corrupted zip: missing "+Math.abs(n)+" bytes.")},prepareReader:function(t){this.reader=n(t);},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles();}},e.exports=u;},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(t,e,r){var n=t("./reader/readerFor"),i=t("./utils"),o=t("./compressedObject"),a=t("./crc32"),s=t("./utf8"),u=t("./compressions"),c=t("./support");function l(t,e){this.options=t,this.loadOptions=e;}l.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(t){var e,r;if(t.skip(22),this.fileNameLength=t.readInt(2),r=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(r),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(e=function(t){for(var e in u)if(u.hasOwnProperty(e)&&u[e].magic===t)return u[e];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,e,t.readData(this.compressedSize));},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var e=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");t.skip(e),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength);},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==t&&(this.dosPermissions=63&this.externalFileAttributes),3==t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0);},parseZIP64ExtraField:function(t){if(this.extraFields[1]){var e=n(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4));}},readExtraFields:function(t){var e,r,n,i=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index+4<i;)e=t.readInt(2),r=t.readInt(2),n=t.readData(r),this.extraFields[e]={id:e,length:r,value:n};t.setIndex(i);},handleUTF8:function(){var t=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=s.utf8decode(this.fileName),this.fileCommentStr=s.utf8decode(this.fileComment);else {var e=this.findExtraFieldUnicodePath();if(null!==e)this.fileNameStr=e;else {var r=i.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r);}var n=this.findExtraFieldUnicodeComment();if(null!==n)this.fileCommentStr=n;else {var o=i.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(o);}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=n(t.value);return 1!==e.readInt(1)||a(this.fileName)!==e.readInt(4)?null:s.utf8decode(e.readData(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=n(t.value);return 1!==e.readInt(1)||a(this.fileComment)!==e.readInt(4)?null:s.utf8decode(e.readData(t.length-5))}return null}},e.exports=l;},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,e,r){function n(t,e,r){this.name=t,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=e,this._dataBinary=r.binary,this.options={compression:r.compression,compressionOptions:r.compressionOptions};}var i=t("./stream/StreamHelper"),o=t("./stream/DataWorker"),a=t("./utf8"),s=t("./compressedObject"),u=t("./stream/GenericWorker");n.prototype={internalStream:function(t){var e=null,r="string";try{if(!t)throw new Error("No output type specified.");var n="string"===(r=t.toLowerCase())||"text"===r;"binarystring"!==r&&"text"!==r||(r="string"),e=this._decompressWorker();var o=!this._dataBinary;o&&!n&&(e=e.pipe(new a.Utf8EncodeWorker)),!o&&n&&(e=e.pipe(new a.Utf8DecodeWorker));}catch(t){(e=new u("error")).error(t);}return new i(e,r,"")},async:function(t,e){return this.internalStream(t).accumulate(e)},nodeStream:function(t,e){return this.internalStream(t||"nodebuffer").toNodejsStream(e)},_compressWorker:function(t,e){if(this._data instanceof s&&this._data.compression.magic===t.magic)return this._data.getCompressedWorker();var r=this._decompressWorker();return this._dataBinary||(r=r.pipe(new a.Utf8EncodeWorker)),s.createWorkerFrom(r,t,e)},_decompressWorker:function(){return this._data instanceof s?this._data.getContentWorker():this._data instanceof u?this._data:new o(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],l=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},f=0;f<c.length;f++)n.prototype[c[f]]=l;e.exports=n;},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,e,r){(function(t){var r,n,i=t.MutationObserver||t.WebKitMutationObserver;if(i){var o=0,a=new i(l),s=t.document.createTextNode("");a.observe(s,{characterData:!0}),r=function(){s.data=o=++o%2;};}else if(t.setImmediate||void 0===t.MessageChannel)r="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){l(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null;},t.document.documentElement.appendChild(e);}:function(){setTimeout(l,0);};else {var u=new t.MessageChannel;u.port1.onmessage=l,r=function(){u.port2.postMessage(0);};}var c=[];function l(){var t,e;n=!0;for(var r=c.length;r;){for(e=c,c=[],t=-1;++t<r;)e[t]();r=c.length;}n=!1;}e.exports=function(t){1!==c.push(t)||n||r();};}).call(this,void 0!==yt$1?yt$1:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});},{}],37:[function(t,e,r){var n=t("immediate");function i(){}var o={},a=["REJECTED"],s=["FULFILLED"],u=["PENDING"];function c(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,t!==i&&d(this,t);}function l(t,e,r){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected);}function f(t,e,r){n((function(){var n;try{n=e(r);}catch(n){return o.reject(t,n)}n===t?o.reject(t,new TypeError("Cannot resolve promise with itself")):o.resolve(t,n);}));}function h(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments);}}function d(t,e){var r=!1;function n(e){r||(r=!0,o.reject(t,e));}function i(e){r||(r=!0,o.resolve(t,e));}var a=p((function(){e(i,n);}));"error"===a.status&&n(a.value);}function p(t,e){var r={};try{r.value=t(e),r.status="success";}catch(t){r.status="error",r.value=t;}return r}(e.exports=c).prototype.finally=function(t){if("function"!=typeof t)return this;var e=this.constructor;return this.then((function(r){return e.resolve(t()).then((function(){return r}))}),(function(r){return e.resolve(t()).then((function(){throw r}))}))},c.prototype.catch=function(t){return this.then(null,t)},c.prototype.then=function(t,e){if("function"!=typeof t&&this.state===s||"function"!=typeof e&&this.state===a)return this;var r=new this.constructor(i);return this.state!==u?f(r,this.state===s?t:e,this.outcome):this.queue.push(new l(r,t,e)),r},l.prototype.callFulfilled=function(t){o.resolve(this.promise,t);},l.prototype.otherCallFulfilled=function(t){f(this.promise,this.onFulfilled,t);},l.prototype.callRejected=function(t){o.reject(this.promise,t);},l.prototype.otherCallRejected=function(t){f(this.promise,this.onRejected,t);},o.resolve=function(t,e){var r=p(h,e);if("error"===r.status)return o.reject(t,r.value);var n=r.value;if(n)d(t,n);else {t.state=s,t.outcome=e;for(var i=-1,a=t.queue.length;++i<a;)t.queue[i].callFulfilled(e);}return t},o.reject=function(t,e){t.state=a,t.outcome=e;for(var r=-1,n=t.queue.length;++r<n;)t.queue[r].callRejected(e);return t},c.resolve=function(t){return t instanceof this?t:o.resolve(new this(i),t)},c.reject=function(t){var e=new this(i);return o.reject(e,t)},c.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var r=t.length,n=!1;if(!r)return this.resolve([]);for(var a=new Array(r),s=0,u=-1,c=new this(i);++u<r;)l(t[u],u);return c;function l(t,i){e.resolve(t).then((function(t){a[i]=t,++s!==r||n||(n=!0,o.resolve(c,a));}),(function(t){n||(n=!0,o.reject(c,t));}));}},c.race=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var r=t.length,n=!1;if(!r)return this.resolve([]);for(var a,s=-1,u=new this(i);++s<r;)a=t[s],e.resolve(a).then((function(t){n||(n=!0,o.resolve(u,t));}),(function(t){n||(n=!0,o.reject(u,t));}));return u};},{immediate:36}],38:[function(t,e,r){var n={};(0, t("./lib/utils/common").assign)(n,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),e.exports=n;},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,e,r){var n=t("./zlib/deflate"),i=t("./utils/common"),o=t("./utils/strings"),a=t("./zlib/messages"),s=t("./zlib/zstream"),u=Object.prototype.toString,c=0,l=-1,f=0,h=8;function d(t){if(!(this instanceof d))return new d(t);this.options=i.assign({level:l,method:h,chunkSize:16384,windowBits:15,memLevel:8,strategy:f,to:""},t||{});var e=this.options;e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var r=n.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==c)throw new Error(a[r]);if(e.header&&n.deflateSetHeader(this.strm,e.header),e.dictionary){var p;if(p="string"==typeof e.dictionary?o.string2buf(e.dictionary):"[object ArrayBuffer]"===u.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(r=n.deflateSetDictionary(this.strm,p))!==c)throw new Error(a[r]);this._dict_set=!0;}}function p(t,e){var r=new d(e);if(r.push(t,!0),r.err)throw r.msg||a[r.err];return r.result}d.prototype.push=function(t,e){var r,a,s=this.strm,l=this.options.chunkSize;if(this.ended)return !1;a=e===~~e?e:!0===e?4:0,"string"==typeof t?s.input=o.string2buf(t):"[object ArrayBuffer]"===u.call(t)?s.input=new Uint8Array(t):s.input=t,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new i.Buf8(l),s.next_out=0,s.avail_out=l),1!==(r=n.deflate(s,a))&&r!==c)return this.onEnd(r),!(this.ended=!0);0!==s.avail_out&&(0!==s.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(o.buf2binstring(i.shrinkBuf(s.output,s.next_out))):this.onData(i.shrinkBuf(s.output,s.next_out)));}while((0<s.avail_in||0===s.avail_out)&&1!==r);return 4===a?(r=n.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===c):2!==a||(this.onEnd(c),!(s.avail_out=0))},d.prototype.onData=function(t){this.chunks.push(t);},d.prototype.onEnd=function(t){t===c&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg;},r.Deflate=d,r.deflate=p,r.deflateRaw=function(t,e){return (e=e||{}).raw=!0,p(t,e)},r.gzip=function(t,e){return (e=e||{}).gzip=!0,p(t,e)};},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,e,r){var n=t("./zlib/inflate"),i=t("./utils/common"),o=t("./utils/strings"),a=t("./zlib/constants"),s=t("./zlib/messages"),u=t("./zlib/zstream"),c=t("./zlib/gzheader"),l=Object.prototype.toString;function f(t){if(!(this instanceof f))return new f(t);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&0<=e.windowBits&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(0<=e.windowBits&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),15<e.windowBits&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var r=n.inflateInit2(this.strm,e.windowBits);if(r!==a.Z_OK)throw new Error(s[r]);this.header=new c,n.inflateGetHeader(this.strm,this.header);}function h(t,e){var r=new f(e);if(r.push(t,!0),r.err)throw r.msg||s[r.err];return r.result}f.prototype.push=function(t,e){var r,s,u,c,f,h,d=this.strm,p=this.options.chunkSize,y=this.options.dictionary,g=!1;if(this.ended)return !1;s=e===~~e?e:!0===e?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof t?d.input=o.binstring2buf(t):"[object ArrayBuffer]"===l.call(t)?d.input=new Uint8Array(t):d.input=t,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new i.Buf8(p),d.next_out=0,d.avail_out=p),(r=n.inflate(d,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&y&&(h="string"==typeof y?o.string2buf(y):"[object ArrayBuffer]"===l.call(y)?new Uint8Array(y):y,r=n.inflateSetDictionary(this.strm,h)),r===a.Z_BUF_ERROR&&!0===g&&(r=a.Z_OK,g=!1),r!==a.Z_STREAM_END&&r!==a.Z_OK)return this.onEnd(r),!(this.ended=!0);d.next_out&&(0!==d.avail_out&&r!==a.Z_STREAM_END&&(0!==d.avail_in||s!==a.Z_FINISH&&s!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(u=o.utf8border(d.output,d.next_out),c=d.next_out-u,f=o.buf2string(d.output,u),d.next_out=c,d.avail_out=p-c,c&&i.arraySet(d.output,d.output,u,c,0),this.onData(f)):this.onData(i.shrinkBuf(d.output,d.next_out)))),0===d.avail_in&&0===d.avail_out&&(g=!0);}while((0<d.avail_in||0===d.avail_out)&&r!==a.Z_STREAM_END);return r===a.Z_STREAM_END&&(s=a.Z_FINISH),s===a.Z_FINISH?(r=n.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===a.Z_OK):s!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),!(d.avail_out=0))},f.prototype.onData=function(t){this.chunks.push(t);},f.prototype.onEnd=function(t){t===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg;},r.Inflate=f,r.inflate=h,r.inflateRaw=function(t,e){return (e=e||{}).raw=!0,h(t,e)},r.ungzip=h;},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,e,r){var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;r.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var r=e.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n]);}}return t},r.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var i={arraySet:function(t,e,r,n,i){if(e.subarray&&t.subarray)t.set(e.subarray(r,r+n),i);else for(var o=0;o<n;o++)t[i+o]=e[r+o];},flattenChunks:function(t){var e,r,n,i,o,a;for(e=n=0,r=t.length;e<r;e++)n+=t[e].length;for(a=new Uint8Array(n),e=i=0,r=t.length;e<r;e++)o=t[e],a.set(o,i),i+=o.length;return a}},o={arraySet:function(t,e,r,n,i){for(var o=0;o<n;o++)t[i+o]=e[r+o];},flattenChunks:function(t){return [].concat.apply([],t)}};r.setTyped=function(t){t?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,i)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,o));},r.setTyped(n);},{}],42:[function(t,e,r){var n=t("./common"),i=!0,o=!0;try{String.fromCharCode.apply(null,[0]);}catch(t){i=!1;}try{String.fromCharCode.apply(null,new Uint8Array(1));}catch(t){o=!1;}for(var a=new n.Buf8(256),s=0;s<256;s++)a[s]=252<=s?6:248<=s?5:240<=s?4:224<=s?3:192<=s?2:1;function u(t,e){if(e<65537&&(t.subarray&&o||!t.subarray&&i))return String.fromCharCode.apply(null,n.shrinkBuf(t,e));for(var r="",a=0;a<e;a++)r+=String.fromCharCode(t[a]);return r}a[254]=a[254]=1,r.string2buf=function(t){var e,r,i,o,a,s=t.length,u=0;for(o=0;o<s;o++)55296==(64512&(r=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=t.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(i-56320),o++),u+=r<128?1:r<2048?2:r<65536?3:4;for(e=new n.Buf8(u),o=a=0;a<u;o++)55296==(64512&(r=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=t.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(i-56320),o++),r<128?e[a++]=r:(r<2048?e[a++]=192|r>>>6:(r<65536?e[a++]=224|r>>>12:(e[a++]=240|r>>>18,e[a++]=128|r>>>12&63),e[a++]=128|r>>>6&63),e[a++]=128|63&r);return e},r.buf2binstring=function(t){return u(t,t.length)},r.binstring2buf=function(t){for(var e=new n.Buf8(t.length),r=0,i=e.length;r<i;r++)e[r]=t.charCodeAt(r);return e},r.buf2string=function(t,e){var r,n,i,o,s=e||t.length,c=new Array(2*s);for(r=n=0;r<s;)if((i=t[r++])<128)c[n++]=i;else if(4<(o=a[i]))c[n++]=65533,r+=o-1;else {for(i&=2===o?31:3===o?15:7;1<o&&r<s;)i=i<<6|63&t[r++],o--;1<o?c[n++]=65533:i<65536?c[n++]=i:(i-=65536,c[n++]=55296|i>>10&1023,c[n++]=56320|1023&i);}return u(c,n)},r.utf8border=function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;0<=r&&128==(192&t[r]);)r--;return r<0||0===r?e:r+a[t[r]]>e?r:e};},{"./common":41}],43:[function(t,e,r){e.exports=function(t,e,r,n){for(var i=65535&t|0,o=t>>>16&65535|0,a=0;0!==r;){for(r-=a=2e3<r?2e3:r;o=o+(i=i+e[n++]|0)|0,--a;);i%=65521,o%=65521;}return i|o<<16|0};},{}],44:[function(t,e,r){e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};},{}],45:[function(t,e,r){var n=function(){for(var t,e=[],r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t;}return e}();e.exports=function(t,e,r,i){var o=n,a=i+r;t^=-1;for(var s=i;s<a;s++)t=t>>>8^o[255&(t^e[s])];return -1^t};},{}],46:[function(t,e,r){var n,i=t("../utils/common"),o=t("./trees"),a=t("./adler32"),s=t("./crc32"),u=t("./messages"),c=0,l=4,f=0,h=-2,d=-1,p=4,y=2,g=8,m=9,b=286,v=30,w=19,_=2*b+1,S=15,E=3,I=258,A=I+E+1,k=42,D=113,x=1,T=2,P=3,O=4;function R(t,e){return t.msg=u[e],e}function C(t){return (t<<1)-(4<t?9:0)}function M(t){for(var e=t.length;0<=--e;)t[e]=0;}function N(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(i.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0));}function j(t,e){o._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,N(t.strm);}function B(t,e){t.pending_buf[t.pending++]=e;}function L(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e;}function F(t,e){var r,n,i=t.max_chain_length,o=t.strstart,a=t.prev_length,s=t.nice_match,u=t.strstart>t.w_size-A?t.strstart-(t.w_size-A):0,c=t.window,l=t.w_mask,f=t.prev,h=t.strstart+I,d=c[o+a-1],p=c[o+a];t.prev_length>=t.good_match&&(i>>=2),s>t.lookahead&&(s=t.lookahead);do{if(c[(r=e)+a]===p&&c[r+a-1]===d&&c[r]===c[o]&&c[++r]===c[o+1]){o+=2,r++;do{}while(c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&o<h);if(n=I-(h-o),o=h-I,a<n){if(t.match_start=e,s<=(a=n))break;d=c[o+a-1],p=c[o+a];}}}while((e=f[e&l])>u&&0!=--i);return a<=t.lookahead?a:t.lookahead}function U(t){var e,r,n,o,u,c,l,f,h,d,p=t.w_size;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=p+(p-A)){for(i.arraySet(t.window,t.window,p,p,0),t.match_start-=p,t.strstart-=p,t.block_start-=p,e=r=t.hash_size;n=t.head[--e],t.head[e]=p<=n?n-p:0,--r;);for(e=r=p;n=t.prev[--e],t.prev[e]=p<=n?n-p:0,--r;);o+=p;}if(0===t.strm.avail_in)break;if(c=t.strm,l=t.window,f=t.strstart+t.lookahead,d=void 0,(h=o)<(d=c.avail_in)&&(d=h),r=0===d?0:(c.avail_in-=d,i.arraySet(l,c.input,c.next_in,d,f),1===c.state.wrap?c.adler=a(c.adler,l,d,f):2===c.state.wrap&&(c.adler=s(c.adler,l,d,f)),c.next_in+=d,c.total_in+=d,d),t.lookahead+=r,t.lookahead+t.insert>=E)for(u=t.strstart-t.insert,t.ins_h=t.window[u],t.ins_h=(t.ins_h<<t.hash_shift^t.window[u+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[u+E-1])&t.hash_mask,t.prev[u&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=u,u++,t.insert--,!(t.lookahead+t.insert<E)););}while(t.lookahead<A&&0!==t.strm.avail_in)}function z(t,e){for(var r,n;;){if(t.lookahead<A){if(U(t),t.lookahead<A&&e===c)return x;if(0===t.lookahead)break}if(r=0,t.lookahead>=E&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+E-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-A&&(t.match_length=F(t,r)),t.match_length>=E)if(n=o._tr_tally(t,t.strstart-t.match_start,t.match_length-E),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=E){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+E-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++;}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(j(t,!1),0===t.strm.avail_out))return x}return t.insert=t.strstart<E-1?t.strstart:E-1,e===l?(j(t,!0),0===t.strm.avail_out?P:O):t.last_lit&&(j(t,!1),0===t.strm.avail_out)?x:T}function K(t,e){for(var r,n,i;;){if(t.lookahead<A){if(U(t),t.lookahead<A&&e===c)return x;if(0===t.lookahead)break}if(r=0,t.lookahead>=E&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+E-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=E-1,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-A&&(t.match_length=F(t,r),t.match_length<=5&&(1===t.strategy||t.match_length===E&&4096<t.strstart-t.match_start)&&(t.match_length=E-1)),t.prev_length>=E&&t.match_length<=t.prev_length){for(i=t.strstart+t.lookahead-E,n=o._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-E),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+E-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=E-1,t.strstart++,n&&(j(t,!1),0===t.strm.avail_out))return x}else if(t.match_available){if((n=o._tr_tally(t,0,t.window[t.strstart-1]))&&j(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return x}else t.match_available=1,t.strstart++,t.lookahead--;}return t.match_available&&(n=o._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<E-1?t.strstart:E-1,e===l?(j(t,!0),0===t.strm.avail_out?P:O):t.last_lit&&(j(t,!1),0===t.strm.avail_out)?x:T}function q(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i;}function H(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=g,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*_),this.dyn_dtree=new i.Buf16(2*(2*v+1)),this.bl_tree=new i.Buf16(2*(2*w+1)),M(this.dyn_ltree),M(this.dyn_dtree),M(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(S+1),this.heap=new i.Buf16(2*b+1),M(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*b+1),M(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0;}function V(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=y,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?k:D,t.adler=2===e.wrap?0:1,e.last_flush=c,o._tr_init(e),f):R(t,h)}function W(t){var e=V(t);return e===f&&function(t){t.window_size=2*t.w_size,M(t.head),t.max_lazy_match=n[t.level].max_lazy,t.good_match=n[t.level].good_length,t.nice_match=n[t.level].nice_length,t.max_chain_length=n[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=E-1,t.match_available=0,t.ins_h=0;}(t.state),e}function J(t,e,r,n,o,a){if(!t)return h;var s=1;if(e===d&&(e=6),n<0?(s=0,n=-n):15<n&&(s=2,n-=16),o<1||m<o||r!==g||n<8||15<n||e<0||9<e||a<0||p<a)return R(t,h);8===n&&(n=9);var u=new H;return (t.state=u).strm=t,u.wrap=s,u.gzhead=null,u.w_bits=n,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=o+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+E-1)/E),u.window=new i.Buf8(2*u.w_size),u.head=new i.Buf16(u.hash_size),u.prev=new i.Buf16(u.w_size),u.lit_bufsize=1<<o+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new i.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=e,u.strategy=a,u.method=r,W(t)}n=[new q(0,0,0,0,(function(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(U(t),0===t.lookahead&&e===c)return x;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+r;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,j(t,!1),0===t.strm.avail_out))return x;if(t.strstart-t.block_start>=t.w_size-A&&(j(t,!1),0===t.strm.avail_out))return x}return t.insert=0,e===l?(j(t,!0),0===t.strm.avail_out?P:O):(t.strstart>t.block_start&&(j(t,!1),t.strm.avail_out),x)})),new q(4,4,8,4,z),new q(4,5,16,8,z),new q(4,6,32,32,z),new q(4,4,16,16,K),new q(8,16,32,32,K),new q(8,16,128,128,K),new q(8,32,128,256,K),new q(32,128,258,1024,K),new q(32,258,258,4096,K)],r.deflateInit=function(t,e){return J(t,e,g,15,8,0)},r.deflateInit2=J,r.deflateReset=W,r.deflateResetKeep=V,r.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?h:(t.state.gzhead=e,f):h},r.deflate=function(t,e){var r,i,a,u;if(!t||!t.state||5<e||e<0)return t?R(t,h):h;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||666===i.status&&e!==l)return R(t,0===t.avail_out?-5:h);if(i.strm=t,r=i.last_flush,i.last_flush=e,i.status===k)if(2===i.wrap)t.adler=0,B(i,31),B(i,139),B(i,8),i.gzhead?(B(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),B(i,255&i.gzhead.time),B(i,i.gzhead.time>>8&255),B(i,i.gzhead.time>>16&255),B(i,i.gzhead.time>>24&255),B(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),B(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(B(i,255&i.gzhead.extra.length),B(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=s(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(B(i,0),B(i,0),B(i,0),B(i,0),B(i,0),B(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),B(i,3),i.status=D);else {var d=g+(i.w_bits-8<<4)<<8;d|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(d|=32),d+=31-d%31,i.status=D,L(i,d),0!==i.strstart&&(L(i,t.adler>>>16),L(i,65535&t.adler)),t.adler=1;}if(69===i.status)if(i.gzhead.extra){for(a=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),N(t),a=i.pending,i.pending!==i.pending_buf_size));)B(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73);}else i.status=73;if(73===i.status)if(i.gzhead.name){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),N(t),a=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,B(i,u);}while(0!==u);i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),0===u&&(i.gzindex=0,i.status=91);}else i.status=91;if(91===i.status)if(i.gzhead.comment){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),N(t),a=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,B(i,u);}while(0!==u);i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),0===u&&(i.status=103);}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&N(t),i.pending+2<=i.pending_buf_size&&(B(i,255&t.adler),B(i,t.adler>>8&255),t.adler=0,i.status=D)):i.status=D),0!==i.pending){if(N(t),0===t.avail_out)return i.last_flush=-1,f}else if(0===t.avail_in&&C(e)<=C(r)&&e!==l)return R(t,-5);if(666===i.status&&0!==t.avail_in)return R(t,-5);if(0!==t.avail_in||0!==i.lookahead||e!==c&&666!==i.status){var p=2===i.strategy?function(t,e){for(var r;;){if(0===t.lookahead&&(U(t),0===t.lookahead)){if(e===c)return x;break}if(t.match_length=0,r=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(j(t,!1),0===t.strm.avail_out))return x}return t.insert=0,e===l?(j(t,!0),0===t.strm.avail_out?P:O):t.last_lit&&(j(t,!1),0===t.strm.avail_out)?x:T}(i,e):3===i.strategy?function(t,e){for(var r,n,i,a,s=t.window;;){if(t.lookahead<=I){if(U(t),t.lookahead<=I&&e===c)return x;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=E&&0<t.strstart&&(n=s[i=t.strstart-1])===s[++i]&&n===s[++i]&&n===s[++i]){a=t.strstart+I;do{}while(n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&i<a);t.match_length=I-(a-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead);}if(t.match_length>=E?(r=o._tr_tally(t,1,t.match_length-E),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(j(t,!1),0===t.strm.avail_out))return x}return t.insert=0,e===l?(j(t,!0),0===t.strm.avail_out?P:O):t.last_lit&&(j(t,!1),0===t.strm.avail_out)?x:T}(i,e):n[i.level].func(i,e);if(p!==P&&p!==O||(i.status=666),p===x||p===P)return 0===t.avail_out&&(i.last_flush=-1),f;if(p===T&&(1===e?o._tr_align(i):5!==e&&(o._tr_stored_block(i,0,0,!1),3===e&&(M(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),N(t),0===t.avail_out))return i.last_flush=-1,f}return e!==l?f:i.wrap<=0?1:(2===i.wrap?(B(i,255&t.adler),B(i,t.adler>>8&255),B(i,t.adler>>16&255),B(i,t.adler>>24&255),B(i,255&t.total_in),B(i,t.total_in>>8&255),B(i,t.total_in>>16&255),B(i,t.total_in>>24&255)):(L(i,t.adler>>>16),L(i,65535&t.adler)),N(t),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?f:1)},r.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==k&&69!==e&&73!==e&&91!==e&&103!==e&&e!==D&&666!==e?R(t,h):(t.state=null,e===D?R(t,-3):f):h},r.deflateSetDictionary=function(t,e){var r,n,o,s,u,c,l,d,p=e.length;if(!t||!t.state)return h;if(2===(s=(r=t.state).wrap)||1===s&&r.status!==k||r.lookahead)return h;for(1===s&&(t.adler=a(t.adler,e,p,0)),r.wrap=0,p>=r.w_size&&(0===s&&(M(r.head),r.strstart=0,r.block_start=0,r.insert=0),d=new i.Buf8(r.w_size),i.arraySet(d,e,p-r.w_size,r.w_size,0),e=d,p=r.w_size),u=t.avail_in,c=t.next_in,l=t.input,t.avail_in=p,t.next_in=0,t.input=e,U(r);r.lookahead>=E;){for(n=r.strstart,o=r.lookahead-(E-1);r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+E-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++,--o;);r.strstart=n,r.lookahead=E-1,U(r);}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=E-1,r.match_available=0,t.next_in=c,t.input=l,t.avail_in=u,r.wrap=s,f},r.deflateInfo="pako deflate (from Nodeca project)";},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,e,r){e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1;};},{}],48:[function(t,e,r){e.exports=function(t,e){var r,n,i,o,a,s,u,c,l,f,h,d,p,y,g,m,b,v,w,_,S,E,I,A,k;r=t.state,n=t.next_in,A=t.input,i=n+(t.avail_in-5),o=t.next_out,k=t.output,a=o-(e-t.avail_out),s=o+(t.avail_out-257),u=r.dmax,c=r.wsize,l=r.whave,f=r.wnext,h=r.window,d=r.hold,p=r.bits,y=r.lencode,g=r.distcode,m=(1<<r.lenbits)-1,b=(1<<r.distbits)-1;t:do{p<15&&(d+=A[n++]<<p,p+=8,d+=A[n++]<<p,p+=8),v=y[d&m];e:for(;;){if(d>>>=w=v>>>24,p-=w,0==(w=v>>>16&255))k[o++]=65535&v;else {if(!(16&w)){if(0==(64&w)){v=y[(65535&v)+(d&(1<<w)-1)];continue e}if(32&w){r.mode=12;break t}t.msg="invalid literal/length code",r.mode=30;break t}_=65535&v,(w&=15)&&(p<w&&(d+=A[n++]<<p,p+=8),_+=d&(1<<w)-1,d>>>=w,p-=w),p<15&&(d+=A[n++]<<p,p+=8,d+=A[n++]<<p,p+=8),v=g[d&b];r:for(;;){if(d>>>=w=v>>>24,p-=w,!(16&(w=v>>>16&255))){if(0==(64&w)){v=g[(65535&v)+(d&(1<<w)-1)];continue r}t.msg="invalid distance code",r.mode=30;break t}if(S=65535&v,p<(w&=15)&&(d+=A[n++]<<p,(p+=8)<w&&(d+=A[n++]<<p,p+=8)),u<(S+=d&(1<<w)-1)){t.msg="invalid distance too far back",r.mode=30;break t}if(d>>>=w,p-=w,(w=o-a)<S){if(l<(w=S-w)&&r.sane){t.msg="invalid distance too far back",r.mode=30;break t}if(I=h,(E=0)===f){if(E+=c-w,w<_){for(_-=w;k[o++]=h[E++],--w;);E=o-S,I=k;}}else if(f<w){if(E+=c+f-w,(w-=f)<_){for(_-=w;k[o++]=h[E++],--w;);if(E=0,f<_){for(_-=w=f;k[o++]=h[E++],--w;);E=o-S,I=k;}}}else if(E+=f-w,w<_){for(_-=w;k[o++]=h[E++],--w;);E=o-S,I=k;}for(;2<_;)k[o++]=I[E++],k[o++]=I[E++],k[o++]=I[E++],_-=3;_&&(k[o++]=I[E++],1<_&&(k[o++]=I[E++]));}else {for(E=o-S;k[o++]=k[E++],k[o++]=k[E++],k[o++]=k[E++],2<(_-=3););_&&(k[o++]=k[E++],1<_&&(k[o++]=k[E++]));}break}}break}}while(n<i&&o<s);n-=_=p>>3,d&=(1<<(p-=_<<3))-1,t.next_in=n,t.next_out=o,t.avail_in=n<i?i-n+5:5-(n-i),t.avail_out=o<s?s-o+257:257-(o-s),r.hold=d,r.bits=p;};},{}],49:[function(t,e,r){var n=t("../utils/common"),i=t("./adler32"),o=t("./crc32"),a=t("./inffast"),s=t("./inftrees"),u=1,c=2,l=0,f=-2,h=1,d=852,p=592;function y(t){return (t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function g(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0;}function m(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=h,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new n.Buf32(d),e.distcode=e.distdyn=new n.Buf32(p),e.sane=1,e.back=-1,l):f}function b(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,m(t)):f}function v(t,e){var r,n;return t&&t.state?(n=t.state,e<0?(r=0,e=-e):(r=1+(e>>4),e<48&&(e&=15)),e&&(e<8||15<e)?f:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,b(t))):f}function w(t,e){var r,n;return t?(n=new g,(t.state=n).window=null,(r=v(t,e))!==l&&(t.state=null),r):f}var _,S,E=!0;function I(t){if(E){var e;for(_=new n.Buf32(512),S=new n.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(s(u,t.lens,0,288,_,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;s(c,t.lens,0,32,S,0,t.work,{bits:5}),E=!1;}t.lencode=_,t.lenbits=9,t.distcode=S,t.distbits=5;}function A(t,e,r,i){var o,a=t.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new n.Buf8(a.wsize)),i>=a.wsize?(n.arraySet(a.window,e,r-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(i<(o=a.wsize-a.wnext)&&(o=i),n.arraySet(a.window,e,r-i,o,a.wnext),(i-=o)?(n.arraySet(a.window,e,r-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0}r.inflateReset=b,r.inflateReset2=v,r.inflateResetKeep=m,r.inflateInit=function(t){return w(t,15)},r.inflateInit2=w,r.inflate=function(t,e){var r,d,p,g,m,b,v,w,_,S,E,k,D,x,T,P,O,R,C,M,N,j,B,L,F=0,U=new n.Buf8(4),z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return f;12===(r=t.state).mode&&(r.mode=13),m=t.next_out,p=t.output,v=t.avail_out,g=t.next_in,d=t.input,b=t.avail_in,w=r.hold,_=r.bits,S=b,E=v,j=l;t:for(;;)switch(r.mode){case h:if(0===r.wrap){r.mode=13;break}for(;_<16;){if(0===b)break t;b--,w+=d[g++]<<_,_+=8;}if(2&r.wrap&&35615===w){U[r.check=0]=255&w,U[1]=w>>>8&255,r.check=o(r.check,U,2,0),_=w=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&w)<<8)+(w>>8))%31){t.msg="incorrect header check",r.mode=30;break}if(8!=(15&w)){t.msg="unknown compression method",r.mode=30;break}if(_-=4,N=8+(15&(w>>>=4)),0===r.wbits)r.wbits=N;else if(N>r.wbits){t.msg="invalid window size",r.mode=30;break}r.dmax=1<<N,t.adler=r.check=1,r.mode=512&w?10:12,_=w=0;break;case 2:for(;_<16;){if(0===b)break t;b--,w+=d[g++]<<_,_+=8;}if(r.flags=w,8!=(255&r.flags)){t.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=w>>8&1),512&r.flags&&(U[0]=255&w,U[1]=w>>>8&255,r.check=o(r.check,U,2,0)),_=w=0,r.mode=3;case 3:for(;_<32;){if(0===b)break t;b--,w+=d[g++]<<_,_+=8;}r.head&&(r.head.time=w),512&r.flags&&(U[0]=255&w,U[1]=w>>>8&255,U[2]=w>>>16&255,U[3]=w>>>24&255,r.check=o(r.check,U,4,0)),_=w=0,r.mode=4;case 4:for(;_<16;){if(0===b)break t;b--,w+=d[g++]<<_,_+=8;}r.head&&(r.head.xflags=255&w,r.head.os=w>>8),512&r.flags&&(U[0]=255&w,U[1]=w>>>8&255,r.check=o(r.check,U,2,0)),_=w=0,r.mode=5;case 5:if(1024&r.flags){for(;_<16;){if(0===b)break t;b--,w+=d[g++]<<_,_+=8;}r.length=w,r.head&&(r.head.extra_len=w),512&r.flags&&(U[0]=255&w,U[1]=w>>>8&255,r.check=o(r.check,U,2,0)),_=w=0;}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(b<(k=r.length)&&(k=b),k&&(r.head&&(N=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),n.arraySet(r.head.extra,d,g,k,N)),512&r.flags&&(r.check=o(r.check,d,k,g)),b-=k,g+=k,r.length-=k),r.length))break t;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===b)break t;for(k=0;N=d[g+k++],r.head&&N&&r.length<65536&&(r.head.name+=String.fromCharCode(N)),N&&k<b;);if(512&r.flags&&(r.check=o(r.check,d,k,g)),b-=k,g+=k,N)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===b)break t;for(k=0;N=d[g+k++],r.head&&N&&r.length<65536&&(r.head.comment+=String.fromCharCode(N)),N&&k<b;);if(512&r.flags&&(r.check=o(r.check,d,k,g)),b-=k,g+=k,N)break t}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;_<16;){if(0===b)break t;b--,w+=d[g++]<<_,_+=8;}if(w!==(65535&r.check)){t.msg="header crc mismatch",r.mode=30;break}_=w=0;}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=12;break;case 10:for(;_<32;){if(0===b)break t;b--,w+=d[g++]<<_,_+=8;}t.adler=r.check=y(w),_=w=0,r.mode=11;case 11:if(0===r.havedict)return t.next_out=m,t.avail_out=v,t.next_in=g,t.avail_in=b,r.hold=w,r.bits=_,2;t.adler=r.check=1,r.mode=12;case 12:if(5===e||6===e)break t;case 13:if(r.last){w>>>=7&_,_-=7&_,r.mode=27;break}for(;_<3;){if(0===b)break t;b--,w+=d[g++]<<_,_+=8;}switch(r.last=1&w,_-=1,3&(w>>>=1)){case 0:r.mode=14;break;case 1:if(I(r),r.mode=20,6!==e)break;w>>>=2,_-=2;break t;case 2:r.mode=17;break;case 3:t.msg="invalid block type",r.mode=30;}w>>>=2,_-=2;break;case 14:for(w>>>=7&_,_-=7&_;_<32;){if(0===b)break t;b--,w+=d[g++]<<_,_+=8;}if((65535&w)!=(w>>>16^65535)){t.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&w,_=w=0,r.mode=15,6===e)break t;case 15:r.mode=16;case 16:if(k=r.length){if(b<k&&(k=b),v<k&&(k=v),0===k)break t;n.arraySet(p,d,g,k,m),b-=k,g+=k,v-=k,m+=k,r.length-=k;break}r.mode=12;break;case 17:for(;_<14;){if(0===b)break t;b--,w+=d[g++]<<_,_+=8;}if(r.nlen=257+(31&w),w>>>=5,_-=5,r.ndist=1+(31&w),w>>>=5,_-=5,r.ncode=4+(15&w),w>>>=4,_-=4,286<r.nlen||30<r.ndist){t.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;_<3;){if(0===b)break t;b--,w+=d[g++]<<_,_+=8;}r.lens[z[r.have++]]=7&w,w>>>=3,_-=3;}for(;r.have<19;)r.lens[z[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,B={bits:r.lenbits},j=s(0,r.lens,0,19,r.lencode,0,r.work,B),r.lenbits=B.bits,j){t.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;P=(F=r.lencode[w&(1<<r.lenbits)-1])>>>16&255,O=65535&F,!((T=F>>>24)<=_);){if(0===b)break t;b--,w+=d[g++]<<_,_+=8;}if(O<16)w>>>=T,_-=T,r.lens[r.have++]=O;else {if(16===O){for(L=T+2;_<L;){if(0===b)break t;b--,w+=d[g++]<<_,_+=8;}if(w>>>=T,_-=T,0===r.have){t.msg="invalid bit length repeat",r.mode=30;break}N=r.lens[r.have-1],k=3+(3&w),w>>>=2,_-=2;}else if(17===O){for(L=T+3;_<L;){if(0===b)break t;b--,w+=d[g++]<<_,_+=8;}_-=T,N=0,k=3+(7&(w>>>=T)),w>>>=3,_-=3;}else {for(L=T+7;_<L;){if(0===b)break t;b--,w+=d[g++]<<_,_+=8;}_-=T,N=0,k=11+(127&(w>>>=T)),w>>>=7,_-=7;}if(r.have+k>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=30;break}for(;k--;)r.lens[r.have++]=N;}}if(30===r.mode)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,B={bits:r.lenbits},j=s(u,r.lens,0,r.nlen,r.lencode,0,r.work,B),r.lenbits=B.bits,j){t.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,B={bits:r.distbits},j=s(c,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,B),r.distbits=B.bits,j){t.msg="invalid distances set",r.mode=30;break}if(r.mode=20,6===e)break t;case 20:r.mode=21;case 21:if(6<=b&&258<=v){t.next_out=m,t.avail_out=v,t.next_in=g,t.avail_in=b,r.hold=w,r.bits=_,a(t,E),m=t.next_out,p=t.output,v=t.avail_out,g=t.next_in,d=t.input,b=t.avail_in,w=r.hold,_=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;P=(F=r.lencode[w&(1<<r.lenbits)-1])>>>16&255,O=65535&F,!((T=F>>>24)<=_);){if(0===b)break t;b--,w+=d[g++]<<_,_+=8;}if(P&&0==(240&P)){for(R=T,C=P,M=O;P=(F=r.lencode[M+((w&(1<<R+C)-1)>>R)])>>>16&255,O=65535&F,!(R+(T=F>>>24)<=_);){if(0===b)break t;b--,w+=d[g++]<<_,_+=8;}w>>>=R,_-=R,r.back+=R;}if(w>>>=T,_-=T,r.back+=T,r.length=O,0===P){r.mode=26;break}if(32&P){r.back=-1,r.mode=12;break}if(64&P){t.msg="invalid literal/length code",r.mode=30;break}r.extra=15&P,r.mode=22;case 22:if(r.extra){for(L=r.extra;_<L;){if(0===b)break t;b--,w+=d[g++]<<_,_+=8;}r.length+=w&(1<<r.extra)-1,w>>>=r.extra,_-=r.extra,r.back+=r.extra;}r.was=r.length,r.mode=23;case 23:for(;P=(F=r.distcode[w&(1<<r.distbits)-1])>>>16&255,O=65535&F,!((T=F>>>24)<=_);){if(0===b)break t;b--,w+=d[g++]<<_,_+=8;}if(0==(240&P)){for(R=T,C=P,M=O;P=(F=r.distcode[M+((w&(1<<R+C)-1)>>R)])>>>16&255,O=65535&F,!(R+(T=F>>>24)<=_);){if(0===b)break t;b--,w+=d[g++]<<_,_+=8;}w>>>=R,_-=R,r.back+=R;}if(w>>>=T,_-=T,r.back+=T,64&P){t.msg="invalid distance code",r.mode=30;break}r.offset=O,r.extra=15&P,r.mode=24;case 24:if(r.extra){for(L=r.extra;_<L;){if(0===b)break t;b--,w+=d[g++]<<_,_+=8;}r.offset+=w&(1<<r.extra)-1,w>>>=r.extra,_-=r.extra,r.back+=r.extra;}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(0===v)break t;if(k=E-v,r.offset>k){if((k=r.offset-k)>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=30;break}D=k>r.wnext?(k-=r.wnext,r.wsize-k):r.wnext-k,k>r.length&&(k=r.length),x=r.window;}else x=p,D=m-r.offset,k=r.length;for(v<k&&(k=v),v-=k,r.length-=k;p[m++]=x[D++],--k;);0===r.length&&(r.mode=21);break;case 26:if(0===v)break t;p[m++]=r.length,v--,r.mode=21;break;case 27:if(r.wrap){for(;_<32;){if(0===b)break t;b--,w|=d[g++]<<_,_+=8;}if(E-=v,t.total_out+=E,r.total+=E,E&&(t.adler=r.check=r.flags?o(r.check,p,E,m-E):i(r.check,p,E,m-E)),E=v,(r.flags?w:y(w))!==r.check){t.msg="incorrect data check",r.mode=30;break}_=w=0;}r.mode=28;case 28:if(r.wrap&&r.flags){for(;_<32;){if(0===b)break t;b--,w+=d[g++]<<_,_+=8;}if(w!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=30;break}_=w=0;}r.mode=29;case 29:j=1;break t;case 30:j=-3;break t;case 31:return -4;default:return f}return t.next_out=m,t.avail_out=v,t.next_in=g,t.avail_in=b,r.hold=w,r.bits=_,(r.wsize||E!==t.avail_out&&r.mode<30&&(r.mode<27||4!==e))&&A(t,t.output,t.next_out,E-t.avail_out)?(r.mode=31,-4):(S-=t.avail_in,E-=t.avail_out,t.total_in+=S,t.total_out+=E,r.total+=E,r.wrap&&E&&(t.adler=r.check=r.flags?o(r.check,p,E,t.next_out-E):i(r.check,p,E,t.next_out-E)),t.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0==S&&0===E||4===e)&&j===l&&(j=-5),j)},r.inflateEnd=function(t){if(!t||!t.state)return f;var e=t.state;return e.window&&(e.window=null),t.state=null,l},r.inflateGetHeader=function(t,e){var r;return t&&t.state?0==(2&(r=t.state).wrap)?f:((r.head=e).done=!1,l):f},r.inflateSetDictionary=function(t,e){var r,n=e.length;return t&&t.state?0!==(r=t.state).wrap&&11!==r.mode?f:11===r.mode&&i(1,e,n,0)!==r.check?-3:A(t,e,n,n)?(r.mode=31,-4):(r.havedict=1,l):f},r.inflateInfo="pako inflate (from Nodeca project)";},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,e,r){var n=t("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,r,u,c,l,f,h){var d,p,y,g,m,b,v,w,_,S=h.bits,E=0,I=0,A=0,k=0,D=0,x=0,T=0,P=0,O=0,R=0,C=null,M=0,N=new n.Buf16(16),j=new n.Buf16(16),B=null,L=0;for(E=0;E<=15;E++)N[E]=0;for(I=0;I<u;I++)N[e[r+I]]++;for(D=S,k=15;1<=k&&0===N[k];k--);if(k<D&&(D=k),0===k)return c[l++]=20971520,c[l++]=20971520,h.bits=1,0;for(A=1;A<k&&0===N[A];A++);for(D<A&&(D=A),E=P=1;E<=15;E++)if(P<<=1,(P-=N[E])<0)return -1;if(0<P&&(0===t||1!==k))return -1;for(j[1]=0,E=1;E<15;E++)j[E+1]=j[E]+N[E];for(I=0;I<u;I++)0!==e[r+I]&&(f[j[e[r+I]]++]=I);if(b=0===t?(C=B=f,19):1===t?(C=i,M-=257,B=o,L-=257,256):(C=a,B=s,-1),E=A,m=l,T=I=R=0,y=-1,g=(O=1<<(x=D))-1,1===t&&852<O||2===t&&592<O)return 1;for(;;){for(v=E-T,_=f[I]<b?(w=0,f[I]):f[I]>b?(w=B[L+f[I]],C[M+f[I]]):(w=96,0),d=1<<E-T,A=p=1<<x;c[m+(R>>T)+(p-=d)]=v<<24|w<<16|_|0,0!==p;);for(d=1<<E-1;R&d;)d>>=1;if(0!==d?(R&=d-1,R+=d):R=0,I++,0==--N[E]){if(E===k)break;E=e[r+f[I]];}if(D<E&&(R&g)!==y){for(0===T&&(T=D),m+=A,P=1<<(x=E-T);x+T<k&&!((P-=N[x+T])<=0);)x++,P<<=1;if(O+=1<<x,1===t&&852<O||2===t&&592<O)return 1;c[y=R&g]=D<<24|x<<16|m-l|0;}}return 0!==R&&(c[m+R]=E-T<<24|64<<16|0),h.bits=D,0};},{"../utils/common":41}],51:[function(t,e,r){e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};},{}],52:[function(t,e,r){var n=t("../utils/common"),i=0,o=1;function a(t){for(var e=t.length;0<=--e;)t[e]=0;}var s=0,u=29,c=256,l=c+1+u,f=30,h=19,d=2*l+1,p=15,y=16,g=7,m=256,b=16,v=17,w=18,_=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],S=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],I=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],A=new Array(2*(l+2));a(A);var k=new Array(2*f);a(k);var D=new Array(512);a(D);var x=new Array(256);a(x);var T=new Array(u);a(T);var P,O,R,C=new Array(f);function M(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length;}function N(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e;}function j(t){return t<256?D[t]:D[256+(t>>>7)]}function B(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255;}function L(t,e,r){t.bi_valid>y-r?(t.bi_buf|=e<<t.bi_valid&65535,B(t,t.bi_buf),t.bi_buf=e>>y-t.bi_valid,t.bi_valid+=r-y):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r);}function F(t,e,r){L(t,r[2*e],r[2*e+1]);}function U(t,e){for(var r=0;r|=1&t,t>>>=1,r<<=1,0<--e;);return r>>>1}function z(t,e,r){var n,i,o=new Array(p+1),a=0;for(n=1;n<=p;n++)o[n]=a=a+r[n-1]<<1;for(i=0;i<=e;i++){var s=t[2*i+1];0!==s&&(t[2*i]=U(o[s]++,s));}}function K(t){var e;for(e=0;e<l;e++)t.dyn_ltree[2*e]=0;for(e=0;e<f;e++)t.dyn_dtree[2*e]=0;for(e=0;e<h;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*m]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0;}function q(t){8<t.bi_valid?B(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0;}function H(t,e,r,n){var i=2*e,o=2*r;return t[i]<t[o]||t[i]===t[o]&&n[e]<=n[r]}function V(t,e,r){for(var n=t.heap[r],i=r<<1;i<=t.heap_len&&(i<t.heap_len&&H(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!H(e,n,t.heap[i],t.depth));)t.heap[r]=t.heap[i],r=i,i<<=1;t.heap[r]=n;}function W(t,e,r){var n,i,o,a,s=0;if(0!==t.last_lit)for(;n=t.pending_buf[t.d_buf+2*s]<<8|t.pending_buf[t.d_buf+2*s+1],i=t.pending_buf[t.l_buf+s],s++,0===n?F(t,i,e):(F(t,(o=x[i])+c+1,e),0!==(a=_[o])&&L(t,i-=T[o],a),F(t,o=j(--n),r),0!==(a=S[o])&&L(t,n-=C[o],a)),s<t.last_lit;);F(t,m,e);}function J(t,e){var r,n,i,o=e.dyn_tree,a=e.stat_desc.static_tree,s=e.stat_desc.has_stree,u=e.stat_desc.elems,c=-1;for(t.heap_len=0,t.heap_max=d,r=0;r<u;r++)0!==o[2*r]?(t.heap[++t.heap_len]=c=r,t.depth[r]=0):o[2*r+1]=0;for(;t.heap_len<2;)o[2*(i=t.heap[++t.heap_len]=c<2?++c:0)]=1,t.depth[i]=0,t.opt_len--,s&&(t.static_len-=a[2*i+1]);for(e.max_code=c,r=t.heap_len>>1;1<=r;r--)V(t,o,r);for(i=u;r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],V(t,o,1),n=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=n,o[2*i]=o[2*r]+o[2*n],t.depth[i]=(t.depth[r]>=t.depth[n]?t.depth[r]:t.depth[n])+1,o[2*r+1]=o[2*n+1]=i,t.heap[1]=i++,V(t,o,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t,e){var r,n,i,o,a,s,u=e.dyn_tree,c=e.max_code,l=e.stat_desc.static_tree,f=e.stat_desc.has_stree,h=e.stat_desc.extra_bits,y=e.stat_desc.extra_base,g=e.stat_desc.max_length,m=0;for(o=0;o<=p;o++)t.bl_count[o]=0;for(u[2*t.heap[t.heap_max]+1]=0,r=t.heap_max+1;r<d;r++)g<(o=u[2*u[2*(n=t.heap[r])+1]+1]+1)&&(o=g,m++),u[2*n+1]=o,c<n||(t.bl_count[o]++,a=0,y<=n&&(a=h[n-y]),s=u[2*n],t.opt_len+=s*(o+a),f&&(t.static_len+=s*(l[2*n+1]+a)));if(0!==m){do{for(o=g-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[g]--,m-=2;}while(0<m);for(o=g;0!==o;o--)for(n=t.bl_count[o];0!==n;)c<(i=t.heap[--r])||(u[2*i+1]!==o&&(t.opt_len+=(o-u[2*i+1])*u[2*i],u[2*i+1]=o),n--);}}(t,e),z(o,c,t.bl_count);}function Y(t,e,r){var n,i,o=-1,a=e[1],s=0,u=7,c=4;for(0===a&&(u=138,c=3),e[2*(r+1)+1]=65535,n=0;n<=r;n++)i=a,a=e[2*(n+1)+1],++s<u&&i===a||(s<c?t.bl_tree[2*i]+=s:0!==i?(i!==o&&t.bl_tree[2*i]++,t.bl_tree[2*b]++):s<=10?t.bl_tree[2*v]++:t.bl_tree[2*w]++,o=i,c=(s=0)===a?(u=138,3):i===a?(u=6,3):(u=7,4));}function Z(t,e,r){var n,i,o=-1,a=e[1],s=0,u=7,c=4;for(0===a&&(u=138,c=3),n=0;n<=r;n++)if(i=a,a=e[2*(n+1)+1],!(++s<u&&i===a)){if(s<c)for(;F(t,i,t.bl_tree),0!=--s;);else 0!==i?(i!==o&&(F(t,i,t.bl_tree),s--),F(t,b,t.bl_tree),L(t,s-3,2)):s<=10?(F(t,v,t.bl_tree),L(t,s-3,3)):(F(t,w,t.bl_tree),L(t,s-11,7));o=i,c=(s=0)===a?(u=138,3):i===a?(u=6,3):(u=7,4);}}a(C);var G=!1;function X(t,e,r,i){L(t,(s<<1)+(i?1:0),3),function(t,e,r,i){q(t),i&&(B(t,r),B(t,~r)),n.arraySet(t.pending_buf,t.window,e,r,t.pending),t.pending+=r;}(t,e,r,!0);}r._tr_init=function(t){G||(function(){var t,e,r,n,i,o=new Array(p+1);for(n=r=0;n<u-1;n++)for(T[n]=r,t=0;t<1<<_[n];t++)x[r++]=n;for(x[r-1]=n,n=i=0;n<16;n++)for(C[n]=i,t=0;t<1<<S[n];t++)D[i++]=n;for(i>>=7;n<f;n++)for(C[n]=i<<7,t=0;t<1<<S[n]-7;t++)D[256+i++]=n;for(e=0;e<=p;e++)o[e]=0;for(t=0;t<=143;)A[2*t+1]=8,t++,o[8]++;for(;t<=255;)A[2*t+1]=9,t++,o[9]++;for(;t<=279;)A[2*t+1]=7,t++,o[7]++;for(;t<=287;)A[2*t+1]=8,t++,o[8]++;for(z(A,l+1,o),t=0;t<f;t++)k[2*t+1]=5,k[2*t]=U(t,5);P=new M(A,_,c+1,l,p),O=new M(k,S,0,f,p),R=new M(new Array(0),E,0,h,g);}(),G=!0),t.l_desc=new N(t.dyn_ltree,P),t.d_desc=new N(t.dyn_dtree,O),t.bl_desc=new N(t.bl_tree,R),t.bi_buf=0,t.bi_valid=0,K(t);},r._tr_stored_block=X,r._tr_flush_block=function(t,e,r,n){var a,s,u=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,r=4093624447;for(e=0;e<=31;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return i;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return o;for(e=32;e<c;e++)if(0!==t.dyn_ltree[2*e])return o;return i}(t)),J(t,t.l_desc),J(t,t.d_desc),u=function(t){var e;for(Y(t,t.dyn_ltree,t.l_desc.max_code),Y(t,t.dyn_dtree,t.d_desc.max_code),J(t,t.bl_desc),e=h-1;3<=e&&0===t.bl_tree[2*I[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),a=t.opt_len+3+7>>>3,(s=t.static_len+3+7>>>3)<=a&&(a=s)):a=s=r+5,r+4<=a&&-1!==e?X(t,e,r,n):4===t.strategy||s===a?(L(t,2+(n?1:0),3),W(t,A,k)):(L(t,4+(n?1:0),3),function(t,e,r,n){var i;for(L(t,e-257,5),L(t,r-1,5),L(t,n-4,4),i=0;i<n;i++)L(t,t.bl_tree[2*I[i]+1],3);Z(t,t.dyn_ltree,e-1),Z(t,t.dyn_dtree,r-1);}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,u+1),W(t,t.dyn_ltree,t.dyn_dtree)),K(t),n&&q(t);},r._tr_tally=function(t,e,r){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(x[r]+c+1)]++,t.dyn_dtree[2*j(e)]++),t.last_lit===t.lit_bufsize-1},r._tr_align=function(t){L(t,2,3),F(t,m,A),function(t){16===t.bi_valid?(B(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8);}(t);};},{"../utils/common":41}],53:[function(t,e,r){e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0;};},{}],54:[function(t,e,r){e.exports="function"==typeof setImmediate?setImmediate:function(){var t=[].slice.apply(arguments);t.splice(1,0,0),setTimeout.apply(null,t);};},{}]},{},[10])(10),gS={exports:{}};dS=function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}return r.m=t,r.c=e,r.p="",r(0)}([function(t,e,r){(function(t,n,i,o){Object.defineProperty(e,"__esModule",{value:!0});var a,s=r(2),u=r(9);!function(t){t[t.EPERM=1]="EPERM",t[t.ENOENT=2]="ENOENT",t[t.EIO=5]="EIO",t[t.EBADF=9]="EBADF",t[t.EACCES=13]="EACCES",t[t.EBUSY=16]="EBUSY",t[t.EEXIST=17]="EEXIST",t[t.ENOTDIR=20]="ENOTDIR",t[t.EISDIR=21]="EISDIR",t[t.EINVAL=22]="EINVAL",t[t.EFBIG=27]="EFBIG",t[t.ENOSPC=28]="ENOSPC",t[t.EROFS=30]="EROFS",t[t.ENOTEMPTY=39]="ENOTEMPTY",t[t.ENOTSUP=95]="ENOTSUP";}(a||(a={}));var c={};c[a.EPERM]="Operation not permitted.",c[a.ENOENT]="No such file or directory.",c[a.EIO]="Input/output error.",c[a.EBADF]="Bad file descriptor.",c[a.EACCES]="Permission denied.",c[a.EBUSY]="Resource busy or locked.",c[a.EEXIST]="File exists.",c[a.ENOTDIR]="File is not a directory.",c[a.EISDIR]="File is a directory.",c[a.EINVAL]="Invalid argument.",c[a.EFBIG]="File is too big.",c[a.ENOSPC]="No space left on disk.",c[a.EROFS]="Cannot modify a read-only file system.",c[a.ENOTEMPTY]="Directory is not empty.",c[a.ENOTSUP]="Operation is not supported.";var l,f=function(e){function r(t,r,n){void 0===r&&(r=c[t]),e.call(this,r),this.syscall="",this.errno=t,this.code=a[t],this.path=n,this.stack=(new e).stack,this.message="Error: "+this.code+": "+r+(this.path?", '"+this.path+"'":"");}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.fromJSON=function(t){var e=new r(0);return e.errno=t.errno,e.code=t.code,e.path=t.path,e.stack=t.stack,e.message=t.message,e},r.fromBuffer=function(t,e){return void 0===e&&(e=0),r.fromJSON(JSON.parse(t.toString("utf8",e+4,e+4+t.readUInt32LE(e))))},r.FileError=function(t,e){return new r(t,c[t],e)},r.ENOENT=function(t){return this.FileError(a.ENOENT,t)},r.EEXIST=function(t){return this.FileError(a.EEXIST,t)},r.EISDIR=function(t){return this.FileError(a.EISDIR,t)},r.ENOTDIR=function(t){return this.FileError(a.ENOTDIR,t)},r.EPERM=function(t){return this.FileError(a.EPERM,t)},r.ENOTEMPTY=function(t){return this.FileError(a.ENOTEMPTY,t)},r.prototype.toString=function(){return this.message},r.prototype.toJSON=function(){return {errno:this.errno,code:this.code,path:this.path,stack:this.stack,message:this.message}},r.prototype.writeToBuffer=function(e,r){void 0===e&&(e=t.alloc(this.bufferSize())),void 0===r&&(r=0);var n=e.write(JSON.stringify(this.toJSON()),r+4);return e.writeUInt32LE(n,r),e},r.prototype.bufferSize=function(){return 4+t.byteLength(JSON.stringify(this.toJSON()))},r}(Error),h=Object.freeze({get ErrorCode(){return a},ErrorStrings:c,ApiError:f});!function(t){t[t.NOP=0]="NOP",t[t.THROW_EXCEPTION=1]="THROW_EXCEPTION",t[t.TRUNCATE_FILE=2]="TRUNCATE_FILE",t[t.CREATE_FILE=3]="CREATE_FILE";}(l||(l={}));var d,p=function t(e){if(this.flagStr=e,t.validFlagStrs.indexOf(e)<0)throw new f(a.EINVAL,"Invalid flag: "+e)};p.getFileFlag=function(t){return p.flagCache.hasOwnProperty(t)?p.flagCache[t]:p.flagCache[t]=new p(t)},p.prototype.getFlagString=function(){return this.flagStr},p.prototype.isReadable=function(){return -1!==this.flagStr.indexOf("r")||-1!==this.flagStr.indexOf("+")},p.prototype.isWriteable=function(){return -1!==this.flagStr.indexOf("w")||-1!==this.flagStr.indexOf("a")||-1!==this.flagStr.indexOf("+")},p.prototype.isTruncating=function(){return -1!==this.flagStr.indexOf("w")},p.prototype.isAppendable=function(){return -1!==this.flagStr.indexOf("a")},p.prototype.isSynchronous=function(){return -1!==this.flagStr.indexOf("s")},p.prototype.isExclusive=function(){return -1!==this.flagStr.indexOf("x")},p.prototype.pathExistsAction=function(){return this.isExclusive()?l.THROW_EXCEPTION:this.isTruncating()?l.TRUNCATE_FILE:l.NOP},p.prototype.pathNotExistsAction=function(){return (this.isWriteable()||this.isAppendable())&&"r+"!==this.flagStr?l.CREATE_FILE:l.THROW_EXCEPTION},p.flagCache={},p.validFlagStrs=["r","r+","rs","rs+","w","wx","w+","wx+","a","ax","a+","ax+"],function(t){t[t.FILE=32768]="FILE",t[t.DIRECTORY=16384]="DIRECTORY",t[t.SYMLINK=40960]="SYMLINK";}(d||(d={}));var y=function(t,e,r,n,i,o){if(void 0===n&&(n=new Date),void 0===i&&(i=new Date),void 0===o&&(o=new Date),this.size=e,this.atime=n,this.mtime=i,this.ctime=o,this.dev=0,this.ino=0,this.rdev=0,this.nlink=1,this.blksize=4096,this.uid=0,this.gid=0,this.birthtime=new Date(0),this.fileData=null,r)this.mode=r;else switch(t){case d.FILE:this.mode=420;break;case d.DIRECTORY:default:this.mode=511;}this.blocks=Math.ceil(e/512),this.mode<4096&&(this.mode|=t);};y.fromBuffer=function(t){var e=t.readUInt32LE(0),r=t.readUInt32LE(4),n=t.readDoubleLE(8),i=t.readDoubleLE(16),o=t.readDoubleLE(24);return new y(61440&r,e,4095&r,new Date(n),new Date(i),new Date(o))},y.prototype.toBuffer=function(){var e=t.alloc(32);return e.writeUInt32LE(this.size,0),e.writeUInt32LE(this.mode,4),e.writeDoubleLE(this.atime.getTime(),8),e.writeDoubleLE(this.mtime.getTime(),16),e.writeDoubleLE(this.ctime.getTime(),24),e},y.prototype.clone=function(){return new y(61440&this.mode,this.size,4095&this.mode,this.atime,this.mtime,this.ctime)},y.prototype.isFile=function(){return (61440&this.mode)===d.FILE},y.prototype.isDirectory=function(){return (61440&this.mode)===d.DIRECTORY},y.prototype.isSymbolicLink=function(){return (61440&this.mode)===d.SYMLINK},y.prototype.chmod=function(t){this.mode=61440&this.mode|t;},y.prototype.isSocket=function(){return !1},y.prototype.isBlockDevice=function(){return !1},y.prototype.isCharacterDevice=function(){return !1},y.prototype.isFIFO=function(){return !1};var g=function(t,e){return t};function m(t){if(t)return t;throw new f(a.EIO,"Initialize BrowserFS with a file system using BrowserFS.initialize(filesystem)")}function b(t,e){switch(typeof t){case"number":return t;case"string":var r=parseInt(t,8);return isNaN(r)?e:r;default:return e}}function v(t){if(t instanceof Date)return t;if("number"==typeof t)return new Date(1e3*t);throw new f(a.EINVAL,"Invalid time.")}function w(t){if(t.indexOf("\0")>=0)throw new f(a.EINVAL,"Path must be a string without null bytes.");if(""===t)throw new f(a.EINVAL,"Path must not be empty.");return u.resolve(t)}function _(t,e,r,n){switch(typeof t){case"object":return {encoding:void 0!==t.encoding?t.encoding:e,flag:void 0!==t.flag?t.flag:r,mode:b(t.mode,n)};case"string":return {encoding:t,flag:r,mode:n};default:return {encoding:e,flag:r,mode:n}}}function S(){}var E=function(){this.F_OK=0,this.R_OK=4,this.W_OK=2,this.X_OK=1,this.root=null,this.fdMap={},this.nextFd=100;};E.prototype.initialize=function(t){if(!t.constructor.isAvailable())throw new f(a.EINVAL,"Tried to instantiate BrowserFS with an unavailable file system.");return this.root=t},E.prototype._toUnixTimestamp=function(t){if("number"==typeof t)return t;if(t instanceof Date)return t.getTime()/1e3;throw new Error("Cannot parse time: "+t)},E.prototype.getRootFS=function(){return this.root?this.root:null},E.prototype.rename=function(t,e,r){void 0===r&&(r=S);var n=g(r,1);try{m(this.root).rename(w(t),w(e),n);}catch(t){n(t);}},E.prototype.renameSync=function(t,e){m(this.root).renameSync(w(t),w(e));},E.prototype.exists=function(t,e){void 0===e&&(e=S);var r=g(e,1);try{return m(this.root).exists(w(t),r)}catch(t){return r(!1)}},E.prototype.existsSync=function(t){try{return m(this.root).existsSync(w(t))}catch(t){return !1}},E.prototype.stat=function(t,e){void 0===e&&(e=S);var r=g(e,2);try{return m(this.root).stat(w(t),!1,r)}catch(t){return r(t)}},E.prototype.statSync=function(t){return m(this.root).statSync(w(t),!1)},E.prototype.lstat=function(t,e){void 0===e&&(e=S);var r=g(e,2);try{return m(this.root).stat(w(t),!0,r)}catch(t){return r(t)}},E.prototype.lstatSync=function(t){return m(this.root).statSync(w(t),!0)},E.prototype.truncate=function(t,e,r){void 0===e&&(e=0),void 0===r&&(r=S);var n=0;"function"==typeof e?r=e:"number"==typeof e&&(n=e);var i=g(r,1);try{if(n<0)throw new f(a.EINVAL);return m(this.root).truncate(w(t),n,i)}catch(t){return i(t)}},E.prototype.truncateSync=function(t,e){if(void 0===e&&(e=0),e<0)throw new f(a.EINVAL);return m(this.root).truncateSync(w(t),e)},E.prototype.unlink=function(t,e){void 0===e&&(e=S);var r=g(e,1);try{return m(this.root).unlink(w(t),r)}catch(t){return r(t)}},E.prototype.unlinkSync=function(t){return m(this.root).unlinkSync(w(t))},E.prototype.open=function(t,e,r,n){var i=this;void 0===n&&(n=S);var o=b(r,420),a=g(n="function"==typeof r?r:n,2);try{m(this.root).open(w(t),p.getFileFlag(e),o,(function(t,e){e?a(t,i.getFdForFile(e)):a(t);}));}catch(t){a(t);}},E.prototype.openSync=function(t,e,r){return void 0===r&&(r=420),this.getFdForFile(m(this.root).openSync(w(t),p.getFileFlag(e),b(r,420)))},E.prototype.readFile=function(t,e,r){void 0===e&&(e={}),void 0===r&&(r=S);var n=_(e,null,"r",null),i=g(r="function"==typeof e?e:r,2);try{var o=p.getFileFlag(n.flag);return o.isReadable()?m(this.root).readFile(w(t),n.encoding,o,i):i(new f(a.EINVAL,"Flag passed to readFile must allow for reading."))}catch(t){return i(t)}},E.prototype.readFileSync=function(t,e){void 0===e&&(e={});var r=_(e,null,"r",null),n=p.getFileFlag(r.flag);if(!n.isReadable())throw new f(a.EINVAL,"Flag passed to readFile must allow for reading.");return m(this.root).readFileSync(w(t),r.encoding,n)},E.prototype.writeFile=function(t,e,r,n){void 0===r&&(r={}),void 0===n&&(n=S);var i=_(r,"utf8","w",420),o=g(n="function"==typeof r?r:n,1);try{var s=p.getFileFlag(i.flag);return s.isWriteable()?m(this.root).writeFile(w(t),e,i.encoding,s,i.mode,o):o(new f(a.EINVAL,"Flag passed to writeFile must allow for writing."))}catch(t){return o(t)}},E.prototype.writeFileSync=function(t,e,r){var n=_(r,"utf8","w",420),i=p.getFileFlag(n.flag);if(!i.isWriteable())throw new f(a.EINVAL,"Flag passed to writeFile must allow for writing.");return m(this.root).writeFileSync(w(t),e,n.encoding,i,n.mode)},E.prototype.appendFile=function(t,e,r,n){void 0===n&&(n=S);var i=_(r,"utf8","a",420),o=g(n="function"==typeof r?r:n,1);try{var s=p.getFileFlag(i.flag);if(!s.isAppendable())return o(new f(a.EINVAL,"Flag passed to appendFile must allow for appending."));m(this.root).appendFile(w(t),e,i.encoding,s,i.mode,o);}catch(t){o(t);}},E.prototype.appendFileSync=function(t,e,r){var n=_(r,"utf8","a",420),i=p.getFileFlag(n.flag);if(!i.isAppendable())throw new f(a.EINVAL,"Flag passed to appendFile must allow for appending.");return m(this.root).appendFileSync(w(t),e,n.encoding,i,n.mode)},E.prototype.fstat=function(t,e){void 0===e&&(e=S);var r=g(e,2);try{this.fd2file(t).stat(r);}catch(t){r(t);}},E.prototype.fstatSync=function(t){return this.fd2file(t).statSync()},E.prototype.close=function(t,e){var r=this;void 0===e&&(e=S);var n=g(e,1);try{this.fd2file(t).close((function(e){e||r.closeFd(t),n(e);}));}catch(t){n(t);}},E.prototype.closeSync=function(t){this.fd2file(t).closeSync(),this.closeFd(t);},E.prototype.ftruncate=function(t,e,r){void 0===r&&(r=S);var n="number"==typeof e?e:0,i=g(r="function"==typeof e?e:r,1);try{var o=this.fd2file(t);if(n<0)throw new f(a.EINVAL);o.truncate(n,i);}catch(t){i(t);}},E.prototype.ftruncateSync=function(t,e){void 0===e&&(e=0);var r=this.fd2file(t);if(e<0)throw new f(a.EINVAL);r.truncateSync(e);},E.prototype.fsync=function(t,e){void 0===e&&(e=S);var r=g(e,1);try{this.fd2file(t).sync(r);}catch(t){r(t);}},E.prototype.fsyncSync=function(t){this.fd2file(t).syncSync();},E.prototype.fdatasync=function(t,e){void 0===e&&(e=S);var r=g(e,1);try{this.fd2file(t).datasync(r);}catch(t){r(t);}},E.prototype.fdatasyncSync=function(t){this.fd2file(t).datasyncSync();},E.prototype.write=function(e,r,n,i,o,s){void 0===s&&(s=S);var u,c,l,h=null;if("string"==typeof r){var d="utf8";switch(typeof n){case"function":s=n;break;case"number":h=n,d="string"==typeof i?i:"utf8",s="function"==typeof o?o:s;break;default:return (s="function"==typeof i?i:"function"==typeof o?o:s)(new f(a.EINVAL,"Invalid arguments."))}c=0,l=(u=t.from(r,d)).length;}else u=r,c=n,l=i,h="number"==typeof o?o:null,s="function"==typeof o?o:s;var p=g(s,3);try{var y=this.fd2file(e);null==h&&(h=y.getPos()),y.write(u,c,l,h,p);}catch(t){p(t);}},E.prototype.writeSync=function(e,r,n,i,o){var a,s,u,c=0;if("string"==typeof r){u="number"==typeof n?n:null;var l="string"==typeof i?i:"utf8";c=0,s=(a=t.from(r,l)).length;}else a=r,c=n,s=i,u="number"==typeof o?o:null;var f=this.fd2file(e);return null==u&&(u=f.getPos()),f.writeSync(a,c,s,u)},E.prototype.read=function(e,r,n,i,o,a){var s,u,c,l,f;if(void 0===a&&(a=S),"number"==typeof r){c=r,s=n;var h=i;a="function"==typeof o?o:a,u=0,l=t.alloc(c),f=g((function(t,e,r){if(t)return a(t);a(t,r.toString(h),e);}),3);}else l=r,u=n,c=i,s=o,f=g(a,3);try{var d=this.fd2file(e);null==s&&(s=d.getPos()),d.read(l,u,c,s,f);}catch(t){f(t);}},E.prototype.readSync=function(e,r,n,i,o){var a,s,u,c,l=!1,f="utf8";"number"==typeof r?(u=r,c=n,f=i,s=0,a=t.alloc(u),l=!0):(a=r,s=n,u=i,c=o);var h=this.fd2file(e);null==c&&(c=h.getPos());var d=h.readSync(a,s,u,c);return l?[a.toString(f),d]:d},E.prototype.fchown=function(t,e,r,n){void 0===n&&(n=S);var i=g(n,1);try{this.fd2file(t).chown(e,r,i);}catch(t){i(t);}},E.prototype.fchownSync=function(t,e,r){this.fd2file(t).chownSync(e,r);},E.prototype.fchmod=function(t,e,r){var n=g(r,1);try{var i="string"==typeof e?parseInt(e,8):e;this.fd2file(t).chmod(i,n);}catch(t){n(t);}},E.prototype.fchmodSync=function(t,e){var r="string"==typeof e?parseInt(e,8):e;this.fd2file(t).chmodSync(r);},E.prototype.futimes=function(t,e,r,n){void 0===n&&(n=S);var i=g(n,1);try{var o=this.fd2file(t);"number"==typeof e&&(e=new Date(1e3*e)),"number"==typeof r&&(r=new Date(1e3*r)),o.utimes(e,r,i);}catch(t){i(t);}},E.prototype.futimesSync=function(t,e,r){this.fd2file(t).utimesSync(v(e),v(r));},E.prototype.rmdir=function(t,e){void 0===e&&(e=S);var r=g(e,1);try{t=w(t),m(this.root).rmdir(t,r);}catch(t){r(t);}},E.prototype.rmdirSync=function(t){return t=w(t),m(this.root).rmdirSync(t)},E.prototype.mkdir=function(t,e,r){void 0===r&&(r=S),"function"==typeof e&&(r=e,e=511);var n=g(r,1);try{t=w(t),m(this.root).mkdir(t,e,n);}catch(t){n(t);}},E.prototype.mkdirSync=function(t,e){m(this.root).mkdirSync(w(t),b(e,511));},E.prototype.readdir=function(t,e){void 0===e&&(e=S);var r=g(e,2);try{t=w(t),m(this.root).readdir(t,r);}catch(t){r(t);}},E.prototype.readdirSync=function(t){return t=w(t),m(this.root).readdirSync(t)},E.prototype.link=function(t,e,r){void 0===r&&(r=S);var n=g(r,1);try{t=w(t),e=w(e),m(this.root).link(t,e,n);}catch(t){n(t);}},E.prototype.linkSync=function(t,e){return t=w(t),e=w(e),m(this.root).linkSync(t,e)},E.prototype.symlink=function(t,e,r,n){void 0===n&&(n=S);var i="string"==typeof r?r:"file",o=g(n="function"==typeof r?r:n,1);try{if("file"!==i&&"dir"!==i)return o(new f(a.EINVAL,"Invalid type: "+i));t=w(t),e=w(e),m(this.root).symlink(t,e,i,o);}catch(t){o(t);}},E.prototype.symlinkSync=function(t,e,r){if(r){if("file"!==r&&"dir"!==r)throw new f(a.EINVAL,"Invalid type: "+r)}else r="file";return t=w(t),e=w(e),m(this.root).symlinkSync(t,e,r)},E.prototype.readlink=function(t,e){void 0===e&&(e=S);var r=g(e,2);try{t=w(t),m(this.root).readlink(t,r);}catch(t){r(t);}},E.prototype.readlinkSync=function(t){return t=w(t),m(this.root).readlinkSync(t)},E.prototype.chown=function(t,e,r,n){void 0===n&&(n=S);var i=g(n,1);try{t=w(t),m(this.root).chown(t,!1,e,r,i);}catch(t){i(t);}},E.prototype.chownSync=function(t,e,r){t=w(t),m(this.root).chownSync(t,!1,e,r);},E.prototype.lchown=function(t,e,r,n){void 0===n&&(n=S);var i=g(n,1);try{t=w(t),m(this.root).chown(t,!0,e,r,i);}catch(t){i(t);}},E.prototype.lchownSync=function(t,e,r){t=w(t),m(this.root).chownSync(t,!0,e,r);},E.prototype.chmod=function(t,e,r){void 0===r&&(r=S);var n=g(r,1);try{var i=b(e,-1);if(i<0)throw new f(a.EINVAL,"Invalid mode.");m(this.root).chmod(w(t),!1,i,n);}catch(t){n(t);}},E.prototype.chmodSync=function(t,e){var r=b(e,-1);if(r<0)throw new f(a.EINVAL,"Invalid mode.");t=w(t),m(this.root).chmodSync(t,!1,r);},E.prototype.lchmod=function(t,e,r){void 0===r&&(r=S);var n=g(r,1);try{var i=b(e,-1);if(i<0)throw new f(a.EINVAL,"Invalid mode.");m(this.root).chmod(w(t),!0,i,n);}catch(t){n(t);}},E.prototype.lchmodSync=function(t,e){var r=b(e,-1);if(r<1)throw new f(a.EINVAL,"Invalid mode.");m(this.root).chmodSync(w(t),!0,r);},E.prototype.utimes=function(t,e,r,n){void 0===n&&(n=S);var i=g(n,1);try{m(this.root).utimes(w(t),v(e),v(r),i);}catch(t){i(t);}},E.prototype.utimesSync=function(t,e,r){m(this.root).utimesSync(w(t),v(e),v(r));},E.prototype.realpath=function(t,e,r){var n="object"==typeof e?e:{},i=g("function"==typeof e?e:S,2);try{t=w(t),m(this.root).realpath(t,n,i);}catch(t){i(t);}},E.prototype.realpathSync=function(t,e){return void 0===e&&(e={}),t=w(t),m(this.root).realpathSync(t,e)},E.prototype.watchFile=function(t,e,r){throw new f(a.ENOTSUP)},E.prototype.unwatchFile=function(t,e){throw new f(a.ENOTSUP)},E.prototype.watch=function(t,e,r){throw new f(a.ENOTSUP)},E.prototype.access=function(t,e,r){throw new f(a.ENOTSUP)},E.prototype.accessSync=function(t,e){throw new f(a.ENOTSUP)},E.prototype.createReadStream=function(t,e){throw new f(a.ENOTSUP)},E.prototype.createWriteStream=function(t,e){throw new f(a.ENOTSUP)},E.prototype.wrapCallbacks=function(t){g=t;},E.prototype.getFdForFile=function(t){var e=this.nextFd++;return this.fdMap[e]=t,e},E.prototype.fd2file=function(t){var e=this.fdMap[t];if(e)return e;throw new f(a.EBADF,"Invalid file descriptor.")},E.prototype.closeFd=function(t){delete this.fdMap[t];},E.Stats=y;var I=new E,A={},k=E.prototype;function D(t,e,r,n,i){return t<e||r<e?t>r?r+1:t+1:n===i?e:e+1}function x(t,e){if(t===e)return 0;if(t.length>e.length){var r=t;t=e,e=r;}for(var n=t.length,i=e.length;n>0&&t.charCodeAt(n-1)===e.charCodeAt(i-1);)n--,i--;for(var o=0;o<n&&t.charCodeAt(o)===e.charCodeAt(o);)o++;if(i-=o,0==(n-=o)||1===i)return i;for(var a,s,u,c,l,f=new Array(n<<1),h=0;h<n;)f[n+h]=t.charCodeAt(o+h),f[h]=++h;for(a=0;a+3<i;)for(var d=e.charCodeAt(o+(s=a)),p=e.charCodeAt(o+(u=a+1)),y=e.charCodeAt(o+(c=a+2)),g=e.charCodeAt(o+(l=a+3)),m=a+=4,b=0;b<n;){var v=f[n+b],w=f[b];s=D(w,s,u,d,v),u=D(s,u,c,p,v),c=D(u,c,l,y,v),m=D(c,l,m,g,v),f[b++]=m,l=c,c=u,u=s,s=w;}for(var _=0;a<i;){var S=e.charCodeAt(o+(s=a));_=++a;for(var E=0;E<n;E++){var I=f[E];f[E]=_=I<s||_<s?I>_?_+1:I+1:S===f[n+E]?s:s+1,s=I;}}return _}function T(t,e,r){t&&console.warn("["+e+"] Direct file system constructor usage is deprecated for this file system, and will be removed in the next major version. Please use the '"+e+".Create("+JSON.stringify(r)+", callback)' method instead. See https://github.com/jvilk/BrowserFS/issues/176 for more details.");}Object.keys(k).forEach((function(t){"function"==typeof I[t]?A[t]=function(){return I[t].apply(I,arguments)}:A[t]=I[t];})),A.changeFSModule=function(t){I=t;},A.getFSModule=function(){return I},A.FS=E;var P="undefined"!=typeof navigator&&!(!/(msie) ([\w.]+)/.exec(navigator.userAgent.toLowerCase())&&-1===navigator.userAgent.indexOf("Trident")),O="undefined"==typeof window;function R(){throw new Error("BFS has reached an impossible code path; please file a bug.")}function C(t,e,r){r.existsSync(t)||(C(u.dirname(t),e,r),r.mkdirSync(t,e));}function M(t){var e=N(t),r=e.byteOffset,n=e.byteLength;return 0===r&&n===e.buffer.byteLength?e.buffer:e.buffer.slice(r,r+n)}function N(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function j(e){return e instanceof t?e:e instanceof Uint8Array?B(e):t.from(e)}function B(e){return e instanceof t?e:0===e.byteOffset&&e.byteLength===e.buffer.byteLength?L(e.buffer):t.from(e.buffer,e.byteOffset,e.byteLength)}function L(e){return t.from(e)}function F(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=t.length),e<0||r<0||r>t.length||e>r)throw new TypeError("Invalid slice bounds on buffer of length "+t.length+": ["+e+", "+r+"]");if(0===t.length)return z();var n=N(t),i=t[0],o=(i+1)%255;return t[0]=o,n[0]===o?(n[0]=i,B(n.slice(e,r))):(t[0]=i,B(n.subarray(e,r)))}var U=null;function z(){return U||(U=t.alloc(0))}function K(e,r){t.isBuffer(e)?r():r(new f(a.EINVAL,"option must be a Buffer."));}function q(t,e,r){var n=t.Options,i=t.Name,o=0,s=!1,u=!1;function c(t){s||(t&&(s=!0,r(t)),0==--o&&u&&r());}var l=function(t){if(n.hasOwnProperty(t)){var u=n[t],l=e[t];if(null==l){if(!u.optional){var h=Object.keys(e).filter((function(t){return !(t in n)})).map((function(e){return {str:e,distance:x(t,e)}})).filter((function(t){return t.distance<5})).sort((function(t,e){return t.distance-e.distance}));return s?{}:(s=!0,{v:r(new f(a.EINVAL,"["+i+"] Required option '"+t+"' not provided."+(h.length>0?" You provided unrecognized option '"+h[0].str+"'; perhaps you meant to type '"+t+"'.":"")+"\nOption description: "+u.description))})}}else {if(!(Array.isArray(u.type)?-1!==u.type.indexOf(typeof l):typeof l===u.type))return s?{}:(s=!0,{v:r(new f(a.EINVAL,"["+i+"] Value provided for option "+t+" is not the proper type. Expected "+(Array.isArray(u.type)?"one of {"+u.type.join(", ")+"}":u.type)+", but received "+typeof l+"\nOption description: "+u.description))});u.validator&&(o++,u.validator(l,c));}}};for(var h in n){var d=l(h);if(d)return d.v}u=!0,0!==o||s||r();}var H=Object.freeze({deprecationMessage:T,isIE:P,isWebWorker:O,fail:R,mkdirpSync:C,buffer2ArrayBuffer:M,buffer2Uint8array:N,arrayish2Buffer:j,uint8Array2Buffer:B,arrayBuffer2Buffer:L,copyingSlice:F,emptyBuffer:z,bufferValidator:K,checkOptions:q}),V=function(t){this.fs=t,this.nodefs=t.getNodeFS(),this.FS=t.getFS(),this.PATH=t.getPATH(),this.ERRNO_CODES=t.getERRNO_CODES();};V.prototype.open=function(t){var e=this.fs.realPath(t.node),r=this.FS;try{r.isFile(t.node.mode)&&(t.nfd=this.nodefs.openSync(e,this.fs.flagsToPermissionString(t.flags)));}catch(t){if(!t.code)throw t;throw new r.ErrnoError(this.ERRNO_CODES[t.code])}},V.prototype.close=function(t){var e=this.FS;try{e.isFile(t.node.mode)&&t.nfd&&this.nodefs.closeSync(t.nfd);}catch(t){if(!t.code)throw t;throw new e.ErrnoError(this.ERRNO_CODES[t.code])}},V.prototype.read=function(t,e,r,n,i){try{return this.nodefs.readSync(t.nfd,B(e),r,n,i)}catch(t){throw new this.FS.ErrnoError(this.ERRNO_CODES[t.code])}},V.prototype.write=function(t,e,r,n,i){try{return this.nodefs.writeSync(t.nfd,B(e),r,n,i)}catch(t){throw new this.FS.ErrnoError(this.ERRNO_CODES[t.code])}},V.prototype.llseek=function(t,e,r){var n=e;if(1===r)n+=t.position;else if(2===r&&this.FS.isFile(t.node.mode))try{n+=this.nodefs.fstatSync(t.nfd).size;}catch(t){throw new this.FS.ErrnoError(this.ERRNO_CODES[t.code])}if(n<0)throw new this.FS.ErrnoError(this.ERRNO_CODES.EINVAL);return t.position=n,n};var W=function(t){this.fs=t,this.nodefs=t.getNodeFS(),this.FS=t.getFS(),this.PATH=t.getPATH(),this.ERRNO_CODES=t.getERRNO_CODES();};W.prototype.getattr=function(t){var e,r=this.fs.realPath(t);try{e=this.nodefs.lstatSync(r);}catch(t){if(!t.code)throw t;throw new this.FS.ErrnoError(this.ERRNO_CODES[t.code])}return {dev:e.dev,ino:e.ino,mode:e.mode,nlink:e.nlink,uid:e.uid,gid:e.gid,rdev:e.rdev,size:e.size,atime:e.atime,mtime:e.mtime,ctime:e.ctime,blksize:e.blksize,blocks:e.blocks}},W.prototype.setattr=function(t,e){var r=this.fs.realPath(t);try{if(void 0!==e.mode&&(this.nodefs.chmodSync(r,e.mode),t.mode=e.mode),void 0!==e.timestamp){var n=new Date(e.timestamp);this.nodefs.utimesSync(r,n,n);}}catch(t){if(!t.code)throw t;if("ENOTSUP"!==t.code)throw new this.FS.ErrnoError(this.ERRNO_CODES[t.code])}if(void 0!==e.size)try{this.nodefs.truncateSync(r,e.size);}catch(t){if(!t.code)throw t;throw new this.FS.ErrnoError(this.ERRNO_CODES[t.code])}},W.prototype.lookup=function(t,e){var r=this.PATH.join2(this.fs.realPath(t),e),n=this.fs.getMode(r);return this.fs.createNode(t,e,n)},W.prototype.mknod=function(t,e,r,n){var i=this.fs.createNode(t,e,r,n),o=this.fs.realPath(i);try{this.FS.isDir(i.mode)?this.nodefs.mkdirSync(o,i.mode):this.nodefs.writeFileSync(o,"",{mode:i.mode});}catch(t){if(!t.code)throw t;throw new this.FS.ErrnoError(this.ERRNO_CODES[t.code])}return i},W.prototype.rename=function(t,e,r){var n=this.fs.realPath(t),i=this.PATH.join2(this.fs.realPath(e),r);try{this.nodefs.renameSync(n,i),t.name=r,t.parent=e;}catch(t){if(!t.code)throw t;throw new this.FS.ErrnoError(this.ERRNO_CODES[t.code])}},W.prototype.unlink=function(t,e){var r=this.PATH.join2(this.fs.realPath(t),e);try{this.nodefs.unlinkSync(r);}catch(t){if(!t.code)throw t;throw new this.FS.ErrnoError(this.ERRNO_CODES[t.code])}},W.prototype.rmdir=function(t,e){var r=this.PATH.join2(this.fs.realPath(t),e);try{this.nodefs.rmdirSync(r);}catch(t){if(!t.code)throw t;throw new this.FS.ErrnoError(this.ERRNO_CODES[t.code])}},W.prototype.readdir=function(t){var e=this.fs.realPath(t);try{var r=this.nodefs.readdirSync(e);return r.push(".",".."),r}catch(t){if(!t.code)throw t;throw new this.FS.ErrnoError(this.ERRNO_CODES[t.code])}},W.prototype.symlink=function(t,e,r){var n=this.PATH.join2(this.fs.realPath(t),e);try{this.nodefs.symlinkSync(r,n);}catch(t){if(!t.code)throw t;throw new this.FS.ErrnoError(this.ERRNO_CODES[t.code])}},W.prototype.readlink=function(t){var e=this.fs.realPath(t);try{return this.nodefs.readlinkSync(e)}catch(t){if(!t.code)throw t;throw new this.FS.ErrnoError(this.ERRNO_CODES[t.code])}};var J=function(t,e,r,n){void 0===t&&(t=self.FS),void 0===e&&(e=self.PATH),void 0===r&&(r=self.ERRNO_CODES),void 0===n&&(n=A),this.flagsToPermissionStringMap={0:"r",1:"r+",2:"r+",64:"r",65:"r+",66:"r+",129:"rx+",193:"rx+",514:"w+",577:"w",578:"w+",705:"wx",706:"wx+",1024:"a",1025:"a",1026:"a+",1089:"a",1090:"a+",1153:"ax",1154:"ax+",1217:"ax",1218:"ax+",4096:"rs",4098:"rs+"},this.nodefs=n,this.FS=t,this.PATH=e,this.ERRNO_CODES=r,this.node_ops=new W(this),this.stream_ops=new V(this);};J.prototype.mount=function(t){return this.createNode(null,"/",this.getMode(t.opts.root),0)},J.prototype.createNode=function(t,e,r,n){var i=this.FS;if(!i.isDir(r)&&!i.isFile(r)&&!i.isLink(r))throw new i.ErrnoError(this.ERRNO_CODES.EINVAL);var o=i.createNode(t,e,r);return o.node_ops=this.node_ops,o.stream_ops=this.stream_ops,o},J.prototype.getMode=function(t){var e;try{e=this.nodefs.lstatSync(t);}catch(t){if(!t.code)throw t;throw new this.FS.ErrnoError(this.ERRNO_CODES[t.code])}return e.mode},J.prototype.realPath=function(t){for(var e=[];t.parent!==t;)e.push(t.name),t=t.parent;return e.push(t.mount.opts.root),e.reverse(),this.PATH.join.apply(null,e)},J.prototype.flagsToPermissionString=function(t){var e="string"==typeof t?parseInt(t,10):t;return (e&=8191)in this.flagsToPermissionStringMap?this.flagsToPermissionStringMap[e]:t},J.prototype.getNodeFS=function(){return this.nodefs},J.prototype.getFS=function(){return this.FS},J.prototype.getPATH=function(){return this.PATH},J.prototype.getERRNO_CODES=function(){return this.ERRNO_CODES};var Y=function(){};Y.prototype.supportsLinks=function(){return !1},Y.prototype.diskSpace=function(t,e){e(0,0);},Y.prototype.openFile=function(t,e,r){throw new f(a.ENOTSUP)},Y.prototype.createFile=function(t,e,r,n){throw new f(a.ENOTSUP)},Y.prototype.open=function(t,e,r,n){var i=this;this.stat(t,!1,(function(o,s){if(o)switch(e.pathNotExistsAction()){case l.CREATE_FILE:return i.stat(u.dirname(t),!1,(function(o,a){o?n(o):a&&!a.isDirectory()?n(f.ENOTDIR(u.dirname(t))):i.createFile(t,e,r,n);}));case l.THROW_EXCEPTION:return n(f.ENOENT(t));default:return n(new f(a.EINVAL,"Invalid FileFlag object."))}else {if(s&&s.isDirectory())return n(f.EISDIR(t));switch(e.pathExistsAction()){case l.THROW_EXCEPTION:return n(f.EEXIST(t));case l.TRUNCATE_FILE:return i.openFile(t,e,(function(t,e){t?n(t):e?e.truncate(0,(function(){e.sync((function(){n(null,e);}));})):R();}));case l.NOP:return i.openFile(t,e,n);default:return n(new f(a.EINVAL,"Invalid FileFlag object."))}}}));},Y.prototype.rename=function(t,e,r){r(new f(a.ENOTSUP));},Y.prototype.renameSync=function(t,e){throw new f(a.ENOTSUP)},Y.prototype.stat=function(t,e,r){r(new f(a.ENOTSUP));},Y.prototype.statSync=function(t,e){throw new f(a.ENOTSUP)},Y.prototype.openFileSync=function(t,e,r){throw new f(a.ENOTSUP)},Y.prototype.createFileSync=function(t,e,r){throw new f(a.ENOTSUP)},Y.prototype.openSync=function(t,e,r){var n;try{n=this.statSync(t,!1);}catch(n){switch(e.pathNotExistsAction()){case l.CREATE_FILE:if(!this.statSync(u.dirname(t),!1).isDirectory())throw f.ENOTDIR(u.dirname(t));return this.createFileSync(t,e,r);case l.THROW_EXCEPTION:throw f.ENOENT(t);default:throw new f(a.EINVAL,"Invalid FileFlag object.")}}if(n.isDirectory())throw f.EISDIR(t);switch(e.pathExistsAction()){case l.THROW_EXCEPTION:throw f.EEXIST(t);case l.TRUNCATE_FILE:return this.unlinkSync(t),this.createFileSync(t,e,n.mode);case l.NOP:return this.openFileSync(t,e,r);default:throw new f(a.EINVAL,"Invalid FileFlag object.")}},Y.prototype.unlink=function(t,e){e(new f(a.ENOTSUP));},Y.prototype.unlinkSync=function(t){throw new f(a.ENOTSUP)},Y.prototype.rmdir=function(t,e){e(new f(a.ENOTSUP));},Y.prototype.rmdirSync=function(t){throw new f(a.ENOTSUP)},Y.prototype.mkdir=function(t,e,r){r(new f(a.ENOTSUP));},Y.prototype.mkdirSync=function(t,e){throw new f(a.ENOTSUP)},Y.prototype.readdir=function(t,e){e(new f(a.ENOTSUP));},Y.prototype.readdirSync=function(t){throw new f(a.ENOTSUP)},Y.prototype.exists=function(t,e){this.stat(t,null,(function(t){e(!t);}));},Y.prototype.existsSync=function(t){try{return this.statSync(t,!0),!0}catch(t){return !1}},Y.prototype.realpath=function(t,e,r){if(this.supportsLinks())for(var n=t.split(u.sep),i=0;i<n.length;i++){var o=n.slice(0,i+1);n[i]=u.join.apply(null,o);}else this.exists(t,(function(e){e?r(null,t):r(f.ENOENT(t));}));},Y.prototype.realpathSync=function(t,e){if(this.supportsLinks()){for(var r=t.split(u.sep),n=0;n<r.length;n++){var i=r.slice(0,n+1);r[n]=u.join.apply(u,i);}return r.join(u.sep)}if(this.existsSync(t))return t;throw f.ENOENT(t)},Y.prototype.truncate=function(t,e,r){this.open(t,p.getFileFlag("r+"),420,(function(t,n){if(t)return r(t);n.truncate(e,(function(t){n.close((function(e){r(t||e);}));}));}));},Y.prototype.truncateSync=function(t,e){var r=this.openSync(t,p.getFileFlag("r+"),420);try{r.truncateSync(e);}catch(t){throw t}finally{r.closeSync();}},Y.prototype.readFile=function(e,r,n,i){var o=i;this.open(e,n,420,(function(e,n){if(e)return i(e);i=function(t,e){n.close((function(r){return t||(t=r),o(t,e)}));},n.stat((function(e,o){if(e)return i(e);var a=t.alloc(o.size);n.read(a,0,o.size,0,(function(t){if(t)return i(t);if(null===r)return i(t,a);try{i(null,a.toString(r));}catch(t){i(t);}}));}));}));},Y.prototype.readFileSync=function(e,r,n){var i=this.openSync(e,n,420);try{var o=i.statSync(),a=t.alloc(o.size);return i.readSync(a,0,o.size,0),i.closeSync(),null===r?a:a.toString(r)}finally{i.closeSync();}},Y.prototype.writeFile=function(e,r,n,i,o,a){var s=a;this.open(e,i,420,(function(e,i){if(e)return a(e);a=function(t){i.close((function(e){s(t||e);}));};try{"string"==typeof r&&(r=t.from(r,n));}catch(t){return a(t)}i.write(r,0,r.length,0,a);}));},Y.prototype.writeFileSync=function(e,r,n,i,o){var a=this.openSync(e,i,o);try{"string"==typeof r&&(r=t.from(r,n)),a.writeSync(r,0,r.length,0);}finally{a.closeSync();}},Y.prototype.appendFile=function(e,r,n,i,o,a){var s=a;this.open(e,i,o,(function(e,i){if(e)return a(e);a=function(t){i.close((function(e){s(t||e);}));},"string"==typeof r&&(r=t.from(r,n)),i.write(r,0,r.length,null,a);}));},Y.prototype.appendFileSync=function(e,r,n,i,o){var a=this.openSync(e,i,o);try{"string"==typeof r&&(r=t.from(r,n)),a.writeSync(r,0,r.length,null);}finally{a.closeSync();}},Y.prototype.chmod=function(t,e,r,n){n(new f(a.ENOTSUP));},Y.prototype.chmodSync=function(t,e,r){throw new f(a.ENOTSUP)},Y.prototype.chown=function(t,e,r,n,i){i(new f(a.ENOTSUP));},Y.prototype.chownSync=function(t,e,r,n){throw new f(a.ENOTSUP)},Y.prototype.utimes=function(t,e,r,n){n(new f(a.ENOTSUP));},Y.prototype.utimesSync=function(t,e,r){throw new f(a.ENOTSUP)},Y.prototype.link=function(t,e,r){r(new f(a.ENOTSUP));},Y.prototype.linkSync=function(t,e){throw new f(a.ENOTSUP)},Y.prototype.symlink=function(t,e,r,n){n(new f(a.ENOTSUP));},Y.prototype.symlinkSync=function(t,e,r){throw new f(a.ENOTSUP)},Y.prototype.readlink=function(t,e){e(new f(a.ENOTSUP));},Y.prototype.readlinkSync=function(t){throw new f(a.ENOTSUP)};var Z=function(t){function e(){t.apply(this,arguments);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.supportsSynch=function(){return !0},e.prototype.rename=function(t,e,r){try{this.renameSync(t,e),r();}catch(t){r(t);}},e.prototype.stat=function(t,e,r){try{r(null,this.statSync(t,e));}catch(t){r(t);}},e.prototype.open=function(t,e,r,n){try{n(null,this.openSync(t,e,r));}catch(t){n(t);}},e.prototype.unlink=function(t,e){try{this.unlinkSync(t),e();}catch(t){e(t);}},e.prototype.rmdir=function(t,e){try{this.rmdirSync(t),e();}catch(t){e(t);}},e.prototype.mkdir=function(t,e,r){try{this.mkdirSync(t,e),r();}catch(t){r(t);}},e.prototype.readdir=function(t,e){try{e(null,this.readdirSync(t));}catch(t){e(t);}},e.prototype.chmod=function(t,e,r,n){try{this.chmodSync(t,e,r),n();}catch(t){n(t);}},e.prototype.chown=function(t,e,r,n,i){try{this.chownSync(t,e,r,n),i();}catch(t){i(t);}},e.prototype.utimes=function(t,e,r,n){try{this.utimesSync(t,e,r),n();}catch(t){n(t);}},e.prototype.link=function(t,e,r){try{this.linkSync(t,e),r();}catch(t){r(t);}},e.prototype.symlink=function(t,e,r,n){try{this.symlinkSync(t,e,r),n();}catch(t){n(t);}},e.prototype.readlink=function(t,e){try{e(null,this.readlinkSync(t));}catch(t){e(t);}},e}(Y),G=function(){};G.prototype.sync=function(t){t(new f(a.ENOTSUP));},G.prototype.syncSync=function(){throw new f(a.ENOTSUP)},G.prototype.datasync=function(t){this.sync(t);},G.prototype.datasyncSync=function(){return this.syncSync()},G.prototype.chown=function(t,e,r){r(new f(a.ENOTSUP));},G.prototype.chownSync=function(t,e){throw new f(a.ENOTSUP)},G.prototype.chmod=function(t,e){e(new f(a.ENOTSUP));},G.prototype.chmodSync=function(t){throw new f(a.ENOTSUP)},G.prototype.utimes=function(t,e,r){r(new f(a.ENOTSUP));},G.prototype.utimesSync=function(t,e){throw new f(a.ENOTSUP)};var X=function(e){function r(t,r,n,i,o){if(e.call(this),this._pos=0,this._dirty=!1,this._fs=t,this._path=r,this._flag=n,this._stat=i,this._buffer=o||z(),this._stat.size!==this._buffer.length&&this._flag.isReadable())throw new Error("Invalid buffer: Buffer is "+this._buffer.length+" long, yet Stats object specifies that file is "+this._stat.size+" long.")}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.getBuffer=function(){return this._buffer},r.prototype.getStats=function(){return this._stat},r.prototype.getFlag=function(){return this._flag},r.prototype.getPath=function(){return this._path},r.prototype.getPos=function(){return this._flag.isAppendable()?this._stat.size:this._pos},r.prototype.advancePos=function(t){return this._pos+=t},r.prototype.setPos=function(t){return this._pos=t},r.prototype.sync=function(t){try{this.syncSync(),t();}catch(e){t(e);}},r.prototype.syncSync=function(){throw new f(a.ENOTSUP)},r.prototype.close=function(t){try{this.closeSync(),t();}catch(e){t(e);}},r.prototype.closeSync=function(){throw new f(a.ENOTSUP)},r.prototype.stat=function(t){try{t(null,this._stat.clone());}catch(e){t(e);}},r.prototype.statSync=function(){return this._stat.clone()},r.prototype.truncate=function(t,e){try{this.truncateSync(t),this._flag.isSynchronous()&&!A.getRootFS().supportsSynch()&&this.sync(e),e();}catch(t){return e(t)}},r.prototype.truncateSync=function(e){if(this._dirty=!0,!this._flag.isWriteable())throw new f(a.EPERM,"File not opened with a writeable mode.");if(this._stat.mtime=new Date,e>this._buffer.length){var r=t.alloc(e-this._buffer.length,0);return this.writeSync(r,0,r.length,this._buffer.length),void(this._flag.isSynchronous()&&A.getRootFS().supportsSynch()&&this.syncSync())}this._stat.size=e;var n=t.alloc(e);this._buffer.copy(n,0,0,e),this._buffer=n,this._flag.isSynchronous()&&A.getRootFS().supportsSynch()&&this.syncSync();},r.prototype.write=function(t,e,r,n,i){try{i(null,this.writeSync(t,e,r,n),t);}catch(t){i(t);}},r.prototype.writeSync=function(e,r,n,i){if(this._dirty=!0,null==i&&(i=this.getPos()),!this._flag.isWriteable())throw new f(a.EPERM,"File not opened with a writeable mode.");var o=i+n;if(o>this._stat.size&&(this._stat.size=o,o>this._buffer.length)){var s=t.alloc(o);this._buffer.copy(s),this._buffer=s;}var u=e.copy(this._buffer,i,r,r+n);return this._stat.mtime=new Date,this._flag.isSynchronous()?(this.syncSync(),u):(this.setPos(i+u),u)},r.prototype.read=function(t,e,r,n,i){try{i(null,this.readSync(t,e,r,n),t);}catch(t){i(t);}},r.prototype.readSync=function(t,e,r,n){if(!this._flag.isReadable())throw new f(a.EPERM,"File not opened with a readable mode.");null==n&&(n=this.getPos()),n+r>this._stat.size&&(r=this._stat.size-n);var i=this._buffer.copy(t,e,n,n+r);return this._stat.atime=new Date,this._pos=n+r,i},r.prototype.chmod=function(t,e){try{this.chmodSync(t),e();}catch(t){e(t);}},r.prototype.chmodSync=function(t){if(!this._fs.supportsProps())throw new f(a.ENOTSUP);this._dirty=!0,this._stat.chmod(t),this.syncSync();},r.prototype.isDirty=function(){return this._dirty},r.prototype.resetDirty=function(){this._dirty=!1;},r}(G),$=function(t){function e(e,r,n,i,o){t.call(this,e,r,n,i,o);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.sync=function(t){t();},e.prototype.syncSync=function(){},e.prototype.close=function(t){t();},e.prototype.closeSync=function(){},e}(X),Q=function(t){function e(e,r,n,i,o){t.call(this,e,r,n,i,o);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this),this.resetDirty());},e.prototype.closeSync=function(){this.syncSync();},e}(X),tt=function(t){function e(r,n,i){if(void 0===i&&(i=!0),t.call(this),this._queue=[],this._queueRunning=!1,this._isInitialized=!1,this._initializeCallbacks=[],this._sync=r,this._async=n,!r.supportsSynch())throw new Error("The first argument to AsyncMirror needs to be a synchronous file system.");T(i,e.Name,{sync:"sync file system instance",async:"async file system instance"});}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.Create=function(t,r){try{var n=new e(t.sync,t.async,!1);n.initialize((function(t){t?r(t):r(null,n);}),!1);}catch(t){r(t);}},e.isAvailable=function(){return !0},e.prototype.getName=function(){return e.Name},e.prototype._syncSync=function(t){this._sync.writeFileSync(t.getPath(),t.getBuffer(),null,p.getFileFlag("w"),t.getStats().mode),this.enqueueOp({apiMethod:"writeFile",arguments:[t.getPath(),t.getBuffer(),null,t.getFlag(),t.getStats().mode]});},e.prototype.initialize=function(t,e){var r=this;void 0===e&&(e=!0),e&&console.warn("[AsyncMirror] AsyncMirror.initialize() is deprecated and will be removed in the next major version. Please use 'AsyncMirror.Create({ sync: (sync file system instance), async: (async file system instance)}, cb)' to create and initialize AsyncMirror instances.");var n=this._initializeCallbacks;if(this._isInitialized)t();else if(1===n.push(t)){var i=function(t,e,n){"/"!==t&&r._sync.mkdirSync(t,e),r._async.readdir(t,(function(e,r){var i=0;e?n(e):function e(a){a?n(a):i<r.length?(o(u.join(t,r[i]),e),i++):n();}();}));},o=function(t,e){r._async.stat(t,!1,(function(n,o){n?e(n):o.isDirectory()?i(t,o.mode,e):function(t,e,n){r._async.readFile(t,null,p.getFileFlag("r"),(function(i,o){if(i)n(i);else try{r._sync.writeFileSync(t,o,null,p.getFileFlag("w"),e);}catch(t){i=t;}finally{n(i);}}));}(t,o.mode,e);}));};i("/",0,(function(t){r._isInitialized=!t,r._initializeCallbacks=[],n.forEach((function(e){return e(t)}));}));}},e.prototype.isReadOnly=function(){return !1},e.prototype.supportsSynch=function(){return !0},e.prototype.supportsLinks=function(){return !1},e.prototype.supportsProps=function(){return this._sync.supportsProps()&&this._async.supportsProps()},e.prototype.renameSync=function(t,e){this.checkInitialized(),this._sync.renameSync(t,e),this.enqueueOp({apiMethod:"rename",arguments:[t,e]});},e.prototype.statSync=function(t,e){return this.checkInitialized(),this._sync.statSync(t,e)},e.prototype.openSync=function(t,e,r){return this.checkInitialized(),this._sync.openSync(t,e,r).closeSync(),new Q(this,t,e,this._sync.statSync(t,!1),this._sync.readFileSync(t,null,p.getFileFlag("r")))},e.prototype.unlinkSync=function(t){this.checkInitialized(),this._sync.unlinkSync(t),this.enqueueOp({apiMethod:"unlink",arguments:[t]});},e.prototype.rmdirSync=function(t){this.checkInitialized(),this._sync.rmdirSync(t),this.enqueueOp({apiMethod:"rmdir",arguments:[t]});},e.prototype.mkdirSync=function(t,e){this.checkInitialized(),this._sync.mkdirSync(t,e),this.enqueueOp({apiMethod:"mkdir",arguments:[t,e]});},e.prototype.readdirSync=function(t){return this.checkInitialized(),this._sync.readdirSync(t)},e.prototype.existsSync=function(t){return this.checkInitialized(),this._sync.existsSync(t)},e.prototype.chmodSync=function(t,e,r){this.checkInitialized(),this._sync.chmodSync(t,e,r),this.enqueueOp({apiMethod:"chmod",arguments:[t,e,r]});},e.prototype.chownSync=function(t,e,r,n){this.checkInitialized(),this._sync.chownSync(t,e,r,n),this.enqueueOp({apiMethod:"chown",arguments:[t,e,r,n]});},e.prototype.utimesSync=function(t,e,r){this.checkInitialized(),this._sync.utimesSync(t,e,r),this.enqueueOp({apiMethod:"utimes",arguments:[t,e,r]});},e.prototype.checkInitialized=function(){if(!this._isInitialized)throw new f(a.EPERM,"AsyncMirrorFS is not initialized. Please initialize AsyncMirrorFS using its initialize() method before using it.")},e.prototype.enqueueOp=function(t){var e=this;if(this._queue.push(t),!this._queueRunning){this._queueRunning=!0;var r=function(t){if(t&&console.error("WARNING: File system has desynchronized. Received following error: "+t+"\n$"),e._queue.length>0){var n=e._queue.shift(),i=n.arguments;i.push(r),e._async[n.apiMethod].apply(e._async,i);}else e._queueRunning=!1;};r();}},e}(Z);tt.Name="AsyncMirror",tt.Options={sync:{type:"object",description:"The synchronous file system to mirror the asynchronous file system to."},async:{type:"object",description:"The asynchronous file system to mirror."}};var et="object"==typeof n&&n&&n.Object===Object&&n,rt="object"==typeof self&&self&&self.Object===Object&&self,nt=et||rt||Function("return this")(),it=nt.Symbol,ot=Object.prototype,at=ot.hasOwnProperty,st=ot.toString,ut=it?it.toStringTag:void 0,ct=Object.prototype.toString,lt=it?it.toStringTag:void 0;function ft(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":lt&&lt in Object(t)?function(t){var e=at.call(t,ut),r=t[ut];try{t[ut]=void 0;var n=!0;}catch(t){}var i=st.call(t);return n&&(e?t[ut]=r:delete t[ut]),i}(t):function(t){return ct.call(t)}(t)}function ht(t){return "number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function dt(t){return null!=t&&ht(t.length)&&!function(t){if(!function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}(t))return !1;var e=ft(t);return "[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}(t)}var pt={};function yt(){}function gt(t){return function(){if(null!==t){var e=t;t=null,e.apply(this,arguments);}}}var mt="function"==typeof Symbol&&Symbol.iterator;function bt(t){return null!=t&&"object"==typeof t}function vt(t){return bt(t)&&"[object Arguments]"==ft(t)}var wt=Object.prototype,_t=wt.hasOwnProperty,St=wt.propertyIsEnumerable,Et=vt(function(){return arguments}())?vt:function(t){return bt(t)&&_t.call(t,"callee")&&!St.call(t,"callee")},It=Array.isArray,At="object"==typeof e&&e&&!e.nodeType&&e,kt=At&&"object"==typeof i&&i&&!i.nodeType&&i,Dt=kt&&kt.exports===At?nt.Buffer:void 0,xt=(Dt?Dt.isBuffer:void 0)||function(){return !1},Tt=/^(?:0|[1-9]\d*)$/;function Pt(t,e){return !!(e=null==e?9007199254740991:e)&&("number"==typeof t||Tt.test(t))&&t>-1&&t%1==0&&t<e}var Ot={};Ot["[object Float32Array]"]=Ot["[object Float64Array]"]=Ot["[object Int8Array]"]=Ot["[object Int16Array]"]=Ot["[object Int32Array]"]=Ot["[object Uint8Array]"]=Ot["[object Uint8ClampedArray]"]=Ot["[object Uint16Array]"]=Ot["[object Uint32Array]"]=!0,Ot["[object Arguments]"]=Ot["[object Array]"]=Ot["[object ArrayBuffer]"]=Ot["[object Boolean]"]=Ot["[object DataView]"]=Ot["[object Date]"]=Ot["[object Error]"]=Ot["[object Function]"]=Ot["[object Map]"]=Ot["[object Number]"]=Ot["[object Object]"]=Ot["[object RegExp]"]=Ot["[object Set]"]=Ot["[object String]"]=Ot["[object WeakMap]"]=!1;var Rt,Ct="object"==typeof e&&e&&!e.nodeType&&e,Mt=Ct&&"object"==typeof i&&i&&!i.nodeType&&i,Nt=Mt&&Mt.exports===Ct&&et.process,jt=function(){try{return Nt&&Nt.binding&&Nt.binding("util")}catch(t){}}(),Bt=jt&&jt.isTypedArray,Lt=Bt?(Rt=Bt,function(t){return Rt(t)}):function(t){return bt(t)&&ht(t.length)&&!!Ot[ft(t)]},Ft=Object.prototype.hasOwnProperty;function Ut(t,e){var r=It(t),n=!r&&Et(t),i=!r&&!n&&xt(t),o=!r&&!n&&!i&&Lt(t),a=r||n||i||o,s=a?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],u=s.length;for(var c in t)!e&&!Ft.call(t,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Pt(c,u))||s.push(c);return s}var zt=Object.prototype,Kt=function(t,e){return function(r){return t(e(r))}}(Object.keys,Object),qt=Object.prototype.hasOwnProperty;function Ht(t){if(r=(e=t)&&e.constructor,e!==("function"==typeof r&&r.prototype||zt))return Kt(t);var e,r,n=[];for(var i in Object(t))qt.call(t,i)&&"constructor"!=i&&n.push(i);return n}function Vt(t){var e,r=dt(e=t)?Ut(e):Ht(e),n=-1,i=r.length;return function(){var e=r[++n];return n<i?{value:t[e],key:e}:null}}function Wt(t){if(dt(t))return function(t){var e=-1,r=t.length;return function(){return ++e<r?{value:t[e],key:e}:null}}(t);var e=function(t){return mt&&t[mt]&&t[mt]()}(t);return e?function(t){var e=-1;return function(){var r=t.next();return r.done?null:(e++,{value:r.value,key:e})}}(e):Vt(t)}function Jt(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments);}}function Yt(t,e,r){r=gt(r||yt);var n=0,i=0,o=t.length;function a(t,e){t?r(t):++i!==o&&e!==pt||r(null);}for(0===o&&r(null);n<o;n++)e(t[n],n,Jt(a));}var Zt,Gt,Xt,$t=(Zt=function(t,e,r,n){!function(t){return function(e,r,n){if(n=gt(n||yt),t<=0||!e)return n(null);var i=Wt(e),o=!1,a=0;function s(t,e){if(a-=1,t)o=!0,n(t);else {if(e===pt||o&&a<=0)return o=!0,n(null);u();}}function u(){for(;a<t&&!o;){var e=i();if(null===e)return o=!0,void(a<=0&&n(null));a+=1,r(e.value,e.key,Jt(s));}}u();}}(e)(t,r,n);},Gt=1/0,function(t,e,r){return Zt(t,Gt,e,r)}),Qt="function"==typeof setImmediate&&setImmediate,te="object"==typeof o&&"function"==typeof o.nextTick;function ee(t,e,r){!function(t,e,r){(dt(t)?Yt:$t)(t,e,r);}(t,function(t){return function(e,r,n){return t(e,n)}}(e),r);}Qt&&setImmediate,te||Qt&&setImmediate;var re=function(t){this._cache={},this._client=t;};re.prototype.readdir=function(t,e){var r=this,n=this.getCachedDirInfo(t);this._wrap((function(e){null!==n&&n.contents?r._client.readdir(t,{contentHash:n.stat.contentHash},e):r._client.readdir(t,e);}),(function(i,o,a,s){i?i.status===Dropbox.ApiError.NO_CONTENT&&null!==n?e(null,n.contents.slice(0)):e(i):(r.updateCachedDirInfo(t,a,o.slice(0)),s.forEach((function(e){r.updateCachedInfo(u.join(t,e.name),e);})),e(null,o));}));},re.prototype.remove=function(t,e){var r=this;this._wrap((function(e){r._client.remove(t,e);}),(function(n,i){n||r.updateCachedInfo(t,i),e(n);}));},re.prototype.move=function(t,e,r){var n=this;this._wrap((function(r){n._client.move(t,e,r);}),(function(i,o){i||(n.deleteCachedInfo(t),n.updateCachedInfo(e,o)),r(i);}));},re.prototype.stat=function(t,e){var r=this;this._wrap((function(e){r._client.stat(t,e);}),(function(n,i){n||r.updateCachedInfo(t,i),e(n,i);}));},re.prototype.readFile=function(t,e){var r=this,n=this.getCachedFileInfo(t);null!==n&&null!==n.contents?this.stat(t,(function(i,o){i?e(i):o.contentHash===n.stat.contentHash?e(i,n.contents.slice(0),n.stat):r.readFile(t,e);})):this._wrap((function(e){r._client.readFile(t,{arrayBuffer:!0},e);}),(function(n,i,o){n||r.updateCachedInfo(t,o,i.slice(0)),e(n,i,o);}));},re.prototype.writeFile=function(t,e,r){var n=this;this._wrap((function(r){n._client.writeFile(t,e,r);}),(function(i,o){i||n.updateCachedInfo(t,o,e.slice(0)),r(i,o);}));},re.prototype.mkdir=function(t,e){var r=this;this._wrap((function(e){r._client.mkdir(t,e);}),(function(n,i){n||r.updateCachedInfo(t,i,[]),e(n);}));},re.prototype._wrap=function(t,e){var r=0,n=function(i){var o=2;if(i&&3>++r)switch(i.status){case Dropbox.ApiError.SERVER_ERROR:case Dropbox.ApiError.NETWORK_ERROR:case Dropbox.ApiError.RATE_LIMITED:setTimeout((function(){t(n);}),1e3*o);break;default:e.apply(null,arguments);}else e.apply(null,arguments);};t(n);},re.prototype.getCachedInfo=function(t){return this._cache[t.toLowerCase()]},re.prototype.putCachedInfo=function(t,e){this._cache[t.toLowerCase()]=e;},re.prototype.deleteCachedInfo=function(t){delete this._cache[t.toLowerCase()];},re.prototype.getCachedDirInfo=function(t){var e,r=this.getCachedInfo(t);return (e=r)&&e.stat.isFolder?r:null},re.prototype.getCachedFileInfo=function(t){var e,r=this.getCachedInfo(t);return (e=r)&&e.stat.isFile?r:null},re.prototype.updateCachedDirInfo=function(t,e,r){void 0===r&&(r=null);var n=this.getCachedInfo(t);null===e.contentHash||void 0!==n&&n.stat.contentHash===e.contentHash||this.putCachedInfo(t,{stat:e,contents:r});},re.prototype.updateCachedFileInfo=function(t,e,r){void 0===r&&(r=null);var n=this.getCachedInfo(t);null===e.versionTag||void 0!==n&&n.stat.versionTag===e.versionTag||this.putCachedInfo(t,{stat:e,contents:r});},re.prototype.updateCachedInfo=function(t,e,r){var n;void 0===r&&(r=null),e.isFile&&(null==(n=r)||"object"==typeof n&&"number"==typeof n.byteLength)?this.updateCachedFileInfo(t,e,r):e.isFolder&&Array.isArray(r)&&this.updateCachedDirInfo(t,e,r);};var ne=function(t){function e(e,r,n,i,o){t.call(this,e,r,n,i,o);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.sync=function(t){var e=this;if(this.isDirty()){var r=M(this.getBuffer());this._fs._writeFileStrict(this.getPath(),r,(function(r){r||e.resetDirty(),t(r);}));}else t();},e.prototype.close=function(t){this.sync(t);},e}(X),ie=function(t){function e(r,n){void 0===n&&(n=!0),t.call(this),this._client=new re(r),T(n,e.Name,{client:"authenticated dropbox client instance"}),Xt||((Xt={})[Dropbox.ApiError.NETWORK_ERROR]=a.EIO,Xt[Dropbox.ApiError.INVALID_PARAM]=a.EINVAL,Xt[Dropbox.ApiError.INVALID_TOKEN]=a.EPERM,Xt[Dropbox.ApiError.OAUTH_ERROR]=a.EPERM,Xt[Dropbox.ApiError.NOT_FOUND]=a.ENOENT,Xt[Dropbox.ApiError.INVALID_METHOD]=a.EINVAL,Xt[Dropbox.ApiError.NOT_ACCEPTABLE]=a.EINVAL,Xt[Dropbox.ApiError.CONFLICT]=a.EINVAL,Xt[Dropbox.ApiError.RATE_LIMITED]=a.EBUSY,Xt[Dropbox.ApiError.SERVER_ERROR]=a.EBUSY,Xt[Dropbox.ApiError.OVER_QUOTA]=a.ENOSPC);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.Create=function(t,r){r(null,new e(t.client,!1));},e.isAvailable=function(){return "undefined"!=typeof Dropbox},e.prototype.getName=function(){return e.Name},e.prototype.isReadOnly=function(){return !1},e.prototype.supportsSymlinks=function(){return !1},e.prototype.supportsProps=function(){return !1},e.prototype.supportsSynch=function(){return !1},e.prototype.empty=function(t){var e=this;this._client.readdir("/",(function(r,n){r?t(e.convert(r,"/")):ee(n,(function(t,r){var n=u.join("/",t);e._client.remove(n,(function(t){r(t?e.convert(t,n):null);}));}),(function(e){e?t(e):t();}));}));},e.prototype.rename=function(t,e,r){var n=this;this._client.move(t,e,(function(i){i?n._client.stat(e,(function(o,a){if(o||a.isFolder){var s=i.response.error.indexOf(t)>-1?t:e;r(n.convert(i,s));}else n._client.remove(e,(function(i){i?r(n.convert(i,e)):n.rename(t,e,r);}));})):r();}));},e.prototype.stat=function(t,e,r){var n=this;this._client.stat(t,(function(e,i){if(e)r(n.convert(e,t));else {if(!i||!i.isRemoved){var o=new y(n._statType(i),i.size);return r(null,o)}r(f.FileError(a.ENOENT,t));}}));},e.prototype.open=function(t,e,r,n){var i=this;this._client.readFile(t,(function(r,o,a){if(!r){var s;s=null===o?z():L(o);var u=i._makeFile(t,e,a,s);return n(null,u)}if(!e.isReadable()){if(r.status===Dropbox.ApiError.NOT_FOUND){var c=new ArrayBuffer(0);return i._writeFileStrict(t,c,(function(r,o){if(r)n(r);else {var a=i._makeFile(t,e,o,L(c));n(null,a);}}))}return n(i.convert(r,t))}n(i.convert(r,t));}));},e.prototype._writeFileStrict=function(t,e,r){var n=this,i=u.dirname(t);this.stat(i,!1,(function(o,s){o?r(f.FileError(a.ENOENT,i)):n._client.writeFile(t,e,(function(e,i){e?r(n.convert(e,t)):r(null,i);}));}));},e.prototype._statType=function(t){return t.isFile?d.FILE:d.DIRECTORY},e.prototype._makeFile=function(t,e,r,n){var i=this._statType(r),o=new y(i,r.size);return new ne(this,t,e,o,n)},e.prototype._remove=function(t,e,r){var n=this;this._client.stat(t,(function(i,o){i?e(n.convert(i,t)):o.isFile&&!r?e(f.FileError(a.ENOTDIR,t)):!o.isFile&&r?e(f.FileError(a.EISDIR,t)):n._client.remove(t,(function(r){e(r?n.convert(r,t):null);}));}));},e.prototype.unlink=function(t,e){this._remove(t,e,!0);},e.prototype.rmdir=function(t,e){this._remove(t,e,!1);},e.prototype.mkdir=function(t,e,r){var n=this,i=u.dirname(t);this._client.stat(i,(function(e,o){e?r(n.convert(e,i)):n._client.mkdir(t,(function(e){r(e?f.FileError(a.EEXIST,t):null);}));}));},e.prototype.readdir=function(t,e){var r=this;this._client.readdir(t,(function(t,n){return t?e(r.convert(t)):e(null,n)}));},e.prototype.convert=function(t,e){void 0===e&&(e=null);var r=Xt[t.status];return void 0===r&&(r=a.EIO),e?f.FileError(r,e):new f(r)},e}(Y);function oe(t,e){void 0===e&&(e="");for(var r=t.errno,n=t.node,i=[];n&&(i.unshift(n.name),n!==n.parent);)n=n.parent;return new f(r,c[r],i.length>0?"/"+i.join("/"):e)}ie.Name="Dropbox",ie.Options={client:{type:"object",description:"An *authenticated* Dropbox client. Must be from the 0.10 JS SDK.",validator:function(t,e){t.isAuthenticated&&t.isAuthenticated()?e():e(new f(a.EINVAL,"'client' option must be an authenticated Dropbox client from the v0.10 JS SDK."));}}};var ae=function(t){function e(e,r,n,i){t.call(this),this._fs=e,this._FS=r,this._path=n,this._stream=i;}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getPos=function(){},e.prototype.close=function(t){var e=null;try{this.closeSync();}catch(t){e=t;}finally{t(e);}},e.prototype.closeSync=function(){try{this._FS.close(this._stream);}catch(t){throw oe(t,this._path)}},e.prototype.stat=function(t){try{t(null,this.statSync());}catch(e){t(e);}},e.prototype.statSync=function(){try{return this._fs.statSync(this._path,!1)}catch(t){throw oe(t,this._path)}},e.prototype.truncate=function(t,e){var r=null;try{this.truncateSync(t);}catch(t){r=t;}finally{e(r);}},e.prototype.truncateSync=function(t){try{this._FS.ftruncate(this._stream.fd,t);}catch(t){throw oe(t,this._path)}},e.prototype.write=function(t,e,r,n,i){try{i(null,this.writeSync(t,e,r,n),t);}catch(t){i(t);}},e.prototype.writeSync=function(t,e,r,n){try{var i=N(t),o=null===n?void 0:n;return this._FS.write(this._stream,i,e,r,o)}catch(t){throw oe(t,this._path)}},e.prototype.read=function(t,e,r,n,i){try{i(null,this.readSync(t,e,r,n),t);}catch(t){i(t);}},e.prototype.readSync=function(t,e,r,n){try{var i=N(t),o=null===n?void 0:n;return this._FS.read(this._stream,i,e,r,o)}catch(t){throw oe(t,this._path)}},e.prototype.sync=function(t){t();},e.prototype.syncSync=function(){},e.prototype.chown=function(t,e,r){var n=null;try{this.chownSync(t,e);}catch(t){n=t;}finally{r(n);}},e.prototype.chownSync=function(t,e){try{this._FS.fchown(this._stream.fd,t,e);}catch(t){throw oe(t,this._path)}},e.prototype.chmod=function(t,e){var r=null;try{this.chmodSync(t);}catch(t){r=t;}finally{e(r);}},e.prototype.chmodSync=function(t){try{this._FS.fchmod(this._stream.fd,t);}catch(t){throw oe(t,this._path)}},e.prototype.utimes=function(t,e,r){var n=null;try{this.utimesSync(t,e);}catch(t){n=t;}finally{r(n);}},e.prototype.utimesSync=function(t,e){this._fs.utimesSync(this._path,t,e);},e}(G),se=function(e){function r(t){e.call(this),this._FS=t;}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.Create=function(t,e){e(null,new r(t.FS));},r.isAvailable=function(){return !0},r.prototype.getName=function(){return this._FS.DB_NAME()},r.prototype.isReadOnly=function(){return !1},r.prototype.supportsLinks=function(){return !0},r.prototype.supportsProps=function(){return !0},r.prototype.supportsSynch=function(){return !0},r.prototype.renameSync=function(t,e){try{this._FS.rename(t,e);}catch(r){throw r.errno===a.ENOENT?oe(r,this.existsSync(t)?e:t):oe(r)}},r.prototype.statSync=function(t,e){try{var r=e?this._FS.lstat(t):this._FS.stat(t),n=this.modeToFileType(r.mode);return new y(n,r.size,r.mode,r.atime,r.mtime,r.ctime)}catch(e){throw oe(e,t)}},r.prototype.openSync=function(t,e,r){try{var n=this._FS.open(t,e.getFlagString(),r);if(this._FS.isDir(n.node.mode))throw this._FS.close(n),f.EISDIR(t);return new ae(this,this._FS,t,n)}catch(e){throw oe(e,t)}},r.prototype.unlinkSync=function(t){try{this._FS.unlink(t);}catch(e){throw oe(e,t)}},r.prototype.rmdirSync=function(t){try{this._FS.rmdir(t);}catch(e){throw oe(e,t)}},r.prototype.mkdirSync=function(t,e){try{this._FS.mkdir(t,e);}catch(e){throw oe(e,t)}},r.prototype.readdirSync=function(t){try{return this._FS.readdir(t).filter((function(t){return "."!==t&&".."!==t}))}catch(e){throw oe(e,t)}},r.prototype.truncateSync=function(t,e){try{this._FS.truncate(t,e);}catch(e){throw oe(e,t)}},r.prototype.readFileSync=function(t,e,r){try{var n=B(this._FS.readFile(t,{flags:r.getFlagString()}));return e?n.toString(e):n}catch(e){throw oe(e,t)}},r.prototype.writeFileSync=function(e,r,n,i,o){try{n&&(r=t.from(r,n));var a=N(r);this._FS.writeFile(e,a,{flags:i.getFlagString(),encoding:"binary"}),this._FS.chmod(e,o);}catch(t){throw oe(t,e)}},r.prototype.chmodSync=function(t,e,r){try{e?this._FS.lchmod(t,r):this._FS.chmod(t,r);}catch(e){throw oe(e,t)}},r.prototype.chownSync=function(t,e,r,n){try{e?this._FS.lchown(t,r,n):this._FS.chown(t,r,n);}catch(e){throw oe(e,t)}},r.prototype.symlinkSync=function(t,e,r){try{this._FS.symlink(t,e);}catch(t){throw oe(t)}},r.prototype.readlinkSync=function(t){try{return this._FS.readlink(t)}catch(e){throw oe(e,t)}},r.prototype.utimesSync=function(t,e,r){try{this._FS.utime(t,e.getTime(),r.getTime());}catch(e){throw oe(e,t)}},r.prototype.modeToFileType=function(t){if(this._FS.isDir(t))return d.DIRECTORY;if(this._FS.isFile(t))return d.FILE;if(this._FS.isLink(t))return d.SYMLINK;throw f.EPERM("Invalid mode: "+t)},r}(Z);se.Name="EmscriptenFileSystem",se.Options={FS:{type:"object",description:"The Emscripten file system to use (the `FS` variable)"}};var ue=function(t){function e(e,r){t.call(this),this._folder=e,this._wrapped=r;}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.Create=function(t,r){r(null,new e(t.folder,t.wrapped));},e.isAvailable=function(){return !0},e.prototype.initialize=function(t){var e=this;this._wrapped.exists(this._folder,(function(r){r?t():e._wrapped.isReadOnly()?t(f.ENOENT(e._folder)):e._wrapped.mkdir(e._folder,511,t);}));},e.prototype.getName=function(){return this._wrapped.getName()},e.prototype.isReadOnly=function(){return this._wrapped.isReadOnly()},e.prototype.supportsProps=function(){return this._wrapped.supportsProps()},e.prototype.supportsSynch=function(){return this._wrapped.supportsSynch()},e.prototype.supportsLinks=function(){return !1},e}(Y);function ce(t,e){if(null!==e&&"object"==typeof e){var r=e,n=r.path;n&&(n="/"+u.relative(t,n),r.message=r.message.replace(r.path,n),r.path=n);}return e}function le(t,e){return "function"==typeof e?function(r){arguments.length>0&&(arguments[0]=ce(t,r)),e.apply(null,arguments);}:e}function fe(t,e,r){return "Sync"!==t.slice(t.length-4)?function(){return arguments.length>0&&(e&&(arguments[0]=u.join(this._folder,arguments[0])),r&&(arguments[1]=u.join(this._folder,arguments[1])),arguments[arguments.length-1]=le(this._folder,arguments[arguments.length-1])),this._wrapped[t].apply(this._wrapped,arguments)}:function(){try{return e&&(arguments[0]=u.join(this._folder,arguments[0])),r&&(arguments[1]=u.join(this._folder,arguments[1])),this._wrapped[t].apply(this._wrapped,arguments)}catch(t){throw ce(this._folder,t)}}}ue.Name="FolderAdapter",ue.Options={folder:{type:"string",description:"The folder to use as the root directory"},wrapped:{type:"object",description:"The file system to wrap"}},["diskSpace","stat","statSync","open","openSync","unlink","unlinkSync","rmdir","rmdirSync","mkdir","mkdirSync","readdir","readdirSync","exists","existsSync","realpath","realpathSync","truncate","truncateSync","readFile","readFileSync","writeFile","writeFileSync","appendFile","appendFileSync","chmod","chmodSync","chown","chownSync","utimes","utimesSync","readlink","readlinkSync"].forEach((function(t){ue.prototype[t]=fe(t,!0,!1);})),["rename","renameSync","link","linkSync","symlink","symlinkSync"].forEach((function(t){ue.prototype[t]=fe(t,!0,!0);}));var he="undefined"!=typeof window?window:"undefined"!=typeof self?self:n,de=he.webkitRequestFileSystem||he.requestFileSystem||null;function pe(t,e,r){switch(t.name){case"PathExistsError":return f.EEXIST(e);case"QuotaExceededError":return f.FileError(a.ENOSPC,e);case"NotFoundError":return f.ENOENT(e);case"SecurityError":return f.FileError(a.EACCES,e);case"InvalidModificationError":return f.FileError(a.EPERM,e);case"TypeMismatchError":return f.FileError(r?a.ENOTDIR:a.EISDIR,e);default:return f.FileError(a.EINVAL,e)}}var ye=function(t){function e(e,r,n,i,o,a){t.call(this,e,n,i,o,a),this._entry=r;}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.sync=function(t){var e=this;if(!this.isDirty())return t();this._entry.createWriter((function(r){var n=e.getBuffer(),i=new Blob([M(n)]),o=i.size;r.onwriteend=function(n){r.onwriteend=null,r.onerror=null,r.truncate(o),e.resetDirty(),t();},r.onerror=function(r){t(pe(r,e.getPath(),!1));},r.write(i);}));},e.prototype.close=function(t){this.sync(t);},e}(X),ge=function(t){function e(r,n,i){void 0===r&&(r=5),void 0===n&&(n=he.PERSISTENT),void 0===i&&(i=!0),t.call(this),this.size=1048576*r,this.type=n,T(i,e.Name,{size:r,type:n});}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.Create=function(t,r){var n=new e(t.size,t.type,!1);n.allocate((function(t){return t?r(t):r(null,n)}),!1);},e.isAvailable=function(){return !!de},e.prototype.getName=function(){return e.Name},e.prototype.isReadOnly=function(){return !1},e.prototype.supportsSymlinks=function(){return !1},e.prototype.supportsProps=function(){return !1},e.prototype.supportsSynch=function(){return !1},e.prototype.allocate=function(t,e){var r=this;void 0===t&&(t=function(){}),void 0===e&&(e=!0),e&&console.warn("[HTML5FS] HTML5FS.allocate() is deprecated and will be removed in the next major release. Please use 'HTML5FS.Create({type: "+this.type+", size: "+this.size+"}, cb)' to create and allocate HTML5FS instances.");var n=function(e){r.fs=e,t();},i=function(e){t(pe(e,"/",!0));};this.type===he.PERSISTENT?function(t,e,r,n){if(void 0!==navigator.webkitPersistentStorage)switch(t){case he.PERSISTENT:navigator.webkitPersistentStorage.requestQuota(e,r,n);break;case he.TEMPORARY:navigator.webkitTemporaryStorage.requestQuota(e,r,n);break;default:n(new TypeError("Invalid storage type: "+t));}else he.webkitStorageInfo.requestQuota(t,e,r,n);}(this.type,this.size,(function(t){de(r.type,t,n,i);}),i):de(this.type,this.size,n,i);},e.prototype.empty=function(t){this._readdir("/",(function(e,r){e?(console.error("Failed to empty FS"),t(e)):ee(r,(function(t,e){var r=function(){e();},n=function(r){e(pe(r,t.fullPath,!t.isDirectory));};!function(t){return t.isDirectory}(t)?t.remove(r,n):t.removeRecursively(r,n);}),(function(r){e?(console.error("Failed to empty FS"),t(e)):t();}));}));},e.prototype.rename=function(t,e,r){var n=this,i=2,o=0,s=this.fs.root,c=t,l=function(t){--i<=0&&r(pe(t,c,!1));},h=function(i){return 2==++o?r(new f(a.EINVAL,"Something was identified as both a file and a directory. This should never happen.")):t===e?r():(c=u.dirname(e),void s.getDirectory(c,{},(function(o){c=u.basename(e),i.moveTo(o,c,(function(t){r();}),(function(o){i.isDirectory?(c=e,n.unlink(e,(function(i){i?l(o):n.rename(t,e,r);}))):l(o);}));}),l))};s.getFile(t,{},h,l),s.getDirectory(t,{},h,l);},e.prototype.stat=function(t,e,r){var n=this,i={create:!1},o=function(t){var e=new y(d.DIRECTORY,4096);r(null,e);},a=function(e){r(pe(e,t,!1));};this.fs.root.getFile(t,i,(function(t){t.file((function(t){var e=new y(d.FILE,t.size);r(null,e);}),a);}),(function(){n.fs.root.getDirectory(t,i,o,a);}));},e.prototype.open=function(t,e,r,n){var i=this,o=function(r){"InvalidModificationError"===r.name&&e.isExclusive()?n(f.EEXIST(t)):n(pe(r,t,!1));};this.fs.root.getFile(t,{create:e.pathNotExistsAction()===l.CREATE_FILE,exclusive:e.isExclusive()},(function(r){r.file((function(a){var s=new FileReader;s.onloadend=function(o){var u=i._makeFile(t,r,e,a,s.result);n(null,u);},s.onerror=function(t){o(s.error);},s.readAsArrayBuffer(a);}),o);}),o);},e.prototype.unlink=function(t,e){this._remove(t,e,!0);},e.prototype.rmdir=function(t,e){var r=this;this.readdir(t,(function(n,i){n?e(n):i.length>0?e(f.ENOTEMPTY(t)):r._remove(t,e,!1);}));},e.prototype.mkdir=function(t,e,r){this.fs.root.getDirectory(t,{create:!0,exclusive:!0},(function(t){r();}),(function(e){r(pe(e,t,!0));}));},e.prototype.readdir=function(t,e){this._readdir(t,(function(t,r){if(!r)return e(t);for(var n=[],i=0,o=r;i<o.length;i+=1){var a=o[i];n.push(a.name);}e(null,n);}));},e.prototype._makeFile=function(t,e,r,n,i){void 0===i&&(i=new ArrayBuffer(0));var o=new y(d.FILE,n.size),a=L(i);return new ye(this,e,t,r,o,a)},e.prototype._readdir=function(t,e){var r=function(r){e(pe(r,t,!0));};this.fs.root.getDirectory(t,{create:!1},(function(t){var n=t.createReader(),i=[],o=function(){n.readEntries((function(t){t.length?(i=i.concat(function(t){return Array.prototype.slice.call(t||[],0)}(t)),o()):e(null,i);}),r);};o();}),r);},e.prototype._remove=function(t,e,r){var n=function(n){n.remove((function(){e();}),(function(n){e(pe(n,t,!r));}));},i=function(n){e(pe(n,t,!r));},o={create:!1};r?this.fs.root.getFile(t,o,n,i):this.fs.root.getDirectory(t,o,n,i);},e}(Y);ge.Name="HTML5FS",ge.Options={size:{type:"number",optional:!0,description:"Storage quota to request, in megabytes. Allocated value may be less. Defaults to 5."},type:{type:"number",optional:!0,description:"window.PERSISTENT or window.TEMPORARY. Defaults to PERSISTENT."}};var me=function(t,e,r,n,i,o){this.id=t,this.size=e,this.mode=r,this.atime=n,this.mtime=i,this.ctime=o;};me.fromBuffer=function(t){if(void 0===t)throw new Error("NO");return new me(t.toString("ascii",30),t.readUInt32LE(0),t.readUInt16LE(4),t.readDoubleLE(6),t.readDoubleLE(14),t.readDoubleLE(22))},me.prototype.toStats=function(){return new y((61440&this.mode)===d.DIRECTORY?d.DIRECTORY:d.FILE,this.size,this.mode,new Date(this.atime),new Date(this.mtime),new Date(this.ctime))},me.prototype.getSize=function(){return 30+this.id.length},me.prototype.toBuffer=function(e){return void 0===e&&(e=t.alloc(this.getSize())),e.writeUInt32LE(this.size,0),e.writeUInt16LE(this.mode,4),e.writeDoubleLE(this.atime,6),e.writeDoubleLE(this.mtime,14),e.writeDoubleLE(this.ctime,22),e.write(this.id,30,this.id.length,"ascii"),e},me.prototype.update=function(t){var e=!1;this.size!==t.size&&(this.size=t.size,e=!0),this.mode!==t.mode&&(this.mode=t.mode,e=!0);var r=t.atime.getTime();this.atime!==r&&(this.atime=r,e=!0);var n=t.mtime.getTime();this.mtime!==n&&(this.mtime=n,e=!0);var i=t.ctime.getTime();return this.ctime!==i&&(this.ctime=i,e=!0),e},me.prototype.isFile=function(){return (61440&this.mode)===d.FILE},me.prototype.isDirectory=function(){return (61440&this.mode)===d.DIRECTORY};var be="/",ve=null;function we(){return ve||(ve=t.from("{}"))}function _e(){return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return ("x"===t?e:3&e|8).toString(16)}))}function Se(t,e){return !t||(e(t),!1)}function Ee(t,e,r){return !t||(e.abort((function(){r(t);})),!1)}var Ie=function(t){this.store=t,this.originalData={},this.modifiedKeys=[];};Ie.prototype.get=function(t){var e=this.store.get(t);return this.stashOldValue(t,e),e},Ie.prototype.put=function(t,e,r){return this.markModified(t),this.store.put(t,e,r)},Ie.prototype.del=function(t){this.markModified(t),this.store.del(t);},Ie.prototype.commit=function(){},Ie.prototype.abort=function(){for(var t=this,e=0,r=t.modifiedKeys;e<r.length;e+=1){var n=r[e],i=t.originalData[n];i?t.store.put(n,i,!0):t.store.del(n);}},Ie.prototype.stashOldValue=function(t,e){this.originalData.hasOwnProperty(t)||(this.originalData[t]=e);},Ie.prototype.markModified=function(t){-1===this.modifiedKeys.indexOf(t)&&(this.modifiedKeys.push(t),this.originalData.hasOwnProperty(t)||(this.originalData[t]=this.store.get(t)));};var Ae=function(t){function e(e,r,n,i,o){t.call(this,e,r,n,i,o);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this.getPath(),this.getBuffer(),this.getStats()),this.resetDirty());},e.prototype.closeSync=function(){this.syncSync();},e}(X),ke=function(e){function r(t){e.call(this),this.store=t.store,this.makeRootDirectory();}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.isAvailable=function(){return !0},r.prototype.getName=function(){return this.store.name()},r.prototype.isReadOnly=function(){return !1},r.prototype.supportsSymlinks=function(){return !1},r.prototype.supportsProps=function(){return !1},r.prototype.supportsSynch=function(){return !0},r.prototype.empty=function(){this.store.clear(),this.makeRootDirectory();},r.prototype.renameSync=function(e,r){var n=this.store.beginTransaction("readwrite"),i=u.dirname(e),o=u.basename(e),s=u.dirname(r),c=u.basename(r),l=this.findINode(n,i),h=this.getDirListing(n,i,l);if(!h[o])throw f.ENOENT(e);var d,p,y=h[o];if(delete h[o],0===(s+"/").indexOf(e+"/"))throw new f(a.EBUSY,i);if(s===i?(d=l,p=h):(d=this.findINode(n,s),p=this.getDirListing(n,s,d)),p[c]){var g=this.getINode(n,r,p[c]);if(!g.isFile())throw f.EPERM(r);try{n.del(g.id),n.del(p[c]);}catch(t){throw n.abort(),t}}p[c]=y;try{n.put(l.id,t.from(JSON.stringify(h)),!0),n.put(d.id,t.from(JSON.stringify(p)),!0);}catch(t){throw n.abort(),t}n.commit();},r.prototype.statSync=function(t,e){return this.findINode(this.store.beginTransaction("readonly"),t).toStats()},r.prototype.createFileSync=function(t,e,r){var n=this.store.beginTransaction("readwrite"),i=z(),o=this.commitNewFile(n,t,d.FILE,r,i);return new Ae(this,t,e,o.toStats(),i)},r.prototype.openFileSync=function(t,e){var r=this.store.beginTransaction("readonly"),n=this.findINode(r,t),i=r.get(n.id);if(void 0===i)throw f.ENOENT(t);return new Ae(this,t,e,n.toStats(),i)},r.prototype.unlinkSync=function(t){this.removeEntry(t,!1);},r.prototype.rmdirSync=function(t){if(this.readdirSync(t).length>0)throw f.ENOTEMPTY(t);this.removeEntry(t,!0);},r.prototype.mkdirSync=function(e,r){var n=this.store.beginTransaction("readwrite"),i=t.from("{}");this.commitNewFile(n,e,d.DIRECTORY,r,i);},r.prototype.readdirSync=function(t){var e=this.store.beginTransaction("readonly");return Object.keys(this.getDirListing(e,t,this.findINode(e,t)))},r.prototype._syncSync=function(t,e,r){var n=this.store.beginTransaction("readwrite"),i=this._findINode(n,u.dirname(t),u.basename(t)),o=this.getINode(n,t,i),a=o.update(r);try{n.put(o.id,e,!0),a&&n.put(i,o.toBuffer(),!0);}catch(t){throw n.abort(),t}n.commit();},r.prototype.makeRootDirectory=function(){var t=this.store.beginTransaction("readwrite");if(void 0===t.get(be)){var e=(new Date).getTime(),r=new me(_e(),4096,511|d.DIRECTORY,e,e,e);t.put(r.id,we(),!1),t.put(be,r.toBuffer(),!1),t.commit();}},r.prototype._findINode=function(t,e,r){var n=this,i=function(i){var o=n.getDirListing(t,e,i);if(o[r])return o[r];throw f.ENOENT(u.resolve(e,r))};return "/"===e?""===r?be:i(this.getINode(t,e,be)):i(this.getINode(t,e+u.sep+r,this._findINode(t,u.dirname(e),u.basename(e))))},r.prototype.findINode=function(t,e){return this.getINode(t,e,this._findINode(t,u.dirname(e),u.basename(e)))},r.prototype.getINode=function(t,e,r){var n=t.get(r);if(void 0===n)throw f.ENOENT(e);return me.fromBuffer(n)},r.prototype.getDirListing=function(t,e,r){if(!r.isDirectory())throw f.ENOTDIR(e);var n=t.get(r.id);if(void 0===n)throw f.ENOENT(e);return JSON.parse(n.toString())},r.prototype.addNewNode=function(t,e){for(var r;;)try{return r=_e(),t.put(r,e,!1),r}catch(t){}throw new f(a.EIO,"Unable to commit data to key-value store.")},r.prototype.commitNewFile=function(e,r,n,i,o){var a,s=u.dirname(r),c=u.basename(r),l=this.findINode(e,s),h=this.getDirListing(e,s,l),d=(new Date).getTime();if("/"===r)throw f.EEXIST(r);if(h[c])throw f.EEXIST(r);try{var p=this.addNewNode(e,o);a=new me(p,o.length,i|n,d,d,d);var y=this.addNewNode(e,a.toBuffer());h[c]=y,e.put(l.id,t.from(JSON.stringify(h)),!0);}catch(t){throw e.abort(),t}return e.commit(),a},r.prototype.removeEntry=function(e,r){var n=this.store.beginTransaction("readwrite"),i=u.dirname(e),o=this.findINode(n,i),a=this.getDirListing(n,i,o),s=u.basename(e);if(!a[s])throw f.ENOENT(e);var c=a[s];delete a[s];var l=this.getINode(n,e,c);if(!r&&l.isDirectory())throw f.EISDIR(e);if(r&&!l.isDirectory())throw f.ENOTDIR(e);try{n.del(l.id),n.del(c),n.put(o.id,t.from(JSON.stringify(a)),!0);}catch(t){throw n.abort(),t}n.commit();},r}(Z),De=function(t){function e(e,r,n,i,o){t.call(this,e,r,n,i,o);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.sync=function(t){var e=this;this.isDirty()?this._fs._sync(this.getPath(),this.getBuffer(),this.getStats(),(function(r){r||e.resetDirty(),t(r);})):t();},e.prototype.close=function(t){this.sync(t);},e}(X),xe=function(e){function r(){e.apply(this,arguments);}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.isAvailable=function(){return !0},r.prototype.init=function(t,e){this.store=t,this.makeRootDirectory(e);},r.prototype.getName=function(){return this.store.name()},r.prototype.isReadOnly=function(){return !1},r.prototype.supportsSymlinks=function(){return !1},r.prototype.supportsProps=function(){return !1},r.prototype.supportsSynch=function(){return !1},r.prototype.empty=function(t){var e=this;this.store.clear((function(r){Se(r,t)&&e.makeRootDirectory(t);}));},r.prototype.rename=function(e,r,n){var i=this,o=this.store.beginTransaction("readwrite"),s=u.dirname(e),c=u.basename(e),l=u.dirname(r),h=u.basename(r),d={},p={},y=!1;if(0===(l+"/").indexOf(e+"/"))return n(new f(a.EBUSY,s));var g=function(a){i.findINodeAndDirListing(o,a,(function(u,g,m){u?y||(y=!0,o.abort((function(){n(u);}))):(d[a]=g,p[a]=m,function(){if(!y&&p.hasOwnProperty(s)&&p.hasOwnProperty(l)){var a=p[s],u=d[s],g=p[l],m=d[l];if(a[c]){var b=a[c];delete a[c];var v=function(){g[h]=b,o.put(u.id,t.from(JSON.stringify(a)),!0,(function(e){Ee(e,o,n)&&(s===l?o.commit(n):o.put(m.id,t.from(JSON.stringify(g)),!0,(function(t){Ee(t,o,n)&&o.commit(n);})));}));};g[h]?i.getINode(o,r,g[h],(function(t,e){Ee(t,o,n)&&(e.isFile()?o.del(e.id,(function(t){Ee(t,o,n)&&o.del(g[h],(function(t){Ee(t,o,n)&&v();}));})):o.abort((function(t){n(f.EPERM(r));})));})):v();}else n(f.ENOENT(e));}}());}));};g(s),s!==l&&g(l);},r.prototype.stat=function(t,e,r){var n=this.store.beginTransaction("readonly");this.findINode(n,t,(function(t,e){Se(t,r)&&r(null,e.toStats());}));},r.prototype.createFile=function(t,e,r,n){var i=this,o=this.store.beginTransaction("readwrite"),a=z();this.commitNewFile(o,t,d.FILE,r,a,(function(r,o){Se(r,n)&&n(null,new De(i,t,e,o.toStats(),a));}));},r.prototype.openFile=function(t,e,r){var n=this,i=this.store.beginTransaction("readonly");this.findINode(i,t,(function(o,a){Se(o,r)&&i.get(a.id,(function(i,o){Se(i,r)&&(void 0===o?r(f.ENOENT(t)):r(null,new De(n,t,e,a.toStats(),o)));}));}));},r.prototype.unlink=function(t,e){this.removeEntry(t,!1,e);},r.prototype.rmdir=function(t,e){var r=this;this.readdir(t,(function(n,i){n?e(n):i.length>0?e(f.ENOTEMPTY(t)):r.removeEntry(t,!0,e);}));},r.prototype.mkdir=function(e,r,n){var i=this.store.beginTransaction("readwrite"),o=t.from("{}");this.commitNewFile(i,e,d.DIRECTORY,r,o,n);},r.prototype.readdir=function(t,e){var r=this,n=this.store.beginTransaction("readonly");this.findINode(n,t,(function(i,o){Se(i,e)&&r.getDirListing(n,t,o,(function(t,r){Se(t,e)&&e(null,Object.keys(r));}));}));},r.prototype._sync=function(t,e,r,n){var i=this,o=this.store.beginTransaction("readwrite");this._findINode(o,u.dirname(t),u.basename(t),(function(a,s){Ee(a,o,n)&&i.getINode(o,t,s,(function(t,i){if(Ee(t,o,n)){var a=i.update(r);o.put(i.id,e,!0,(function(t){Ee(t,o,n)&&(a?o.put(s,i.toBuffer(),!0,(function(t){Ee(t,o,n)&&o.commit(n);})):o.commit(n));}));}}));}));},r.prototype.makeRootDirectory=function(t){var e=this.store.beginTransaction("readwrite");e.get(be,(function(r,n){if(r||void 0===n){var i=(new Date).getTime(),o=new me(_e(),4096,511|d.DIRECTORY,i,i,i);e.put(o.id,we(),!1,(function(r){Ee(r,e,t)&&e.put(be,o.toBuffer(),!1,(function(r){r?e.abort((function(){t(r);})):e.commit(t);}));}));}else e.commit(t);}));},r.prototype._findINode=function(t,e,r,n){var i=this,o=function(t,i,o){t?n(t):o[r]?n(null,o[r]):n(f.ENOENT(u.resolve(e,r)));};"/"===e?""===r?n(null,be):this.getINode(t,e,be,(function(r,a){Se(r,n)&&i.getDirListing(t,e,a,(function(t,e){o(t,0,e);}));})):this.findINodeAndDirListing(t,e,o);},r.prototype.findINode=function(t,e,r){var n=this;this._findINode(t,u.dirname(e),u.basename(e),(function(i,o){Se(i,r)&&n.getINode(t,e,o,r);}));},r.prototype.getINode=function(t,e,r,n){t.get(r,(function(t,r){Se(t,n)&&(void 0===r?n(f.ENOENT(e)):n(null,me.fromBuffer(r)));}));},r.prototype.getDirListing=function(t,e,r,n){r.isDirectory()?t.get(r.id,(function(t,r){if(Se(t,n))try{n(null,JSON.parse(r.toString()));}catch(t){n(f.ENOENT(e));}})):n(f.ENOTDIR(e));},r.prototype.findINodeAndDirListing=function(t,e,r){var n=this;this.findINode(t,e,(function(i,o){Se(i,r)&&n.getDirListing(t,e,o,(function(t,e){Se(t,r)&&r(null,o,e);}));}));},r.prototype.addNewNode=function(t,e,r){var n,i=0,o=function(){5==++i?r(new f(a.EIO,"Unable to commit data to key-value store.")):(n=_e(),t.put(n,e,!1,(function(t,e){t||!e?o():r(null,n);})));};o();},r.prototype.commitNewFile=function(e,r,n,i,o,a){var s=this,c=u.dirname(r),l=u.basename(r),h=(new Date).getTime();if("/"===r)return a(f.EEXIST(r));this.findINodeAndDirListing(e,c,(function(u,c,d){Ee(u,e,a)&&(d[l]?e.abort((function(){a(f.EEXIST(r));})):s.addNewNode(e,o,(function(r,u){if(Ee(r,e,a)){var f=new me(u,o.length,i|n,h,h,h);s.addNewNode(e,f.toBuffer(),(function(r,n){Ee(r,e,a)&&(d[l]=n,e.put(c.id,t.from(JSON.stringify(d)),!0,(function(t){Ee(t,e,a)&&e.commit((function(t){Ee(t,e,a)&&a(null,f);}));})));}));}})));}));},r.prototype.removeEntry=function(e,r,n){var i=this,o=this.store.beginTransaction("readwrite"),a=u.dirname(e),s=u.basename(e);this.findINodeAndDirListing(o,a,(function(a,u,c){if(Ee(a,o,n))if(c[s]){var l=c[s];delete c[s],i.getINode(o,e,l,(function(i,a){Ee(i,o,n)&&(!r&&a.isDirectory()?o.abort((function(){n(f.EISDIR(e));})):r&&!a.isDirectory()?o.abort((function(){n(f.ENOTDIR(e));})):o.del(a.id,(function(e){Ee(e,o,n)&&o.del(l,(function(e){Ee(e,o,n)&&o.put(u.id,t.from(JSON.stringify(c)),!0,(function(t){Ee(t,o,n)&&o.commit(n);}));}));})));}));}else o.abort((function(){n(f.ENOENT(e));}));}));},r}(Y),Te=function(){this.store={};};Te.prototype.name=function(){return Pe.Name},Te.prototype.clear=function(){this.store={};},Te.prototype.beginTransaction=function(t){return new Ie(this)},Te.prototype.get=function(t){return this.store[t]},Te.prototype.put=function(t,e,r){return !(!r&&this.store.hasOwnProperty(t)||(this.store[t]=e,0))},Te.prototype.del=function(t){delete this.store[t];};var Pe=function(t){function e(){t.call(this,{store:new Te});}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.Create=function(t,r){r(null,new e);},e}(ke);Pe.Name="InMemory",Pe.Options={};var Oe=he.indexedDB||he.mozIndexedDB||he.webkitIndexedDB||he.msIndexedDB;function Re(t,e){switch(void 0===e&&(e=t.toString()),t.name){case"NotFoundError":return new f(a.ENOENT,e);case"QuotaExceededError":return new f(a.ENOSPC,e);default:return new f(a.EIO,e)}}function Ce(t,e,r){return void 0===e&&(e=a.EIO),void 0===r&&(r=null),function(n){n.preventDefault(),t(new f(e,null!==r?r:void 0));}}var Me=function(t,e){this.tx=t,this.store=e;};Me.prototype.get=function(t,e){try{var r=this.store.get(t);r.onerror=Ce(e),r.onsuccess=function(t){var r=t.target.result;e(null,void 0===r?r:L(r));};}catch(t){e(Re(t));}};var Ne=function(t){function e(e,r){t.call(this,e,r);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.put=function(t,e,r,n){try{var i,o=M(e);(i=r?this.store.put(o,t):this.store.add(o,t)).onerror=Ce(n),i.onsuccess=function(t){n(null,!0);};}catch(t){n(Re(t));}},e.prototype.del=function(t,e){try{var r=this.store.delete(t);r.onerror=Ce(e),r.onsuccess=function(t){e();};}catch(t){e(Re(t));}},e.prototype.commit=function(t){setTimeout(t,0);},e.prototype.abort=function(t){var e=null;try{this.tx.abort();}catch(t){e=Re(t);}finally{t(e);}},e}(Me),je=function(t,e){var r=this;void 0===e&&(e="browserfs"),this.storeName=e;var n=Oe.open(this.storeName,1);n.onupgradeneeded=function(t){var e=t.target.result;e.objectStoreNames.contains(r.storeName)&&e.deleteObjectStore(r.storeName),e.createObjectStore(r.storeName);},n.onsuccess=function(e){r.db=e.target.result,t(null,r);},n.onerror=Ce(t,a.EACCES);};je.prototype.name=function(){return Be.Name+" - "+this.storeName},je.prototype.clear=function(t){try{var e=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).clear();e.onsuccess=function(e){setTimeout(t,0);},e.onerror=Ce(t);}catch(e){t(Re(e));}},je.prototype.beginTransaction=function(t){void 0===t&&(t="readonly");var e=this.db.transaction(this.storeName,t),r=e.objectStore(this.storeName);if("readwrite"===t)return new Ne(e,r);if("readonly"===t)return new Me(e,r);throw new f(a.EINVAL,"Invalid transaction type.")};var Be=function(t){function e(r,n,i){var o=this;void 0===i&&(i=!0),t.call(this),this.store=new je((function(t){t?r(t):o.init(o.store,(function(t){r(t,o);}));}),n),T(i,e.Name,{storeName:n});}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.Create=function(t,r){new e(r,t.storeName,!1);},e.isAvailable=function(){try{return void 0!==Oe&&null!==Oe.open("__browserfs_test__")}catch(t){return !1}},e}(xe);Be.Name="IndexedDB",Be.Options={storeName:{type:"string",optional:!0,description:"The name of this file system. You can have multiple IndexedDB file systems operating at once, but each must have a different name."}};var Le,Fe=!1;try{he.localStorage.setItem("__test__",String.fromCharCode(55296)),Fe=he.localStorage.getItem("__test__")===String.fromCharCode(55296);}catch(t){Fe=!1;}Le=Fe?"binary_string":"binary_string_ie",t.isEncoding(Le)||(Le="base64");var Ue=function(){};Ue.prototype.name=function(){return ze.Name},Ue.prototype.clear=function(){he.localStorage.clear();},Ue.prototype.beginTransaction=function(t){return new Ie(this)},Ue.prototype.get=function(e){try{var r=he.localStorage.getItem(e);if(null!==r)return t.from(r,Le)}catch(t){}},Ue.prototype.put=function(t,e,r){try{return !(!r&&null!==he.localStorage.getItem(t)||(he.localStorage.setItem(t,e.toString(Le)),0))}catch(t){throw new f(a.ENOSPC,"LocalStorage is full.")}},Ue.prototype.del=function(t){try{he.localStorage.removeItem(t);}catch(e){throw new f(a.EIO,"Unable to delete key "+t+": "+e)}};var ze=function(t){function e(){t.call(this,{store:new Ue});}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.Create=function(t,r){r(null,new e);},e.isAvailable=function(){return void 0!==he.localStorage},e}(ke);ze.Name="LocalStorage",ze.Options={};var Ke=function(t){function e(){t.call(this),this.mountList=[],this.mntMap={},this.rootFs=new Pe;}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.Create=function(t,r){var n=new e;Object.keys(t).forEach((function(e){n.mount(e,t[e]);})),r(null,n);},e.isAvailable=function(){return !0},e.prototype.mount=function(t,e){if("/"!==t[0]&&(t="/"+t),t=u.resolve(t),this.mntMap[t])throw new f(a.EINVAL,"Mount point "+t+" is already taken.");C(t,511,this.rootFs),this.mntMap[t]=e,this.mountList.push(t),this.mountList=this.mountList.sort((function(t,e){return e.length-t.length}));},e.prototype.umount=function(t){if("/"!==t[0]&&(t="/"+t),t=u.resolve(t),!this.mntMap[t])throw new f(a.EINVAL,"Mount point "+t+" is already unmounted.");for(delete this.mntMap[t],this.mountList.splice(this.mountList.indexOf(t),1);"/"!==t&&0===this.rootFs.readdirSync(t).length;)this.rootFs.rmdirSync(t),t=u.dirname(t);},e.prototype._getFs=function(t){for(var e=this.mountList,r=e.length,n=0;n<r;n++){var i=e[n];if(i.length<=t.length&&0===t.indexOf(i))return ""===(t=t.substr(i.length>1?i.length:0))&&(t="/"),{fs:this.mntMap[i],path:t}}return {fs:this.rootFs,path:t}},e.prototype.getName=function(){return e.Name},e.prototype.diskSpace=function(t,e){e(0,0);},e.prototype.isReadOnly=function(){return !1},e.prototype.supportsLinks=function(){return !1},e.prototype.supportsProps=function(){return !1},e.prototype.supportsSynch=function(){return !0},e.prototype.standardizeError=function(t,e,r){var n=t.message.indexOf(e);return -1!==n&&(t.message=t.message.substr(0,n)+r+t.message.substr(n+e.length),t.path=r),t},e.prototype.rename=function(t,e,r){var n=this,i=this._getFs(t),o=this._getFs(e);return i.fs===o.fs?i.fs.rename(i.path,o.path,(function(a){a&&n.standardizeError(n.standardizeError(a,i.path,t),o.path,e),r(a);})):A.readFile(t,(function(n,i){if(n)return r(n);A.writeFile(e,i,(function(e){if(e)return r(e);A.unlink(t,r);}));}))},e.prototype.renameSync=function(t,e){var r=this._getFs(t),n=this._getFs(e);if(r.fs===n.fs)try{return r.fs.renameSync(r.path,n.path)}catch(i){throw this.standardizeError(this.standardizeError(i,r.path,t),n.path,e),i}var i=A.readFileSync(t);return A.writeFileSync(e,i),A.unlinkSync(t)},e.prototype.readdirSync=function(t){var e=this._getFs(t),r=null;if(e.fs!==this.rootFs)try{r=this.rootFs.readdirSync(t);}catch(t){}try{var n=e.fs.readdirSync(e.path);return null===r?n:n.concat(r.filter((function(t){return -1===n.indexOf(t)})))}catch(n){if(null===r)throw this.standardizeError(n,e.path,t);return r}},e.prototype.readdir=function(t,e){var r=this,n=this._getFs(t);n.fs.readdir(n.path,(function(i,o){if(n.fs!==r.rootFs)try{var a=r.rootFs.readdirSync(t);o=o?o.concat(a.filter((function(t){return -1===o.indexOf(t)}))):a;}catch(o){if(i)return e(r.standardizeError(i,n.path,t))}else if(i)return e(r.standardizeError(i,n.path,t));e(null,o);}));},e.prototype.rmdirSync=function(t){var e=this._getFs(t);if(this._containsMountPt(t))throw f.ENOTEMPTY(t);try{e.fs.rmdirSync(e.path);}catch(r){throw this.standardizeError(r,e.path,t)}},e.prototype.rmdir=function(t,e){var r=this,n=this._getFs(t);this._containsMountPt(t)?e(f.ENOTEMPTY(t)):n.fs.rmdir(n.path,(function(i){e(i?r.standardizeError(i,n.path,t):null);}));},e.prototype._containsMountPt=function(t){for(var e=this.mountList,r=e.length,n=0;n<r;n++){var i=e[n];if(i.length>=t.length&&i.slice(0,t.length)===t)return !0}return !1},e}(Y);function qe(t,e,r){return e?function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];var n=e[0],i=this._getFs(n);e[0]=i.path;try{return i.fs[t].apply(i.fs,e)}catch(t){throw this.standardizeError(t,i.path,n),t}}:function(){for(var e=this,r=[],n=arguments.length;n--;)r[n]=arguments[n];var i=r[0],o=this._getFs(i);if(r[0]=o.path,"function"==typeof r[r.length-1]){var a=r[r.length-1];r[r.length-1]=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];t.length>0&&t[0]instanceof f&&e.standardizeError(t[0],o.path,i),a.apply(null,t);};}return o.fs[t].apply(o.fs,r)}}Ke.Name="MountableFileSystem",Ke.Options={};for(var He,Ve=[["exists","unlink","readlink"],["stat","mkdir","realpath","truncate"],["open","readFile","chmod","utimes"],["chown"],["writeFile","appendFile"]],We=0;We<Ve.length;We++)for(var Je=0,Ye=Ve[We];Je<Ye.length;Je+=1){var Ze=Ye[Je];Ke.prototype[Ze]=qe(Ze,!1),Ke.prototype[Ze+"Sync"]=qe(Ze+"Sync",!0);}if("undefined"!=typeof setImmediate)He=setImmediate;else {var Ge=he,Xe=[],$e="zero-timeout-message";if(function(){if(void 0!==Ge.importScripts||!Ge.postMessage)return !1;var t=!0,e=Ge.onmessage;return Ge.onmessage=function(){t=!1;},Ge.postMessage("","*"),Ge.onmessage=e,t}()){He=function(t){Xe.push(t),Ge.postMessage($e,"*");};var Qe=function(t){if(t.source===self&&t.data===$e&&(t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,Xe.length>0))return Xe.shift()()};Ge.addEventListener?Ge.addEventListener("message",Qe,!0):Ge.attachEvent("onmessage",Qe);}else if(Ge.MessageChannel){var tr=new Ge.MessageChannel;tr.port1.onmessage=function(t){if(Xe.length>0)return Xe.shift()()},He=function(t){Xe.push(t),tr.port2.postMessage("");};}else He=function(t){return setTimeout(t,0)};}var er=He,rr=function(){this._locked=!1,this._waiters=[];};rr.prototype.lock=function(t){this._locked?this._waiters.push(t):(this._locked=!0,t());},rr.prototype.unlock=function(){if(!this._locked)throw new Error("unlock of a non-locked mutex");var t=this._waiters.shift();t?er(t):this._locked=!1;},rr.prototype.tryLock=function(){return !this._locked&&(this._locked=!0,!0)},rr.prototype.isLocked=function(){return this._locked};var nr=function(t){this._fs=t,this._mu=new rr;};nr.prototype.getName=function(){return "LockedFS<"+this._fs.getName()+">"},nr.prototype.getFSUnlocked=function(){return this._fs},nr.prototype.initialize=function(t){this._fs.initialize(t);},nr.prototype.diskSpace=function(t,e){this._fs.diskSpace(t,e);},nr.prototype.isReadOnly=function(){return this._fs.isReadOnly()},nr.prototype.supportsLinks=function(){return this._fs.supportsLinks()},nr.prototype.supportsProps=function(){return this._fs.supportsProps()},nr.prototype.supportsSynch=function(){return this._fs.supportsSynch()},nr.prototype.rename=function(t,e,r){var n=this;this._mu.lock((function(){n._fs.rename(t,e,(function(t){n._mu.unlock(),r(t);}));}));},nr.prototype.renameSync=function(t,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.renameSync(t,e)},nr.prototype.stat=function(t,e,r){var n=this;this._mu.lock((function(){n._fs.stat(t,e,(function(t,e){n._mu.unlock(),r(t,e);}));}));},nr.prototype.statSync=function(t,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.statSync(t,e)},nr.prototype.open=function(t,e,r,n){var i=this;this._mu.lock((function(){i._fs.open(t,e,r,(function(t,e){i._mu.unlock(),n(t,e);}));}));},nr.prototype.openSync=function(t,e,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.openSync(t,e,r)},nr.prototype.unlink=function(t,e){var r=this;this._mu.lock((function(){r._fs.unlink(t,(function(t){r._mu.unlock(),e(t);}));}));},nr.prototype.unlinkSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.unlinkSync(t)},nr.prototype.rmdir=function(t,e){var r=this;this._mu.lock((function(){r._fs.rmdir(t,(function(t){r._mu.unlock(),e(t);}));}));},nr.prototype.rmdirSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.rmdirSync(t)},nr.prototype.mkdir=function(t,e,r){var n=this;this._mu.lock((function(){n._fs.mkdir(t,e,(function(t){n._mu.unlock(),r(t);}));}));},nr.prototype.mkdirSync=function(t,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.mkdirSync(t,e)},nr.prototype.readdir=function(t,e){var r=this;this._mu.lock((function(){r._fs.readdir(t,(function(t,n){r._mu.unlock(),e(t,n);}));}));},nr.prototype.readdirSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readdirSync(t)},nr.prototype.exists=function(t,e){var r=this;this._mu.lock((function(){r._fs.exists(t,(function(t){r._mu.unlock(),e(t);}));}));},nr.prototype.existsSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.existsSync(t)},nr.prototype.realpath=function(t,e,r){var n=this;this._mu.lock((function(){n._fs.realpath(t,e,(function(t,e){n._mu.unlock(),r(t,e);}));}));},nr.prototype.realpathSync=function(t,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.realpathSync(t,e)},nr.prototype.truncate=function(t,e,r){var n=this;this._mu.lock((function(){n._fs.truncate(t,e,(function(t){n._mu.unlock(),r(t);}));}));},nr.prototype.truncateSync=function(t,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.truncateSync(t,e)},nr.prototype.readFile=function(t,e,r,n){var i=this;this._mu.lock((function(){i._fs.readFile(t,e,r,(function(t,e){i._mu.unlock(),n(t,e);}));}));},nr.prototype.readFileSync=function(t,e,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readFileSync(t,e,r)},nr.prototype.writeFile=function(t,e,r,n,i,o){var a=this;this._mu.lock((function(){a._fs.writeFile(t,e,r,n,i,(function(t){a._mu.unlock(),o(t);}));}));},nr.prototype.writeFileSync=function(t,e,r,n,i){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.writeFileSync(t,e,r,n,i)},nr.prototype.appendFile=function(t,e,r,n,i,o){var a=this;this._mu.lock((function(){a._fs.appendFile(t,e,r,n,i,(function(t){a._mu.unlock(),o(t);}));}));},nr.prototype.appendFileSync=function(t,e,r,n,i){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.appendFileSync(t,e,r,n,i)},nr.prototype.chmod=function(t,e,r,n){var i=this;this._mu.lock((function(){i._fs.chmod(t,e,r,(function(t){i._mu.unlock(),n(t);}));}));},nr.prototype.chmodSync=function(t,e,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.chmodSync(t,e,r)},nr.prototype.chown=function(t,e,r,n,i){var o=this;this._mu.lock((function(){o._fs.chown(t,e,r,n,(function(t){o._mu.unlock(),i(t);}));}));},nr.prototype.chownSync=function(t,e,r,n){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.chownSync(t,e,r,n)},nr.prototype.utimes=function(t,e,r,n){var i=this;this._mu.lock((function(){i._fs.utimes(t,e,r,(function(t){i._mu.unlock(),n(t);}));}));},nr.prototype.utimesSync=function(t,e,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.utimesSync(t,e,r)},nr.prototype.link=function(t,e,r){var n=this;this._mu.lock((function(){n._fs.link(t,e,(function(t){n._mu.unlock(),r(t);}));}));},nr.prototype.linkSync=function(t,e){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.linkSync(t,e)},nr.prototype.symlink=function(t,e,r,n){var i=this;this._mu.lock((function(){i._fs.symlink(t,e,r,(function(t){i._mu.unlock(),n(t);}));}));},nr.prototype.symlinkSync=function(t,e,r){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.symlinkSync(t,e,r)},nr.prototype.readlink=function(t,e){var r=this;this._mu.lock((function(){r._fs.readlink(t,(function(t,n){r._mu.unlock(),e(t,n);}));}));},nr.prototype.readlinkSync=function(t){if(this._mu.isLocked())throw new Error("invalid sync call");return this._fs.readlinkSync(t)};var ir="/.deletedFiles.log";function or(t){return 146|t}function ar(t){return p.getFileFlag(t)}var sr,ur=function(t){function e(e,r,n,i,o){t.call(this,e,r,n,i,o);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.sync=function(t){var e=this;this.isDirty()?this._fs._syncAsync(this,(function(r){e.resetDirty(),t(r);})):t(null);},e.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this),this.resetDirty());},e.prototype.close=function(t){this.sync(t);},e.prototype.closeSync=function(){this.syncSync();},e}(X),cr=function(t){function e(e,r){if(t.call(this),this._isInitialized=!1,this._initializeCallbacks=[],this._deletedFiles={},this._deleteLog="",this._deleteLogUpdatePending=!1,this._deleteLogUpdateNeeded=!1,this._deleteLogError=null,this._writable=e,this._readable=r,this._writable.isReadOnly())throw new f(a.EINVAL,"Writable file system must be writable.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.isAvailable=function(){return !0},e.prototype.getOverlayedFileSystems=function(){return {readable:this._readable,writable:this._writable}},e.prototype._syncAsync=function(t,e){var r=this;this.createParentDirectoriesAsync(t.getPath(),(function(n){if(n)return e(n);r._writable.writeFile(t.getPath(),t.getBuffer(),null,ar("w"),t.getStats().mode,e);}));},e.prototype._syncSync=function(t){this.createParentDirectories(t.getPath()),this._writable.writeFileSync(t.getPath(),t.getBuffer(),null,ar("w"),t.getStats().mode);},e.prototype.getName=function(){return lr.Name},e.prototype.initialize=function(t){var e=this,r=this._initializeCallbacks,n=function(t){e._isInitialized=!t,e._initializeCallbacks=[],r.forEach((function(e){return e(t)}));};if(this._isInitialized)return t();r.push(t),1===r.length&&this._writable.readFile(ir,"utf8",ar("r"),(function(t,r){if(t){if(t.errno!==a.ENOENT)return n(t)}else e._deleteLog=r;e._reparseDeletionLog(),n();}));},e.prototype.isReadOnly=function(){return !1},e.prototype.supportsSynch=function(){return this._readable.supportsSynch()&&this._writable.supportsSynch()},e.prototype.supportsLinks=function(){return !1},e.prototype.supportsProps=function(){return this._readable.supportsProps()&&this._writable.supportsProps()},e.prototype.getDeletionLog=function(){return this._deleteLog},e.prototype.restoreDeletionLog=function(t){this._deleteLog=t,this._reparseDeletionLog(),this.updateLog("");},e.prototype.rename=function(t,e,r){var n=this;if(this.checkInitAsync(r)&&!this.checkPathAsync(t,r)&&!this.checkPathAsync(e,r))return t===ir||e===ir?r(f.EPERM("Cannot rename deletion log.")):t===e?r():void this.stat(t,!1,(function(i,o){return i?r(i):n.stat(e,!1,(function(i,s){var c=n;function l(n){var i=n.shift();if(!i)return r();var o=u.resolve(t,i),a=u.resolve(e,i);c.rename(o,a,(function(t){if(t)return r(t);l(n);}));}var h=511;if(o.isDirectory()){if(i)return i.errno!==a.ENOENT?r(i):n._writable.exists(t,(function(i){if(i)return n._writable.rename(t,e,r);n._writable.mkdir(e,h,(function(e){if(e)return r(e);n._readable.readdir(t,(function(t,e){if(t)return r();l(e);}));}));}));if(h=s.mode,!s.isDirectory())return r(f.ENOTDIR(e));n.readdir(e,(function(i,o){if(o&&o.length)return r(f.ENOTEMPTY(e));n._readable.readdir(t,(function(t,e){if(t)return r();l(e);}));}));}if(s&&s.isDirectory())return r(f.EISDIR(e));n.readFile(t,null,ar("r"),(function(i,a){return i?r(i):n.writeFile(e,a,null,ar("w"),o.mode,(function(e){return e?r(e):n.unlink(t,r)}))}));}))}))},e.prototype.renameSync=function(t,e){var r=this;if(this.checkInitialized(),this.checkPath(t),this.checkPath(e),t===ir||e===ir)throw f.EPERM("Cannot rename deletion log.");var n=this.statSync(t,!1);if(n.isDirectory()){if(t===e)return;var i=511;if(this.existsSync(e)){var o=this.statSync(e,!1);if(i=o.mode,!o.isDirectory())throw f.ENOTDIR(e);if(this.readdirSync(e).length>0)throw f.ENOTEMPTY(e)}this._writable.existsSync(t)?this._writable.renameSync(t,e):this._writable.existsSync(e)||this._writable.mkdirSync(e,i),this._readable.existsSync(t)&&this._readable.readdirSync(t).forEach((function(n){r.renameSync(u.resolve(t,n),u.resolve(e,n));}));}else {if(this.existsSync(e)&&this.statSync(e,!1).isDirectory())throw f.EISDIR(e);this.writeFileSync(e,this.readFileSync(t,null,ar("r")),null,ar("w"),n.mode);}t!==e&&this.existsSync(t)&&this.unlinkSync(t);},e.prototype.stat=function(t,e,r){var n=this;this.checkInitAsync(r)&&this._writable.stat(t,e,(function(i,o){i&&i.errno===a.ENOENT?(n._deletedFiles[t]&&r(f.ENOENT(t)),n._readable.stat(t,e,(function(t,e){e&&((e=e.clone()).mode=or(e.mode)),r(t,e);}))):r(i,o);}));},e.prototype.statSync=function(t,e){this.checkInitialized();try{return this._writable.statSync(t,e)}catch(n){if(this._deletedFiles[t])throw f.ENOENT(t);var r=this._readable.statSync(t,e).clone();return r.mode=or(r.mode),r}},e.prototype.open=function(t,e,r,n){var i=this;this.checkInitAsync(n)&&!this.checkPathAsync(t,n)&&this.stat(t,!1,(function(o,a){if(!a)return e.pathNotExistsAction()===l.CREATE_FILE?i.createParentDirectoriesAsync(t,(function(o){return o?n(o):i._writable.open(t,e,r,n)})):n(f.ENOENT(t));switch(e.pathExistsAction()){case l.TRUNCATE_FILE:return i.createParentDirectoriesAsync(t,(function(o){if(o)return n(o);i._writable.open(t,e,r,n);}));case l.NOP:return i._writable.exists(t,(function(o){o?i._writable.open(t,e,r,n):((a=a.clone()).mode=r,i._readable.readFile(t,null,ar("r"),(function(r,o){if(r)return n(r);-1===a.size&&(a.size=o.length);var s=new ur(i,t,e,a,o);n(null,s);})));}));default:return n(f.EEXIST(t))}}));},e.prototype.openSync=function(t,e,r){if(this.checkInitialized(),this.checkPath(t),t===ir)throw f.EPERM("Cannot open deletion log.");if(!this.existsSync(t)){if(e.pathNotExistsAction()===l.CREATE_FILE)return this.createParentDirectories(t),this._writable.openSync(t,e,r);throw f.ENOENT(t)}switch(e.pathExistsAction()){case l.TRUNCATE_FILE:return this.createParentDirectories(t),this._writable.openSync(t,e,r);case l.NOP:if(this._writable.existsSync(t))return this._writable.openSync(t,e,r);var n=this._readable.readFileSync(t,null,ar("r")),i=this._readable.statSync(t,!1).clone();return i.mode=r,new ur(this,t,e,i,n);default:throw f.EEXIST(t)}},e.prototype.unlink=function(t,e){var r=this;this.checkInitAsync(e)&&!this.checkPathAsync(t,e)&&this.exists(t,(function(n){if(!n)return e(f.ENOENT(t));r._writable.exists(t,(function(n){if(n)return r._writable.unlink(t,(function(n){if(n)return e(n);r.exists(t,(function(n){n&&r.deletePath(t),e(null);}));}));r.deletePath(t),e(null);}));}));},e.prototype.unlinkSync=function(t){if(this.checkInitialized(),this.checkPath(t),!this.existsSync(t))throw f.ENOENT(t);this._writable.existsSync(t)&&this._writable.unlinkSync(t),this.existsSync(t)&&this.deletePath(t);},e.prototype.rmdir=function(t,e){var r=this;if(this.checkInitAsync(e)){var n=function(){r.readdir(t,(function(n,i){return n?e(n):i.length?e(f.ENOTEMPTY(t)):(r.deletePath(t),void e(null))}));};this.exists(t,(function(i){if(!i)return e(f.ENOENT(t));r._writable.exists(t,(function(i){i?r._writable.rmdir(t,(function(i){if(i)return e(i);r._readable.exists(t,(function(t){t?n():e();}));})):n();}));}));}},e.prototype.rmdirSync=function(t){if(this.checkInitialized(),!this.existsSync(t))throw f.ENOENT(t);if(this._writable.existsSync(t)&&this._writable.rmdirSync(t),this.existsSync(t)){if(this.readdirSync(t).length>0)throw f.ENOTEMPTY(t);this.deletePath(t);}},e.prototype.mkdir=function(t,e,r){var n=this;this.checkInitAsync(r)&&this.exists(t,(function(i){if(i)return r(f.EEXIST(t));n.createParentDirectoriesAsync(t,(function(i){if(i)return r(i);n._writable.mkdir(t,e,r);}));}));},e.prototype.mkdirSync=function(t,e){if(this.checkInitialized(),this.existsSync(t))throw f.EEXIST(t);this.createParentDirectories(t),this._writable.mkdirSync(t,e);},e.prototype.readdir=function(t,e){var r=this;this.checkInitAsync(e)&&this.stat(t,!1,(function(n,i){return n?e(n):i.isDirectory()?void r._writable.readdir(t,(function(n,i){if(n&&"ENOENT"!==n.code)return e(n);!n&&i||(i=[]),r._readable.readdir(t,(function(n,o){!n&&o||(o=[]);var a={},s=i.concat(o.filter((function(e){return !r._deletedFiles[t+"/"+e]}))).filter((function(t){var e=!a[t];return a[t]=!0,e}));e(null,s);}));})):e(f.ENOTDIR(t))}));},e.prototype.readdirSync=function(t){var e=this;if(this.checkInitialized(),!this.statSync(t,!1).isDirectory())throw f.ENOTDIR(t);var r=[];try{r=r.concat(this._writable.readdirSync(t));}catch(t){}try{r=r.concat(this._readable.readdirSync(t).filter((function(r){return !e._deletedFiles[t+"/"+r]})));}catch(t){}var n={};return r.filter((function(t){var e=!n[t];return n[t]=!0,e}))},e.prototype.exists=function(t,e){var r=this;this.checkInitialized(),this._writable.exists(t,(function(n){if(n)return e(!0);r._readable.exists(t,(function(n){e(n&&!0!==r._deletedFiles[t]);}));}));},e.prototype.existsSync=function(t){return this.checkInitialized(),this._writable.existsSync(t)||this._readable.existsSync(t)&&!0!==this._deletedFiles[t]},e.prototype.chmod=function(t,e,r,n){var i=this;this.checkInitAsync(n)&&this.operateOnWritableAsync(t,(function(o){if(o)return n(o);i._writable.chmod(t,e,r,n);}));},e.prototype.chmodSync=function(t,e,r){var n=this;this.checkInitialized(),this.operateOnWritable(t,(function(){n._writable.chmodSync(t,e,r);}));},e.prototype.chown=function(t,e,r,n,i){var o=this;this.checkInitAsync(i)&&this.operateOnWritableAsync(t,(function(a){if(a)return i(a);o._writable.chown(t,e,r,n,i);}));},e.prototype.chownSync=function(t,e,r,n){var i=this;this.checkInitialized(),this.operateOnWritable(t,(function(){i._writable.chownSync(t,e,r,n);}));},e.prototype.utimes=function(t,e,r,n){var i=this;this.checkInitAsync(n)&&this.operateOnWritableAsync(t,(function(o){if(o)return n(o);i._writable.utimes(t,e,r,n);}));},e.prototype.utimesSync=function(t,e,r){var n=this;this.checkInitialized(),this.operateOnWritable(t,(function(){n._writable.utimesSync(t,e,r);}));},e.prototype.deletePath=function(t){this._deletedFiles[t]=!0,this.updateLog("d"+t+"\n");},e.prototype.updateLog=function(t){var e=this;this._deleteLog+=t,this._deleteLogUpdatePending?this._deleteLogUpdateNeeded=!0:(this._deleteLogUpdatePending=!0,this._writable.writeFile(ir,this._deleteLog,"utf8",p.getFileFlag("w"),420,(function(t){e._deleteLogUpdatePending=!1,t?e._deleteLogError=t:e._deleteLogUpdateNeeded&&(e._deleteLogUpdateNeeded=!1,e.updateLog(""));})));},e.prototype._reparseDeletionLog=function(){var t=this;this._deletedFiles={},this._deleteLog.split("\n").forEach((function(e){t._deletedFiles[e.slice(1)]="d"===e.slice(0,1);}));},e.prototype.checkInitialized=function(){if(!this._isInitialized)throw new f(a.EPERM,"OverlayFS is not initialized. Please initialize OverlayFS using its initialize() method before using it.");if(null!==this._deleteLogError){var t=this._deleteLogError;throw this._deleteLogError=null,t}},e.prototype.checkInitAsync=function(t){if(!this._isInitialized)return t(new f(a.EPERM,"OverlayFS is not initialized. Please initialize OverlayFS using its initialize() method before using it.")),!1;if(null!==this._deleteLogError){var e=this._deleteLogError;return this._deleteLogError=null,t(e),!1}return !0},e.prototype.checkPath=function(t){if(t===ir)throw f.EPERM(t)},e.prototype.checkPathAsync=function(t,e){return t===ir&&(e(f.EPERM(t)),!0)},e.prototype.createParentDirectoriesAsync=function(t,e){var r=u.dirname(t),n=[],i=this;function o(){if(!n.length)return e();var t=n.pop();i._readable.stat(t,!1,(function(r,n){if(!n)return e();i._writable.mkdir(t,n.mode,(function(t){if(t)return e(t);o();}));}));}this._writable.stat(r,!1,(function t(e,a){e?(n.push(r),r=u.dirname(r),i._writable.stat(r,!1,t)):o();}));},e.prototype.createParentDirectories=function(t){for(var e=this,r=u.dirname(t),n=[];!this._writable.existsSync(r);)n.push(r),r=u.dirname(r);(n=n.reverse()).forEach((function(t){e._writable.mkdirSync(t,e.statSync(t,!1).mode);}));},e.prototype.operateOnWritable=function(t,e){if(!this.existsSync(t))throw f.ENOENT(t);this._writable.existsSync(t)||this.copyToWritable(t),e();},e.prototype.operateOnWritableAsync=function(t,e){var r=this;this.exists(t,(function(n){if(!n)return e(f.ENOENT(t));r._writable.exists(t,(function(n){if(!n)return r.copyToWritableAsync(t,e);e();}));}));},e.prototype.copyToWritable=function(t){var e=this.statSync(t,!1);e.isDirectory()?this._writable.mkdirSync(t,e.mode):this.writeFileSync(t,this._readable.readFileSync(t,null,ar("r")),null,ar("w"),this.statSync(t,!1).mode);},e.prototype.copyToWritableAsync=function(t,e){var r=this;this.stat(t,!1,(function(n,i){return n?e(n):i.isDirectory()?r._writable.mkdir(t,i.mode,e):void r._readable.readFile(t,null,ar("r"),(function(n,o){if(n)return e(n);r.writeFile(t,o,null,ar("w"),i.mode,e);}))}));},e}(Y),lr=function(t){function e(r,n,i){void 0===i&&(i=!0),t.call(this,new cr(r,n)),T(i,e.Name,{readable:"readable file system",writable:"writable file system"});}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.Create=function(t,r){try{var n=new e(t.writable,t.readable,!1);n.initialize((function(t){r(t,n);}),!1);}catch(t){r(t);}},e.isAvailable=function(){return cr.isAvailable()},e.prototype.initialize=function(e,r){void 0===r&&(r=!0),r&&console.warn("[OverlayFS] OverlayFS.initialize() is deprecated and will be removed in the next major release. Please use 'OverlayFS.Create({readable: readable file system instance, writable: writable file system instance}, cb)' to create and initialize OverlayFS instances."),t.prototype.initialize.call(this,e);},e.prototype.getOverlayedFileSystems=function(){return t.prototype.getFSUnlocked.call(this).getOverlayedFileSystems()},e.prototype.unwrap=function(){return t.prototype.getFSUnlocked.call(this)},e}(nr);lr.Name="OverlayFS",lr.Options={writable:{type:"object",description:"The file system to write modified files to."},readable:{type:"object",description:"The file system that initially populates this file system."}},function(t){t[t.CB=0]="CB",t[t.FD=1]="FD",t[t.API_ERROR=2]="API_ERROR",t[t.STATS=3]="STATS",t[t.PROBE=4]="PROBE",t[t.FILEFLAG=5]="FILEFLAG",t[t.BUFFER=6]="BUFFER",t[t.ERROR=7]="ERROR";}(sr||(sr={}));var fr=function(){this._callbacks={},this._nextId=0;};fr.prototype.toRemoteArg=function(t){var e=this._nextId++;return this._callbacks[e]=t,{type:sr.CB,id:e}},fr.prototype.toLocalArg=function(t){var e=this._callbacks[t];return delete this._callbacks[t],e};var hr=function(){this._fileDescriptors={},this._nextId=0;};function dr(t){return {type:sr.API_ERROR,errorData:_r(t.writeToBuffer())}}function pr(t){return f.fromBuffer(Sr(t.errorData))}function yr(t){return {type:sr.ERROR,name:t.name,message:t.message,stack:t.stack}}function gr(t){var e=he[t.name];"function"!=typeof e&&(e=Error);var r=new e(t.message);return r.stack=t.stack,r}function mr(t){return {type:sr.STATS,statsData:_r(t.toBuffer())}}function br(t){return y.fromBuffer(Sr(t.statsData))}function vr(t){return {type:sr.FILEFLAG,flagStr:t.getFlagString()}}function wr(t){return p.getFileFlag(t.flagStr)}function _r(t){return M(t)}function Sr(t){return L(t)}function Er(t){return {type:sr.BUFFER,data:_r(t)}}function Ir(t){return Sr(t.data)}hr.prototype.toRemoteArg=function(e,r,n,i){var o,a,s=this._nextId++;this._fileDescriptors[s]=e,e.stat((function(u,c){u?i(u):(a=_r(c.toBuffer()),n.isReadable()?e.read(t.alloc(c.size),0,c.size,0,(function(t,e,u){t?i(t):(o=_r(u),i(null,{type:sr.FD,id:s,data:o,stat:a,path:r,flag:n.getFlagString()}));})):i(null,{type:sr.FD,id:s,data:new ArrayBuffer(0),stat:a,path:r,flag:n.getFlagString()}));}));},hr.prototype.applyFdAPIRequest=function(t,e){var r=this,n=t.args[0];this._applyFdChanges(n,(function(i,o){i?e(i):o[t.method]((function(i){"close"===t.method&&delete r._fileDescriptors[n.id],e(i);}));}));},hr.prototype._applyFdChanges=function(t,e){var r=this._fileDescriptors[t.id],n=Sr(t.data),i=y.fromBuffer(Sr(t.stat)),o=p.getFileFlag(t.flag);o.isWriteable()?r.write(n,0,n.length,o.isAppendable()?r.getPos():0,(function(t){function a(){r.stat((function(t,n){t?e(t):n.mode!==i.mode?r.chmod(i.mode,(function(t){e(t,r);})):e(t,r);}));}t?e(t):o.isAppendable()?a():r.truncate(n.length,(function(){a();}));})):e(null,r);};var Ar=function(t){function e(e,r,n,i,o,a){t.call(this,e,r,n,i,a),this._remoteFdId=o;}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getRemoteFdId=function(){return this._remoteFdId},e.prototype.toRemoteArg=function(){return {type:sr.FD,id:this._remoteFdId,data:_r(this.getBuffer()),stat:_r(this.getStats().toBuffer()),path:this.getPath(),flag:this.getFlag().getFlagString()}},e.prototype.sync=function(t){this._syncClose("sync",t);},e.prototype.close=function(t){this._syncClose("close",t);},e.prototype._syncClose=function(t,e){var r=this;this.isDirty()?this._fs.syncClose(t,this,(function(t){t||r.resetDirty(),e(t);})):e();},e}(X),kr=function(e){function r(t,n){var i=this;void 0===n&&(n=!0),e.call(this),this._callbackConverter=new fr,this._isInitialized=!1,this._isReadOnly=!1,this._supportLinks=!1,this._supportProps=!1,this._worker=t,T(n,r.Name,{worker:"Web Worker instance"}),this._worker.addEventListener("message",(function(t){var e,r=t.data;if((e=r)&&"object"==typeof e&&e.hasOwnProperty("browserfsMessage")&&e.browserfsMessage){var n,o=r.args,a=new Array(o.length);for(n=0;n<a.length;n++)a[n]=i._argRemote2Local(o[n]);i._callbackConverter.toLocalArg(r.cbId).apply(null,a);}}));}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.Create=function(t,e){var n=new r(t.worker,!1);n.initialize((function(){e(null,n);}));},r.isAvailable=function(){return "undefined"!=typeof importScripts||"undefined"!=typeof Worker},r.attachRemoteListener=function(e){var r=new hr;function n(e,n,i){"object"==typeof e?e instanceof y?i(null,mr(e)):e instanceof f?i(null,dr(e)):e instanceof G?i(null,r.toRemoteArg(e,n[0],n[1],i)):e instanceof p?i(null,vr(e)):e instanceof t?i(null,Er(e)):e instanceof Error?i(null,yr(e)):i(null,e):i(null,e);}function i(t,r){if(!t)return t;if("object"==typeof t){if("number"!=typeof t.type)return t;var i=t;switch(i.type){case sr.CB:var o=t.id;return function(){var t,i,a=arguments,s=new Array(arguments.length),u=arguments.length;function c(t){u>0&&(u=-1,i={browserfsMessage:!0,cbId:o,args:[dr(t)]},e.postMessage(i));}for(t=0;t<arguments.length;t++)!function(t,a){n(a,r,(function(r,n){s[t]=n,r?c(r):0==--u&&(i={browserfsMessage:!0,cbId:o,args:s},e.postMessage(i));}));}(t,a[t]);0===arguments.length&&(i={browserfsMessage:!0,cbId:o,args:s},e.postMessage(i));};case sr.API_ERROR:return pr(i);case sr.STATS:return br(i);case sr.FILEFLAG:return wr(i);case sr.BUFFER:return Ir(i);case sr.ERROR:return gr(i);default:return t}}return t}e.addEventListener("message",(function(t){var n,o,a=t.data;if((o=a)&&"object"==typeof o&&o.hasOwnProperty("browserfsMessage")&&o.browserfsMessage){var s=a.args,u=new Array(s.length);switch(a.method){case"close":case"sync":n=s[1],r.applyFdAPIRequest(a,(function(t){var r={browserfsMessage:!0,cbId:n.id,args:t?[dr(t)]:[]};e.postMessage(r);}));break;case"probe":!function(){var t=A.getRootFS(),r=s[1],n={type:sr.PROBE,isReadOnly:t.isReadOnly(),supportsLinks:t.supportsLinks(),supportsProps:t.supportsProps()},i={browserfsMessage:!0,cbId:r.id,args:[n]};e.postMessage(i);}();break;default:for(var c=0;c<s.length;c++)u[c]=i(s[c],u);var l=A.getRootFS();l[a.method].apply(l,u);}}}));},r.prototype.getName=function(){return r.Name},r.prototype.initialize=function(t){var e=this;if(this._isInitialized)t();else {var r={browserfsMessage:!0,method:"probe",args:[this._argLocal2Remote(z()),this._callbackConverter.toRemoteArg((function(r){e._isInitialized=!0,e._isReadOnly=r.isReadOnly,e._supportLinks=r.supportsLinks,e._supportProps=r.supportsProps,t();}))]};this._worker.postMessage(r);}},r.prototype.isReadOnly=function(){return this._isReadOnly},r.prototype.supportsSynch=function(){return !1},r.prototype.supportsLinks=function(){return this._supportLinks},r.prototype.supportsProps=function(){return this._supportProps},r.prototype.rename=function(t,e,r){this._rpc("rename",arguments);},r.prototype.stat=function(t,e,r){this._rpc("stat",arguments);},r.prototype.open=function(t,e,r,n){this._rpc("open",arguments);},r.prototype.unlink=function(t,e){this._rpc("unlink",arguments);},r.prototype.rmdir=function(t,e){this._rpc("rmdir",arguments);},r.prototype.mkdir=function(t,e,r){this._rpc("mkdir",arguments);},r.prototype.readdir=function(t,e){this._rpc("readdir",arguments);},r.prototype.exists=function(t,e){this._rpc("exists",arguments);},r.prototype.realpath=function(t,e,r){this._rpc("realpath",arguments);},r.prototype.truncate=function(t,e,r){this._rpc("truncate",arguments);},r.prototype.readFile=function(t,e,r,n){this._rpc("readFile",arguments);},r.prototype.writeFile=function(t,e,r,n,i,o){this._rpc("writeFile",arguments);},r.prototype.appendFile=function(t,e,r,n,i,o){this._rpc("appendFile",arguments);},r.prototype.chmod=function(t,e,r,n){this._rpc("chmod",arguments);},r.prototype.chown=function(t,e,r,n,i){this._rpc("chown",arguments);},r.prototype.utimes=function(t,e,r,n){this._rpc("utimes",arguments);},r.prototype.link=function(t,e,r){this._rpc("link",arguments);},r.prototype.symlink=function(t,e,r,n){this._rpc("symlink",arguments);},r.prototype.readlink=function(t,e){this._rpc("readlink",arguments);},r.prototype.syncClose=function(t,e,r){this._worker.postMessage({browserfsMessage:!0,method:t,args:[e.toRemoteArg(),this._callbackConverter.toRemoteArg(r)]});},r.prototype._argRemote2Local=function(t){if(!t)return t;if("object"==typeof t){if("number"!=typeof t.type)return t;var e=t;switch(e.type){case sr.API_ERROR:return pr(e);case sr.FD:var r=e;return new Ar(this,r.path,p.getFileFlag(r.flag),y.fromBuffer(Sr(r.stat)),r.id,Sr(r.data));case sr.STATS:return br(e);case sr.FILEFLAG:return wr(e);case sr.BUFFER:return Ir(e);case sr.ERROR:return gr(e);default:return t}}return t},r.prototype._rpc=function(t,e){for(var r=new Array(e.length),n=0;n<e.length;n++)r[n]=this._argLocal2Remote(e[n]);var i={browserfsMessage:!0,method:t,args:r};this._worker.postMessage(i);},r.prototype._argLocal2Remote=function(e){if(!e)return e;switch(typeof e){case"object":return e instanceof y?mr(e):e instanceof f?dr(e):e instanceof Ar?e.toRemoteArg():e instanceof p?vr(e):e instanceof t?Er(e):e instanceof Error?yr(e):"Unknown argument";case"function":return this._callbackConverter.toRemoteArg(e);default:return e}},r}(Y);function Dr(t,e,r){var n=new XMLHttpRequest;n.open("HEAD",e,t),n.onreadystatechange=function(t){if(4===n.readyState){if(200!==n.status)return r(new f(n.status,"XHR HEAD error."));try{return r(null,parseInt(n.getResponseHeader("Content-Length")||"-1",10))}catch(t){return r(new f(a.EIO,"XHR HEAD error: Could not read content-length."))}}},n.send();}kr.Name="WorkerFS",kr.Options={worker:{type:"object",description:"The target worker that you want to connect to, or the current worker if in a worker context.",validator:function(t,e){t.postMessage?e():e(new f(a.EINVAL,"option must be a Web Worker instance."));}}};var xr=function(e,r,n){var i=new XMLHttpRequest;i.open("GET",e,!0);var o=!0;switch(r){case"buffer":i.responseType="arraybuffer";break;case"json":try{i.responseType="json",o="json"===i.responseType;}catch(t){o=!1;}break;default:return n(new f(a.EINVAL,"Invalid download type: "+r))}i.onreadystatechange=function(e){if(4===i.readyState){if(200!==i.status)return n(new f(i.status,"XHR error."));switch(r){case"buffer":return n(null,i.response?t.from(i.response):z());case"json":return n(null,o?i.response:JSON.parse(i.responseText))}}},i.send();},Tr=P&&"undefined"!=typeof Blob?function(e,r){var n,i,o=new XMLHttpRequest;switch(o.open("GET",e,!1),r){case"buffer":o.responseType="arraybuffer";break;case"json":break;default:throw new f(a.EINVAL,"Invalid download type: "+r)}if(o.onreadystatechange=function(e){if(4===o.readyState)if(200===o.status)switch(r){case"buffer":n=t.from(o.response);break;case"json":n=JSON.parse(o.response);}else i=new f(o.status,"XHR error.");},o.send(),i)throw i;return n}:function(e,r){var n=new XMLHttpRequest;n.open("GET",e,!1);var i=null,o=null;if(n.overrideMimeType("text/plain; charset=x-user-defined"),n.onreadystatechange=function(e){if(4===n.readyState){if(200!==n.status)return void(o=new f(n.status,"XHR error."));switch(r){case"buffer":var a=n.responseText;i=t.alloc(a.length);for(var s=0;s<a.length;s++)i[s]=a.charCodeAt(s);return;case"json":return void(i=JSON.parse(n.responseText))}}},n.send(),o)throw o;return i},Pr=function(){this._index={},this.addPath("/",new Rr);};Pr.fromListing=function(t){var e=new Pr,r=new Rr;e._index["/"]=r;for(var n=[["",t,r]];n.length>0;){var i=void 0,o=n.pop(),a=o[0],s=o[1],u=o[2];for(var c in s)if(s.hasOwnProperty(c)){var l=s[c],f=a+"/"+c;l?(e._index[f]=i=new Rr,n.push([f,l,i])):i=new Or(new y(d.FILE,-1,365)),u&&(u._ls[c]=i);}}return e},Pr.prototype.fileIterator=function(t){var e=this;for(var r in e._index)if(e._index.hasOwnProperty(r))for(var n=e._index[r],i=0,o=n.getListing();i<o.length;i+=1){var a=o[i],s=n.getItem(a);Cr(s)&&t(s.getData());}},Pr.prototype.addPath=function(t,e){if(!e)throw new Error("Inode must be specified");if("/"!==t[0])throw new Error("Path must be absolute, got: "+t);if(this._index.hasOwnProperty(t))return this._index[t]===e;var r=this._split_path(t),n=r[0],i=r[1],o=this._index[n];return !(void 0===o&&"/"!==t&&(o=new Rr,!this.addPath(n,o))||"/"!==t&&!o.addItem(i,e)||(Mr(e)&&(this._index[t]=e),0))},Pr.prototype.addPathFast=function(t,e){var r=t.lastIndexOf("/"),n=0===r?"/":t.substring(0,r),i=t.substring(r+1),o=this._index[n];return void 0===o&&(o=new Rr,this.addPathFast(n,o)),!!o.addItem(i,e)&&(e.isDir()&&(this._index[t]=e),!0)},Pr.prototype.removePath=function(t){var e=this._split_path(t),r=e[0],n=e[1],i=this._index[r];if(void 0===i)return null;var o=i.remItem(n);if(null===o)return null;if(Mr(o)){for(var a=0,s=o.getListing();a<s.length;a+=1){var u=s[a];this.removePath(t+"/"+u);}"/"!==t&&delete this._index[t];}return o},Pr.prototype.ls=function(t){var e=this._index[t];return void 0===e?null:e.getListing()},Pr.prototype.getInode=function(t){var e=this._split_path(t),r=e[0],n=e[1],i=this._index[r];return void 0===i?null:r===t?i:i.getItem(n)},Pr.prototype._split_path=function(t){var e=u.dirname(t);return [e,t.substr(e.length+("/"===e?0:1))]};var Or=function(t){this.data=t;};Or.prototype.isFile=function(){return !0},Or.prototype.isDir=function(){return !1},Or.prototype.getData=function(){return this.data},Or.prototype.setData=function(t){this.data=t;};var Rr=function(t){void 0===t&&(t=null),this.data=t,this._ls={};};function Cr(t){return !!t&&t.isFile()}function Mr(t){return !!t&&t.isDir()}Rr.prototype.isFile=function(){return !1},Rr.prototype.isDir=function(){return !0},Rr.prototype.getData=function(){return this.data},Rr.prototype.getStats=function(){return new y(d.DIRECTORY,4096,365)},Rr.prototype.getListing=function(){return Object.keys(this._ls)},Rr.prototype.getItem=function(t){var e=this._ls[t];return e||null},Rr.prototype.addItem=function(t,e){return !(t in this._ls)&&(this._ls[t]=e,!0)},Rr.prototype.remItem=function(t){var e=this._ls[t];return void 0===e?null:(delete this._ls[t],e)};var Nr=function(t){function e(r,n,i){void 0===n&&(n=""),void 0===i&&(i=!0),t.call(this),r||(r="index.json"),n.length>0&&"/"!==n.charAt(n.length-1)&&(n+="/"),this.prefixUrl=n;var o=null;if("string"==typeof r){if(!(o=this._requestFileSync(r,"json")))throw new Error("Unable to find listing at URL: ${listingUrlOrObj}")}else o=r;T(i,e.Name,{index:"string"==typeof r?r:"file index as an object",baseUrl:n}),this._index=Pr.fromListing(o);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.Create=function(t,r){void 0===t.index&&(t.index="index.json"),"string"==typeof t.index?e.FromURL(t.index,r,t.baseUrl,!1):r(null,new e(t.index,t.baseUrl,!1));},e.isAvailable=function(){return "undefined"!=typeof XMLHttpRequest&&null!==XMLHttpRequest},e.FromURL=function(t,r,n,i){void 0===n&&(n=t.slice(0,t.lastIndexOf("/")+1)),void 0===i&&(i=!0),i&&console.warn("[XmlHttpRequest] XmlHttpRequest.FromURL() is deprecated and will be removed in the next major release. Please use 'XmlHttpRequest.Create({ index: \""+t+'", baseUrl: "'+n+"\" }, cb)' instead."),xr(t,"json",(function(t,i){t?r(t):r(null,new e(i,n,!1));}));},e.prototype.empty=function(){this._index.fileIterator((function(t){t.fileData=null;}));},e.prototype.getName=function(){return e.Name},e.prototype.diskSpace=function(t,e){e(0,0);},e.prototype.isReadOnly=function(){return !0},e.prototype.supportsLinks=function(){return !1},e.prototype.supportsProps=function(){return !1},e.prototype.supportsSynch=function(){return !0},e.prototype.preloadFile=function(t,e){var r=this._index.getInode(t);if(!Cr(r))throw f.EISDIR(t);if(null===r)throw f.ENOENT(t);var n=r.getData();n.size=e.length,n.fileData=e;},e.prototype.stat=function(t,e,r){var n,i=this._index.getInode(t);if(null===i)return r(f.ENOENT(t));Cr(i)?(n=i.getData()).size<0?this._requestFileSizeAsync(t,(function(t,e){if(t)return r(t);n.size=e,r(null,n.clone());})):r(null,n.clone()):Mr(i)?(n=i.getStats(),r(null,n)):r(f.FileError(a.EINVAL,t));},e.prototype.statSync=function(t,e){var r,n=this._index.getInode(t);if(null===n)throw f.ENOENT(t);if(Cr(n))(r=n.getData()).size<0&&(r.size=this._requestFileSizeSync(t));else {if(!Mr(n))throw f.FileError(a.EINVAL,t);r=n.getStats();}return r},e.prototype.open=function(t,e,r,n){if(e.isWriteable())return n(new f(a.EPERM,t));var i=this,o=this._index.getInode(t);if(null===o)return n(f.ENOENT(t));if(!Cr(o))return n(f.EISDIR(t));var s=o.getData();switch(e.pathExistsAction()){case l.THROW_EXCEPTION:case l.TRUNCATE_FILE:return n(f.EEXIST(t));case l.NOP:if(s.fileData)return n(null,new $(i,t,e,s.clone(),s.fileData));this._requestFileAsync(t,"buffer",(function(r,o){return r?n(r):(s.size=o.length,s.fileData=o,n(null,new $(i,t,e,s.clone(),o)))}));break;default:return n(new f(a.EINVAL,"Invalid FileMode object."))}},e.prototype.openSync=function(t,e,r){if(e.isWriteable())throw new f(a.EPERM,t);var n=this._index.getInode(t);if(null===n)throw f.ENOENT(t);if(!Cr(n))throw f.EISDIR(t);var i=n.getData();switch(e.pathExistsAction()){case l.THROW_EXCEPTION:case l.TRUNCATE_FILE:throw f.EEXIST(t);case l.NOP:if(i.fileData)return new $(this,t,e,i.clone(),i.fileData);var o=this._requestFileSync(t,"buffer");return i.size=o.length,i.fileData=o,new $(this,t,e,i.clone(),o);default:throw new f(a.EINVAL,"Invalid FileMode object.")}},e.prototype.readdir=function(t,e){try{e(null,this.readdirSync(t));}catch(t){e(t);}},e.prototype.readdirSync=function(t){var e=this._index.getInode(t);if(null===e)throw f.ENOENT(t);if(Mr(e))return e.getListing();throw f.ENOTDIR(t)},e.prototype.readFile=function(t,e,r,n){var i=n;this.open(t,r,420,(function(t,r){if(t)return n(t);n=function(t,e){r.close((function(r){return t||(t=r),i(t,e)}));};var o=r.getBuffer();null===e?n(t,F(o)):function(t,e,r){try{r(null,t.toString(e));}catch(t){r(t);}}(o,e,n);}));},e.prototype.readFileSync=function(t,e,r){var n=this.openSync(t,r,420);try{var i=n.getBuffer();return null===e?F(i):i.toString(e)}finally{n.closeSync();}},e.prototype.getXhrPath=function(t){return "/"===t.charAt(0)&&(t=t.slice(1)),this.prefixUrl+t},e.prototype._requestFileAsync=function(t,e,r){xr(this.getXhrPath(t),e,r);},e.prototype._requestFileSync=function(t,e){return Tr(this.getXhrPath(t),e)},e.prototype._requestFileSizeAsync=function(t,e){!function(t,e){Dr(!0,t,e);}(this.getXhrPath(t),e);},e.prototype._requestFileSizeSync=function(t){return function(t){var e=-1;return Dr(!1,t,(function(t,r){if(t)throw t;e=r;})),e}(this.getXhrPath(t))},e}(Y);Nr.Name="XmlHttpRequest",Nr.Options={index:{type:["string","object"],optional:!0,description:"URL to a file index as a JSON file or the file index object itself, generated with the make_xhrfs_index script. Defaults to `index.json`."},baseUrl:{type:"string",optional:!0,description:"Used as the URL prefix for fetched files. Default: Fetch files relative to the index."}};var jr=function(){};jr.str2byte=function(t,e){for(var r=t.length>e.length?e.length:t.length,n=0;n<r;n++){var i=t.charCodeAt(n);if(i>127){var o=jr.extendedChars.indexOf(t.charAt(n));o>-1&&(i=o+128);}e[i]=n;}return r},jr.byte2str=function(t){for(var e=new Array(t.length),r=0;r<t.length;r++){var n=t[r];e[r]=n>127?jr.extendedChars[n-128]:String.fromCharCode(n);}return e.join("")},jr.byteLength=function(t){return t.length},jr.extendedChars=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","_","_","_","","","","","","","","","+","+","","","+","+","-","-","+","-","+","","","+","+","-","-","","-","+","","","","","","","i","","","","+","+","_","_","","","_","","","","","","","","","","","","","","","","","","","_","","","","","","","","","","","","_"," "];var Br,Lr,Fr=r(31).inflateRaw,Ur={};function zr(t,e){return new Date(1980+(e>>9),(e>>5&15)-1,31&e,t>>11,t>>5&63,31&t)}function Kr(t,e,r,n){return 0===n?"":e?t.toString("utf8",r,r+n):jr.byte2str(t.slice(r,r+n))}!function(t){t[t.MSDOS=0]="MSDOS",t[t.AMIGA=1]="AMIGA",t[t.OPENVMS=2]="OPENVMS",t[t.UNIX=3]="UNIX",t[t.VM_CMS=4]="VM_CMS",t[t.ATARI_ST=5]="ATARI_ST",t[t.OS2_HPFS=6]="OS2_HPFS",t[t.MAC=7]="MAC",t[t.Z_SYSTEM=8]="Z_SYSTEM",t[t.CP_M=9]="CP_M",t[t.NTFS=10]="NTFS",t[t.MVS=11]="MVS",t[t.VSE=12]="VSE",t[t.ACORN_RISC=13]="ACORN_RISC",t[t.VFAT=14]="VFAT",t[t.ALT_MVS=15]="ALT_MVS",t[t.BEOS=16]="BEOS",t[t.TANDEM=17]="TANDEM",t[t.OS_400=18]="OS_400",t[t.OSX=19]="OSX";}(Br||(Br={})),function(t){t[t.STORED=0]="STORED",t[t.SHRUNK=1]="SHRUNK",t[t.REDUCED_1=2]="REDUCED_1",t[t.REDUCED_2=3]="REDUCED_2",t[t.REDUCED_3=4]="REDUCED_3",t[t.REDUCED_4=5]="REDUCED_4",t[t.IMPLODE=6]="IMPLODE",t[t.DEFLATE=8]="DEFLATE",t[t.DEFLATE64=9]="DEFLATE64",t[t.TERSE_OLD=10]="TERSE_OLD",t[t.BZIP2=12]="BZIP2",t[t.LZMA=14]="LZMA",t[t.TERSE_NEW=18]="TERSE_NEW",t[t.LZ77=19]="LZ77",t[t.WAVPACK=97]="WAVPACK",t[t.PPMD=98]="PPMD";}(Lr||(Lr={}));var qr=function(t){if(this.data=t,67324752!==t.readUInt32LE(0))throw new f(a.EINVAL,"Invalid Zip file: Local file header has invalid signature: "+this.data.readUInt32LE(0))};qr.prototype.versionNeeded=function(){return this.data.readUInt16LE(4)},qr.prototype.flags=function(){return this.data.readUInt16LE(6)},qr.prototype.compressionMethod=function(){return this.data.readUInt16LE(8)},qr.prototype.lastModFileTime=function(){return zr(this.data.readUInt16LE(10),this.data.readUInt16LE(12))},qr.prototype.rawLastModFileTime=function(){return this.data.readUInt32LE(10)},qr.prototype.crc32=function(){return this.data.readUInt32LE(14)},qr.prototype.fileNameLength=function(){return this.data.readUInt16LE(26)},qr.prototype.extraFieldLength=function(){return this.data.readUInt16LE(28)},qr.prototype.fileName=function(){return Kr(this.data,this.useUTF8(),30,this.fileNameLength())},qr.prototype.extraField=function(){var t=30+this.fileNameLength();return this.data.slice(t,t+this.extraFieldLength())},qr.prototype.totalSize=function(){return 30+this.fileNameLength()+this.extraFieldLength()},qr.prototype.useUTF8=function(){return 2048==(2048&this.flags())};var Hr=function(t,e,r){this.header=t,this.record=e,this.data=r;};Hr.prototype.decompress=function(){var t=this.header.compressionMethod(),e=Ur[t];if(e)return e(this.data,this.record.compressedSize(),this.record.uncompressedSize(),this.record.flag());var r=Lr[t];throw r||(r="Unknown: "+t),new f(a.EINVAL,"Invalid compression method on file '"+this.header.fileName()+"': "+r)},Hr.prototype.getHeader=function(){return this.header},Hr.prototype.getRecord=function(){return this.record},Hr.prototype.getRawData=function(){return this.data};var Vr=function(t,e){if(this.zipData=t,this.data=e,33639248!==this.data.readUInt32LE(0))throw new f(a.EINVAL,"Invalid Zip file: Central directory record has invalid signature: "+this.data.readUInt32LE(0));this._filename=this.produceFilename();};Vr.prototype.versionMadeBy=function(){return this.data.readUInt16LE(4)},Vr.prototype.versionNeeded=function(){return this.data.readUInt16LE(6)},Vr.prototype.flag=function(){return this.data.readUInt16LE(8)},Vr.prototype.compressionMethod=function(){return this.data.readUInt16LE(10)},Vr.prototype.lastModFileTime=function(){return zr(this.data.readUInt16LE(12),this.data.readUInt16LE(14))},Vr.prototype.rawLastModFileTime=function(){return this.data.readUInt32LE(12)},Vr.prototype.crc32=function(){return this.data.readUInt32LE(16)},Vr.prototype.compressedSize=function(){return this.data.readUInt32LE(20)},Vr.prototype.uncompressedSize=function(){return this.data.readUInt32LE(24)},Vr.prototype.fileNameLength=function(){return this.data.readUInt16LE(28)},Vr.prototype.extraFieldLength=function(){return this.data.readUInt16LE(30)},Vr.prototype.fileCommentLength=function(){return this.data.readUInt16LE(32)},Vr.prototype.diskNumberStart=function(){return this.data.readUInt16LE(34)},Vr.prototype.internalAttributes=function(){return this.data.readUInt16LE(36)},Vr.prototype.externalAttributes=function(){return this.data.readUInt32LE(38)},Vr.prototype.headerRelativeOffset=function(){return this.data.readUInt32LE(42)},Vr.prototype.produceFilename=function(){return Kr(this.data,this.useUTF8(),46,this.fileNameLength()).replace(/\\/g,"/")},Vr.prototype.fileName=function(){return this._filename},Vr.prototype.rawFileName=function(){return this.data.slice(46,46+this.fileNameLength())},Vr.prototype.extraField=function(){var t=44+this.fileNameLength();return this.data.slice(t,t+this.extraFieldLength())},Vr.prototype.fileComment=function(){var t=46+this.fileNameLength()+this.extraFieldLength();return Kr(this.data,this.useUTF8(),t,this.fileCommentLength())},Vr.prototype.rawFileComment=function(){var t=46+this.fileNameLength()+this.extraFieldLength();return this.data.slice(t,t+this.fileCommentLength())},Vr.prototype.totalSize=function(){return 46+this.fileNameLength()+this.extraFieldLength()+this.fileCommentLength()},Vr.prototype.isDirectory=function(){var t=this.fileName();return !!(16&this.externalAttributes())||"/"===t.charAt(t.length-1)},Vr.prototype.isFile=function(){return !this.isDirectory()},Vr.prototype.useUTF8=function(){return 2048==(2048&this.flag())},Vr.prototype.isEncrypted=function(){return 1==(1&this.flag())},Vr.prototype.getFileData=function(){var t=this.headerRelativeOffset(),e=new qr(this.zipData.slice(t));return new Hr(e,this,this.zipData.slice(t+e.totalSize()))},Vr.prototype.getData=function(){return this.getFileData().decompress()},Vr.prototype.getRawData=function(){return this.getFileData().getRawData()},Vr.prototype.getStats=function(){return new y(d.FILE,this.uncompressedSize(),365,new Date,this.lastModFileTime())};var Wr=function(t){if(this.data=t,101010256!==this.data.readUInt32LE(0))throw new f(a.EINVAL,"Invalid Zip file: End of central directory record has invalid signature: "+this.data.readUInt32LE(0))};Wr.prototype.diskNumber=function(){return this.data.readUInt16LE(4)},Wr.prototype.cdDiskNumber=function(){return this.data.readUInt16LE(6)},Wr.prototype.cdDiskEntryCount=function(){return this.data.readUInt16LE(8)},Wr.prototype.cdTotalEntryCount=function(){return this.data.readUInt16LE(10)},Wr.prototype.cdSize=function(){return this.data.readUInt32LE(12)},Wr.prototype.cdOffset=function(){return this.data.readUInt32LE(16)},Wr.prototype.cdZipCommentLength=function(){return this.data.readUInt16LE(20)},Wr.prototype.cdZipComment=function(){return Kr(this.data,!0,22,this.cdZipCommentLength())},Wr.prototype.rawCdZipComment=function(){return this.data.slice(22,22+this.cdZipCommentLength())};var Jr=function(t,e,r,n){this.index=t,this.directoryEntries=e,this.eocd=r,this.data=n;},Yr=function(t){function e(r,n,i){void 0===n&&(n=""),void 0===i&&(i=!0),t.call(this),this.name=n,this._index=new Pr,this._directoryEntries=[],this._eocd=null,T(i,e.Name,{zipData:"zip data as a Buffer",name:n}),r instanceof Jr?(this._index=r.index,this._directoryEntries=r.directoryEntries,this._eocd=r.eocd,this.data=r.data):(this.data=r,this.populateIndex());}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.Create=function(t,r){try{e.computeIndex(t.zipData,(function(n){var i=new e(n,t.name,!1);r(null,i);}),!1);}catch(t){r(t);}},e.isAvailable=function(){return !0},e.RegisterDecompressionMethod=function(t,e){Ur[t]=e;},e.computeIndex=function(t,r,n){void 0===n&&(n=!0),n&&console.warn("[ZipFS] ZipFS.computeIndex is now deprecated, and will be removed in the next major release. Please update your code to use 'ZipFS.Create({ zipData: zip file as a Buffer}, cb)' instead.");var i=new Pr,o=e.getEOCD(t);if(o.diskNumber()!==o.cdDiskNumber())throw new f(a.EINVAL,"ZipFS does not support spanned zip files.");var s=o.cdOffset();if(4294967295===s)throw new f(a.EINVAL,"ZipFS does not support Zip64.");var u=s+o.cdSize();e.computeIndexResponsive(t,i,s,u,r,[],o);},e.getEOCD=function(t){for(var e=Math.min(65557,t.length-1),r=22;r<e;r++)if(101010256===t.readUInt32LE(t.length-r))return new Wr(t.slice(t.length-r));throw new f(a.EINVAL,"Invalid ZIP file: Could not locate End of Central Directory signature.")},e.addToIndex=function(t,e){var r=t.fileName();if("/"===r.charAt(0))throw new Error("WHY IS THIS ABSOLUTE");"/"===r.charAt(r.length-1)&&(r=r.substr(0,r.length-1)),t.isDirectory()?e.addPathFast("/"+r,new Rr(t)):e.addPathFast("/"+r,new Or(t));},e.computeIndexResponsive=function(t,r,n,i,o,a,s){if(n<i){for(var u=0;u++<200&&n<i;){var c=new Vr(t,t.slice(n));e.addToIndex(c,r),n+=c.totalSize(),a.push(c);}er((function(){e.computeIndexResponsive(t,r,n,i,o,a,s);}));}else o(new Jr(r,a,s,t));},e.prototype.getName=function(){return e.Name+(""!==this.name?" "+this.name:"")},e.prototype.getCentralDirectoryEntry=function(t){var e=this._index.getInode(t);if(null===e)throw f.ENOENT(t);if(Cr(e))return e.getData();if(Mr(e))return e.getData();throw f.EPERM("Invalid inode: "+e)},e.prototype.getCentralDirectoryEntryAt=function(t){var e=this._directoryEntries[t];if(!e)throw new RangeError("Invalid directory index: "+t+".");return e},e.prototype.getNumberOfCentralDirectoryEntries=function(){return this._directoryEntries.length},e.prototype.getEndOfCentralDirectory=function(){return this._eocd},e.prototype.diskSpace=function(t,e){e(this.data.length,0);},e.prototype.isReadOnly=function(){return !0},e.prototype.supportsLinks=function(){return !1},e.prototype.supportsProps=function(){return !1},e.prototype.supportsSynch=function(){return !0},e.prototype.statSync=function(t,e){var r,n=this._index.getInode(t);if(null===n)throw f.ENOENT(t);if(Cr(n))r=n.getData().getStats();else {if(!Mr(n))throw new f(a.EINVAL,"Invalid inode.");r=n.getStats();}return r},e.prototype.openSync=function(t,e,r){if(e.isWriteable())throw new f(a.EPERM,t);var n=this._index.getInode(t);if(!n)throw f.ENOENT(t);if(!Cr(n))throw f.EISDIR(t);var i=n.getData(),o=i.getStats();switch(e.pathExistsAction()){case l.THROW_EXCEPTION:case l.TRUNCATE_FILE:throw f.EEXIST(t);case l.NOP:return new $(this,t,e,o,i.getData());default:throw new f(a.EINVAL,"Invalid FileMode object.")}},e.prototype.readdirSync=function(t){var e=this._index.getInode(t);if(e){if(Mr(e))return e.getListing();throw f.ENOTDIR(t)}throw f.ENOENT(t)},e.prototype.readFileSync=function(t,e,r){var n=this.openSync(t,r,420);try{var i=n.getBuffer();return null===e?F(i):i.toString(e)}finally{n.closeSync();}},e.prototype.populateIndex=function(){var t=this,r=this._eocd=e.getEOCD(this.data);if(r.diskNumber()!==r.cdDiskNumber())throw new f(a.EINVAL,"ZipFS does not support spanned zip files.");var n=r.cdOffset();if(4294967295===n)throw new f(a.EINVAL,"ZipFS does not support Zip64.");for(var i=n+r.cdSize();n<i;){var o=new Vr(t.data,t.data.slice(n));n+=o.totalSize(),e.addToIndex(o,t._index),t._directoryEntries.push(o);}},e}(Z);function Zr(t,e,r){return t.toString("ascii",e,e+r).trim()}function Gr(t,e,r){if(1===r)return String.fromCharCode(t[e]);for(var n=Math.floor(r/2),i=new Array(n),o=0;o<n;o++){var a=e+(o<<1);i[o]=String.fromCharCode(t[a+1]|t[a]<<8);}return i.join("")}function Xr(t,e){var r=parseInt(Zr(t,e,4),10),n=parseInt(Zr(t,e+4,2),10),i=parseInt(Zr(t,e+6,2),10),o=parseInt(Zr(t,e+8,2),10),a=parseInt(Zr(t,e+10,2),10),s=parseInt(Zr(t,e+12,2),10),u=parseInt(Zr(t,e+14,2),10);return new Date(r,n,i,o,a,s,100*u)}function $r(t,e){var r=t[e],n=t[e+1],i=t[e+2],o=t[e+3],a=t[e+4],s=t[e+5];return new Date(r,n-1,i,o,a,s)}function Qr(t,e){var r=t.slice(e),n=new cn(r);switch(n.signatureWord()){case 17221:return new ln(r);case 20548:return new fn(r);case 21328:return new hn(r);case 21332:return new dn(r);case 17746:return new pn(r);case 17747:return new yn(r);case 20568:return new mn(r);case 20558:return new bn(r);case 21324:return new vn(r);case 20045:return new _n(r);case 17228:return new Sn(r);case 20556:return new En(r);case 21061:return new In(r);case 21574:return new An(r);case 21318:return new kn(r);case 21074:return new gn(r);default:return n}}function tn(t,e,r,n){r-=4;for(var i=new Array;e<r;){var o=Qr(t,e),a=o.length();if(0===a)return i;if(e+=a,o instanceof dn)break;o instanceof ln?i=i.concat(o.getEntries(n)):i.push(o);}return i}Yr.Name="ZipFS",Yr.Options={zipData:{type:"object",description:"The zip file as a Buffer object.",validator:K},name:{type:"string",optional:!0,description:"The name of the zip file (optional)."}},Yr.CompressionMethod=Lr,Yr.RegisterDecompressionMethod(Lr.DEFLATE,(function(t,e,r){return j(Fr(t.slice(0,e),{chunkSize:r}))})),Yr.RegisterDecompressionMethod(Lr.STORED,(function(t,e,r){return F(t,0,r)}));var en=function(t){this._data=t;};en.prototype.type=function(){return this._data[0]},en.prototype.standardIdentifier=function(){return Zr(this._data,1,5)},en.prototype.version=function(){return this._data[6]},en.prototype.data=function(){return this._data.slice(7,2048)};var rn=function(t){function e(e){t.call(this,e),this._root=null;}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.systemIdentifier=function(){return this._getString32(8)},e.prototype.volumeIdentifier=function(){return this._getString32(40)},e.prototype.volumeSpaceSize=function(){return this._data.readUInt32LE(80)},e.prototype.volumeSetSize=function(){return this._data.readUInt16LE(120)},e.prototype.volumeSequenceNumber=function(){return this._data.readUInt16LE(124)},e.prototype.logicalBlockSize=function(){return this._data.readUInt16LE(128)},e.prototype.pathTableSize=function(){return this._data.readUInt32LE(132)},e.prototype.locationOfTypeLPathTable=function(){return this._data.readUInt32LE(140)},e.prototype.locationOfOptionalTypeLPathTable=function(){return this._data.readUInt32LE(144)},e.prototype.locationOfTypeMPathTable=function(){return this._data.readUInt32BE(148)},e.prototype.locationOfOptionalTypeMPathTable=function(){return this._data.readUInt32BE(152)},e.prototype.rootDirectoryEntry=function(t){return null===this._root&&(this._root=this._constructRootDirectoryRecord(this._data.slice(156)),this._root.rootCheckForRockRidge(t)),this._root},e.prototype.volumeSetIdentifier=function(){return this._getString(190,128)},e.prototype.publisherIdentifier=function(){return this._getString(318,128)},e.prototype.dataPreparerIdentifier=function(){return this._getString(446,128)},e.prototype.applicationIdentifier=function(){return this._getString(574,128)},e.prototype.copyrightFileIdentifier=function(){return this._getString(702,38)},e.prototype.abstractFileIdentifier=function(){return this._getString(740,36)},e.prototype.bibliographicFileIdentifier=function(){return this._getString(776,37)},e.prototype.volumeCreationDate=function(){return Xr(this._data,813)},e.prototype.volumeModificationDate=function(){return Xr(this._data,830)},e.prototype.volumeExpirationDate=function(){return Xr(this._data,847)},e.prototype.volumeEffectiveDate=function(){return Xr(this._data,864)},e.prototype.fileStructureVersion=function(){return this._data[881]},e.prototype.applicationUsed=function(){return this._data.slice(883,1395)},e.prototype.reserved=function(){return this._data.slice(1395,2048)},e.prototype._getString32=function(t){return this._getString(t,32)},e}(en),nn=function(t){function e(e){if(t.call(this,e),1!==this.type())throw new f(a.EIO,"Invalid primary volume descriptor.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.name=function(){return "ISO9660"},e.prototype._constructRootDirectoryRecord=function(t){return new sn(t,-1)},e.prototype._getString=function(t,e){return this._getString(t,e)},e}(rn),on=function(t){function e(e){if(t.call(this,e),2!==this.type())throw new f(a.EIO,"Invalid supplementary volume descriptor.");var r=this.escapeSequence(),n=r[2];if(37!==r[0]||47!==r[1]||64!==n&&67!==n&&69!==n)throw new f(a.EIO,"Unrecognized escape sequence for SupplementaryVolumeDescriptor: "+r.toString())}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.name=function(){return "Joliet"},e.prototype.escapeSequence=function(){return this._data.slice(88,120)},e.prototype._constructRootDirectoryRecord=function(t){return new un(t,-1)},e.prototype._getString=function(t,e){return Gr(this._data,t,e)},e}(rn),an=function(t,e){this._suEntries=null,this._fileOrDir=null,this._data=t,this._rockRidgeOffset=e;};an.prototype.hasRockRidge=function(){return this._rockRidgeOffset>-1},an.prototype.getRockRidgeOffset=function(){return this._rockRidgeOffset},an.prototype.rootCheckForRockRidge=function(t){var e=this.getDirectory(t);this._rockRidgeOffset=e.getDotEntry(t)._getRockRidgeOffset(t),this._rockRidgeOffset>-1&&(this._fileOrDir=null);},an.prototype.length=function(){return this._data[0]},an.prototype.extendedAttributeRecordLength=function(){return this._data[1]},an.prototype.lba=function(){return 2048*this._data.readUInt32LE(2)},an.prototype.dataLength=function(){return this._data.readUInt32LE(10)},an.prototype.recordingDate=function(){return $r(this._data,18)},an.prototype.fileFlags=function(){return this._data[25]},an.prototype.fileUnitSize=function(){return this._data[26]},an.prototype.interleaveGapSize=function(){return this._data[27]},an.prototype.volumeSequenceNumber=function(){return this._data.readUInt16LE(28)},an.prototype.identifier=function(){return this._getString(33,this._data[32])},an.prototype.fileName=function(t){if(this.hasRockRidge()){var e=this._rockRidgeFilename(t);if(null!==e)return e}var r=this.identifier();if(this.isDirectory(t))return r;var n=r.indexOf(";");return -1===n?r:"."===r[n-1]?r.slice(0,n-1):r.slice(0,n)},an.prototype.isDirectory=function(t){var e=!!(2&this.fileFlags());return !e&&this.hasRockRidge()&&(e=this.getSUEntries(t).filter((function(t){return t instanceof Sn})).length>0),e},an.prototype.isSymlink=function(t){return this.hasRockRidge()&&this.getSUEntries(t).filter((function(t){return t instanceof vn})).length>0},an.prototype.getSymlinkPath=function(t){for(var e="",r=this.getSUEntries(t),n=this._getGetString(),i=0,o=r;i<o.length;i+=1){var a=o[i];if(a instanceof vn){for(var s=0,u=a.componentRecords();s<u.length;s+=1){var c=u[s],l=c.flags();2&l?e+="./":4&l?e+="../":8&l?e+="/":(e+=c.content(n),1&l||(e+="/"));}if(!a.continueFlag())break}}return e.length>1&&"/"===e[e.length-1]?e.slice(0,e.length-1):e},an.prototype.getFile=function(t){if(this.isDirectory(t))throw new Error("Tried to get a File from a directory.");return null===this._fileOrDir&&(this._fileOrDir=t.slice(this.lba(),this.lba()+this.dataLength())),this._fileOrDir},an.prototype.getDirectory=function(t){if(!this.isDirectory(t))throw new Error("Tried to get a Directory from a file.");return null===this._fileOrDir&&(this._fileOrDir=this._constructDirectory(t)),this._fileOrDir},an.prototype.getSUEntries=function(t){return this._suEntries||this._constructSUEntries(t),this._suEntries},an.prototype._rockRidgeFilename=function(t){var e=this.getSUEntries(t).filter((function(t){return t instanceof _n}));if(0===e.length||6&e[0].flags())return null;for(var r="",n=this._getGetString(),i=0,o=e;i<o.length;i+=1){var a=o[i];if(r+=a.name(n),!(1&a.flags()))break}return r},an.prototype._constructSUEntries=function(t){var e=33+this._data[32];e%2==1&&e++,e+=this._rockRidgeOffset,this._suEntries=tn(this._data,e,this.length(),t);},an.prototype._getRockRidgeOffset=function(t){this._rockRidgeOffset=0;var e=this.getSUEntries(t);if(e.length>0){var r=e[0];if(r instanceof hn&&r.checkBytesPass())for(var n=1;n<e.length;n++){var i=e[n];if(i instanceof gn||i instanceof pn&&"IEEE_P1282"===i.extensionIdentifier())return r.bytesSkipped()}}return this._rockRidgeOffset=-1,-1};var sn=function(t){function e(e,r){t.call(this,e,r);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._getString=function(t,e){return Zr(this._data,t,e)},e.prototype._constructDirectory=function(t){return new xn(this,t)},e.prototype._getGetString=function(){return Zr},e}(an),un=function(t){function e(e,r){t.call(this,e,r);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._getString=function(t,e){return Gr(this._data,t,e)},e.prototype._constructDirectory=function(t){return new Tn(this,t)},e.prototype._getGetString=function(){return Gr},e}(an),cn=function(t){this._data=t;};cn.prototype.signatureWord=function(){return this._data.readUInt16BE(0)},cn.prototype.signatureWordString=function(){return Zr(this._data,0,2)},cn.prototype.length=function(){return this._data[2]},cn.prototype.suVersion=function(){return this._data[3]};var ln=function(t){function e(e){t.call(this,e),this._entries=null;}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.continuationLba=function(){return this._data.readUInt32LE(4)},e.prototype.continuationLbaOffset=function(){return this._data.readUInt32LE(12)},e.prototype.continuationLength=function(){return this._data.readUInt32LE(20)},e.prototype.getEntries=function(t){if(!this._entries){var e=2048*this.continuationLba()+this.continuationLbaOffset();this._entries=tn(t,e,this.continuationLength(),t);}return this._entries},e}(cn),fn=function(t){function e(e){t.call(this,e);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(cn),hn=function(t){function e(e){t.call(this,e);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.checkBytesPass=function(){return 190===this._data[4]&&239===this._data[5]},e.prototype.bytesSkipped=function(){return this._data[6]},e}(cn),dn=function(t){function e(e){t.call(this,e);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(cn),pn=function(t){function e(e){t.call(this,e);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.identifierLength=function(){return this._data[4]},e.prototype.descriptorLength=function(){return this._data[5]},e.prototype.sourceLength=function(){return this._data[6]},e.prototype.extensionVersion=function(){return this._data[7]},e.prototype.extensionIdentifier=function(){return Zr(this._data,8,this.identifierLength())},e.prototype.extensionDescriptor=function(){return Zr(this._data,8+this.identifierLength(),this.descriptorLength())},e.prototype.extensionSource=function(){return Zr(this._data,8+this.identifierLength()+this.descriptorLength(),this.sourceLength())},e}(cn),yn=function(t){function e(e){t.call(this,e);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.extensionSequence=function(){return this._data[4]},e}(cn),gn=function(t){function e(e){t.call(this,e);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(cn),mn=function(t){function e(e){t.call(this,e);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.mode=function(){return this._data.readUInt32LE(4)},e.prototype.fileLinks=function(){return this._data.readUInt32LE(12)},e.prototype.uid=function(){return this._data.readUInt32LE(20)},e.prototype.gid=function(){return this._data.readUInt32LE(28)},e.prototype.inode=function(){return this._data.readUInt32LE(36)},e}(cn),bn=function(t){function e(e){t.call(this,e);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.devTHigh=function(){return this._data.readUInt32LE(4)},e.prototype.devTLow=function(){return this._data.readUInt32LE(12)},e}(cn),vn=function(t){function e(e){t.call(this,e);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flags=function(){return this._data[4]},e.prototype.continueFlag=function(){return 1&this.flags()},e.prototype.componentRecords=function(){for(var t=new Array,e=5;e<this.length();){var r=new wn(this._data.slice(e));t.push(r),e+=r.length();}return t},e}(cn),wn=function(t){this._data=t;};wn.prototype.flags=function(){return this._data[0]},wn.prototype.length=function(){return 2+this.componentLength()},wn.prototype.componentLength=function(){return this._data[1]},wn.prototype.content=function(t){return t(this._data,2,this.componentLength())};var _n=function(t){function e(e){t.call(this,e);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flags=function(){return this._data[4]},e.prototype.name=function(t){return t(this._data,5,this.length()-5)},e}(cn),Sn=function(t){function e(e){t.call(this,e);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.childDirectoryLba=function(){return this._data.readUInt32LE(4)},e}(cn),En=function(t){function e(e){t.call(this,e);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parentDirectoryLba=function(){return this._data.readUInt32LE(4)},e}(cn),In=function(t){function e(e){t.call(this,e);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(cn),An=function(t){function e(e){t.call(this,e);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flags=function(){return this._data[4]},e.prototype.creation=function(){return 1&this.flags()?this._longFormDates()?Xr(this._data,5):$r(this._data,5):null},e.prototype.modify=function(){if(2&this.flags()){var t=1&this.flags()?1:0;return this._longFormDates?Xr(this._data,5+17*t):$r(this._data,5+7*t)}return null},e.prototype.access=function(){if(4&this.flags()){var t=1&this.flags()?1:0;return t+=2&this.flags()?1:0,this._longFormDates?Xr(this._data,5+17*t):$r(this._data,5+7*t)}return null},e.prototype.backup=function(){if(16&this.flags()){var t=1&this.flags()?1:0;return t+=2&this.flags()?1:0,t+=4&this.flags()?1:0,this._longFormDates?Xr(this._data,5+17*t):$r(this._data,5+7*t)}return null},e.prototype.expiration=function(){if(32&this.flags()){var t=1&this.flags()?1:0;return t+=2&this.flags()?1:0,t+=4&this.flags()?1:0,t+=16&this.flags()?1:0,this._longFormDates?Xr(this._data,5+17*t):$r(this._data,5+7*t)}return null},e.prototype.effective=function(){if(64&this.flags()){var t=1&this.flags()?1:0;return t+=2&this.flags()?1:0,t+=4&this.flags()?1:0,t+=16&this.flags()?1:0,t+=32&this.flags()?1:0,this._longFormDates?Xr(this._data,5+17*t):$r(this._data,5+7*t)}return null},e.prototype._longFormDates=function(){return !!this.flags()},e}(cn),kn=function(t){function e(e){t.call(this,e);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.virtualSizeHigh=function(){return this._data.readUInt32LE(4)},e.prototype.virtualSizeLow=function(){return this._data.readUInt32LE(12)},e.prototype.tableDepth=function(){return this._data[20]},e}(cn),Dn=function(t,e){var r=this;this._fileList=[],this._fileMap={},this._record=t;var n=t.lba(),i=n+t.dataLength();for(2&t.fileFlags()||(n=2048*t.getSUEntries(e).filter((function(t){return t instanceof Sn}))[0].childDirectoryLba(),i=1/0);n<i;)if(0!==e[n]){var o=r._constructDirectoryRecord(e.slice(n)),a=o.fileName(e);"\0"!==a&&""!==a?o.hasRockRidge()&&0!==o.getSUEntries(e).filter((function(t){return t instanceof In})).length||(r._fileMap[a]=o,r._fileList.push(a)):i===1/0&&(i=n+o.dataLength()),n+=o.length();}else n++;};Dn.prototype.getRecord=function(t){return this._fileMap[t]},Dn.prototype.getFileList=function(){return this._fileList},Dn.prototype.getDotEntry=function(t){return this._constructDirectoryRecord(t.slice(this._record.lba()))};var xn=function(t){function e(e,r){t.call(this,e,r);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._constructDirectoryRecord=function(t){return new sn(t,this._record.getRockRidgeOffset())},e}(Dn),Tn=function(t){function e(e,r){t.call(this,e,r);}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._constructDirectoryRecord=function(t){return new un(t,this._record.getRockRidgeOffset())},e}(Dn),Pn=function(t){function e(r,n,i){var o=this;void 0===n&&(n=""),void 0===i&&(i=!0),t.call(this),this._data=r,T(i,e.Name,{data:"ISO data as a Buffer",name:n});for(var s=!1,u=32768,c=new Array;!s;){var l=r.slice(u);switch(new en(l).type()){case 1:c.push(new nn(l));break;case 2:c.push(new on(l));break;case 255:s=!0;}u+=2048;}if(0===c.length)throw new f(a.EIO,"Unable to find a suitable volume descriptor.");c.forEach((function(t){o._pvd&&2===o._pvd.type()||(o._pvd=t);})),this._root=this._pvd.rootDirectoryEntry(r),this._name=n;}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.Create=function(t,r){var n;try{n=new e(t.data,t.name,!1);}catch(i){i=i;}finally{r(void 0,n);}},e.isAvailable=function(){return !0},e.prototype.getName=function(){var t="IsoFS"+this._name+(this._pvd?"-"+this._pvd.name():"");return this._root&&this._root.hasRockRidge()&&(t+="-RockRidge"),t},e.prototype.diskSpace=function(t,e){e(this._data.length,0);},e.prototype.isReadOnly=function(){return !0},e.prototype.supportsLinks=function(){return !1},e.prototype.supportsProps=function(){return !1},e.prototype.supportsSynch=function(){return !0},e.prototype.statSync=function(t,e){var r=this._getDirectoryRecord(t);if(null===r)throw f.ENOENT(t);return this._getStats(t,r)},e.prototype.openSync=function(t,e,r){if(e.isWriteable())throw new f(a.EPERM,t);var n=this._getDirectoryRecord(t);if(!n)throw f.ENOENT(t);if(n.isSymlink(this._data))return this.openSync(u.resolve(t,n.getSymlinkPath(this._data)),e,r);if(n.isDirectory(this._data))throw f.EISDIR(t);var i=n.getFile(this._data),o=this._getStats(t,n);switch(e.pathExistsAction()){case l.THROW_EXCEPTION:case l.TRUNCATE_FILE:throw f.EEXIST(t);case l.NOP:return new $(this,t,e,o,i);default:throw new f(a.EINVAL,"Invalid FileMode object.")}},e.prototype.readdirSync=function(t){var e=this._getDirectoryRecord(t);if(e){if(e.isDirectory(this._data))return e.getDirectory(this._data).getFileList().slice(0);throw f.ENOTDIR(t)}throw f.ENOENT(t)},e.prototype.readFileSync=function(t,e,r){var n=this.openSync(t,r,420);try{var i=n.getBuffer();return null===e?F(i):i.toString(e)}finally{n.closeSync();}},e.prototype._getDirectoryRecord=function(t){if("/"===t)return this._root;for(var e=t.split("/").slice(1),r=this._root,n=0,i=e;n<i.length;n+=1){var o=i[n];if(!r.isDirectory(this._data))return null;if(!(r=r.getDirectory(this._data).getRecord(o)))return null}return r},e.prototype._getStats=function(t,e){if(e.isSymlink(this._data)){var r=u.resolve(t,e.getSymlinkPath(this._data)),n=this._getDirectoryRecord(r);return n?this._getStats(r,n):null}var i=e.dataLength(),o=365,a=e.recordingDate(),s=a,c=a,l=a;if(e.hasRockRidge())for(var f=0,h=e.getSUEntries(this._data);f<h.length;f+=1){var p=h[f];if(p instanceof mn)o=p.mode();else if(p instanceof An){var g=p.flags();4&g&&(s=p.access()),2&g&&(c=p.modify()),1&g&&(l=p.creation());}}return o&=365,new y(e.isDirectory(this._data)?d.DIRECTORY:d.FILE,i,o,s,c,l)},e}(Z);Pn.Name="IsoFS",Pn.Options={data:{type:"object",description:"The ISO file in a buffer",validator:K}},[tt,ie,se,ue,ge,Pe,Be,Pn,ze,Ke,lr,kr,Nr,Yr].forEach((function(t){var e=t.Create;t.Create=function(r,n){var i="function"==typeof r,o=i?r:n,a=i?{}:r;q(t,a,(function(r){r?o(r):e.call(t,a,o);}));};}));var On,Rn={AsyncMirror:tt,Dropbox:ie,Emscripten:se,FolderAdapter:ue,HTML5FS:ge,InMemory:Pe,IndexedDB:Be,IsoFS:Pn,LocalStorage:ze,MountableFileSystem:Ke,OverlayFS:lr,WorkerFS:kr,XmlHttpRequest:Nr,ZipFS:Yr};function Cn(t){switch(t){case"fs":return A;case"path":return u;case"buffer":return s;case"process":return o;case"bfs_utils":return H;default:return Rn[t]}}function Mn(t){return A.initialize(t)}function Nn(t,e){var r=t.fs;if(!r)return e(new f(a.EPERM,'Missing "fs" property on configuration object.'));var n=t.options,i=0,o=!1;function s(){if(!o){o=!0;var t=Rn[r];t?t.Create(n,e):e(new f(a.EPERM,"File system "+r+" is not available in BrowserFS."));}}if(null!==n&&"object"==typeof n){var u=!1;Object.keys(n).filter((function(t){return "fs"!==t})).forEach((function(t){var r=n[t];null!==r&&"object"==typeof r&&r.fs&&(i++,Nn(r,(function(r,a){if(i--,r){if(o)return;o=!0,e(r);}else n[t]=a,0===i&&u&&s();})));})),u=!0;}0===i&&s();}o.initializeTTYs&&o.initializeTTYs(),"b"!=="ab".substr(-1)&&(String.prototype.substr=(On=String.prototype.substr,function(t,e){return t<0&&(t=this.length+t),On.call(this,t,e)})),"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&(Uint8Array.prototype.slice||(Uint8Array.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.length),t<0&&(t=this.length+t)<0&&(t=0),e<0&&(e=this.length+e)<0&&(e=0),e<t&&(e=t),new Uint8Array(this.buffer,this.byteOffset+t,e-t)})),e.install=function(e){e.Buffer=t,e.process=o;var r=e.require?e.require:null;e.require=function(t){var e=Cn(t);return e||r.apply(null,Array.prototype.slice.call(arguments,0))};},e.registerFileSystem=function(t,e){Rn[t]=e;},e.BFSRequire=Cn,e.initialize=Mn,e.configure=function(t,e){Nn(t,(function(t,r){r?(Mn(r),e()):e(t);}));},e.getFileSystem=Nn,e.EmscriptenFS=J,e.FileSystem=Rn,e.Errors=h,e.setImmediate=er;}).call(e,r(1),function(){return this}(),r(5)(t),r(6));},function(t,e,r){t.exports=r(2).Buffer;},function(t,e,r){(function(t){
	/*!
		 * The buffer module from node.js, for the browser.
		 *
		 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
		 * @license  MIT
		 */
	var n=r(3),i=r(4);e.Buffer=t,e.SlowBuffer=function(e){return +e!=e&&(e=0),t.alloc(+e)},e.INSPECT_MAX_BYTES=50;var o=2147483647;function a(e){if(e>o)throw new RangeError("Invalid typed array length");var r=new Uint8Array(e);return r.__proto__=t.prototype,r}function t(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return c(t)}return s(t,e,r)}function s(e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return F(e)?function(e,r,n){if(r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");var i;return (i=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n)).__proto__=t.prototype,i}(e,r,n):"string"==typeof e?function(e,r){if("string"==typeof r&&""!==r||(r="utf8"),!t.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|h(e,r),i=a(n),o=i.write(e,r);return o!==n&&(i=i.slice(0,o)),i}(e,r):function(e){if(t.isBuffer(e)){var r=0|f(e.length),n=a(r);return 0===n.length||e.copy(n,0,0,r),n}if(e){if(U(e)||"length"in e)return "number"!=typeof e.length||z(e.length)?a(0):l(e);if("Buffer"===e.type&&Array.isArray(e.data))return l(e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function c(t){return u(t),a(t<0?0:0|f(t))}function l(t){for(var e=t.length<0?0:0|f(t.length),r=a(e),n=0;n<e;n+=1)r[n]=255&t[n];return r}function f(t){if(t>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|t}function h(e,r){if(t.isBuffer(e))return e.length;if(U(e)||F(e))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var i=!1;;)switch(r){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return j(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return B(e).length;default:if(i)return j(e).length;r=(""+r).toLowerCase(),i=!0;}}function d(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return "";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return "";if((r>>>=0)<=(e>>>=0))return "";for(t||(t="utf8");;)switch(t){case"hex":return x(this,e,r);case"utf8":case"utf-8":return I(this,e,r);case"ascii":return k(this,e,r);case"latin1":case"binary":return D(this,e,r);case"base64":return E(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0;}}function p(t,e,r){var n=t[e];t[e]=t[r],t[r]=n;}function y(e,r,n,i,o){if(0===e.length)return -1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),z(n=+n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return -1;n=e.length-1;}else if(n<0){if(!o)return -1;n=0;}if("string"==typeof r&&(r=t.from(r,i)),t.isBuffer(r))return 0===r.length?-1:g(e,r,n,i,o);if("number"==typeof r)return r&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,r,n):Uint8Array.prototype.lastIndexOf.call(e,r,n):g(e,[r],n,i,o);throw new TypeError("val must be string, number or Buffer")}function g(t,e,r,n,i){var o,a=1,s=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return -1;a=2,s/=2,u/=2,r/=2;}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var l=-1;for(o=r;o<s;o++)if(c(t,o)===c(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*a}else -1!==l&&(o-=o-l),l=-1;}else for(r+u>s&&(r=s-u),o=r;o>=0;o--){for(var f=!0,h=0;h<u;h++)if(c(t,o+h)!==c(e,h)){f=!1;break}if(f)return o}return -1}function m(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(e.substr(2*a,2),16);if(z(s))return a;t[r+a]=s;}return a}function b(t,e,r,n){return L(j(e,t.length-r),t,r,n)}function v(t,e,r,n){return L(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function w(t,e,r,n){return v(t,e,r,n)}function _(t,e,r,n){return L(B(e),t,r,n)}function S(t,e,r,n){return L(function(t,e){for(var r,n,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)n=(r=t.charCodeAt(a))>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function E(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function I(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,a,s,u,c=t[i],l=null,f=c>239?4:c>223?3:c>191?2:1;if(i+f<=r)switch(f){case 1:c<128&&(l=c);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&(u=(15&c)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(l=u);}null===l?(l=65533,f=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=f;}return function(t){var e=t.length;if(e<=A)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=A));return r}(n)}e.kMaxLength=o,t.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(t){return !1}}(),t.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),"undefined"!=typeof Symbol&&Symbol.species&&t[Symbol.species]===t&&Object.defineProperty(t,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),t.poolSize=8192,t.from=function(t,e,r){return s(t,e,r)},t.prototype.__proto__=Uint8Array.prototype,t.__proto__=Uint8Array,t.alloc=function(t,e,r){return function(t,e,r){return u(t),t<=0?a(t):void 0!==e?"string"==typeof r?a(t).fill(e,r):a(t).fill(e):a(t)}(t,e,r)},t.allocUnsafe=function(t){return c(t)},t.allocUnsafeSlow=function(t){return c(t)},t.isBuffer=function(t){return null!=t&&!0===t._isBuffer},t.compare=function(e,r){if(!t.isBuffer(e)||!t.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(e===r)return 0;for(var n=e.length,i=r.length,o=0,a=Math.min(n,i);o<a;++o)if(e[o]!==r[o]){n=e[o],i=r[o];break}return n<i?-1:i<n?1:0},t.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return !0;default:return !1}},t.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return t.alloc(0);var n;if(void 0===r)for(r=0,n=0;n<e.length;++n)r+=e[n].length;var i=t.allocUnsafe(r),o=0;for(n=0;n<e.length;++n){var a=e[n];if(!t.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,o),o+=a.length;}return i},t.byteLength=h,t.prototype._isBuffer=!0,t.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)p(this,e,e+1);return this},t.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)p(this,e,e+3),p(this,e+1,e+2);return this},t.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)p(this,e,e+7),p(this,e+1,e+6),p(this,e+2,e+5),p(this,e+3,e+4);return this},t.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?I(this,0,t):d.apply(this,arguments)},t.prototype.equals=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===t.compare(this,e)},t.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},t.prototype.compare=function(e,r,n,i,o){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),r<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&r>=n)return 0;if(i>=o)return -1;if(r>=n)return 1;if(this===e)return 0;for(var a=(o>>>=0)-(i>>>=0),s=(n>>>=0)-(r>>>=0),u=Math.min(a,s),c=this.slice(i,o),l=e.slice(r,n),f=0;f<u;++f)if(c[f]!==l[f]){a=c[f],s=l[f];break}return a<s?-1:s<a?1:0},t.prototype.includes=function(t,e,r){return -1!==this.indexOf(t,e,r)},t.prototype.indexOf=function(t,e,r){return y(this,t,e,r,!0)},t.prototype.lastIndexOf=function(t,e,r){return y(this,t,e,r,!1)},t.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else {if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0);}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return m(this,t,e,r);case"utf8":case"utf-8":return b(this,t,e,r);case"ascii":return v(this,t,e,r);case"latin1":case"binary":return w(this,t,e,r);case"base64":return _(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0;}},t.prototype.toJSON=function(){return {type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var A=4096;function k(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function D(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function x(t,e,r){var n,i=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>i)&&(r=i);for(var o="",a=e;a<r;++a)o+=(n=t[a])<16?"0"+n.toString(16):n.toString(16);return o}function T(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function P(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function O(e,r,n,i,o,a){if(!t.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>o||r<a)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function R(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function C(t,e,r,n,o){return e=+e,r>>>=0,o||R(t,0,r,4),i.write(t,e,r,n,23,4),r+4}function M(t,e,r,n,o){return e=+e,r>>>=0,o||R(t,0,r,8),i.write(t,e,r,n,52,8),r+8}t.prototype.slice=function(e,r){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(r=void 0===r?n:~~r)<0?(r+=n)<0&&(r=0):r>n&&(r=n),r<e&&(r=e);var i=this.subarray(e,r);return i.__proto__=t.prototype,i},t.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||P(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},t.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||P(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},t.prototype.readUInt8=function(t,e){return t>>>=0,e||P(t,1,this.length),this[t]},t.prototype.readUInt16LE=function(t,e){return t>>>=0,e||P(t,2,this.length),this[t]|this[t+1]<<8},t.prototype.readUInt16BE=function(t,e){return t>>>=0,e||P(t,2,this.length),this[t]<<8|this[t+1]},t.prototype.readUInt32LE=function(t,e){return t>>>=0,e||P(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},t.prototype.readUInt32BE=function(t,e){return t>>>=0,e||P(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},t.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||P(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},t.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||P(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},t.prototype.readInt8=function(t,e){return t>>>=0,e||P(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},t.prototype.readInt16LE=function(t,e){t>>>=0,e||P(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},t.prototype.readInt16BE=function(t,e){t>>>=0,e||P(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},t.prototype.readInt32LE=function(t,e){return t>>>=0,e||P(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},t.prototype.readInt32BE=function(t,e){return t>>>=0,e||P(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},t.prototype.readFloatLE=function(t,e){return t>>>=0,e||P(t,4,this.length),i.read(this,t,!0,23,4)},t.prototype.readFloatBE=function(t,e){return t>>>=0,e||P(t,4,this.length),i.read(this,t,!1,23,4)},t.prototype.readDoubleLE=function(t,e){return t>>>=0,e||P(t,8,this.length),i.read(this,t,!0,52,8)},t.prototype.readDoubleBE=function(t,e){return t>>>=0,e||P(t,8,this.length),i.read(this,t,!1,52,8)},t.prototype.writeUIntLE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||O(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},t.prototype.writeUIntBE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||O(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},t.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,1,255,0),this[e]=255&t,e+1},t.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},t.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},t.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},t.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},t.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);O(this,t,e,r,i-1,-i);}var o=0,a=1,s=0;for(this[e]=255&t;++o<r&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},t.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);O(this,t,e,r,i-1,-i);}var o=r-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},t.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},t.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},t.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},t.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},t.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},t.prototype.writeFloatLE=function(t,e,r){return C(this,t,e,!0,r)},t.prototype.writeFloatBE=function(t,e,r){return C(this,t,e,!1,r)},t.prototype.writeDoubleLE=function(t,e,r){return M(this,t,e,!0,r)},t.prototype.writeDoubleBE=function(t,e,r){return M(this,t,e,!1,r)},t.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,o=n-r;if(this===t&&r<e&&e<n)for(i=o-1;i>=0;--i)t[i+e]=this[i+r];else if(o<1e3)for(i=0;i<o;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+o),e);return o},t.prototype.fill=function(e,r,n,i){if("string"==typeof e){if("string"==typeof r?(i=r,r=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o);}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!t.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else "number"==typeof e&&(e&=255);if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;var a;if(r>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=r;a<n;++a)this[a]=e;else {var s=t.isBuffer(e)?e:new t(e,i),u=s.length;for(a=0;a<n-r;++a)this[a+r]=s[a%u];}return this};var N=/[^+/0-9A-Za-z-_]/g;function j(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],a=0;a<n;++a){if((r=t.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320);}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r);}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128);}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128);}else {if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128);}}return o}function B(t){return n.toByteArray(function(t){if((t=t.trim().replace(N,"")).length<2)return "";for(;t.length%4!=0;)t+="=";return t}(t))}function L(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function F(t){return t instanceof ArrayBuffer||null!=t&&null!=t.constructor&&"ArrayBuffer"===t.constructor.name&&"number"==typeof t.byteLength}function U(t){return "function"==typeof ArrayBuffer.isView&&ArrayBuffer.isView(t)}function z(t){return t!=t}}).call(e,r(1));},function(t,e){e.byteLength=function(t){return 3*t.length/4-u(t)},e.toByteArray=function(t){var e,r,o,a,s,c,l=t.length;s=u(t),c=new i(3*l/4-s),o=s>0?l-4:l;var f=0;for(e=0,r=0;e<o;e+=4,r+=3)a=n[t.charCodeAt(e)]<<18|n[t.charCodeAt(e+1)]<<12|n[t.charCodeAt(e+2)]<<6|n[t.charCodeAt(e+3)],c[f++]=a>>16&255,c[f++]=a>>8&255,c[f++]=255&a;return 2===s?(a=n[t.charCodeAt(e)]<<2|n[t.charCodeAt(e+1)]>>4,c[f++]=255&a):1===s&&(a=n[t.charCodeAt(e)]<<10|n[t.charCodeAt(e+1)]<<4|n[t.charCodeAt(e+2)]>>2,c[f++]=a>>8&255,c[f++]=255&a),c},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o="",a=[],s=16383,u=0,l=n-i;u<l;u+=s)a.push(c(t,u,u+s>l?l:u+s));return 1===i?(e=t[n-1],o+=r[e>>2],o+=r[e<<4&63],o+="=="):2===i&&(e=(t[n-2]<<8)+t[n-1],o+=r[e>>10],o+=r[e>>4&63],o+=r[e<<2&63],o+="="),a.push(o),a.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,s=o.length;a<s;++a)r[a]=o[a],n[o.charCodeAt(a)]=a;function u(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return "="===t[e-2]?2:"="===t[e-1]?1:0}function c(t,e,n){for(var i,o,a=[],s=e;s<n;s+=3)i=(t[s]<<16)+(t[s+1]<<8)+t[s+2],a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63;},function(t,e){e.read=function(t,e,r,n,i){var o,a,s=8*i-n-1,u=(1<<s)-1,c=u>>1,l=-7,f=r?i-1:0,h=r?-1:1,d=t[e+f];for(f+=h,o=d&(1<<-l)-1,d>>=-l,l+=s;l>0;o=256*o+t[e+f],f+=h,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=n;l>0;a=256*a+t[e+f],f+=h,l-=8);if(0===o)o=1-c;else {if(o===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,n),o-=c;}return (d?-1:1)*a*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,p=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(e*u-1)*Math.pow(2,i),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;t[r+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[r+d]=255&a,d+=p,a/=256,c-=8);t[r+d-p]|=128*y;};},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t};},function(t,e,r){var n=new(r(7)),i={};function o(t){i[t]||("function"==typeof n[t]?i[t]=function(){return n[t].apply(n,arguments)}:i[t]=n[t]);}for(var a in n)o(a);i.initializeTTYs=function(){null===n.stdin&&(n.initializeTTYs(),i.stdin=n.stdin,i.stdout=n.stdout,i.stderr=n.stderr);},n.nextTick((function(){i.initializeTTYs();})),t.exports=i;},function(t,e,r){(function(e){var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t;}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n);},i=r(8),o=null,a=function(){function t(t,e){this.fun=t,this.array=e;}return t.prototype.run=function(){this.fun.apply(null,this.array);},t}(),s=function(){function t(){this._queue=[],this._draining=!1,this._currentQueue=null,this._queueIndex=-1;}return t.prototype.push=function(t){var e=this;1!==this._queue.push(t)||this._draining||setTimeout((function(){return e._drainQueue()}),0);},t.prototype._cleanUpNextTick=function(){this._draining=!1,this._currentQueue&&this._currentQueue.length?this._queue=this._currentQueue.concat(this._queue):this._queueIndex=-1,this._queue.length&&this._drainQueue();},t.prototype._drainQueue=function(){var t=this;if(!this._draining){var e=setTimeout((function(){return t._cleanUpNextTick()}));this._draining=!0;for(var r=this._queue.length;r;){for(this._currentQueue=this._queue,this._queue=[];++this._queueIndex<r;)this._currentQueue&&this._currentQueue[this._queueIndex].run();this._queueIndex=-1,r=this._queue.length;}this._currentQueue=null,this._draining=!1,clearTimeout(e);}},t}(),u=function(t){function i(){t.apply(this,arguments),this.startTime=Date.now(),this._cwd="/",this.platform="browser",this.argv=[],this.execArgv=[],this.stdout=null,this.stderr=null,this.stdin=null,this.domain=null,this._queue=new s,this.execPath=e,this.env={},this.exitCode=0,this._gid=1,this._uid=1,this.version="v5.0",this.versions={http_parser:"0.0",node:"5.0",v8:"0.0",uv:"0.0",zlib:"0.0",ares:"0.0",icu:"0.0",modules:"0",openssl:"0.0"},this.config={target_defaults:{cflags:[],default_configuration:"Release",defines:[],include_dirs:[],libraries:[]},variables:{clang:0,host_arch:"x32",node_install_npm:!1,node_install_waf:!1,node_prefix:"",node_shared_cares:!1,node_shared_http_parser:!1,node_shared_libuv:!1,node_shared_zlib:!1,node_shared_v8:!1,node_use_dtrace:!1,node_use_etw:!1,node_use_openssl:!1,node_shared_openssl:!1,strict_aliasing:!1,target_arch:"x32",v8_use_snapshot:!1,v8_no_strict_aliasing:0,visibility:""}},this.pid=1e3*Math.random()|0,this.title="node",this.arch="x32",this._mask=18,this.connected=void 0;}return n(i,t),i.prototype.chdir=function(t){null===o&&(o=r(9)),this._cwd=o.resolve(t);},i.prototype.cwd=function(){return this._cwd},i.prototype.uptime=function(){return (Date.now()-this.startTime)/1e3|0},i.prototype.nextTick=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this._queue.push(new a(t,e));},i.prototype.abort=function(){this.emit("abort");},i.prototype.exit=function(t){this.exitCode=t,this.emit("exit",[t]);},i.prototype.getgid=function(){return this._gid},i.prototype.setgid=function(t){this._gid="number"==typeof t?t:1;},i.prototype.getuid=function(){return this._uid},i.prototype.setuid=function(t){this._uid="number"==typeof t?t:1;},i.prototype.kill=function(t,e){this.emit("kill",[t,e]);},i.prototype.memoryUsage=function(){return {rss:0,heapTotal:0,heapUsed:0}},i.prototype.umask=function(t){void 0===t&&(t=this._mask);var e=this._mask;return this._mask=t,this.emit("umask",[t]),e},i.prototype.hrtime=function(){var t,e=(t="undefined"!=typeof performance?performance.now():Date.now?Date.now():(new Date).getTime())/1e3|0;return [e,t=1e6*(t-=1e3*e)|0]},i.prototype.initializeTTYs=function(){if(null===this.stdout){var t=r(10);this.stdout=new t,this.stderr=new t,this.stdin=new t;}},i.prototype.disconnect=function(){},i}(i.EventEmitter);t.exports=u;}).call(e,"/");},function(t,e){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0;}function n(t){return "function"==typeof t}function i(t){return "object"==typeof t&&null!==t}function o(t){return void 0===t}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,r,a,s,u,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}if(o(r=this._events[t]))return !1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),r.apply(this,s);}else if(i(r))for(s=Array.prototype.slice.call(arguments,1),a=(c=r.slice()).length,u=0;u<a;u++)c[u].apply(this,s);return !0},r.prototype.addListener=function(t,e){var a;if(!n(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(e.listener)?e.listener:e),this._events[t]?i(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,i(this._events[t])&&!this._events[t].warned&&(a=o(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&a>0&&this._events[t].length>a&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){if(!n(e))throw TypeError("listener must be a function");var r=!1;function i(){this.removeListener(t,i),r||(r=!0,e.apply(this,arguments));}return i.listener=e,this.on(t,i),this},r.prototype.removeListener=function(t,e){var r,o,a,s;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(a=(r=this._events[t]).length,o=-1,r===e||n(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(i(r)){for(s=a;s-- >0;)if(r[s]===e||r[s].listener&&r[s].listener===e){o=s;break}if(o<0)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e);}return this},r.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n(r=this._events[t]))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){return this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(n(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)};},function(t,e,r){(function(e){var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,n=function(){function t(){}return t.normalize=function(e){""===e&&(e=".");for(var r=e.charAt(0)===t.sep,n=(e=t._removeDuplicateSeps(e)).split(t.sep),i=[],o=0;o<n.length;o++){var a=n[o];"."!==a&&(".."===a&&(r||!r&&i.length>0&&".."!==i[0])?i.pop():i.push(a));}return !r&&i.length<2&&(1===i.length?""===i[0]&&i.unshift("."):i.push(".")),e=i.join(t.sep),r&&e.charAt(0)!==t.sep&&(e=t.sep+e),e},t.join=function(){for(var e=[],r=0;r<arguments.length;r++)e[r-0]=arguments[r];for(var n=[],i=0;i<e.length;i++){var o=e[i];if("string"!=typeof o)throw new TypeError("Invalid argument type to path.join: "+typeof o);""!==o&&n.push(o);}return t.normalize(n.join(t.sep))},t.resolve=function(){for(var r=[],n=0;n<arguments.length;n++)r[n-0]=arguments[n];for(var i=[],o=0;o<r.length;o++){var a=r[o];if("string"!=typeof a)throw new TypeError("Invalid argument type to path.join: "+typeof a);""!==a&&(a.charAt(0)===t.sep&&(i=[]),i.push(a));}var s=t.normalize(i.join(t.sep));if(s.length>1&&s.charAt(s.length-1)===t.sep)return s.substr(0,s.length-1);if(s.charAt(0)!==t.sep){"."!==s.charAt(0)||1!==s.length&&s.charAt(1)!==t.sep||(s=1===s.length?"":s.substr(2));var u=e.cwd();s=""!==s?this.normalize(u+("/"!==u?t.sep:"")+s):u;}return s},t.relative=function(e,r){var n;e=t.resolve(e),r=t.resolve(r);var i=e.split(t.sep),o=r.split(t.sep);o.shift(),i.shift();var a=0,s=[];for(n=0;n<i.length;n++)if(i[n]!==o[n]){a=i.length-n;break}s=o.slice(n),1===i.length&&""===i[0]&&(a=0),a>i.length&&(a=i.length);var u="";for(n=0;n<a;n++)u+="../";return (u+=s.join(t.sep)).length>1&&u.charAt(u.length-1)===t.sep&&(u=u.substr(0,u.length-1)),u},t.dirname=function(e){var r=(e=t._removeDuplicateSeps(e)).charAt(0)===t.sep,n=e.split(t.sep);return ""===n.pop()&&n.length>0&&n.pop(),n.length>1||1===n.length&&!r?n.join(t.sep):r?t.sep:"."},t.basename=function(e,r){if(void 0===r&&(r=""),""===e)return e;var n=(e=t.normalize(e)).split(t.sep),i=n[n.length-1];return ""===i&&n.length>1?n[n.length-2]:r.length>0&&i.substr(i.length-r.length)===r?i.substr(0,i.length-r.length):i},t.extname=function(e){var r=(e=t.normalize(e)).split(t.sep);if(""===(e=r.pop())&&r.length>0&&(e=r.pop()),".."===e)return "";var n=e.lastIndexOf(".");return -1===n||0===n?"":e.substr(n)},t.isAbsolute=function(e){return e.length>0&&e.charAt(0)===t.sep},t._makeLong=function(t){return t},t.parse=function(t){var e,n,i=(e=t,(n=r.exec(e)).shift(),n);return {root:i[0],dir:i[0]+i[1].slice(0,-1),base:i[2],ext:i[3],name:i[2].slice(0,i[2].length-i[3].length)}},t.format=function(e){if(null===e||"object"!=typeof e)throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof e);if("string"!=typeof(e.root||""))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof e.root);return (e.dir?e.dir+t.sep:"")+(e.base||"")},t._removeDuplicateSeps=function(t){return t=t.replace(this._replaceRegex,this.sep)},t.sep="/",t._replaceRegex=new RegExp("//+","g"),t.delimiter=":",t.posix=t,t.win32=t,t}();t.exports=n;}).call(e,r(6));},function(t,e,r){(function(e){var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t;}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n);},i=function(t){function r(){t.call(this),this.isRaw=!1,this.columns=80,this.rows=120,this.isTTY=!0,this._bufferedWrites=[],this._waitingForWrites=!1;}return n(r,t),r.prototype.setRawMode=function(t){this.isRaw!==t&&(this.isRaw=t,this.emit("modeChange"));},r.prototype.changeColumns=function(t){t!==this.columns&&(this.columns=t,this.emit("resize"));},r.prototype.changeRows=function(t){t!==this.rows&&(this.rows=t,this.emit("resize"));},r.isatty=function(t){return t&&t instanceof r},r.prototype._write=function(t,r,n){var i;try{var o;o="string"==typeof t?new e(t,r):t,this._bufferedWrites.push(o),this._waitingForWrites&&this._read(1024);}catch(t){i=t;}finally{n(i);}},r.prototype._read=function(t){if(0===this._bufferedWrites.length)this._waitingForWrites=!0;else for(;this._bufferedWrites.length>0&&(this._waitingForWrites=this.push(this._bufferedWrites.shift()),this._waitingForWrites););},r}(r(11).Duplex);t.exports=i;}).call(e,r(1));},function(t,e,r){t.exports=i;var n=r(8).EventEmitter;function i(){n.call(this);}r(12)(i,n),i.Readable=r(13),i.Writable=r(27),i.Duplex=r(28),i.Transform=r(29),i.PassThrough=r(30),i.Stream=i,i.prototype.pipe=function(t,e){var r=this;function i(e){t.writable&&!1===t.write(e)&&r.pause&&r.pause();}function o(){r.readable&&r.resume&&r.resume();}r.on("data",i),t.on("drain",o),t._isStdio||e&&!1===e.end||(r.on("end",s),r.on("close",u));var a=!1;function s(){a||(a=!0,t.end());}function u(){a||(a=!0,"function"==typeof t.destroy&&t.destroy());}function c(t){if(l(),0===n.listenerCount(this,"error"))throw t}function l(){r.removeListener("data",i),t.removeListener("drain",o),r.removeListener("end",s),r.removeListener("close",u),r.removeListener("error",c),t.removeListener("error",c),r.removeListener("end",l),r.removeListener("close",l),t.removeListener("close",l);}return r.on("error",c),t.on("error",c),r.on("end",l),r.on("close",l),t.on("close",l),t.emit("pipe",r),t};},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});}:t.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t;};},function(t,e,r){(function(n){var i=function(){try{return r(11)}catch(t){}}();(e=t.exports=r(14)).Stream=i||e,e.Readable=e,e.Writable=r(22),e.Duplex=r(21),e.Transform=r(25),e.PassThrough=r(26),!n.browser&&"disable"===n.env.READABLE_STREAM&&i&&(t.exports=i);}).call(e,r(6));},function(t,e,r){(function(e){t.exports=g;var n,i=r(15),o=r(16);g.ReadableState=y,r(8).EventEmitter;var a,s=function(t,e){return t.listeners(e).length};!function(){try{a=r(11);}catch(t){}finally{a||(a=r(8).EventEmitter);}}();var u=r(2).Buffer,c=r(17),l=r(18);l.inherits=r(12);var f=r(19),h=void 0;h=f&&f.debuglog?f.debuglog("stream"):function(){};var d,p=r(20);function y(t,e){n=n||r(21),t=t||{},this.objectMode=!!t.objectMode,e instanceof n&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,o=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.highWaterMark=~~this.highWaterMark,this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(d||(d=r(24).StringDecoder),this.decoder=new d(t.encoding),this.encoding=t.encoding);}function g(t){if(n=n||r(21),!(this instanceof g))return new g(t);this._readableState=new y(t,this),this.readable=!0,t&&"function"==typeof t.read&&(this._read=t.read),a.call(this);}function m(t,e,r,n,o){var a=function(t,e){var r=null;return u.isBuffer(e)||"string"==typeof e||null==e||t.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}(e,r);if(a)t.emit("error",a);else if(null===r)e.reading=!1,function(t,e){if(!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length);}e.ended=!0,w(t);}}(t,e);else if(e.objectMode||r&&r.length>0)if(e.ended&&!o){var s=new Error("stream.push() after EOF");t.emit("error",s);}else if(e.endEmitted&&o){var c=new Error("stream.unshift() after end event");t.emit("error",c);}else {var l;!e.decoder||o||n||(r=e.decoder.write(r),l=!e.objectMode&&0===r.length),o||(e.reading=!1),l||(e.flowing&&0===e.length&&!e.sync?(t.emit("data",r),t.read(0)):(e.length+=e.objectMode?1:r.length,o?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&w(t))),function(t,e){e.readingMore||(e.readingMore=!0,i(S,t,e));}(t,e);}else o||(e.reading=!1);return function(t){return !t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(e)}l.inherits(g,a),g.prototype.push=function(t,e){var r=this._readableState;return r.objectMode||"string"!=typeof t||(e=e||r.defaultEncoding)!==r.encoding&&(t=c.from(t,e),e=""),m(this,r,t,e,!1)},g.prototype.unshift=function(t){return m(this,this._readableState,t,"",!0)},g.prototype.isPaused=function(){return !1===this._readableState.flowing},g.prototype.setEncoding=function(t){return d||(d=r(24).StringDecoder),this._readableState.decoder=new d(t),this._readableState.encoding=t,this};var b=8388608;function v(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=b?t=b:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function w(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(h("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?i(_,t):_(t));}function _(t){h("emit readable"),t.emit("readable"),A(t);}function S(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(h("maybeReadMore read 0"),t.read(0),r!==e.length);)r=e.length;e.readingMore=!1;}function E(t){h("readable nexttick read 0"),t.read(0);}function I(t,e){e.reading||(h("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),A(t),e.flowing&&!e.reading&&t.read(0);}function A(t){var e=t._readableState;for(h("flow",e.flowing);e.flowing&&null!==t.read(););}function k(t,e){return 0===e.length?null:(e.objectMode?r=e.buffer.shift():!t||t>=e.length?(r=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):r=function(t,e,r){var n;return t<e.head.data.length?(n=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):n=t===e.head.data.length?e.shift():r?function(t,e){var r=e.head,n=1,i=r.data;for(t-=i.length;r=r.next;){var o=r.data,a=t>o.length?o.length:t;if(a===o.length?i+=o:i+=o.slice(0,t),0==(t-=a)){a===o.length?(++n,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(a));break}++n;}return e.length-=n,i}(t,e):function(t,e){var r=c.allocUnsafe(t),n=e.head,i=1;for(n.data.copy(r),t-=n.data.length;n=n.next;){var o=n.data,a=t>o.length?o.length:t;if(o.copy(r,r.length-t,0,a),0==(t-=a)){a===o.length?(++i,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(a));break}++i;}return e.length-=i,r}(t,e),n}(t,e.buffer,e.decoder),r);var r;}function D(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,i(x,e,t));}function x(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"));}function T(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return -1}g.prototype.read=function(t){h("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return h("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?D(this):w(this),null;if(0===(t=v(t,e))&&e.ended)return 0===e.length&&D(this),null;var n,i=e.needReadable;return h("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&h("length less than watermark",i=!0),e.ended||e.reading?h("reading or ended",i=!1):i&&(h("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=v(r,e))),null===(n=t>0?k(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&D(this)),null!==n&&this.emit("data",n),n},g.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"));},g.prototype.pipe=function(t,r){var n=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=t;break;case 1:a.pipes=[a.pipes,t];break;default:a.pipes.push(t);}a.pipesCount+=1,h("pipe count=%d opts=%j",a.pipesCount,r);var u=r&&!1===r.end||t===e.stdout||t===e.stderr?p:l;function c(t){h("onunpipe"),t===n&&p();}function l(){h("onend"),t.end();}a.endEmitted?i(u):n.once("end",u),t.on("unpipe",c);var f=function(t){return function(){var e=t._readableState;h("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&s(t,"data")&&(e.flowing=!0,A(t));}}(n);t.on("drain",f);var d=!1;function p(){h("cleanup"),t.removeListener("close",b),t.removeListener("finish",v),t.removeListener("drain",f),t.removeListener("error",m),t.removeListener("unpipe",c),n.removeListener("end",l),n.removeListener("end",p),n.removeListener("data",g),d=!0,!a.awaitDrain||t._writableState&&!t._writableState.needDrain||f();}var y=!1;function g(e){h("ondata"),y=!1,!1!==t.write(e)||y||((1===a.pipesCount&&a.pipes===t||a.pipesCount>1&&-1!==T(a.pipes,t))&&!d&&(h("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,y=!0),n.pause());}function m(e){h("onerror",e),w(),t.removeListener("error",m),0===s(t,"error")&&t.emit("error",e);}function b(){t.removeListener("finish",v),w();}function v(){h("onfinish"),t.removeListener("close",b),w();}function w(){h("unpipe"),n.unpipe(t);}return n.on("data",g),function(t,e,r){if("function"==typeof t.prependListener)return t.prependListener(e,r);t._events&&t._events[e]?o(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]:t.on(e,r);}(t,"error",m),t.once("close",b),t.once("finish",v),t.emit("pipe",n),a.flowing||(h("pipe resume"),n.resume()),t},g.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this)),this;if(!t){var r=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var i=0;i<n;i++)r[i].emit("unpipe",this);return this}var o=T(e.pipes,t);return -1===o||(e.pipes.splice(o,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this)),this},g.prototype.on=function(t,e){var r=a.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&w(this):i(E,this));}return r},g.prototype.addListener=g.prototype.on,g.prototype.resume=function(){var t=this._readableState;return t.flowing||(h("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,i(I,t,e));}(this,t)),this},g.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this},g.prototype.wrap=function(t){var e=this._readableState,r=!1,n=this;for(var i in t.on("end",(function(){if(h("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&n.push(t);}n.push(null);})),t.on("data",(function(i){h("wrapped data"),e.decoder&&(i=e.decoder.write(i)),e.objectMode&&null==i||(e.objectMode||i&&i.length)&&(n.push(i)||(r=!0,t.pause()));})),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));return function(t,e){for(var r=0,n=t.length;r<n;r++)e(t[r],r);}(["error","close","destroy","pause","resume"],(function(e){t.on(e,n.emit.bind(n,e));})),n._read=function(e){h("wrapped _read",e),r&&(r=!1,t.resume());},n},g._fromList=k;}).call(e,r(6));},function(t,e,r){(function(e){!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports=function(t,r,n,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,r);}));case 3:return e.nextTick((function(){t.call(null,r,n);}));case 4:return e.nextTick((function(){t.call(null,r,n,i);}));default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return e.nextTick((function(){t.apply(null,o);}))}}:t.exports=e.nextTick;}).call(e,r(6));},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return "[object Array]"==r.call(t)};},function(t,e,r){(function(t){var n=r(2),i=n.Buffer,o=n.SlowBuffer,a=n.kMaxLength||2147483647;e.alloc=function(t,e,r){if("function"==typeof i.alloc)return i.alloc(t,e,r);if("number"==typeof r)throw new TypeError("encoding must not be number");if("number"!=typeof t)throw new TypeError("size must be a number");if(t>a)throw new RangeError("size is too large");var n=r,o=e;void 0===o&&(n=void 0,o=0);var s=new i(t);if("string"==typeof o)for(var u=new i(o,n),c=u.length,l=-1;++l<t;)s[l]=u[l%c];else s.fill(o);return s},e.allocUnsafe=function(t){if("function"==typeof i.allocUnsafe)return i.allocUnsafe(t);if("number"!=typeof t)throw new TypeError("size must be a number");if(t>a)throw new RangeError("size is too large");return new i(t)},e.from=function(e,r,n){if("function"==typeof i.from&&(!t.Uint8Array||Uint8Array.from!==i.from))return i.from(e,r,n);if("number"==typeof e)throw new TypeError('"value" argument must not be a number');if("string"==typeof e)return new i(e,r);if("undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer){var o=r;if(1===arguments.length)return new i(e);void 0===o&&(o=0);var a=n;if(void 0===a&&(a=e.byteLength-o),o>=e.byteLength)throw new RangeError("'offset' is out of bounds");if(a>e.byteLength-o)throw new RangeError("'length' is out of bounds");return new i(e.slice(o,o+a))}if(i.isBuffer(e)){var s=new i(e.length);return e.copy(s,0,0,e.length),s}if(e){if(Array.isArray(e)||"undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return new i(e);if("Buffer"===e.type&&Array.isArray(e.data))return new i(e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")},e.allocUnsafeSlow=function(t){if("function"==typeof i.allocUnsafeSlow)return i.allocUnsafeSlow(t);if("number"!=typeof t)throw new TypeError("size must be a number");if(t>=a)throw new RangeError("size is too large");return new o(t)};}).call(e,function(){return this}());},function(t,e,r){(function(t){function r(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===r(t)},e.isBoolean=function(t){return "boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return "number"==typeof t},e.isString=function(t){return "string"==typeof t},e.isSymbol=function(t){return "symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return "[object RegExp]"===r(t)},e.isObject=function(t){return "object"==typeof t&&null!==t},e.isDate=function(t){return "[object Date]"===r(t)},e.isError=function(t){return "[object Error]"===r(t)||t instanceof Error},e.isFunction=function(t){return "function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=t.isBuffer;}).call(e,r(1));},function(t,e){},function(t,e,r){r(2).Buffer;var n=r(17);function i(){this.head=null,this.tail=null,this.length=0;}t.exports=i,i.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length;},i.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length;},i.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},i.prototype.clear=function(){this.head=this.tail=null,this.length=0;},i.prototype.join=function(t){if(0===this.length)return "";for(var e=this.head,r=""+e.data;e=e.next;)r+=t+e.data;return r},i.prototype.concat=function(t){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var e=n.allocUnsafe(t>>>0),r=this.head,i=0;r;)r.data.copy(e,i),i+=r.data.length,r=r.next;return e};},function(t,e,r){var n=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};t.exports=f;var i=r(15),o=r(18);o.inherits=r(12);var a=r(14),s=r(22);o.inherits(f,a);for(var u=n(s.prototype),c=0;c<u.length;c++){var l=u[c];f.prototype[l]||(f.prototype[l]=s.prototype[l]);}function f(t){if(!(this instanceof f))return new f(t);a.call(this,t),s.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",h);}function h(){this.allowHalfOpen||this._writableState.ended||i(d,this);}function d(t){t.end();}},function(t,e,r){(function(e){t.exports=y;var n,i=r(15),o=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?setImmediate:i;y.WritableState=p;var a=r(18);a.inherits=r(12);var s,u={deprecate:r(23)};!function(){try{s=r(11);}catch(t){}finally{s||(s=r(8).EventEmitter);}}();var c,l=r(2).Buffer,f=r(17);function h(){}function d(t,e,r){this.chunk=t,this.encoding=e,this.callback=r,this.next=null;}function p(t,e){n=n||r(21),t=t||{},this.objectMode=!!t.objectMode,e instanceof n&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var a=t.highWaterMark,s=this.objectMode?16:16384;this.highWaterMark=a||0===a?a:s,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var u=!1===t.decodeStrings;this.decodeStrings=!u,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var r=t._writableState,n=r.sync,a=r.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0;}(r),e)!function(t,e,r,n,o){--e.pendingcb,r?i(o,n):o(n),t._writableState.errorEmitted=!0,t.emit("error",n);}(t,r,n,e,a);else {var s=v(r);s||r.corked||r.bufferProcessing||!r.bufferedRequest||b(t,r),n?o(m,t,r,s,a):m(t,r,s,a);}}(e,t);},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new S(this);}function y(t){if(n=n||r(21),!(c.call(y,this)||this instanceof n))return new y(t);this._writableState=new p(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev)),s.call(this);}function g(t,e,r,n,i,o,a){e.writelen=n,e.writecb=a,e.writing=!0,e.sync=!0,r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1;}function m(t,e,r,n){r||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));}(t,e),e.pendingcb--,n(),_(t,e);}function b(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),o=e.corkedRequestsFree;o.entry=r;for(var a=0;r;)i[a]=r,r=r.next,a+=1;g(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new S(e);}else {for(;r;){var s=r.chunk,u=r.encoding,c=r.callback;if(g(t,e,!1,e.objectMode?1:s.length,s,u,c),r=r.next,e.writing)break}null===r&&(e.lastBufferedRequest=null);}e.bufferedRequestCount=0,e.bufferedRequest=r,e.bufferProcessing=!1;}function v(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function w(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"));}function _(t,e){var r=v(e);return r&&(0===e.pendingcb?(w(t,e),e.finished=!0,t.emit("finish")):w(t,e)),r}function S(t){var e=this;this.next=null,this.entry=null,this.finish=function(r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next;}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e;};}a.inherits(y,s),p.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(p.prototype,"buffer",{get:u.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")});}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(c=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(t){return !!c.call(this,t)||t&&t._writableState instanceof p}})):c=function(t){return t instanceof this},y.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"));},y.prototype.write=function(t,e,r){var n=this._writableState,o=!1,a=l.isBuffer(t);return "function"==typeof e&&(r=e,e=null),a?e="buffer":e||(e=n.defaultEncoding),"function"!=typeof r&&(r=h),n.ended?function(t,e){var r=new Error("write after end");t.emit("error",r),i(e,r);}(this,r):(a||function(t,e,r,n){var o=!0,a=!1;return null===r?a=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||e.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(t.emit("error",a),i(n,a),o=!1),o}(this,n,t,r))&&(n.pendingcb++,o=function(t,e,r,n,i,o){r||(n=function(t,e,r){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=f.from(e,r)),e}(e,n,i),l.isBuffer(n)&&(i="buffer"));var a=e.objectMode?1:n.length;e.length+=a;var s=e.length<e.highWaterMark;if(s||(e.needDrain=!0),e.writing||e.corked){var u=e.lastBufferedRequest;e.lastBufferedRequest=new d(n,i,o),u?u.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1;}else g(t,e,!1,a,n,i,o);return s}(this,n,a,t,e,r)),o},y.prototype.cork=function(){this._writableState.corked++;},y.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||b(this,t));},y.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},y.prototype._write=function(t,e,r){r(new Error("_write() is not implemented"));},y.prototype._writev=null,y.prototype.end=function(t,e,r){var n=this._writableState;"function"==typeof t?(r=t,t=null,e=null):"function"==typeof e&&(r=e,e=null),null!=t&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(t,e,r){e.ending=!0,_(t,e),r&&(e.finished?i(r):t.once("finish",r)),e.ended=!0,t.writable=!1;}(this,n,r);};}).call(e,r(6));},function(t,e){(function(e){function r(t){try{if(!e.localStorage)return !1}catch(t){return !1}var r=e.localStorage[t];return null!=r&&"true"===String(r).toLowerCase()}t.exports=function(t,e){if(r("noDeprecation"))return t;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(e);r("traceDeprecation")?console.trace(e):console.warn(e),n=!0;}return t.apply(this,arguments)}};}).call(e,function(){return this}());},function(t,e,r){var n=r(2).Buffer,i=n.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return !0;default:return !1}},o=e.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),function(t){if(t&&!i(t))throw new Error("Unknown encoding: "+t)}(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=s;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=u;break;default:return void(this.write=a)}this.charBuffer=new n(6),this.charReceived=0,this.charLength=0;};function a(t){return t.toString(this.encoding)}function s(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0;}function u(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0;}o.prototype.write=function(t){for(var e="";this.charLength;){var r=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return "";if(t=t.slice(r,t.length),!((n=(e=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(e.length-1))>=55296&&n<=56319)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e="";}this.detectIncompleteChar(t);var n,i=t.length;if(this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,i),i-=this.charReceived),i=(e+=t.toString(this.encoding,0,i)).length-1,(n=e.charCodeAt(i))>=55296&&n<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),t.copy(this.charBuffer,0,0,o),e.substring(0,i)}return e},o.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var r=t[t.length-e];if(1==e&&r>>5==6){this.charLength=2;break}if(e<=2&&r>>4==14){this.charLength=3;break}if(e<=3&&r>>3==30){this.charLength=4;break}}this.charReceived=e;},o.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var r=this.charReceived,n=this.charBuffer,i=this.encoding;e+=n.slice(0,r).toString(i);}return e};},function(t,e,r){t.exports=a;var n=r(21),i=r(18);function o(t){this.afterTransform=function(e,r){return function(t,e,r){var n=t._transformState;n.transforming=!1;var i=n.writecb;if(!i)return t.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,null!=r&&t.push(r),i(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark);}(t,e,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null;}function a(t){if(!(this instanceof a))return new a(t);n.call(this,t),this._transformState=new o(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.once("prefinish",(function(){"function"==typeof this._flush?this._flush((function(t,r){s(e,t,r);})):s(e);}));}function s(t,e,r){if(e)return t.emit("error",e);null!=r&&t.push(r);var n=t._writableState,i=t._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}i.inherits=r(12),i.inherits(a,n),a.prototype.push=function(t,e){return this._transformState.needTransform=!1,n.prototype.push.call(this,t,e)},a.prototype._transform=function(t,e,r){throw new Error("_transform() is not implemented")},a.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark);}},a.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0;};},function(t,e,r){t.exports=o;var n=r(25),i=r(18);function o(t){if(!(this instanceof o))return new o(t);n.call(this,t);}i.inherits=r(12),i.inherits(o,n),o.prototype._transform=function(t,e,r){r(null,t);};},function(t,e,r){t.exports=r(22);},function(t,e,r){t.exports=r(21);},function(t,e,r){t.exports=r(25);},function(t,e,r){t.exports=r(26);},function(t,e,r){var n=r(32),i=r(33),o=r(38),a=r(39),s=r(40),u=r(41),c=r(42),l=Object.prototype.toString;function f(t){if(!(this instanceof f))return new f(t);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var r=n.inflateInit2(this.strm,e.windowBits);if(r!==a.Z_OK)throw new Error(s[r]);this.header=new c,n.inflateGetHeader(this.strm,this.header);}function h(t,e){var r=new f(e);if(r.push(t,!0),r.err)throw r.msg||s[r.err];return r.result}f.prototype.push=function(t,e){var r,s,u,c,f,h,d=this.strm,p=this.options.chunkSize,y=this.options.dictionary,g=!1;if(this.ended)return !1;s=e===~~e?e:!0===e?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof t?d.input=o.binstring2buf(t):"[object ArrayBuffer]"===l.call(t)?d.input=new Uint8Array(t):d.input=t,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new i.Buf8(p),d.next_out=0,d.avail_out=p),(r=n.inflate(d,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&y&&(h="string"==typeof y?o.string2buf(y):"[object ArrayBuffer]"===l.call(y)?new Uint8Array(y):y,r=n.inflateSetDictionary(this.strm,h)),r===a.Z_BUF_ERROR&&!0===g&&(r=a.Z_OK,g=!1),r!==a.Z_STREAM_END&&r!==a.Z_OK)return this.onEnd(r),this.ended=!0,!1;d.next_out&&(0!==d.avail_out&&r!==a.Z_STREAM_END&&(0!==d.avail_in||s!==a.Z_FINISH&&s!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(u=o.utf8border(d.output,d.next_out),c=d.next_out-u,f=o.buf2string(d.output,u),d.next_out=c,d.avail_out=p-c,c&&i.arraySet(d.output,d.output,u,c,0),this.onData(f)):this.onData(i.shrinkBuf(d.output,d.next_out)))),0===d.avail_in&&0===d.avail_out&&(g=!0);}while((d.avail_in>0||0===d.avail_out)&&r!==a.Z_STREAM_END);return r===a.Z_STREAM_END&&(s=a.Z_FINISH),s===a.Z_FINISH?(r=n.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===a.Z_OK):s!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),d.avail_out=0,!0)},f.prototype.onData=function(t){this.chunks.push(t);},f.prototype.onEnd=function(t){t===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg;},e.Inflate=f,e.inflate=h,e.inflateRaw=function(t,e){return (e=e||{}).raw=!0,h(t,e)},e.ungzip=h;},function(t,e,r){var n=r(33),i=r(34),o=r(35),a=r(36),s=r(37),u=-2,c=12,l=30;function f(t){return (t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function h(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0;}function d(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new n.Buf32(852),e.distcode=e.distdyn=new n.Buf32(592),e.sane=1,e.back=-1,0):u}function p(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,d(t)):u}function y(t,e){var r,n;return t&&t.state?(n=t.state,e<0?(r=0,e=-e):(r=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?u:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,p(t))):u}function g(t,e){var r,n;return t?(n=new h,t.state=n,n.window=null,0!==(r=y(t,e))&&(t.state=null),r):u}var m,b,v=!0;function w(t){if(v){var e;for(m=new n.Buf32(512),b=new n.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(s(1,t.lens,0,288,m,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;s(2,t.lens,0,32,b,0,t.work,{bits:5}),v=!1;}t.lencode=m,t.lenbits=9,t.distcode=b,t.distbits=5;}function _(t,e,r,i){var o,a=t.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new n.Buf8(a.wsize)),i>=a.wsize?(n.arraySet(a.window,e,r-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((o=a.wsize-a.wnext)>i&&(o=i),n.arraySet(a.window,e,r-i,o,a.wnext),(i-=o)?(n.arraySet(a.window,e,r-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0}e.inflateReset=p,e.inflateReset2=y,e.inflateResetKeep=d,e.inflateInit=function(t){return g(t,15)},e.inflateInit2=g,e.inflate=function(t,e){var r,h,d,p,y,g,m,b,v,S,E,I,A,k,D,x,T,P,O,R,C,M,N,j,B=0,L=new n.Buf8(4),F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return u;(r=t.state).mode===c&&(r.mode=13),y=t.next_out,d=t.output,m=t.avail_out,p=t.next_in,h=t.input,g=t.avail_in,b=r.hold,v=r.bits,S=g,E=m,M=0;t:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;v<16;){if(0===g)break t;g--,b+=h[p++]<<v,v+=8;}if(2&r.wrap&&35615===b){r.check=0,L[0]=255&b,L[1]=b>>>8&255,r.check=o(r.check,L,2,0),b=0,v=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&b)<<8)+(b>>8))%31){t.msg="incorrect header check",r.mode=l;break}if(8!=(15&b)){t.msg="unknown compression method",r.mode=l;break}if(v-=4,C=8+(15&(b>>>=4)),0===r.wbits)r.wbits=C;else if(C>r.wbits){t.msg="invalid window size",r.mode=l;break}r.dmax=1<<C,t.adler=r.check=1,r.mode=512&b?10:c,b=0,v=0;break;case 2:for(;v<16;){if(0===g)break t;g--,b+=h[p++]<<v,v+=8;}if(r.flags=b,8!=(255&r.flags)){t.msg="unknown compression method",r.mode=l;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=l;break}r.head&&(r.head.text=b>>8&1),512&r.flags&&(L[0]=255&b,L[1]=b>>>8&255,r.check=o(r.check,L,2,0)),b=0,v=0,r.mode=3;case 3:for(;v<32;){if(0===g)break t;g--,b+=h[p++]<<v,v+=8;}r.head&&(r.head.time=b),512&r.flags&&(L[0]=255&b,L[1]=b>>>8&255,L[2]=b>>>16&255,L[3]=b>>>24&255,r.check=o(r.check,L,4,0)),b=0,v=0,r.mode=4;case 4:for(;v<16;){if(0===g)break t;g--,b+=h[p++]<<v,v+=8;}r.head&&(r.head.xflags=255&b,r.head.os=b>>8),512&r.flags&&(L[0]=255&b,L[1]=b>>>8&255,r.check=o(r.check,L,2,0)),b=0,v=0,r.mode=5;case 5:if(1024&r.flags){for(;v<16;){if(0===g)break t;g--,b+=h[p++]<<v,v+=8;}r.length=b,r.head&&(r.head.extra_len=b),512&r.flags&&(L[0]=255&b,L[1]=b>>>8&255,r.check=o(r.check,L,2,0)),b=0,v=0;}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&((I=r.length)>g&&(I=g),I&&(r.head&&(C=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),n.arraySet(r.head.extra,h,p,I,C)),512&r.flags&&(r.check=o(r.check,h,I,p)),g-=I,p+=I,r.length-=I),r.length))break t;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===g)break t;I=0;do{C=h[p+I++],r.head&&C&&r.length<65536&&(r.head.name+=String.fromCharCode(C));}while(C&&I<g);if(512&r.flags&&(r.check=o(r.check,h,I,p)),g-=I,p+=I,C)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===g)break t;I=0;do{C=h[p+I++],r.head&&C&&r.length<65536&&(r.head.comment+=String.fromCharCode(C));}while(C&&I<g);if(512&r.flags&&(r.check=o(r.check,h,I,p)),g-=I,p+=I,C)break t}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;v<16;){if(0===g)break t;g--,b+=h[p++]<<v,v+=8;}if(b!==(65535&r.check)){t.msg="header crc mismatch",r.mode=l;break}b=0,v=0;}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=c;break;case 10:for(;v<32;){if(0===g)break t;g--,b+=h[p++]<<v,v+=8;}t.adler=r.check=f(b),b=0,v=0,r.mode=11;case 11:if(0===r.havedict)return t.next_out=y,t.avail_out=m,t.next_in=p,t.avail_in=g,r.hold=b,r.bits=v,2;t.adler=r.check=1,r.mode=c;case c:if(5===e||6===e)break t;case 13:if(r.last){b>>>=7&v,v-=7&v,r.mode=27;break}for(;v<3;){if(0===g)break t;g--,b+=h[p++]<<v,v+=8;}switch(r.last=1&b,v-=1,3&(b>>>=1)){case 0:r.mode=14;break;case 1:if(w(r),r.mode=20,6===e){b>>>=2,v-=2;break t}break;case 2:r.mode=17;break;case 3:t.msg="invalid block type",r.mode=l;}b>>>=2,v-=2;break;case 14:for(b>>>=7&v,v-=7&v;v<32;){if(0===g)break t;g--,b+=h[p++]<<v,v+=8;}if((65535&b)!=(b>>>16^65535)){t.msg="invalid stored block lengths",r.mode=l;break}if(r.length=65535&b,b=0,v=0,r.mode=15,6===e)break t;case 15:r.mode=16;case 16:if(I=r.length){if(I>g&&(I=g),I>m&&(I=m),0===I)break t;n.arraySet(d,h,p,I,y),g-=I,p+=I,m-=I,y+=I,r.length-=I;break}r.mode=c;break;case 17:for(;v<14;){if(0===g)break t;g--,b+=h[p++]<<v,v+=8;}if(r.nlen=257+(31&b),b>>>=5,v-=5,r.ndist=1+(31&b),b>>>=5,v-=5,r.ncode=4+(15&b),b>>>=4,v-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=l;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;v<3;){if(0===g)break t;g--,b+=h[p++]<<v,v+=8;}r.lens[F[r.have++]]=7&b,b>>>=3,v-=3;}for(;r.have<19;)r.lens[F[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,N={bits:r.lenbits},M=s(0,r.lens,0,19,r.lencode,0,r.work,N),r.lenbits=N.bits,M){t.msg="invalid code lengths set",r.mode=l;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;x=(B=r.lencode[b&(1<<r.lenbits)-1])>>>16&255,T=65535&B,!((D=B>>>24)<=v);){if(0===g)break t;g--,b+=h[p++]<<v,v+=8;}if(T<16)b>>>=D,v-=D,r.lens[r.have++]=T;else {if(16===T){for(j=D+2;v<j;){if(0===g)break t;g--,b+=h[p++]<<v,v+=8;}if(b>>>=D,v-=D,0===r.have){t.msg="invalid bit length repeat",r.mode=l;break}C=r.lens[r.have-1],I=3+(3&b),b>>>=2,v-=2;}else if(17===T){for(j=D+3;v<j;){if(0===g)break t;g--,b+=h[p++]<<v,v+=8;}v-=D,C=0,I=3+(7&(b>>>=D)),b>>>=3,v-=3;}else {for(j=D+7;v<j;){if(0===g)break t;g--,b+=h[p++]<<v,v+=8;}v-=D,C=0,I=11+(127&(b>>>=D)),b>>>=7,v-=7;}if(r.have+I>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=l;break}for(;I--;)r.lens[r.have++]=C;}}if(r.mode===l)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=l;break}if(r.lenbits=9,N={bits:r.lenbits},M=s(1,r.lens,0,r.nlen,r.lencode,0,r.work,N),r.lenbits=N.bits,M){t.msg="invalid literal/lengths set",r.mode=l;break}if(r.distbits=6,r.distcode=r.distdyn,N={bits:r.distbits},M=s(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,N),r.distbits=N.bits,M){t.msg="invalid distances set",r.mode=l;break}if(r.mode=20,6===e)break t;case 20:r.mode=21;case 21:if(g>=6&&m>=258){t.next_out=y,t.avail_out=m,t.next_in=p,t.avail_in=g,r.hold=b,r.bits=v,a(t,E),y=t.next_out,d=t.output,m=t.avail_out,p=t.next_in,h=t.input,g=t.avail_in,b=r.hold,v=r.bits,r.mode===c&&(r.back=-1);break}for(r.back=0;x=(B=r.lencode[b&(1<<r.lenbits)-1])>>>16&255,T=65535&B,!((D=B>>>24)<=v);){if(0===g)break t;g--,b+=h[p++]<<v,v+=8;}if(x&&0==(240&x)){for(P=D,O=x,R=T;x=(B=r.lencode[R+((b&(1<<P+O)-1)>>P)])>>>16&255,T=65535&B,!(P+(D=B>>>24)<=v);){if(0===g)break t;g--,b+=h[p++]<<v,v+=8;}b>>>=P,v-=P,r.back+=P;}if(b>>>=D,v-=D,r.back+=D,r.length=T,0===x){r.mode=26;break}if(32&x){r.back=-1,r.mode=c;break}if(64&x){t.msg="invalid literal/length code",r.mode=l;break}r.extra=15&x,r.mode=22;case 22:if(r.extra){for(j=r.extra;v<j;){if(0===g)break t;g--,b+=h[p++]<<v,v+=8;}r.length+=b&(1<<r.extra)-1,b>>>=r.extra,v-=r.extra,r.back+=r.extra;}r.was=r.length,r.mode=23;case 23:for(;x=(B=r.distcode[b&(1<<r.distbits)-1])>>>16&255,T=65535&B,!((D=B>>>24)<=v);){if(0===g)break t;g--,b+=h[p++]<<v,v+=8;}if(0==(240&x)){for(P=D,O=x,R=T;x=(B=r.distcode[R+((b&(1<<P+O)-1)>>P)])>>>16&255,T=65535&B,!(P+(D=B>>>24)<=v);){if(0===g)break t;g--,b+=h[p++]<<v,v+=8;}b>>>=P,v-=P,r.back+=P;}if(b>>>=D,v-=D,r.back+=D,64&x){t.msg="invalid distance code",r.mode=l;break}r.offset=T,r.extra=15&x,r.mode=24;case 24:if(r.extra){for(j=r.extra;v<j;){if(0===g)break t;g--,b+=h[p++]<<v,v+=8;}r.offset+=b&(1<<r.extra)-1,b>>>=r.extra,v-=r.extra,r.back+=r.extra;}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=l;break}r.mode=25;case 25:if(0===m)break t;if(I=E-m,r.offset>I){if((I=r.offset-I)>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=l;break}I>r.wnext?(I-=r.wnext,A=r.wsize-I):A=r.wnext-I,I>r.length&&(I=r.length),k=r.window;}else k=d,A=y-r.offset,I=r.length;I>m&&(I=m),m-=I,r.length-=I;do{d[y++]=k[A++];}while(--I);0===r.length&&(r.mode=21);break;case 26:if(0===m)break t;d[y++]=r.length,m--,r.mode=21;break;case 27:if(r.wrap){for(;v<32;){if(0===g)break t;g--,b|=h[p++]<<v,v+=8;}if(E-=m,t.total_out+=E,r.total+=E,E&&(t.adler=r.check=r.flags?o(r.check,d,E,y-E):i(r.check,d,E,y-E)),E=m,(r.flags?b:f(b))!==r.check){t.msg="incorrect data check",r.mode=l;break}b=0,v=0;}r.mode=28;case 28:if(r.wrap&&r.flags){for(;v<32;){if(0===g)break t;g--,b+=h[p++]<<v,v+=8;}if(b!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=l;break}b=0,v=0;}r.mode=29;case 29:M=1;break t;case l:M=-3;break t;case 31:return -4;default:return u}return t.next_out=y,t.avail_out=m,t.next_in=p,t.avail_in=g,r.hold=b,r.bits=v,(r.wsize||E!==t.avail_out&&r.mode<l&&(r.mode<27||4!==e))&&_(t,t.output,t.next_out,E-t.avail_out),S-=t.avail_in,E-=t.avail_out,t.total_in+=S,t.total_out+=E,r.total+=E,r.wrap&&E&&(t.adler=r.check=r.flags?o(r.check,d,E,t.next_out-E):i(r.check,d,E,t.next_out-E)),t.data_type=r.bits+(r.last?64:0)+(r.mode===c?128:0)+(20===r.mode||15===r.mode?256:0),(0===S&&0===E||4===e)&&0===M&&(M=-5),M},e.inflateEnd=function(t){if(!t||!t.state)return u;var e=t.state;return e.window&&(e.window=null),t.state=null,0},e.inflateGetHeader=function(t,e){var r;return t&&t.state?0==(2&(r=t.state).wrap)?u:(r.head=e,e.done=!1,0):u},e.inflateSetDictionary=function(t,e){var r,n=e.length;return t&&t.state?0!==(r=t.state).wrap&&11!==r.mode?u:11===r.mode&&i(1,e,n,0)!==r.check?-3:_(t,e,n,n)?(r.mode=31,-4):(r.havedict=1,0):u},e.inflateInfo="pako inflate (from Nodeca project)";},function(t,e){var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var r=e.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n]);}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var n={arraySet:function(t,e,r,n,i){if(e.subarray&&t.subarray)t.set(e.subarray(r,r+n),i);else for(var o=0;o<n;o++)t[i+o]=e[r+o];},flattenChunks:function(t){var e,r,n,i,o,a;for(n=0,e=0,r=t.length;e<r;e++)n+=t[e].length;for(a=new Uint8Array(n),i=0,e=0,r=t.length;e<r;e++)o=t[e],a.set(o,i),i+=o.length;return a}},i={arraySet:function(t,e,r,n,i){for(var o=0;o<n;o++)t[i+o]=e[r+o];},flattenChunks:function(t){return [].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,n)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,i));},e.setTyped(r);},function(t,e){t.exports=function(t,e,r,n){for(var i=65535&t|0,o=t>>>16&65535|0,a=0;0!==r;){r-=a=r>2e3?2e3:r;do{o=o+(i=i+e[n++]|0)|0;}while(--a);i%=65521,o%=65521;}return i|o<<16|0};},function(t,e){var r=function(){for(var t,e=[],r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t;}return e}();t.exports=function(t,e,n,i){var o=r,a=i+n;t^=-1;for(var s=i;s<a;s++)t=t>>>8^o[255&(t^e[s])];return -1^t};},function(t,e){t.exports=function(t,e){var r,n,i,o,a,s,u,c,l,f,h,d,p,y,g,m,b,v,w,_,S,E,I,A,k;r=t.state,n=t.next_in,A=t.input,i=n+(t.avail_in-5),o=t.next_out,k=t.output,a=o-(e-t.avail_out),s=o+(t.avail_out-257),u=r.dmax,c=r.wsize,l=r.whave,f=r.wnext,h=r.window,d=r.hold,p=r.bits,y=r.lencode,g=r.distcode,m=(1<<r.lenbits)-1,b=(1<<r.distbits)-1;t:do{p<15&&(d+=A[n++]<<p,p+=8,d+=A[n++]<<p,p+=8),v=y[d&m];e:for(;;){if(d>>>=w=v>>>24,p-=w,0==(w=v>>>16&255))k[o++]=65535&v;else {if(!(16&w)){if(0==(64&w)){v=y[(65535&v)+(d&(1<<w)-1)];continue e}if(32&w){r.mode=12;break t}t.msg="invalid literal/length code",r.mode=30;break t}_=65535&v,(w&=15)&&(p<w&&(d+=A[n++]<<p,p+=8),_+=d&(1<<w)-1,d>>>=w,p-=w),p<15&&(d+=A[n++]<<p,p+=8,d+=A[n++]<<p,p+=8),v=g[d&b];r:for(;;){if(d>>>=w=v>>>24,p-=w,!(16&(w=v>>>16&255))){if(0==(64&w)){v=g[(65535&v)+(d&(1<<w)-1)];continue r}t.msg="invalid distance code",r.mode=30;break t}if(S=65535&v,p<(w&=15)&&(d+=A[n++]<<p,(p+=8)<w&&(d+=A[n++]<<p,p+=8)),(S+=d&(1<<w)-1)>u){t.msg="invalid distance too far back",r.mode=30;break t}if(d>>>=w,p-=w,S>(w=o-a)){if((w=S-w)>l&&r.sane){t.msg="invalid distance too far back",r.mode=30;break t}if(E=0,I=h,0===f){if(E+=c-w,w<_){_-=w;do{k[o++]=h[E++];}while(--w);E=o-S,I=k;}}else if(f<w){if(E+=c+f-w,(w-=f)<_){_-=w;do{k[o++]=h[E++];}while(--w);if(E=0,f<_){_-=w=f;do{k[o++]=h[E++];}while(--w);E=o-S,I=k;}}}else if(E+=f-w,w<_){_-=w;do{k[o++]=h[E++];}while(--w);E=o-S,I=k;}for(;_>2;)k[o++]=I[E++],k[o++]=I[E++],k[o++]=I[E++],_-=3;_&&(k[o++]=I[E++],_>1&&(k[o++]=I[E++]));}else {E=o-S;do{k[o++]=k[E++],k[o++]=k[E++],k[o++]=k[E++],_-=3;}while(_>2);_&&(k[o++]=k[E++],_>1&&(k[o++]=k[E++]));}break}}break}}while(n<i&&o<s);n-=_=p>>3,d&=(1<<(p-=_<<3))-1,t.next_in=n,t.next_out=o,t.avail_in=n<i?i-n+5:5-(n-i),t.avail_out=o<s?s-o+257:257-(o-s),r.hold=d,r.bits=p;};},function(t,e,r){var n=r(33),i=15,o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,r,c,l,f,h,d){var p,y,g,m,b,v,w,_,S,E=d.bits,I=0,A=0,k=0,D=0,x=0,T=0,P=0,O=0,R=0,C=0,M=null,N=0,j=new n.Buf16(16),B=new n.Buf16(16),L=null,F=0;for(I=0;I<=i;I++)j[I]=0;for(A=0;A<c;A++)j[e[r+A]]++;for(x=E,D=i;D>=1&&0===j[D];D--);if(x>D&&(x=D),0===D)return l[f++]=20971520,l[f++]=20971520,d.bits=1,0;for(k=1;k<D&&0===j[k];k++);for(x<k&&(x=k),O=1,I=1;I<=i;I++)if(O<<=1,(O-=j[I])<0)return -1;if(O>0&&(0===t||1!==D))return -1;for(B[1]=0,I=1;I<i;I++)B[I+1]=B[I]+j[I];for(A=0;A<c;A++)0!==e[r+A]&&(h[B[e[r+A]]++]=A);if(0===t?(M=L=h,v=19):1===t?(M=o,N-=257,L=a,F-=257,v=256):(M=s,L=u,v=-1),C=0,A=0,I=k,b=f,T=x,P=0,g=-1,m=(R=1<<x)-1,1===t&&R>852||2===t&&R>592)return 1;for(;;){w=I-P,h[A]<v?(_=0,S=h[A]):h[A]>v?(_=L[F+h[A]],S=M[N+h[A]]):(_=96,S=0),p=1<<I-P,k=y=1<<T;do{l[b+(C>>P)+(y-=p)]=w<<24|_<<16|S|0;}while(0!==y);for(p=1<<I-1;C&p;)p>>=1;if(0!==p?(C&=p-1,C+=p):C=0,A++,0==--j[I]){if(I===D)break;I=e[r+h[A]];}if(I>x&&(C&m)!==g){for(0===P&&(P=x),b+=k,O=1<<(T=I-P);T+P<D&&!((O-=j[T+P])<=0);)T++,O<<=1;if(R+=1<<T,1===t&&R>852||2===t&&R>592)return 1;l[g=C&m]=x<<24|T<<16|b-f|0;}}return 0!==C&&(l[b+C]=I-P<<24|64<<16|0),d.bits=x,0};},function(t,e,r){var n=r(33),i=!0,o=!0;try{String.fromCharCode.apply(null,[0]);}catch(t){i=!1;}try{String.fromCharCode.apply(null,new Uint8Array(1));}catch(t){o=!1;}for(var a=new n.Buf8(256),s=0;s<256;s++)a[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;function u(t,e){if(e<65537&&(t.subarray&&o||!t.subarray&&i))return String.fromCharCode.apply(null,n.shrinkBuf(t,e));for(var r="",a=0;a<e;a++)r+=String.fromCharCode(t[a]);return r}a[254]=a[254]=1,e.string2buf=function(t){var e,r,i,o,a,s=t.length,u=0;for(o=0;o<s;o++)55296==(64512&(r=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=t.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(i-56320),o++),u+=r<128?1:r<2048?2:r<65536?3:4;for(e=new n.Buf8(u),a=0,o=0;a<u;o++)55296==(64512&(r=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=t.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(i-56320),o++),r<128?e[a++]=r:r<2048?(e[a++]=192|r>>>6,e[a++]=128|63&r):r<65536?(e[a++]=224|r>>>12,e[a++]=128|r>>>6&63,e[a++]=128|63&r):(e[a++]=240|r>>>18,e[a++]=128|r>>>12&63,e[a++]=128|r>>>6&63,e[a++]=128|63&r);return e},e.buf2binstring=function(t){return u(t,t.length)},e.binstring2buf=function(t){for(var e=new n.Buf8(t.length),r=0,i=e.length;r<i;r++)e[r]=t.charCodeAt(r);return e},e.buf2string=function(t,e){var r,n,i,o,s=e||t.length,c=new Array(2*s);for(n=0,r=0;r<s;)if((i=t[r++])<128)c[n++]=i;else if((o=a[i])>4)c[n++]=65533,r+=o-1;else {for(i&=2===o?31:3===o?15:7;o>1&&r<s;)i=i<<6|63&t[r++],o--;o>1?c[n++]=65533:i<65536?c[n++]=i:(i-=65536,c[n++]=55296|i>>10&1023,c[n++]=56320|1023&i);}return u(c,n)},e.utf8border=function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;r>=0&&128==(192&t[r]);)r--;return r<0||0===r?e:r+a[t[r]]>e?r:e};},function(t,e){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};},function(t,e){t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};},function(t,e){t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0;};},function(t,e){t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1;};}])},gS.exports=dS();var mS=gt$1(gS.exports);const bS=gS.exports.BFSRequire("fs"),{existsSync:vS,mkdirSync:wS,readdirSync:_S,readFileSync:SS,renameSync:ES,rmdirSync:IS,statSync:AS,lstatSync:kS,writeFileSync:DS,unlinkSync:xS}=bS;mS.configure({fs:"LocalStorage",options:{}},(function(t){if(t)throw t}));const TS=new e("DIDStore");class PS{constructor(t,e,r){t<0&&(t=0),e<0&&(e=0),this.cache=new pP({maxItems:e}),this.storage=r,TS.info("DID store opened: {}, cache(init:{}, max:{})",r.getLocation(),t,e);}static open(t,e=PS.CACHE_INITIAL_CAPACITY,n=PS.CACHE_MAX_CAPACITY){return r(this,void 0,void 0,(function*(){Ot$1(null!=t,"Invalid store context"),Ot$1(n>=e,"Invalid cache capacity spec");let r=new cS(t);yield r.init();let i=new PS(e,n,r);return i.metadata=yield r.loadMetadata(),i.metadata.attachStore(i),i}))}close(){this.cache.invalidateAll(),this.cache=null,this.metadata=null,this.storage=null;}static calcFingerprint(t){let e=CS(vt$1.Buffer.from(t)).toString();try{return CS(CD.encrypt(vt$1.Buffer.from(e,"hex"),t)).toString()}catch(t){throw new d$1("Calculate fingerprint error.",t)}}static encryptToBase64(t,e){try{return CD.encryptToBase64(t,e)}catch(t){throw new d$1("Encrypt data error.",t)}}static decryptFromBase64(t,e){try{return CD.decryptFromBase64(t,e)}catch(t){throw new o("Decrypt private key error.",t)}}static reEncrypt(t,e,r){let n=this.decryptFromBase64(t,e);return this.encryptToBase64(n,r)}encrypt(t,e){let r=this.metadata.getFingerprint(),n=PS.calcFingerprint(e);if(null!=r&&n!==r)throw new o("Password mismatched with previous password.");let i=PS.encryptToBase64(t,e);return null!=r&&""!==r||this.metadata.setFingerprint(n),i}decrypt(t,e){let r=this.metadata.getFingerprint(),n=PS.calcFingerprint(e),i=PS.decryptFromBase64(t,e);return null!=r&&""!==r||this.metadata.setFingerprint(n),i}storeRootIdentity(t,e){if(Ot$1(null!=t,"Invalid identity"),void 0!==e){Ot$1(null!=e&&""!==e,"Invalid storepass");let r=null;null!=t.getMnemonic()&&(r=this.encrypt(vt$1.Buffer.from(t.getMnemonic(),"utf8"),e));let n=this.encrypt(t.getRootPrivateKey().serialize(),e),i=t.getPreDerivedPublicKey().serializePublicKeyBase58();this.storage.storeRootIdentity(t.getId(),r,n,i,t.getIndex()),null==this.metadata.getDefaultRootIdentity()&&this.metadata.setDefaultRootIdentity(t.getId()),this.cache.invalidate(PS.Key.forRootIdentity(t.getId())),this.cache.invalidate(PS.Key.forRootIdentityPrivateKey(t.getId()));}else this.storage.updateRootIdentityIndex(t.getId(),t.getIndex());}setDefaultRootIdentity(t){if(Ot$1(null!=t,"Invalid identity"),!this.containsRootIdentity(t.getId()))throw new i("Invalid identity, not exists in the store");this.metadata.setDefaultRootIdentity(t.getId());}loadRootIdentity(t){return r(this,void 0,void 0,(function*(){if(void 0===t&&(null==(t=this.metadata.getDefaultRootIdentity())||""===t)){let t=this.storage.listRootIdentities();if(1!=t.length)return null;{let e=t[0],r=yield this.loadRootIdentityMetadata(e.getId());return e.setMetadata(r),this.metadata.setDefaultRootIdentity(e.getId()),e}}Ot$1(null!=t&&""!==t,"Invalid id");try{let e=yield this.cache.getAsync(PS.Key.forRootIdentity(t),(()=>r(this,void 0,void 0,(function*(){let e=this.storage.loadRootIdentity(t);return null!=e?(e.setMetadata(yield this.loadRootIdentityMetadata(t)),{value:e}):{value:PS.NULL}}))));return e===PS.NULL?null:e}catch(e){throw new a$1("Load root identity failed: "+t,e)}}))}containsRootIdentity(t){return Ot$1(null!=t&&""!==t,"Invalid id"),this.storage.containsRootIdentity(t)}exportRootIdentityMnemonic(t,e){Ot$1(null!=t&&""!==t,"Invalid id"),Ot$1(null!=e&&""!==e,"Invalid storepass");let r=this.storage.loadRootIdentityMnemonic(t);return null!=r?new String(this.decrypt(r,e)).valueOf():null}containsRootIdentityMnemonic(t){return Ot$1(null!=t&&""!==t,"Invalid id"),null!=this.storage.loadRootIdentityMnemonic(t)}loadRootIdentityPrivateKey(t,e){try{let r=this.cache.get(PS.Key.forRootIdentityPrivateKey(t),(()=>{let e=this.storage.loadRootIdentityPrivateKey(t);return {value:null!=e?e:PS.NULL}}));if(r!==PS.NULL){let t=this.decrypt(r,e);return RD.deserialize(t)}return null}catch(e){throw e instanceof o?e:new a$1("Load root identity private key failed: "+t,e)}}derive(t,e,r){Ot$1(null!=t&&""!==t,"Invalid identity"),Ot$1(null!=e&&""!==e,"Invalid path"),Ot$1(null!=r&&""!==r,"Invalid storepass");let n=this.loadRootIdentityPrivateKey(t,r);if(!n)throw new d$1("Unable to load root private key for id "+t+". Null private key returned.");return n.deriveWithPath(e)}deleteRootIdentity(t){Ot$1(null!=t&&""!==t,"Invalid id");let e=this.storage.deleteRootIdentity(t);return e&&(null!=this.metadata.getDefaultRootIdentity()&&this.metadata.getDefaultRootIdentity()===t&&this.metadata.setDefaultRootIdentity(null),this.cache.invalidate(PS.Key.forRootIdentity(t)),this.cache.invalidate(PS.Key.forRootIdentityPrivateKey(t))),e}listRootIdentities(){return r(this,void 0,void 0,(function*(){let t=this.storage.listRootIdentities();for(let e of t){let t=yield this.loadRootIdentityMetadata(e.getId());e.setMetadata(t);}return t}))}containsRootIdentities(){return this.storage.containsRootIdenities()}storeRootIdentityMetadata(t,e){Ot$1(null!=t&&""!==t,"Invalid id"),Ot$1(null!=e,"Invalid metadata"),this.storage.storeRootIdentityMetadata(t,e);}loadRootIdentityMetadata(t){return r(this,void 0,void 0,(function*(){Ot$1(null!=t&&""!==t,"Invalid id");let e=yield this.storage.loadRootIdentityMetadata(t);return null!=e?(e.setId(t),e.attachStore(this)):e=new sS.Metadata(t,this),e}))}storeDid(t){return r(this,void 0,void 0,(function*(){if(Ot$1(null!=t,"Invalid doc"),this.storage.storeDid(t),t.getStore()!=this){let e=yield this.loadDidMetadata(t.getSubject());t.getMetadata().merge(e),t.getMetadata().attachStore(this);}this.storeDidMetadata(t.getSubject(),t.getMetadata());for(let e of t.getCredentials())yield this.storeCredential(e);this.cache.put(PS.Key.forDidDocument(t.getSubject()),t);}))}loadDid(t){return r(this,void 0,void 0,(function*(){let e;Ot$1(null!=t,"Invalid did"),e=t instanceof Nt$1?t:Nt$1.from(t);try{let t=yield this.cache.getAsync(PS.Key.forDidDocument(e),(()=>r(this,void 0,void 0,(function*(){let t=yield this.storage.loadDid(e);return null!=t?(t.setMetadata(yield this.loadDidMetadata(e)),{value:t}):{value:PS.NULL}}))));return t===PS.NULL?null:t}catch(t){throw new a$1("Load did document failed: "+e,t)}}))}containsDid(t){let e;return Ot$1(null!=t,"Invalid did"),e=t instanceof Nt$1?t:Nt$1.from(t),this.storage.containsDid(e)}containsDids(){return this.storage.containsDids()}storeDidMetadata(t,e){Ot$1(null!=t,"Invalid did"),Ot$1(null!=e,"Invalid metadata"),this.storage.storeDidMetadata(t,e),e.attachStore(this),this.cache.put(PS.Key.forDidMetadata(t),e);}loadDidMetadata(t){return r(this,void 0,void 0,(function*(){Ot$1(null!=t,"Invalid did");try{let e=yield this.cache.getAsync(PS.Key.forDidMetadata(t),(()=>r(this,void 0,void 0,(function*(){let e=yield this.storage.loadDidMetadata(t);return null!=e?(e.setDid(t),e.attachStore(this)):e=new lt$1(t,this),{value:e}}))));return e===PS.NULL?null:e}catch(e){throw new a$1("Load did metadata failed: "+t,e)}}))}deleteDid(t){let e;Ot$1(null!=t,"Invalid did"),e=t instanceof Nt$1?t:Nt$1.from(t);let r=this.storage.deleteDid(e);return r&&(this.cache.invalidate(PS.Key.forDidDocument(e)),this.cache.invalidate(PS.Key.forDidMetadata(e)),this.cache.invalidateAll((t=>t.id instanceof jt$1&&t.id.getDid()===e))),r}listDids(){return r(this,void 0,void 0,(function*(){let t=this.storage.listDids();for(let e of t){let t=yield this.loadDidMetadata(e);null==t?t=new lt$1(e,this):(t.setDid(e),t.attachStore(this)),e.setMetadata(t);}return t}))}selectDids(t){return r(this,void 0,void 0,(function*(){let e=yield this.listDids();if(null!=t){let r=[];for(let n of e)t.select(n)&&r.push(n);e=r;}return e}))}storeCredential(t){return r(this,void 0,void 0,(function*(){if(Ot$1(null!=t,"Invalid credential"),this.storage.storeCredential(t),t.getMetadata().getStore()!=this){let e=yield this.loadCredentialMetadata(t.getId());t.getMetadata().merge(e),t.getMetadata().attachStore(this);}this.storeCredentialMetadata(t.getId(),t.getMetadata()),this.cache.put(PS.Key.forCredential(t.getId()),t);}))}loadCredential(t){return r(this,void 0,void 0,(function*(){Ot$1(null!=t,"Invalid credential id"),"string"==typeof t&&(t=jt$1.from(t));try{let e=yield this.cache.getAsync(PS.Key.forCredential(t),(()=>r(this,void 0,void 0,(function*(){let e=yield this.storage.loadCredential(t);return null!=e?(e.setMetadata(yield this.loadCredentialMetadata(t)),{value:e}):{value:PS.NULL}}))));return e===PS.NULL?null:e}catch(e){throw new a$1("Load credential failed: "+t,e)}}))}containsCredential(t){Ot$1(null!=t,"Invalid credential id");let e=jt$1.from(t);return this.storage.containsCredential(e)}containsCredentials(t){return Ot$1(null!=t,"Invalid did"),this.storage.containsCredentials(t)}storeCredentialMetadata(t,e){Ot$1(null!=t,"Invalid credential id"),Ot$1(null!=e,"Invalid credential metadata"),this.storage.storeCredentialMetadata(t,e),e.attachStore(this),this.cache.put(PS.Key.forCredentialMetadata(t),e);}loadCredentialMetadata(t){return r(this,void 0,void 0,(function*(){Ot$1(null!=t,"Invalid credential id");try{let e=yield this.cache.getAsync(PS.Key.forCredentialMetadata(t),(()=>r(this,void 0,void 0,(function*(){let e=yield this.storage.loadCredentialMetadata(t);return null!=e?(e.setId(t),e.attachStore(this)):e=new fr$1(t,this),{value:e}}))));return e===PS.NULL?null:e}catch(e){throw new a$1("Load Credential metadata failed: "+t,e)}}))}deleteCredential(t){Ot$1(null!=t,"Invalid credential id");let e=jt$1.from(t),r=this.storage.deleteCredential(e);return r&&(this.cache.invalidate(PS.Key.forCredential(e)),this.cache.invalidate(PS.Key.forCredentialMetadata(e))),r}listCredentials(t){return r(this,void 0,void 0,(function*(){let e;Ot$1(null!=t,"Invalid did"),e=t instanceof Nt$1?t:Nt$1.from(t);let r=this.storage.listCredentials(e);for(let t of r){let e=yield this.loadCredentialMetadata(t);null==e?e=new fr$1(t,this):(e.setId(t),e.attachStore(this)),t.setMetadata(e);}return r}))}selectCredentials(t,e){return r(this,void 0,void 0,(function*(){let r;Ot$1(null!=t,"Invalid did"),r=t instanceof Nt$1?t:Nt$1.from(t);let n=yield this.listCredentials(r);if(null!=e){let t=[];for(let r of n)e.select(r)&&t.push(r);n=t;}return n}))}storePrivateKey(t,e,r){Ot$1(null!=t,"Invalid private key id");let n=jt$1.from(t);Ot$1(null!=e&&0!=e.length,"Invalid private key"),Ot$1(null!=r&&""!==r,"Invalid storepass");let i=this.encrypt(e,r);this.storage.storePrivateKey(n,i),this.cache.put(PS.Key.forDidPrivateKey(n),i);}storeLazyPrivateKey(t){Ot$1(null!=t,"Invalid private key id"),this.storage.storePrivateKey(t,PS.DID_LAZY_PRIVATEKEY),this.cache.put(PS.Key.forDidPrivateKey(t),PS.DID_LAZY_PRIVATEKEY);}loadPrivateKey(t,e){return r(this,void 0,void 0,(function*(){Ot$1(null!=t,"Invalid private key id"),Ot$1(e&&null!=e,"Invalid storepass");try{let r=this.cache.get(PS.Key.forDidPrivateKey(t),(()=>{let e=this.storage.loadPrivateKey(t);return {value:null!=e?e:PS.NULL}}));return r!==PS.NULL&&r?r===PS.DID_LAZY_PRIVATEKEY?yield sS.lazyCreateDidPrivateKey(t,this,e):this.decrypt(r,e):null}catch(t){throw new a$1("Load did private key failed.")}}))}containsPrivateKey(t){Ot$1(null!=t,"Invalid private key id");let e=jt$1.from(t);return this.storage.containsPrivateKey(e)}containsPrivateKeys(t){let e;return Ot$1(null!=t,"Invalid did"),e=t instanceof Nt$1?t:Nt$1.from(t),this.storage.containsPrivateKeys(e)}deletePrivateKey(t){Ot$1(null!=t,"Invalid private key id");let e=jt$1.from(t),r=this.storage.deletePrivateKey(e);return r&&this.cache.invalidate(PS.Key.forDidPrivateKey(e)),r}sign(t,e,n){return r(this,void 0,void 0,(function*(){Ot$1(null!=t,"Invalid private key id"),Ot$1(null!=e&&""!==e,"Invalid storepass"),Ot$1(null!=n&&n.length>0,"Invalid digest");let r=yield this.loadPrivateKey(t,e);if(null==r)throw new a$1("Private key not exists: "+t.toString());let i=RD.deserialize(r),o=NS.sign(i.getPrivateKeyBytes(),n);return r.fill(0),i.wipe(),jS.fromHex(o.toString("hex"))}))}changePassword(t,e){Ot$1(null!=t&&""!==t,"Invalid old password"),Ot$1(null!=e&&""!==e,"Invalid new password"),this.storage.changePassword({reEncrypt:r=>PS.reEncrypt(r,t,e)}),this.metadata.setFingerprint(PS.calcFingerprint(e)),this.cache.invalidateAll();}synchronize(t=null){return r(this,void 0,void 0,(function*(){null==t&&(t=lx.getInstance());let e=yield this.listRootIdentities();for(let r of e)yield r.synchronize(t);let r=this.storage.listDids();for(let e of r){let r=yield this.storage.loadDid(e);if(r.isCustomizedDid()){let n=yield e.resolve();if(null==n)continue;let i=n;if(r.getMetadata().detachStore(),r.getSignature()===n.getSignature()||null!=r.getMetadata().getSignature()&&r.getProof().getSignature()===r.getMetadata().getSignature())i.getMetadata().merge(r.getMetadata());else {if(TS.debug("{} on-chain copy conflict with local copy.",e.toString()),i=t.merge(n,r),null==i||!i.getSubject().equals(e))throw TS.error("Conflict handle merge the DIDDocument error."),new a$1("deal with local modification error.");TS.debug("Conflict handle return the final copy.");}r.getMetadata().attachStore(this);let o=i.getMetadata();o.setPublished(n.getMetadata().getPublished()),o.setSignature(n.getProof().getSignature()),n.getMetadata().isDeactivated()&&o.setDeactivated(!0),o.attachStore(this),this.storage.storeDid(i);}let n=this.storage.listCredentials(e);for(let t of n){let e=yield this.storage.loadCredential(t),r=yield vr$1.resolve(t,e.getIssuer());null!=r&&(r.getMetadata().merge(e.getMetadata()),this.storage.storeCredential(r));}}}))}exportDid(t,e,n){return r(this,void 0,void 0,(function*(){Ot$1(null!=t,"Invalid id"),Ot$1(null!=e&&""!==e,"Invalid password"),Ot$1(null!=n&&""!==n,"Invalid storepass"),"string"==typeof t&&(t=Nt$1.from(t));let r=yield this.storage.loadDid(t);if(null==r)throw new a$1("Export DID "+t+" failed, not exist.");r.setMetadata(yield this.storage.loadDidMetadata(t)),TS.debug("Exporting {}...",t.toString());let i=new PS.DIDExport(t);if(i.setDocument(r),this.storage.containsCredentials(t)){let e=Array.from(yield this.listCredentials(t));e.sort();for(let t of e){TS.debug("Exporting credential {}...",t.toString());let e=yield this.storage.loadCredential(t);e.setMetadata(yield this.storage.loadCredentialMetadata(t)),i.addCredential(e);}}if(this.storage.containsPrivateKeys(t)){let o=r.getPublicKeys();for(let r of o){if(!r.getController().equals(t))continue;let o=r.getId(),a=this.storage.loadPrivateKey(o);null!=a&&(TS.debug("Exporting private key {}...",o.toString()),i.addPrivatekey(o,a,n,e));}}return i.seal(e),i.serialize(!0)}))}importDid(t,e,r){Ot$1(null!=t&&""!==t,"Invalid import data"),Ot$1(null!=e&&""!==e,"Invalid password"),Ot$1(null!=r&&""!==r,"Invalid storepass");let n=PS.DIDExport.parse(t);n.verify(e);let i=n.getDocument();this.storage.storeDid(i),this.storage.storeDidMetadata(i.getSubject(),i.getMetadata());let o=n.getCredentials();for(let t of o)this.storage.storeCredential(t),this.storage.storeCredentialMetadata(t.getId(),t.getMetadata());let a=n.getPrivateKeys();for(let t of a)this.storage.storePrivateKey(t.getId(),t.getKey(e,r));return null}exportRootIdentity(t,e,r){Ot$1(null!=t&&""!==t,"Invalid id"),Ot$1(null!=e&&""!==e,"Invalid password"),Ot$1(null!=r&&""!==r,"Invalid storepass");let n=new PS.RootIdentityExport,i=this.storage.loadRootIdentityMnemonic(t);null!==i&&n.setMnemonic(i,r,e),n.setPirvateKey(this.storage.loadRootIdentityPrivateKey(t),r,e);let o=this.storage.loadRootIdentity(t);return n.setPublicKey(o.getPreDerivedPublicKey().serializePublicKeyBase58()),n.setIndex(o.getIndex()),o.getId()==this.metadata.getDefaultRootIdentity()&&n.setDefault(),n.seal(e),n.serialize(!0)}importRootIdentity(t,e,r){Ot$1(null!=t&&""!==t,"Invalid import data"),Ot$1(null!=e&&""!==e,"Invalid password"),Ot$1(null!=r&&""!==r,"Invalid storepass");let n=PS.RootIdentityExport.parse(t);n.verify(e);let i=n.getMnemonic(e,r),o=n.getPrivateKey(e,r),a=n.getPublicKey(),s=RD.deserializeBase58(a),u=sS.getId(s.serializePublicKey());return this.storage.storeRootIdentity(u,i,o,a,n.getIndex()),n.isDefault()&&null==this.metadata.getDefaultRootIdentity()&&this.metadata.setDefaultRootIdentity(u),null}exportStore(t,e,n){return r(this,void 0,void 0,(function*(){Ot$1(null!=t,"Invalid zip file"),Ot$1(null!=e&&""!==e,"Invalid password"),Ot$1(null!=n&&""!==n,"Invalid storepass");let r=new yS,i=yield this.listDids();for(let t of i){let i=yield this.exportDid(t,e,n);r.file("did-"+t.getMethodSpecificId(),i);}let o=yield this.listRootIdentities();for(let t of o){let i=yield this.exportRootIdentity(t.getId(),e,n);r.file("rootIdentity-"+t.getId(),i);}new cx(t).createFile();try{let e=yield r.generateAsync({type:"nodebuffer",platform:"UNIX"});DS(t,e,{mode:420,flag:"w+"});}catch(t){throw new Q$1(t)}}))}importStore(t,e,n){return r(this,void 0,void 0,(function*(){Ot$1(null!=t,"Invalid zip file"),Ot$1(null!=e&&""!==e,"Invalid password"),Ot$1(null!=n&&""!==n,"Invalid storepass");let i=this.metadata.getFingerprint(),a=PS.calcFingerprint(n);if(null!=i&&a!==i)throw new o("Password mismatched with previous password.");try{const i=[];let o=yield SS(t),a=yield yS.loadAsync(o);a.forEach(((t,o)=>{let s=a.file(t).async("string").then((i=>r(this,void 0,void 0,(function*(){t.startsWith("rootIdentity-")?yield this.importRootIdentity(i,e,n):t.startsWith("did-")?yield this.importDid(i,e,n):console.log("Skip unknow export entry: "+t);}))));i.push(s);})),yield Promise.all(i);}catch(t){throw new Q$1(t)}null!=i&&""!=i||this.metadata.setFingerprint(a);}))}}PS.CACHE_INITIAL_CAPACITY=16,PS.CACHE_MAX_CAPACITY=128,PS.NULL=null,PS.DID_LAZY_PRIVATEKEY="lazy-private-key",function(t){class e{constructor(t,e){this.type=t,this.id=e;}hashCode(){return this.type+this.id.hashCode()}equals(t){if(t==this)return !0;if(t instanceof e){let e=t;return this.type==e.type&&this.id.equals(e.id)}return !1}static forRootIdentity(r){return new e(t.Key.TYPE_ROOT_IDENTITY,new class{equals(t){return t===r}compareTo(t){return r.localeCompare(t)}hashCode(){return Mt$1(r)}})}static forRootIdentityPrivateKey(r){return new e(t.Key.TYPE_ROOT_IDENTITY_PRIVATEKEY,new class{constructor(){this.key=r;}equals(t){return t===this.key}compareTo(t){return this.key<t?-1:this.key>t?1:0}hashCode(){return Mt$1(this.key)}})}static forDidDocument(r){return new e(t.Key.TYPE_DID_DOCUMENT,r)}static forDidMetadata(r){return new e(t.Key.TYPE_DID_METADATA,r)}static forDidPrivateKey(r){return new e(t.Key.TYPE_DID_PRIVATEKEY,r)}static forCredential(r){return new e(t.Key.TYPE_CREDENTIAL,r)}static forCredentialMetadata(r){return new e(t.Key.TYPE_CREDENTIAL_METADATA,r)}}e.TYPE_ROOT_IDENTITY=0,e.TYPE_ROOT_IDENTITY_PRIVATEKEY=1,e.TYPE_DID_DOCUMENT=16,e.TYPE_DID_METADATA=17,e.TYPE_DID_PRIVATEKEY=18,e.TYPE_CREDENTIAL=32,e.TYPE_CREDENTIAL_METADATA=33,t.Key=e;class r extends at$1{constructor(t=null){super(),this.document=null,this.credentials=[],this.privatekeys=[],this.created=null,this.fingerprint=null,this.type=r.DID_EXPORT,this.id=t;}getId(){return this.id}getDocument(){return this.document.content}setDocument(e){this.document=new t.DIDExport.Document(e,e.getMetadata().isEmpty()?null:e.getMetadata());}getCredentials(){if(null==this.credentials)return [];let t=[];for(let e of this.credentials)t.push(e.content);return t}addCredential(t){null==this.credentials&&(this.credentials=[]),this.credentials.push(new r.Credential(t,t.getMetadata().isEmpty()?null:t.getMetadata()));}getPrivateKeys(){return null!=this.privatekeys?this.privatekeys:[]}addPrivatekey(e,r,n,i){null==this.privatekeys&&(this.privatekeys=[]);let o=new t.DIDExport.PrivateKey(e);o.setKey(r,n,i),this.privatekeys.push(o);}calculateFingerprint(t){let e=Dd("sha256");if(e.update(vt$1.Buffer.from(t)),e.update(vt$1.Buffer.from(this.type)),e.update(vt$1.Buffer.from(this.id.toString())),e.update(vt$1.Buffer.from(this.document.content.toString(!0))),this.document.metadata&&e.update(vt$1.Buffer.from(this.document.metadata.toString(!0))),this.credentials)for(let t of this.credentials)e.update(vt$1.Buffer.from(t.content.toString(!0))),t.metadata&&e.update(vt$1.Buffer.from(t.metadata.toString(!0)));for(let t of this.privatekeys)e.update(vt$1.Buffer.from(t.id.toString())),e.update(vt$1.Buffer.from(t.key));e.update(vt$1.Buffer.from(this.dateToString(this.created)));let r=e.digest();return jS.toUrlFormat(r.toString("base64"))}seal(t){let e=gr$1();return e.set("milliseconds",0),this.created=e.toDate(),this.fingerprint=this.calculateFingerprint(t),this}verify(t){if(this.fingerprint!==this.calculateFingerprint(t))throw new Q$1("Invalid export data, fingerprint mismatch. "+this.id.toString())}toJSON(t=null){let e={};return e.type=this.type,e.id=this.id.toString(),e.document=this.document.toJSON(),this.credentials&&this.credentials.length>0&&(e.credential=Array.from(this.credentials,(t=>t.toJSON()))),this.privatekeys&&this.privatekeys.length>0&&(e.privateKey=Array.from(this.privatekeys,(t=>t.toJSON()))),e.created=this.dateToString(this.created),e.fingerprint=this.fingerprint,e}fromJSON(t,e=null){if(this.type=this.getString("type",t.type,{mandatory:!0,nullable:!1}),!this.type||this.type!==r.DID_EXPORT)throw new Q$1("Invalid export data, unknown type.");if(this.id=this.getDid("id",t.id,{mandatory:!0,nullable:!1}),!t.document)throw new Q$1("Invalid export data, missing document.");if(this.document=r.Document.parse(t.document),t.credential){if(!Array.isArray(t.credential))throw new Q$1("Invalid export data, invalid credentials.");this.credentials=Array.from(t.credential,(t=>r.Credential.parse(t)));}if(t.privateKey){if(!Array.isArray(t.privateKey))throw new Q$1("Invalid export data, invalid privatekeys.");this.privatekeys=Array.from(t.privateKey,(t=>r.PrivateKey.parse(t)));}this.created=this.getDate("created",t.created,{mandatory:!0,nullable:!1}),this.fingerprint=this.getString("fingerprint",t.fingerprint,{mandatory:!0,nullable:!1});}static parse(t,e=null){try{return at$1.deserialize(t,r,e)}catch(t){throw t instanceof Q$1?t:new Q$1(t)}}}r.DID_EXPORT="did.elastos.export/2.0",t.DIDExport=r,function(e){class r extends at$1{constructor(t=null,e=null){super(),this.content=t,this.metadata=e;}toJSON(t=null){let e={};return e.content=this.content.toJSON(),this.metadata&&(e.metadata=this.metadata.toJSON()),e}fromJSON(t,e=null){if(!t.content)throw new Q$1("Invalid export data, missing document content");this.content=oS._parseOnly(t.content),t.metadata&&(this.metadata=lt$1.parse(t.metadata),this.content.setMetadata(this.metadata));}static parse(t,e=null){try{return at$1.deserialize(t,r,e)}catch(t){throw t instanceof Q$1?t:new Q$1(t)}}}e.Document=r;class n extends at$1{constructor(t=null,e=null){super(),this.content=t,this.metadata=e;}toJSON(t=null){let e={};return e.content=this.content.toJSON(),this.metadata&&(e.metadata=this.metadata.toJSON()),e}fromJSON(t,e=null){if(!t.content)throw new Q$1("Invalid export data, missing credential content");this.content=vr$1.parse(t.content),t.metadata&&(this.metadata=fr$1.parse(t.metadata),this.content.setMetadata(this.metadata));}static parse(t,e=null){try{return at$1.deserialize(t,n,e)}catch(t){throw t instanceof Q$1?t:new Q$1(t)}}}e.Credential=n;class i extends at$1{constructor(t=null){super(),this.id=t;}getId(){return this.id}setId(t){this.id=t;}getKey(e,r){return t.reEncrypt(this.key,e,r)}setKey(e,r,n){this.key=t.reEncrypt(e,r,n);}toJSON(t=null){return {id:this.id.toString(),key:this.key}}fromJSON(t,e=null){this.id=this.getDidUrl("id",t.id,{mandatory:!0,nullable:!1}),this.key=this.getString("key",t.key,{mandatory:!0,nullable:!1});}static parse(t,e=null){try{return at$1.deserialize(t,i,e)}catch(t){throw t instanceof Q$1?t:new Q$1(t)}}}e.PrivateKey=i;}(r=t.DIDExport||(t.DIDExport={}));class n extends at$1{constructor(){super(),this.type=n.DID_EXPORT;}getMnemonic(e,r){return null==this.mnemonic?null:t.reEncrypt(this.mnemonic,e,r)}setMnemonic(e,r,n){this.mnemonic=t.reEncrypt(e,r,n);}getPrivateKey(e,r){return t.reEncrypt(this.privatekey,e,r)}setPirvateKey(e,r,n){this.privatekey=t.reEncrypt(e,r,n);}getPublicKey(){return this.publickey}setPublicKey(t){this.publickey=t;}getIndex(){return this.index}setIndex(t){this.index=t;}isDefault(){return 1==this.default}setDefault(){this.default=!0;}calculateFingerprint(t){let e=Dd("sha256");e.update(vt$1.Buffer.from(t)),e.update(vt$1.Buffer.from(this.type)),this.mnemonic&&e.update(vt$1.Buffer.from(this.mnemonic)),e.update(vt$1.Buffer.from(this.privatekey)),e.update(vt$1.Buffer.from(this.publickey)),e.update(vt$1.Buffer.from(this.index.toString())),e.update(vt$1.Buffer.from(this.default.toString())),e.update(vt$1.Buffer.from(this.dateToString(this.created)));let r=e.digest();return jS.toUrlFormat(r.toString("base64"))}seal(t){let e=gr$1();return e.set("milliseconds",0),this.created=e.toDate(),this.fingerprint=this.calculateFingerprint(t),this}verify(t){if(this.fingerprint!==this.calculateFingerprint(t))throw new Q$1("Invalid export data, fingerprint mismatch.")}toJSON(t=null){return {type:this.type,mnemonic:this.mnemonic,privateKey:this.privatekey,publicKey:this.publickey,index:this.index.toString(),default:this.default.toString(),created:this.dateToString(this.created),fingerprint:this.fingerprint}}fromJSON(t,e=null){if(this.type=this.getString("type",t.type,{mandatory:!0,nullable:!1}),!this.type||this.type!==n.DID_EXPORT)throw new Q$1("Invalid export data, unknown type.");this.mnemonic=this.getString("mnemonic",t.mnemonic,{mandatory:!0,nullable:!1}),this.privatekey=this.getString("privateKey",t.privateKey,{mandatory:!0,nullable:!1}),this.publickey=this.getString("publicKey",t.publicKey,{mandatory:!0,nullable:!1});let r=this.getString("index",t.index,{mandatory:!0,nullable:!1});this.index=null!=r?Number.parseInt(r):0;let i=this.getString("default",t.default,{mandatory:!0,nullable:!1});this.default=!(!i||"true"!==i),this.created=this.getDate("created",t.created,{mandatory:!0,nullable:!1}),this.fingerprint=this.getString("fingerprint",t.fingerprint,{mandatory:!0,nullable:!1});}static parse(t,e=null){try{return at$1.deserialize(t,n,e)}catch(t){throw t instanceof Q$1?t:new Q$1(t)}}}n.DID_EXPORT="did.elastos.export/2.0",t.RootIdentityExport=n;}(PS||(PS={}));class OS{constructor(t,e){if(this.self=t,e){if(!this.self.isAuthenticationKey(e))throw new I$1(e.toString())}else if(null==(e=this.self.getDefaultPublicKeyId()))throw new I$1("Need explict sign key or effective controller");if(!t.hasPrivateKey(e))throw new I$1("No private key: "+e);this.signKey=e;}static newWithDocument(t,e){return Ot$1(null!=t,"Invalid document"),e?new OS(t,e instanceof jt$1?e:jt$1.from(e,t.getSubject())):new OS(t)}static newWithDID(t,e,n){return r(this,void 0,void 0,(function*(){Ot$1(null!=t,"Invalid did"),Ot$1(null!=e,"Invalid store");let r=yield e.loadDid(t);return n?new OS(r,n instanceof jt$1?n:jt$1.from(n,t)):new OS(r)}))}getDid(){return this.self.getSubject()}getDocument(){return this.self}getSignKey(){return this.signKey}sign(t,e){return this.self.signWithId(this.signKey,t,e)}issueFor(t){return Ot$1(null!=t,"Invalid did"),t instanceof Nt$1?new vr$1.Builder(this,t):new vr$1.Builder(this,Nt$1.from(t))}}class RS{constructor(t){this.buffer=t,this.position=0;}static wrap(t){let e=new Uint8Array(t);for(let r=0;r<t.length;++r)e[r]=t[r];return new RS(e)}static allocate(t){return new RS(new Uint8Array(t))}hasRemaining(){return this.size()>this.position}size(){return this.buffer.length}reallocate(){const t=new Uint8Array(2*this.size());t.set(this.buffer),this.buffer=t;}shrink(){return this.buffer=this.buffer.subarray(0,this.position),this.buffer}put(t){this.buffer.length<this.position+1&&this.reallocate(),this.buffer[this.position++]=t;}get(t){return null==t&&(t=this.position,this.position+=1),this.buffer.length<t+1?0:this.buffer[t]}putShort(t){if(65535<t)throw t+" is over short value";const e=255&t,r=(65280&t)>>8;this.put(e),this.put(r);}getShort(t){if(null==t&&(t=this.position,this.position+=2),this.buffer.length<t+2)return 0;const e=this.buffer[t];return (this.buffer[t+1]<<8)+e}putInt(t){if(4294967295<t)throw t+" is over integer value";const e=255&t,r=(65280&t)>>8,n=(16711680&t)>>16,i=(4278190080&t)>>24;this.put(e),this.put(r),this.put(n),this.put(i);}getInt(t){if(t>this.size()+4)throw new X$1;if(null==t&&(t=this.position,this.position+=4),this.buffer.length<t+4)return 0;const e=this.buffer[t],r=this.buffer[t+1],n=this.buffer[t+2];return (this.buffer[t+3]<<24)+(n<<16)+(r<<8)+e}readInt(){if(!this.hasRemaining())throw new X$1("Buffer exhausted");const t=this.position;return this.position+=4,this.getInt(t)}putString(t){const e=this.stringToUtf8Bytes(t);for(let t=0;t<e.length;t++)this.put(e[t]);this.put(0);}getString(t){let e,r=[];for(null==t&&(t=this.position);!(this.buffer.length<t+1)&&(e=this.get(t++),0!==e);)r.push(e);return this.position=t,this.utf8BytesToString(r)}stringToUtf8Bytes(t){const e=new Uint8Array(4*t.length);let r=0,n=0;for(;r<t.length;){let i;const o=t.charCodeAt(r++);if(o>=55296&&o<=56319){const e=o,n=t.charCodeAt(r++);if(!(n>=56320&&n<=57343))return null;i=1024*(e-55296)+65536+(n-56320);}else i=o;i<128?e[n++]=i:i<2048?(e[n++]=i>>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):i<1<<21&&(e[n++]=i>>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128);}return e.subarray(0,n)}utf8BytesToString(t){let e,r,n,i,o,a,s,u="",c=0;for(;c<t.length;)r=t[c++],r<128?e=r:r>>5==6?(n=t[c++],e=(31&r)<<6|63&n):r>>4==14?(n=t[c++],i=t[c++],e=(15&r)<<12|(63&n)<<6|63&i):(n=t[c++],i=t[c++],o=t[c++],e=(7&r)<<18|(63&n)<<12|(63&i)<<6|63&o),e<65536?u+=String.fromCharCode(e):(e-=65536,a=55296|e>>10,s=56320|1023&e,u+=String.fromCharCode(a,s));return u}}function CS(t){return kv.createHash("md5").update(t).digest("hex")}class MS{static hashTwice(t){let e=Dd("sha256").update(t).digest();return Dd("sha256").update(e).digest()}static sha256ripemd160(t){let e=Dd("sha256").update(t).digest();return Dd("ripemd160").update(e).digest()}static encodeToString(...t){let e=t.reduce(((t,e)=>vt$1.Buffer.concat([t,e])),vt$1.Buffer.from(""));return Dd("sha256").update(e).digest().toString()}static encodeToBuffer(...t){let e=t.reduce(((t,e)=>vt$1.Buffer.concat([t,e])),vt$1.Buffer.from(""));return Dd("sha256").update(e).digest()}}class NS{static sign(t,e){const r=new Gi.ec("p256").keyFromPrivate(t,"hex").sign(e);return vt$1.Buffer.from(r.r.toString("hex",64)+r.s.toString("hex",64),"hex")}static signData(t,...e){return this.sign(t,MS.encodeToBuffer(...e))}static verify(t,e,r){const n=new Gi.ec("p256").keyFromPublic(t,"hex"),i={r:e.slice(0,32).toString("hex"),s:e.slice(32).toString("hex")};return n.verify(r,i)}static verifyData(t,e,...r){return this.verify(t,e,MS.encodeToBuffer(...r))}static sha256Digest(...t){return MS.encodeToBuffer(...t)}}class jS{static fromString(t){let e=vt$1.Buffer.from(t,"utf-8").toString("base64");return this.convertToURI(e)}static fromHex(t){return this.encode(t)}static fromUrlFormat(t){return this.convertFromURI(t)}static toUrlFormat(t){return this.convertToURI(t)}static toHex(t){return this.decode(t)}static toString(t){let e=t;return e.endsWith("=")||(e=this.convertFromURI(e)),vt$1.Buffer.from(e,"base64").toString("utf-8")}static decode(t){let e=t;return e.endsWith("=")||(e=this.convertFromURI(e)),vt$1.Buffer.from(e,"base64").toString("hex")}static encode(t){let e=vt$1.Buffer.from(t,"hex").toString("base64");return this.convertToURI(e)}static convertToURI(t){return t.replace(/[+/]/g,(t=>"+"==t?"-":"_")).replace(/=+$/m,"")}static convertFromURI(t){return t.replace(/[-_]/g,(t=>"-"==t?"+":"/"))+"="}}var BS={exports:{}},LS={},FS={},US=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return !1;if("symbol"==typeof Symbol.iterator)return !0;var t={},e=Symbol("test"),r=Object(e);if("string"==typeof e)return !1;if("[object Symbol]"!==Object.prototype.toString.call(e))return !1;if("[object Symbol]"!==Object.prototype.toString.call(r))return !1;for(e in t[e]=42,t)return !1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return !1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return !1;var n=Object.getOwnPropertySymbols(t);if(1!==n.length||n[0]!==e)return !1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return !1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(t,e);if(42!==i.value||!0!==i.enumerable)return !1}return !0},zS=US,KS=function(){return zS()&&!!Symbol.toStringTag},qS="undefined"!=typeof Symbol&&Symbol,HS=US,VS="Function.prototype.bind called on incompatible ",WS=Array.prototype.slice,JS=Object.prototype.toString,YS=function(t){var e=this;if("function"!=typeof e||"[object Function]"!==JS.call(e))throw new TypeError(VS+e);for(var r,n=WS.call(arguments,1),i=function(){if(this instanceof r){var i=e.apply(this,n.concat(WS.call(arguments)));return Object(i)===i?i:this}return e.apply(t,n.concat(WS.call(arguments)))},o=Math.max(0,e.length-n.length),a=[],s=0;s<o;s++)a.push("$"+s);if(r=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(i),e.prototype){var u=function(){};u.prototype=e.prototype,r.prototype=new u,u.prototype=null;}return r},ZS=Function.prototype.bind||YS,GS=ZS.call(Function.call,Object.prototype.hasOwnProperty),XS=SyntaxError,$S=Function,QS=TypeError,tE=function(t){try{return $S('"use strict"; return ('+t+").constructor;")()}catch(t){}},eE=Object.getOwnPropertyDescriptor,rE=function(){throw new QS},nE=eE?function(){try{return rE}catch(t){try{return eE(arguments,"callee").get}catch(t){return rE}}}():rE,iE="function"==typeof qS&&"function"==typeof Symbol&&"symbol"==typeof qS("foo")&&"symbol"==typeof Symbol("bar")&&HS(),oE=Object.getPrototypeOf||function(t){return t.__proto__},aE={},sE="undefined"==typeof Uint8Array?undefined:oE(Uint8Array),uE={"%AggregateError%":"undefined"==typeof AggregateError?undefined:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?undefined:ArrayBuffer,"%ArrayIteratorPrototype%":iE?oE([][Symbol.iterator]()):undefined,"%AsyncFromSyncIteratorPrototype%":undefined,"%AsyncFunction%":aE,"%AsyncGenerator%":aE,"%AsyncGeneratorFunction%":aE,"%AsyncIteratorPrototype%":aE,"%Atomics%":"undefined"==typeof Atomics?undefined:Atomics,"%BigInt%":"undefined"==typeof BigInt?undefined:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?undefined:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?undefined:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?undefined:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?undefined:FinalizationRegistry,"%Function%":$S,"%GeneratorFunction%":aE,"%Int8Array%":"undefined"==typeof Int8Array?undefined:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?undefined:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?undefined:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":iE?oE(oE([][Symbol.iterator]())):undefined,"%JSON%":"object"==typeof JSON?JSON:undefined,"%Map%":"undefined"==typeof Map?undefined:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&iE?oE((new Map)[Symbol.iterator]()):undefined,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?undefined:Promise,"%Proxy%":"undefined"==typeof Proxy?undefined:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?undefined:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?undefined:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&iE?oE((new Set)[Symbol.iterator]()):undefined,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?undefined:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":iE?oE(""[Symbol.iterator]()):undefined,"%Symbol%":iE?Symbol:undefined,"%SyntaxError%":XS,"%ThrowTypeError%":nE,"%TypedArray%":sE,"%TypeError%":QS,"%Uint8Array%":"undefined"==typeof Uint8Array?undefined:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?undefined:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?undefined:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?undefined:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?undefined:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?undefined:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?undefined:WeakSet},cE=function t(e){var r;if("%AsyncFunction%"===e)r=tE("async function () {}");else if("%GeneratorFunction%"===e)r=tE("function* () {}");else if("%AsyncGeneratorFunction%"===e)r=tE("async function* () {}");else if("%AsyncGenerator%"===e){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype);}else if("%AsyncIteratorPrototype%"===e){var i=t("%AsyncGenerator%");i&&(r=oE(i.prototype));}return uE[e]=r,r},lE={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},fE=ZS,hE=GS,dE=fE.call(Function.call,Array.prototype.concat),pE=fE.call(Function.apply,Array.prototype.splice),yE=fE.call(Function.call,String.prototype.replace),gE=fE.call(Function.call,String.prototype.slice),mE=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,bE=/\\(\\)?/g,vE=function(t){var e=gE(t,0,1),r=gE(t,-1);if("%"===e&&"%"!==r)throw new XS("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==e)throw new XS("invalid intrinsic syntax, expected opening `%`");var n=[];return yE(t,mE,(function(t,e,r,i){n[n.length]=r?yE(i,bE,"$1"):e||t;})),n},wE=function(t,e){var r,n=t;if(hE(lE,n)&&(n="%"+(r=lE[n])[0]+"%"),hE(uE,n)){var i=uE[n];if(i===aE&&(i=cE(n)),void 0===i&&!e)throw new QS("intrinsic "+t+" exists, but is not available. Please file an issue!");return {alias:r,name:n,value:i}}throw new XS("intrinsic "+t+" does not exist!")},_E=function(t,e){if("string"!=typeof t||0===t.length)throw new QS("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new QS('"allowMissing" argument must be a boolean');var r=vE(t),n=r.length>0?r[0]:"",i=wE("%"+n+"%",e),o=i.name,a=i.value,s=!1,u=i.alias;u&&(n=u[0],pE(r,dE([0,1],u)));for(var c=1,l=!0;c<r.length;c+=1){var f=r[c],h=gE(f,0,1),d=gE(f,-1);if(('"'===h||"'"===h||"`"===h||'"'===d||"'"===d||"`"===d)&&h!==d)throw new XS("property names with quotes must have matching quotes");if("constructor"!==f&&l||(s=!0),hE(uE,o="%"+(n+="."+f)+"%"))a=uE[o];else if(null!=a){if(!(f in a)){if(!e)throw new QS("base intrinsic for "+t+" exists, but the property is not available.");return}if(eE&&c+1>=r.length){var p=eE(a,f);a=(l=!!p)&&"get"in p&&!("originalValue"in p.get)?p.get:a[f];}else l=hE(a,f),a=a[f];l&&!s&&(uE[o]=a);}}return a},SE={exports:{}};!function(t){var e=ZS,r=_E,n=r("%Function.prototype.apply%"),i=r("%Function.prototype.call%"),o=r("%Reflect.apply%",!0)||e.call(i,n),a=r("%Object.getOwnPropertyDescriptor%",!0),s=r("%Object.defineProperty%",!0),u=r("%Math.max%");if(s)try{s({},"a",{value:1});}catch(t){s=null;}t.exports=function(t){var r=o(e,i,arguments);if(a&&s){var n=a(r,"length");n.configurable&&s(r,"length",{value:1+u(0,t.length-(arguments.length-1))});}return r};var c=function(){return o(e,n,arguments)};s?s(t.exports,"apply",{value:c}):t.exports.apply=c;}(SE);var EE=_E,IE=SE.exports,AE=IE(EE("String.prototype.indexOf")),kE=function(t,e){var r=EE(t,!!e);return "function"==typeof r&&AE(t,".prototype.")>-1?IE(r):r},DE=KS(),xE=kE("Object.prototype.toString"),TE=function(t){return !(DE&&t&&"object"==typeof t&&Symbol.toStringTag in t)&&"[object Arguments]"===xE(t)},PE=function(t){return !!TE(t)||null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Array]"!==xE(t)&&"[object Function]"===xE(t.callee)},OE=function(){return TE(arguments)}();TE.isLegacyArguments=PE;var RE,CE=OE?TE:PE,ME=Object.prototype.toString,NE=Function.prototype.toString,jE=/^\s*(?:function)?\*/,BE=KS(),LE=Object.getPrototypeOf,FE=function(t){if("function"!=typeof t)return !1;if(jE.test(NE.call(t)))return !0;if(!BE)return "[object GeneratorFunction]"===ME.call(t);if(!LE)return !1;if(void 0===RE){var e=function(){if(!BE)return !1;try{return Function("return function*() {}")()}catch(t){}}();RE=!!e&&LE(e);}return LE(t)===RE},UE=Object.prototype.hasOwnProperty,zE=Object.prototype.toString,KE=function(t,e,r){if("[object Function]"!==zE.call(e))throw new TypeError("iterator must be a function");var n=t.length;if(n===+n)for(var i=0;i<n;i++)e.call(r,t[i],i,t);else for(var o in t)UE.call(t,o)&&e.call(r,t[o],o,t);},qE=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],HE="undefined"==typeof globalThis?yt$1:globalThis,VE=function(){for(var t=[],e=0;e<qE.length;e++)"function"==typeof HE[qE[e]]&&(t[t.length]=qE[e]);return t},WE=_E("%Object.getOwnPropertyDescriptor%",!0);if(WE)try{WE([],"length");}catch(t){WE=null;}var JE=WE,YE=KE,ZE=VE,GE=kE,XE=GE("Object.prototype.toString"),$E=KS(),QE="undefined"==typeof globalThis?yt$1:globalThis,tI=ZE(),eI=GE("Array.prototype.indexOf",!0)||function(t,e){for(var r=0;r<t.length;r+=1)if(t[r]===e)return r;return -1},rI=GE("String.prototype.slice"),nI={},iI=JE,oI=Object.getPrototypeOf;$E&&iI&&oI&&YE(tI,(function(t){var e=new QE[t];if(Symbol.toStringTag in e){var r=oI(e),n=iI(r,Symbol.toStringTag);if(!n){var i=oI(r);n=iI(i,Symbol.toStringTag);}nI[t]=n.get;}}));var aI=function(t){if(!t||"object"!=typeof t)return !1;if(!$E||!(Symbol.toStringTag in t)){var e=rI(XE(t),8,-1);return eI(tI,e)>-1}return !!iI&&function(t){var e=!1;return YE(nI,(function(r,n){if(!e)try{e=r.call(t)===n;}catch(t){}})),e}(t)},sI=KE,uI=VE,cI=kE,lI=cI("Object.prototype.toString"),fI=KS(),hI="undefined"==typeof globalThis?yt$1:globalThis,dI=uI(),pI=cI("String.prototype.slice"),yI={},gI=JE,mI=Object.getPrototypeOf;fI&&gI&&mI&&sI(dI,(function(t){if("function"==typeof hI[t]){var e=new hI[t];if(Symbol.toStringTag in e){var r=mI(e),n=gI(r,Symbol.toStringTag);if(!n){var i=mI(r);n=gI(i,Symbol.toStringTag);}yI[t]=n.get;}}}));var bI=aI,vI=function(t){return !!bI(t)&&(fI&&Symbol.toStringTag in t?function(t){var e=!1;return sI(yI,(function(r,n){if(!e)try{var i=r.call(t);i===n&&(e=i);}catch(t){}})),e}(t):pI(lI(t),8,-1))};!function(t){var e=CE,r=FE,n=vI,i=aI;function o(t){return t.call.bind(t)}var a="undefined"!=typeof BigInt,s="undefined"!=typeof Symbol,u=o(Object.prototype.toString),c=o(Number.prototype.valueOf),l=o(String.prototype.valueOf),f=o(Boolean.prototype.valueOf);if(a)var h=o(BigInt.prototype.valueOf);if(s)var d=o(Symbol.prototype.valueOf);function p(t,e){if("object"!=typeof t)return !1;try{return e(t),!0}catch(t){return !1}}function y(t){return "[object Map]"===u(t)}function g(t){return "[object Set]"===u(t)}function m(t){return "[object WeakMap]"===u(t)}function b(t){return "[object WeakSet]"===u(t)}function v(t){return "[object ArrayBuffer]"===u(t)}function w(t){return "undefined"!=typeof ArrayBuffer&&(v.working?v(t):t instanceof ArrayBuffer)}function _(t){return "[object DataView]"===u(t)}function S(t){return "undefined"!=typeof DataView&&(_.working?_(t):t instanceof DataView)}t.isArgumentsObject=e,t.isGeneratorFunction=r,t.isTypedArray=i,t.isPromise=function(t){return "undefined"!=typeof Promise&&t instanceof Promise||null!==t&&"object"==typeof t&&"function"==typeof t.then&&"function"==typeof t.catch},t.isArrayBufferView=function(t){return "undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):i(t)||S(t)},t.isUint8Array=function(t){return "Uint8Array"===n(t)},t.isUint8ClampedArray=function(t){return "Uint8ClampedArray"===n(t)},t.isUint16Array=function(t){return "Uint16Array"===n(t)},t.isUint32Array=function(t){return "Uint32Array"===n(t)},t.isInt8Array=function(t){return "Int8Array"===n(t)},t.isInt16Array=function(t){return "Int16Array"===n(t)},t.isInt32Array=function(t){return "Int32Array"===n(t)},t.isFloat32Array=function(t){return "Float32Array"===n(t)},t.isFloat64Array=function(t){return "Float64Array"===n(t)},t.isBigInt64Array=function(t){return "BigInt64Array"===n(t)},t.isBigUint64Array=function(t){return "BigUint64Array"===n(t)},y.working="undefined"!=typeof Map&&y(new Map),t.isMap=function(t){return "undefined"!=typeof Map&&(y.working?y(t):t instanceof Map)},g.working="undefined"!=typeof Set&&g(new Set),t.isSet=function(t){return "undefined"!=typeof Set&&(g.working?g(t):t instanceof Set)},m.working="undefined"!=typeof WeakMap&&m(new WeakMap),t.isWeakMap=function(t){return "undefined"!=typeof WeakMap&&(m.working?m(t):t instanceof WeakMap)},b.working="undefined"!=typeof WeakSet&&b(new WeakSet),t.isWeakSet=function(t){return b(t)},v.working="undefined"!=typeof ArrayBuffer&&v(new ArrayBuffer),t.isArrayBuffer=w,_.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&_(new DataView(new ArrayBuffer(1),0,1)),t.isDataView=S;var E="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function I(t){return "[object SharedArrayBuffer]"===u(t)}function A(t){return void 0!==E&&(void 0===I.working&&(I.working=I(new E)),I.working?I(t):t instanceof E)}function k(t){return p(t,c)}function D(t){return p(t,l)}function x(t){return p(t,f)}function T(t){return a&&p(t,h)}function P(t){return s&&p(t,d)}t.isSharedArrayBuffer=A,t.isAsyncFunction=function(t){return "[object AsyncFunction]"===u(t)},t.isMapIterator=function(t){return "[object Map Iterator]"===u(t)},t.isSetIterator=function(t){return "[object Set Iterator]"===u(t)},t.isGeneratorObject=function(t){return "[object Generator]"===u(t)},t.isWebAssemblyCompiledModule=function(t){return "[object WebAssembly.Module]"===u(t)},t.isNumberObject=k,t.isStringObject=D,t.isBooleanObject=x,t.isBigIntObject=T,t.isSymbolObject=P,t.isBoxedPrimitive=function(t){return k(t)||D(t)||x(t)||T(t)||P(t)},t.isAnyArrayBuffer=function(t){return "undefined"!=typeof Uint8Array&&(w(t)||A(t))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(e){Object.defineProperty(t,e,{enumerable:!1,value:function(){throw new Error(e+" is not supported in userland")}});}));}(FS);var wI=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8},_I={};function SI(t){return SI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},SI(t)}function EI(t,e){return !e||"object"!==SI(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function II(t){return II=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},II(t)}function AI(t,e){return AI=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},AI(t,e)}!function(t){var e=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),r={},n=0;n<e.length;n++)r[e[n]]=Object.getOwnPropertyDescriptor(t,e[n]);return r},r=/%[sdj%]/g;t.format=function(t){if(!g(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(a(arguments[n]));return e.join(" ")}n=1;for(var i=arguments,o=i.length,s=String(t).replace(r,(function(t){if("%%"===t)return "%";if(n>=o)return t;switch(t){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(t){return "[Circular]"}default:return t}})),u=i[n];n<o;u=i[++n])p(u)||!v(u)?s+=" "+u:s+=" "+a(u);return s},t.deprecate=function(e,r){if(void 0!==ke$1&&!0===ke$1.noDeprecation)return e;if(void 0===ke$1)return function(){return t.deprecate(e,r).apply(this,arguments)};var n=!1;return function(){if(!n){if(ke$1.throwDeprecation)throw new Error(r);ke$1.traceDeprecation?console.trace(r):console.error(r),n=!0;}return e.apply(this,arguments)}};var n={},i=/^$/;if(ke$1.env.NODE_DEBUG){var o=ke$1.env.NODE_DEBUG;o=o.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),i=new RegExp("^"+o+"$","i");}function a(e,r){var n={seen:[],stylize:u};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),d(r)?n.showHidden=r:r&&t._extend(n,r),m(n.showHidden)&&(n.showHidden=!1),m(n.depth)&&(n.depth=2),m(n.colors)&&(n.colors=!1),m(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=s),c(n,e,n.depth)}function s(t,e){var r=a.styles[e];return r?"["+a.colors[r][0]+"m"+t+"["+a.colors[r][1]+"m":t}function u(t,e){return t}function c(e,r,n){if(e.customInspect&&r&&S(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var i=r.inspect(n,e);return g(i)||(i=c(e,i,n)),i}var o=function(t,e){if(m(e))return t.stylize("undefined","undefined");if(g(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}if(y(e))return t.stylize(""+e,"number");if(d(e))return t.stylize(""+e,"boolean");if(p(e))return t.stylize("null","null")}(e,r);if(o)return o;var a=Object.keys(r),s=function(t){var e={};return t.forEach((function(t,r){e[t]=!0;})),e}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(r)),_(r)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return l(r);if(0===a.length){if(S(r)){var u=r.name?": "+r.name:"";return e.stylize("[Function"+u+"]","special")}if(b(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(w(r))return e.stylize(Date.prototype.toString.call(r),"date");if(_(r))return l(r)}var v,E="",I=!1,A=["{","}"];(h(r)&&(I=!0,A=["[","]"]),S(r))&&(E=" [Function"+(r.name?": "+r.name:"")+"]");return b(r)&&(E=" "+RegExp.prototype.toString.call(r)),w(r)&&(E=" "+Date.prototype.toUTCString.call(r)),_(r)&&(E=" "+l(r)),0!==a.length||I&&0!=r.length?n<0?b(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),v=I?function(t,e,r,n,i){for(var o=[],a=0,s=e.length;a<s;++a)D(e,String(a))?o.push(f(t,e,r,n,String(a),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(f(t,e,r,n,i,!0));})),o}(e,r,n,s,a):a.map((function(t){return f(e,r,n,s,t,I)})),e.seen.pop(),function(t,e,r){if(t.reduce((function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1];return r[0]+e+" "+t.join(", ")+" "+r[1]}(v,E,A)):A[0]+E+A[1]}function l(t){return "["+Error.prototype.toString.call(t)+"]"}function f(t,e,r,n,i,o){var a,s,u;if((u=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?s=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(s=t.stylize("[Setter]","special")),D(n,i)||(a="["+i+"]"),s||(t.seen.indexOf(u.value)<0?(s=p(r)?c(t,u.value,null):c(t,u.value,r-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map((function(t){return "  "+t})).join("\n").substr(2):"\n"+s.split("\n").map((function(t){return "   "+t})).join("\n")):s=t.stylize("[Circular]","special")),m(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"));}return a+": "+s}function h(t){return Array.isArray(t)}function d(t){return "boolean"==typeof t}function p(t){return null===t}function y(t){return "number"==typeof t}function g(t){return "string"==typeof t}function m(t){return void 0===t}function b(t){return v(t)&&"[object RegExp]"===E(t)}function v(t){return "object"==typeof t&&null!==t}function w(t){return v(t)&&"[object Date]"===E(t)}function _(t){return v(t)&&("[object Error]"===E(t)||t instanceof Error)}function S(t){return "function"==typeof t}function E(t){return Object.prototype.toString.call(t)}function I(t){return t<10?"0"+t.toString(10):t.toString(10)}t.debuglog=function(e){if(e=e.toUpperCase(),!n[e])if(i.test(e)){var r=ke$1.pid;n[e]=function(){var n=t.format.apply(t,arguments);console.error("%s %d: %s",e,r,n);};}else n[e]=function(){};return n[e]},t.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.types=FS,t.isArray=h,t.isBoolean=d,t.isNull=p,t.isNullOrUndefined=function(t){return null==t},t.isNumber=y,t.isString=g,t.isSymbol=function(t){return "symbol"==typeof t},t.isUndefined=m,t.isRegExp=b,t.types.isRegExp=b,t.isObject=v,t.isDate=w,t.types.isDate=w,t.isError=_,t.types.isNativeError=_,t.isFunction=S,t.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},t.isBuffer=wI;var A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function k(){var t=new Date,e=[I(t.getHours()),I(t.getMinutes()),I(t.getSeconds())].join(":");return [t.getDate(),A[t.getMonth()],e].join(" ")}function D(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.log=function(){console.log("%s - %s",k(),t.format.apply(t,arguments));},t.inherits=Or$1.exports,t._extend=function(t,e){if(!e||!v(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t};var x="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function T(t,e){if(!t){var r=new Error("Promise was rejected with a falsy value");r.reason=t,t=r;}return e(t)}t.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(x&&t[x]){var r;if("function"!=typeof(r=t[x]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(r,x,{value:r,enumerable:!1,writable:!1,configurable:!0}),r}function r(){for(var e,r,n=new Promise((function(t,n){e=t,r=n;})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(t,n){t?r(t):e(n);}));try{t.apply(this,i);}catch(t){r(t);}return n}return Object.setPrototypeOf(r,Object.getPrototypeOf(t)),x&&Object.defineProperty(r,x,{value:r,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(r,e(t))},t.promisify.custom=x,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function r(){for(var e=[],r=0;r<arguments.length;r++)e.push(arguments[r]);var n=e.pop();if("function"!=typeof n)throw new TypeError("The last argument must be of type Function");var i=this,o=function(){return n.apply(i,arguments)};t.apply(this,e).then((function(t){de$1(o.bind(null,null,t));}),(function(t){de$1(T.bind(null,t,o));}));}return Object.setPrototypeOf(r,Object.getPrototypeOf(t)),Object.defineProperties(r,e(t)),r};}(_I);var kI,DI,xI={};function TI(t,e,r){r||(r=Error);var n=function(r){function n(r,i,o){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),a=EI(this,II(n).call(this,function(t,r,n){return "string"==typeof e?e:e(t,r,n)}(r,i,o))),a.code=t,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&AI(t,e);}(n,r),n}(r);xI[t]=n;}function PI(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map((function(t){return String(t)})),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:2===r?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return "of ".concat(e," ").concat(String(t))}function OI(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function RI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n);}}function CI(t,e){return !e||"object"!==UI(e)&&"function"!=typeof e?MI(t):e}function MI(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function NI(t){var e="function"==typeof Map?new Map:void 0;return NI=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n);}function n(){return BI(t,arguments,FI(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),LI(n,t)},NI(t)}function jI(){if("undefined"==typeof Reflect||!Reflect.construct)return !1;if(Reflect.construct.sham)return !1;if("function"==typeof Proxy)return !0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return !1}}function BI(t,e,r){return BI=jI()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var i=new(Function.bind.apply(t,n));return r&&LI(i,r.prototype),i},BI.apply(null,arguments)}function LI(t,e){return LI=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},LI(t,e)}function FI(t){return FI=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},FI(t)}function UI(t){return UI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},UI(t)}TI("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),TI("ERR_INVALID_ARG_TYPE",(function(t,e,r){var n,i,a;if(void 0===kI&&(kI=null),kI("string"==typeof t,"'name' must be a string"),"string"==typeof e&&(i="not ",e.substr(0,i.length)===i)?(n="must not be",e=e.replace(/^not /,"")):n="must be",function(t,e,r){return (void 0===r||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}(t," argument"))a="The ".concat(t," ").concat(n," ").concat(PI(e,"type"));else {var s=function(t,e,r){return "number"!=typeof r&&(r=0),!(r+e.length>t.length)&&-1!==t.indexOf(e,r)}(t,".")?"property":"argument";a='The "'.concat(t,'" ').concat(s," ").concat(n," ").concat(PI(e,"type"));}return a+=". Received type ".concat(SI(r))}),TypeError),TI("ERR_INVALID_ARG_VALUE",(function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===DI&&(DI=_I);var n=DI.inspect(e);return n.length>128&&(n="".concat(n.slice(0,128),"...")),"The argument '".concat(t,"' ").concat(r,". Received ").concat(n)}),TypeError),TI("ERR_INVALID_RETURN_VALUE",(function(t,e,r){var n;return n=r&&r.constructor&&r.constructor.name?"instance of ".concat(r.constructor.name):"type ".concat(SI(r)),"Expected ".concat(t,' to be returned from the "').concat(e,'"')+" function but got ".concat(n,".")}),TypeError),TI("ERR_MISSING_ARGS",(function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];void 0===kI&&(kI=null),kI(e.length>0,"At least one arg needs to be specified");var n="The ",i=e.length;switch(e=e.map((function(t){return '"'.concat(t,'"')})),i){case 1:n+="".concat(e[0]," argument");break;case 2:n+="".concat(e[0]," and ").concat(e[1]," arguments");break;default:n+=e.slice(0,i-1).join(", "),n+=", and ".concat(e[i-1]," arguments");}return "".concat(n," must be specified")}),TypeError),LS.codes=xI;var zI=_I.inspect,KI=LS.codes.ERR_INVALID_ARG_TYPE;function qI(t,e,r){return (void 0===r||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}var HI="",VI="",WI="",JI="",YI={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function ZI(t){var e=Object.keys(t),r=Object.create(Object.getPrototypeOf(t));return e.forEach((function(e){r[e]=t[e];})),Object.defineProperty(r,"message",{value:t.message}),r}function GI(t){return zI(t,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function XI(t,e,r){var n="",i="",o=0,a="",s=!1,u=GI(t),c=u.split("\n"),l=GI(e).split("\n"),f=0,h="";if("strictEqual"===r&&"object"===UI(t)&&"object"===UI(e)&&null!==t&&null!==e&&(r="strictEqualObject"),1===c.length&&1===l.length&&c[0]!==l[0]){var d=c[0].length+l[0].length;if(d<=10){if(!("object"===UI(t)&&null!==t||"object"===UI(e)&&null!==e||0===t&&0===e))return "".concat(YI[r],"\n\n")+"".concat(c[0]," !== ").concat(l[0],"\n")}else if("strictEqualObject"!==r){if(d<(ke$1.stderr&&ke$1.stderr.isTTY?ke$1.stderr.columns:80)){for(;c[0][f]===l[0][f];)f++;f>2&&(h="\n  ".concat(function(t,e){if(e=Math.floor(e),0==t.length||0==e)return "";var r=t.length*e;for(e=Math.floor(Math.log(e)/Math.log(2));e;)t+=t,e--;return t+t.substring(0,r-t.length)}(" ",f),"^"),f=0);}}}for(var p=c[c.length-1],y=l[l.length-1];p===y&&(f++<2?a="\n  ".concat(p).concat(a):n=p,c.pop(),l.pop(),0!==c.length&&0!==l.length);)p=c[c.length-1],y=l[l.length-1];var g=Math.max(c.length,l.length);if(0===g){var m=u.split("\n");if(m.length>30)for(m[26]="".concat(HI,"...").concat(JI);m.length>27;)m.pop();return "".concat(YI.notIdentical,"\n\n").concat(m.join("\n"),"\n")}f>3&&(a="\n".concat(HI,"...").concat(JI).concat(a),s=!0),""!==n&&(a="\n  ".concat(n).concat(a),n="");var b=0,v=YI[r]+"\n".concat(VI,"+ actual").concat(JI," ").concat(WI,"- expected").concat(JI),w=" ".concat(HI,"...").concat(JI," Lines skipped");for(f=0;f<g;f++){var _=f-o;if(c.length<f+1)_>1&&f>2&&(_>4?(i+="\n".concat(HI,"...").concat(JI),s=!0):_>3&&(i+="\n  ".concat(l[f-2]),b++),i+="\n  ".concat(l[f-1]),b++),o=f,n+="\n".concat(WI,"-").concat(JI," ").concat(l[f]),b++;else if(l.length<f+1)_>1&&f>2&&(_>4?(i+="\n".concat(HI,"...").concat(JI),s=!0):_>3&&(i+="\n  ".concat(c[f-2]),b++),i+="\n  ".concat(c[f-1]),b++),o=f,i+="\n".concat(VI,"+").concat(JI," ").concat(c[f]),b++;else {var S=l[f],E=c[f],I=E!==S&&(!qI(E,",")||E.slice(0,-1)!==S);I&&qI(S,",")&&S.slice(0,-1)===E&&(I=!1,E+=","),I?(_>1&&f>2&&(_>4?(i+="\n".concat(HI,"...").concat(JI),s=!0):_>3&&(i+="\n  ".concat(c[f-2]),b++),i+="\n  ".concat(c[f-1]),b++),o=f,i+="\n".concat(VI,"+").concat(JI," ").concat(E),n+="\n".concat(WI,"-").concat(JI," ").concat(S),b+=2):(i+=n,n="",1!==_&&0!==f||(i+="\n  ".concat(E),b++));}if(b>20&&f<g-2)return "".concat(v).concat(w,"\n").concat(i,"\n").concat(HI,"...").concat(JI).concat(n,"\n")+"".concat(HI,"...").concat(JI)}return "".concat(v).concat(s?w:"","\n").concat(i).concat(n).concat(a).concat(h)}var $I=function(t){function e(t){var r;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),"object"!==UI(t)||null===t)throw new KI("options","Object",t);var n=t.message,i=t.operator,o=t.stackStartFn,a=t.actual,s=t.expected,u=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=n)r=CI(this,FI(e).call(this,String(n)));else if(ke$1.stderr&&ke$1.stderr.isTTY&&(ke$1.stderr&&ke$1.stderr.getColorDepth&&1!==ke$1.stderr.getColorDepth()?(HI="[34m",VI="[32m",JI="[39m",WI="[31m"):(HI="",VI="",JI="",WI="")),"object"===UI(a)&&null!==a&&"object"===UI(s)&&null!==s&&"stack"in a&&a instanceof Error&&"stack"in s&&s instanceof Error&&(a=ZI(a),s=ZI(s)),"deepStrictEqual"===i||"strictEqual"===i)r=CI(this,FI(e).call(this,XI(a,s,i)));else if("notDeepStrictEqual"===i||"notStrictEqual"===i){var c=YI[i],l=GI(a).split("\n");if("notStrictEqual"===i&&"object"===UI(a)&&null!==a&&(c=YI.notStrictEqualObject),l.length>30)for(l[26]="".concat(HI,"...").concat(JI);l.length>27;)l.pop();r=1===l.length?CI(this,FI(e).call(this,"".concat(c," ").concat(l[0]))):CI(this,FI(e).call(this,"".concat(c,"\n\n").concat(l.join("\n"),"\n")));}else {var f=GI(a),h="",d=YI[i];"notDeepEqual"===i||"notEqual"===i?(f="".concat(YI[i],"\n\n").concat(f)).length>1024&&(f="".concat(f.slice(0,1021),"...")):(h="".concat(GI(s)),f.length>512&&(f="".concat(f.slice(0,509),"...")),h.length>512&&(h="".concat(h.slice(0,509),"...")),"deepEqual"===i||"equal"===i?f="".concat(d,"\n\n").concat(f,"\n\nshould equal\n\n"):h=" ".concat(i," ").concat(h)),r=CI(this,FI(e).call(this,"".concat(f).concat(h)));}return Error.stackTraceLimit=u,r.generatedMessage=!n,Object.defineProperty(MI(r),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),r.code="ERR_ASSERTION",r.actual=a,r.expected=s,r.operator=i,Error.captureStackTrace&&Error.captureStackTrace(MI(r),o),r.name="AssertionError",CI(r)}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&LI(t,e);}(e,NI(Error)),r=e,n=[{key:"toString",value:function(){return "".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:zI.custom,value:function(t,e){return zI(this,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})))),n.forEach((function(e){OI(t,e,r[e]);}));}return t}({},e,{customInspect:!1,depth:0}))}}],n&&RI(r.prototype,n),e}(),QI=$I;function tA(t,e){if(null==t)throw new TypeError("Cannot convert first argument to object");for(var r=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var o=Object.keys(Object(i)),a=0,s=o.length;a<s;a++){var u=o[a],c=Object.getOwnPropertyDescriptor(i,u);void 0!==c&&c.enumerable&&(r[u]=i[u]);}}return r}var eA,rA={assign:tA,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:tA});}},nA=Object.prototype.toString,iA=function(t){var e=nA.call(t),r="[object Arguments]"===e;return r||(r="[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===nA.call(t.callee)),r};if(!Object.keys){var oA=Object.prototype.hasOwnProperty,aA=Object.prototype.toString,sA=iA,uA=Object.prototype.propertyIsEnumerable,cA=!uA.call({toString:null},"toString"),lA=uA.call((function(){}),"prototype"),fA=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],hA=function(t){var e=t.constructor;return e&&e.prototype===t},dA={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},pA=function(){if("undefined"==typeof window)return !1;for(var t in window)try{if(!dA["$"+t]&&oA.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{hA(window[t]);}catch(t){return !0}}catch(t){return !0}return !1}();eA=function(t){var e=null!==t&&"object"==typeof t,r="[object Function]"===aA.call(t),n=sA(t),i=e&&"[object String]"===aA.call(t),o=[];if(!e&&!r&&!n)throw new TypeError("Object.keys called on a non-object");var a=lA&&r;if(i&&t.length>0&&!oA.call(t,0))for(var s=0;s<t.length;++s)o.push(String(s));if(n&&t.length>0)for(var u=0;u<t.length;++u)o.push(String(u));else for(var c in t)a&&"prototype"===c||!oA.call(t,c)||o.push(String(c));if(cA)for(var l=function(t){if("undefined"==typeof window||!pA)return hA(t);try{return hA(t)}catch(t){return !1}}(t),f=0;f<fA.length;++f)l&&"constructor"===fA[f]||!oA.call(t,fA[f])||o.push(fA[f]);return o};}var yA=eA,gA=Array.prototype.slice,mA=iA,bA=Object.keys,vA=bA?function(t){return bA(t)}:yA,wA=Object.keys;vA.shim=function(){if(Object.keys){var t=function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2);t||(Object.keys=function(t){return mA(t)?wA(gA.call(t)):wA(t)});}else Object.keys=vA;return Object.keys||vA};var _A=vA,SA="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),EA=Object.prototype.toString,IA=Array.prototype.concat,AA=Object.defineProperty,kA=AA&&function(){var t={};try{for(var e in AA(t,"x",{enumerable:!1,value:t}),t)return !1;return t.x===t}catch(t){return !1}}(),DA=function(t,e,r,n){var i;(!(e in t)||"function"==typeof(i=n)&&"[object Function]"===EA.call(i)&&n())&&(kA?AA(t,e,{configurable:!0,enumerable:!1,value:r,writable:!0}):t[e]=r);},xA=function(t,e){var r=arguments.length>2?arguments[2]:{},n=_A(e);SA&&(n=IA.call(n,Object.getOwnPropertySymbols(e)));for(var i=0;i<n.length;i+=1)DA(t,n[i],e[n[i]],r[n[i]]);};xA.supportsDescriptors=!!kA;var TA=xA,PA=function(t){return t!=t},OA=function(t,e){return 0===t&&0===e?1/t==1/e:t===e||!(!PA(t)||!PA(e))},RA=OA,CA=function(){return "function"==typeof Object.is?Object.is:RA},MA=CA,NA=TA,jA=TA,BA=OA,LA=CA,FA=function(){var t=MA();return NA(Object,{is:t},{is:function(){return Object.is!==t}}),t},UA=(0, SE.exports)(LA(),Object);jA(UA,{getPolyfill:LA,implementation:BA,shim:FA});var zA=UA,KA=function(t){return t!=t},qA=KA,HA=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:qA},VA=TA,WA=HA,JA=TA,YA=KA,ZA=HA,GA=function(){var t=WA();return VA(Number,{isNaN:t},{isNaN:function(){return Number.isNaN!==t}}),t},XA=(0, SE.exports)(ZA(),Number);JA(XA,{getPolyfill:ZA,implementation:YA,shim:GA});var $A=XA;function QA(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t;}finally{try{n||null==s.return||s.return();}finally{if(i)throw o}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function tk(t){return tk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tk(t)}var ek=void 0!==/a/g.flags,rk=function(t){var e=[];return t.forEach((function(t){return e.push(t)})),e},nk=function(t){var e=[];return t.forEach((function(t,r){return e.push([r,t])})),e},ik=Object.is?Object.is:zA,ok=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return []},ak=Number.isNaN?Number.isNaN:$A;function sk(t){return t.call.bind(t)}var uk=sk(Object.prototype.hasOwnProperty),ck=sk(Object.prototype.propertyIsEnumerable),lk=sk(Object.prototype.toString),fk=_I.types,hk=fk.isAnyArrayBuffer,dk=fk.isArrayBufferView,pk=fk.isDate,yk=fk.isMap,gk=fk.isRegExp,mk=fk.isSet,bk=fk.isNativeError,vk=fk.isBoxedPrimitive,wk=fk.isNumberObject,_k=fk.isStringObject,Sk=fk.isBooleanObject,Ek=fk.isBigIntObject,Ik=fk.isSymbolObject,Ak=fk.isFloat32Array,kk=fk.isFloat64Array;function Dk(t){if(0===t.length||t.length>10)return !0;for(var e=0;e<t.length;e++){var r=t.charCodeAt(e);if(r<48||r>57)return !0}return 10===t.length&&t>=Math.pow(2,32)}function xk(t){return Object.keys(t).filter(Dk).concat(ok(t).filter(Object.prototype.propertyIsEnumerable.bind(t)))}
	/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */function Tk(t,e){if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0}function Pk(t,e,r,n){if(t===e)return 0!==t||(!r||ik(t,e));if(r){if("object"!==tk(t))return "number"==typeof t&&ak(t)&&ak(e);if("object"!==tk(e)||null===t||null===e)return !1;if(Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return !1}else {if(null===t||"object"!==tk(t))return (null===e||"object"!==tk(e))&&t==e;if(null===e||"object"!==tk(e))return !1}var i,o,a,s,u=lk(t);if(u!==lk(e))return !1;if(Array.isArray(t)){if(t.length!==e.length)return !1;var c=xk(t),l=xk(e);return c.length===l.length&&Rk(t,e,r,n,1,c)}if("[object Object]"===u&&(!yk(t)&&yk(e)||!mk(t)&&mk(e)))return !1;if(pk(t)){if(!pk(e)||Date.prototype.getTime.call(t)!==Date.prototype.getTime.call(e))return !1}else if(gk(t)){if(!gk(e)||(a=t,s=e,!(ek?a.source===s.source&&a.flags===s.flags:RegExp.prototype.toString.call(a)===RegExp.prototype.toString.call(s))))return !1}else if(bk(t)||t instanceof Error){if(t.message!==e.message||t.name!==e.name)return !1}else {if(dk(t)){if(r||!Ak(t)&&!kk(t)){if(!function(t,e){return t.byteLength===e.byteLength&&0===Tk(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}(t,e))return !1}else if(!function(t,e){if(t.byteLength!==e.byteLength)return !1;for(var r=0;r<t.byteLength;r++)if(t[r]!==e[r])return !1;return !0}(t,e))return !1;var f=xk(t),h=xk(e);return f.length===h.length&&Rk(t,e,r,n,0,f)}if(mk(t))return !(!mk(e)||t.size!==e.size)&&Rk(t,e,r,n,2);if(yk(t))return !(!yk(e)||t.size!==e.size)&&Rk(t,e,r,n,3);if(hk(t)){if(o=e,(i=t).byteLength!==o.byteLength||0!==Tk(new Uint8Array(i),new Uint8Array(o)))return !1}else if(vk(t)&&!function(t,e){return wk(t)?wk(e)&&ik(Number.prototype.valueOf.call(t),Number.prototype.valueOf.call(e)):_k(t)?_k(e)&&String.prototype.valueOf.call(t)===String.prototype.valueOf.call(e):Sk(t)?Sk(e)&&Boolean.prototype.valueOf.call(t)===Boolean.prototype.valueOf.call(e):Ek(t)?Ek(e)&&BigInt.prototype.valueOf.call(t)===BigInt.prototype.valueOf.call(e):Ik(e)&&Symbol.prototype.valueOf.call(t)===Symbol.prototype.valueOf.call(e)}(t,e))return !1}return Rk(t,e,r,n,0)}function Ok(t,e){return e.filter((function(e){return ck(t,e)}))}function Rk(t,e,r,n,i,o){if(5===arguments.length){o=Object.keys(t);var a=Object.keys(e);if(o.length!==a.length)return !1}for(var s=0;s<o.length;s++)if(!uk(e,o[s]))return !1;if(r&&5===arguments.length){var u=ok(t);if(0!==u.length){var c=0;for(s=0;s<u.length;s++){var l=u[s];if(ck(t,l)){if(!ck(e,l))return !1;o.push(l),c++;}else if(ck(e,l))return !1}var f=ok(e);if(u.length!==f.length&&Ok(e,f).length!==c)return !1}else {var h=ok(e);if(0!==h.length&&0!==Ok(e,h).length)return !1}}if(0===o.length&&(0===i||1===i&&0===t.length||0===t.size))return !0;if(void 0===n)n={val1:new Map,val2:new Map,position:0};else {var d=n.val1.get(t);if(void 0!==d){var p=n.val2.get(e);if(void 0!==p)return d===p}n.position++;}n.val1.set(t,n.position),n.val2.set(e,n.position);var y=Lk(t,e,r,o,n,i);return n.val1.delete(t),n.val2.delete(e),y}function Ck(t,e,r,n){for(var i=rk(t),o=0;o<i.length;o++){var a=i[o];if(Pk(e,a,r,n))return t.delete(a),!0}return !1}function Mk(t){switch(tk(t)){case"undefined":return null;case"object":return;case"symbol":return !1;case"string":t=+t;case"number":if(ak(t))return !1}return !0}function Nk(t,e,r){var n=Mk(r);return null!=n?n:e.has(n)&&!t.has(n)}function jk(t,e,r,n,i){var o=Mk(r);if(null!=o)return o;var a=e.get(o);return !(void 0===a&&!e.has(o)||!Pk(n,a,!1,i))&&(!t.has(o)&&Pk(n,a,!1,i))}function Bk(t,e,r,n,i,o){for(var a=rk(t),s=0;s<a.length;s++){var u=a[s];if(Pk(r,u,i,o)&&Pk(n,e.get(u),i,o))return t.delete(u),!0}return !1}function Lk(t,e,r,n,i,o){var a=0;if(2===o){if(!function(t,e,r,n){for(var i=null,o=rk(t),a=0;a<o.length;a++){var s=o[a];if("object"===tk(s)&&null!==s)null===i&&(i=new Set),i.add(s);else if(!e.has(s)){if(r)return !1;if(!Nk(t,e,s))return !1;null===i&&(i=new Set),i.add(s);}}if(null!==i){for(var u=rk(e),c=0;c<u.length;c++){var l=u[c];if("object"===tk(l)&&null!==l){if(!Ck(i,l,r,n))return !1}else if(!r&&!t.has(l)&&!Ck(i,l,r,n))return !1}return 0===i.size}return !0}(t,e,r,i))return !1}else if(3===o){if(!function(t,e,r,n){for(var i=null,o=nk(t),a=0;a<o.length;a++){var s=QA(o[a],2),u=s[0],c=s[1];if("object"===tk(u)&&null!==u)null===i&&(i=new Set),i.add(u);else {var l=e.get(u);if(void 0===l&&!e.has(u)||!Pk(c,l,r,n)){if(r)return !1;if(!jk(t,e,u,c,n))return !1;null===i&&(i=new Set),i.add(u);}}}if(null!==i){for(var f=nk(e),h=0;h<f.length;h++){var d=QA(f[h],2),p=(u=d[0],d[1]);if("object"===tk(u)&&null!==u){if(!Bk(i,t,u,p,r,n))return !1}else if(!(r||t.has(u)&&Pk(t.get(u),p,!1,n)||Bk(i,t,u,p,!1,n)))return !1}return 0===i.size}return !0}(t,e,r,i))return !1}else if(1===o)for(;a<t.length;a++){if(!uk(t,a)){if(uk(e,a))return !1;for(var s=Object.keys(t);a<s.length;a++){var u=s[a];if(!uk(e,u)||!Pk(t[u],e[u],r,i))return !1}return s.length===Object.keys(e).length}if(!uk(e,a)||!Pk(t[a],e[a],r,i))return !1}for(a=0;a<n.length;a++){var c=n[a];if(!Pk(t[c],e[c],r,i))return !1}return !0}var Fk={isDeepEqual:function(t,e){return Pk(t,e,false)},isDeepStrictEqual:function(t,e){return Pk(t,e,true)}};function Uk(t){return Uk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uk(t)}var zk,Kk,qk=LS.codes,Hk=qk.ERR_AMBIGUOUS_ARGUMENT,Vk=qk.ERR_INVALID_ARG_TYPE,Wk=qk.ERR_INVALID_ARG_VALUE,Jk=qk.ERR_INVALID_RETURN_VALUE,Yk=qk.ERR_MISSING_ARGS,Zk=QI,Gk=_I.inspect,Xk=_I.types,$k=Xk.isPromise,Qk=Xk.isRegExp,tD=Object.assign?Object.assign:rA.assign,eD=Object.is?Object.is:zA;function rD(){zk=Fk.isDeepEqual,Kk=Fk.isDeepStrictEqual;}var nD=!1,iD=BS.exports=uD,oD={};function aD(t){if(t.message instanceof Error)throw t.message;throw new Zk(t)}function sD(t,e,r,n){if(!r){var i=!1;if(0===e)i=!0,n="No value argument passed to `assert.ok()`";else if(n instanceof Error)throw n;var o=new Zk({actual:r,expected:!0,message:n,operator:"==",stackStartFn:t});throw o.generatedMessage=i,o}}function uD(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];sD.apply(void 0,[uD,e.length].concat(e));}iD.fail=function t(e,r,n,i,o){var a,s=arguments.length;if(0===s)a="Failed";else if(1===s)n=e,e=void 0;else {if(!1===nD){nD=!0;var u=ke$1.emitWarning?ke$1.emitWarning:console.warn.bind(console);u("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094");}2===s&&(i="!=");}if(n instanceof Error)throw n;var c={actual:e,expected:r,operator:void 0===i?"fail":i,stackStartFn:o||t};void 0!==n&&(c.message=n);var l=new Zk(c);throw a&&(l.message=a,l.generatedMessage=!0),l},iD.AssertionError=Zk,iD.ok=uD,iD.equal=function t(e,r,n){if(arguments.length<2)throw new Yk("actual","expected");e!=r&&aD({actual:e,expected:r,message:n,operator:"==",stackStartFn:t});},iD.notEqual=function t(e,r,n){if(arguments.length<2)throw new Yk("actual","expected");e==r&&aD({actual:e,expected:r,message:n,operator:"!=",stackStartFn:t});},iD.deepEqual=function t(e,r,n){if(arguments.length<2)throw new Yk("actual","expected");void 0===zk&&rD(),zk(e,r)||aD({actual:e,expected:r,message:n,operator:"deepEqual",stackStartFn:t});},iD.notDeepEqual=function t(e,r,n){if(arguments.length<2)throw new Yk("actual","expected");void 0===zk&&rD(),zk(e,r)&&aD({actual:e,expected:r,message:n,operator:"notDeepEqual",stackStartFn:t});},iD.deepStrictEqual=function t(e,r,n){if(arguments.length<2)throw new Yk("actual","expected");void 0===zk&&rD(),Kk(e,r)||aD({actual:e,expected:r,message:n,operator:"deepStrictEqual",stackStartFn:t});},iD.notDeepStrictEqual=function t(e,r,n){if(arguments.length<2)throw new Yk("actual","expected");void 0===zk&&rD();Kk(e,r)&&aD({actual:e,expected:r,message:n,operator:"notDeepStrictEqual",stackStartFn:t});},iD.strictEqual=function t(e,r,n){if(arguments.length<2)throw new Yk("actual","expected");eD(e,r)||aD({actual:e,expected:r,message:n,operator:"strictEqual",stackStartFn:t});},iD.notStrictEqual=function t(e,r,n){if(arguments.length<2)throw new Yk("actual","expected");eD(e,r)&&aD({actual:e,expected:r,message:n,operator:"notStrictEqual",stackStartFn:t});};var cD=function t(e,r,n){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r.forEach((function(t){t in e&&(void 0!==n&&"string"==typeof n[t]&&Qk(e[t])&&e[t].test(n[t])?i[t]=n[t]:i[t]=e[t]);}));};function lD(t,e,r,n,i,o){if(!(r in t)||!Kk(t[r],e[r])){if(!n){var a=new cD(t,i),s=new cD(e,i,t),u=new Zk({actual:a,expected:s,operator:"deepStrictEqual",stackStartFn:o});throw u.actual=t,u.expected=e,u.operator=o.name,u}aD({actual:t,expected:e,message:n,operator:o.name,stackStartFn:o});}}function fD(t,e,r,n){if("function"!=typeof e){if(Qk(e))return e.test(t);if(2===arguments.length)throw new Vk("expected",["Function","RegExp"],e);if("object"!==Uk(t)||null===t){var i=new Zk({actual:t,expected:e,message:r,operator:"deepStrictEqual",stackStartFn:n});throw i.operator=n.name,i}var o=Object.keys(e);if(e instanceof Error)o.push("name","message");else if(0===o.length)throw new Wk("error",e,"may not be an empty object");return void 0===zk&&rD(),o.forEach((function(i){"string"==typeof t[i]&&Qk(e[i])&&e[i].test(t[i])||lD(t,e,i,r,o,n);})),!0}return void 0!==e.prototype&&t instanceof e||!Error.isPrototypeOf(e)&&!0===e.call({},t)}function hD(t){if("function"!=typeof t)throw new Vk("fn","Function",t);try{t();}catch(t){return t}return oD}function dD(t){return $k(t)||null!==t&&"object"===Uk(t)&&"function"==typeof t.then&&"function"==typeof t.catch}function pD(t){return Promise.resolve().then((function(){var e;if("function"==typeof t){if(!dD(e=t()))throw new Jk("instance of Promise","promiseFn",e)}else {if(!dD(t))throw new Vk("promiseFn",["Function","Promise"],t);e=t;}return Promise.resolve().then((function(){return e})).then((function(){return oD})).catch((function(t){return t}))}))}function yD(t,e,r,n){if("string"==typeof r){if(4===arguments.length)throw new Vk("error",["Object","Error","Function","RegExp"],r);if("object"===Uk(e)&&null!==e){if(e.message===r)throw new Hk("error/message",'The error message "'.concat(e.message,'" is identical to the message.'))}else if(e===r)throw new Hk("error/message",'The error "'.concat(e,'" is identical to the message.'));n=r,r=void 0;}else if(null!=r&&"object"!==Uk(r)&&"function"!=typeof r)throw new Vk("error",["Object","Error","Function","RegExp"],r);if(e===oD){var i="";r&&r.name&&(i+=" (".concat(r.name,")")),i+=n?": ".concat(n):".";var o="rejects"===t.name?"rejection":"exception";aD({actual:void 0,expected:r,operator:t.name,message:"Missing expected ".concat(o).concat(i),stackStartFn:t});}if(r&&!fD(e,r,n,t))throw e}function gD(t,e,r,n){if(e!==oD){if("string"==typeof r&&(n=r,r=void 0),!r||fD(e,r)){var i=n?": ".concat(n):".",o="doesNotReject"===t.name?"rejection":"exception";aD({actual:e,expected:r,operator:t.name,message:"Got unwanted ".concat(o).concat(i,"\n")+'Actual message: "'.concat(e&&e.message,'"'),stackStartFn:t});}throw e}}function mD(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];sD.apply(void 0,[mD,e.length].concat(e));}iD.throws=function t(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];yD.apply(void 0,[t,hD(e)].concat(n));},iD.rejects=function t(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return pD(e).then((function(e){return yD.apply(void 0,[t,e].concat(n))}))},iD.doesNotThrow=function t(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];gD.apply(void 0,[t,hD(e)].concat(n));},iD.doesNotReject=function t(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return pD(e).then((function(e){return gD.apply(void 0,[t,e].concat(n))}))},iD.ifError=function t(e){if(null!=e){var r="ifError got unwanted exception: ";"object"===Uk(e)&&"string"==typeof e.message?0===e.message.length&&e.constructor?r+=e.constructor.name:r+=e.message:r+=Gk(e);var n=new Zk({actual:e,expected:null,operator:"ifError",message:r,stackStartFn:t}),i=e.stack;if("string"==typeof i){var o=i.split("\n");o.shift();for(var a=n.stack.split("\n"),s=0;s<o.length;s++){var u=a.indexOf(o[s]);if(-1!==u){a=a.slice(0,u);break}}n.stack="".concat(a.join("\n"),"\n").concat(o.join("\n"));}throw n}},iD.strict=tD(mD,iD,{equal:iD.strictEqual,deepEqual:iD.deepStrictEqual,notEqual:iD.notStrictEqual,notDeepEqual:iD.notDeepStrictEqual}),iD.strict.strict=iD.strict;var bD=Yc.exports.Buffer;var vD=function(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var i=t.charAt(n),o=i.charCodeAt(0);if(255!==e[o])throw new TypeError(i+" is ambiguous");e[o]=n;}var a=t.length,s=t.charAt(0),u=Math.log(a)/Math.log(256),c=Math.log(256)/Math.log(a);function l(t){if("string"!=typeof t)throw new TypeError("Expected String");if(0===t.length)return bD.alloc(0);for(var r=0,n=0,i=0;t[r]===s;)n++,r++;for(var o=(t.length-r)*u+1>>>0,c=new Uint8Array(o);t[r];){var l=e[t.charCodeAt(r)];if(255===l)return;for(var f=0,h=o-1;(0!==l||f<i)&&-1!==h;h--,f++)l+=a*c[h]>>>0,c[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=f,r++;}for(var d=o-i;d!==o&&0===c[d];)d++;var p=bD.allocUnsafe(n+(o-d));p.fill(0,0,n);for(var y=n;d!==o;)p[y++]=c[d++];return p}return {encode:function(e){if((Array.isArray(e)||e instanceof Uint8Array)&&(e=bD.from(e)),!bD.isBuffer(e))throw new TypeError("Expected Buffer");if(0===e.length)return "";for(var r=0,n=0,i=0,o=e.length;i!==o&&0===e[i];)i++,r++;for(var u=(o-i)*c+1>>>0,l=new Uint8Array(u);i!==o;){for(var f=e[i],h=0,d=u-1;(0!==f||h<n)&&-1!==d;d--,h++)f+=256*l[d]>>>0,l[d]=f%a>>>0,f=f/a>>>0;if(0!==f)throw new Error("Non-zero carry");n=h,i++;}for(var p=u-n;p!==u&&0===l[p];)p++;for(var y=s.repeat(r);p<u;++p)y+=t.charAt(l[p]);return y},decodeUnsafe:l,decode:function(t){var e=l(t);if(e)return e;throw new Error("Non-base"+a+" character")}}},wD=vD("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),_D="the public key could not be parsed or is invalid",SD="nonce generation function failed or private key is invalid";const ED=new Gi.ec("p256"),ID=ED.curve;function AD(t){return ED.keyFromPublic(t)}const kD=vt$1.Buffer.from("Bitcoin seed","utf8"),DD={private:76066276,public:76067358};class xD{constructor(t){this.versions=t||DD,this.depth=0,this.index=0,this._privateKey=null,this._publicKey=null,this.chainCode=null,this._fingerprint=0,this.parentFingerprint=0;}static fromMasterSeed(t,e){const r=gv("sha512",kD).update(t).digest(),n=r.slice(0,32),i=r.slice(32),o=new xD(e);return o.chainCode=i,o.privateKey=n,o}static fromExtendedKey(t,e){const r=new xD(e=e||DD),n=wD.decode(t),i=n.readUInt32BE(0);BS.exports.ok(i===e.private||i===e.public,"Version mismatch: does not match private or public"),r.depth=n.readUInt8(4),r.parentFingerprint=n.readUInt32BE(5),r.index=n.readUInt32BE(9),r.chainCode=n.slice(13,45);const o=n.slice(45);return 0===o.readUInt8(0)?(BS.exports.ok(i===e.private,"Version mismatch: version does not match private"),r.privateKey=o.slice(1,33)):(BS.exports.ok(i===e.public,"Version mismatch: version does not match public"),r.publicKey=o.slice(0,33)),r}static fromJSON(t){return xD.fromExtendedKey(t.xpriv)}get fingerprint(){return this._fingerprint}get identifier(){return this._identifier}get pubKeyHash(){return this.identifier}get privateKey(){return this._privateKey}set privateKey(t){if(null===t)throw new Error("Can not directly set privateKey to null.");BS.exports.equal(t.length,32,"Private key must be 32 bytes."),BS.exports.ok(!0===function(t){const e=new xr$1(t);return e.cmp(ID.n)<0&&!e.isZero()}(t),"Invalid private key"),this._privateKey=t,this._publicKey=function(t,e){const r=new xr$1(t);if(r.cmp(ID.n)>=0||r.isZero())throw new Error("private was invalid, try again");return vt$1.Buffer.from(ED.keyFromPrivate(t).getPublic(e,"true"))}(t,!0),this._identifier=PD(this.publicKey),this._fingerprint=this._identifier.slice(0,4).readUInt32BE(0);}get publicKey(){return this._publicKey}set publicKey(t){if(null===t)throw new Error("Can not directly set privateKey to null.");BS.exports.ok(33===t.length||65===t.length,"Public key must be 33 or 65 bytes."),BS.exports.ok(!0==(null!==AD(t)),"Invalid public key"),this._publicKey=function(t,e){const r=AD(t);if(null===r)throw new Error(_D);return vt$1.Buffer.from(r.getPublic(e,"true"))}(t,!0),this._identifier=PD(this.publicKey),this._fingerprint=this._identifier.slice(0,4).readUInt32BE(0),this._privateKey=null;}get privateExtendedKey(){return this._privateKey?wD.encode(TD(this,this.versions.private,vt$1.Buffer.concat([vt$1.Buffer.alloc(1,0),this.privateKey]))):null}get publicExtendedKey(){return wD.encode(TD(this,this.versions.public,this.publicKey))}derive(t){if("m"===t||"M"===t||"m'"===t||"M'"===t)return this;const e=t.split("/");let r=this;return e.forEach((function(t,e){if(0===e)return void BS.exports.ok(/^[mM]{1}/.test(t),'Path must start with "m" or "M"');const n=t.length>1&&"'"===t[t.length-1];let i=parseInt(t,10);BS.exports.ok(i<xD.HARDENED_OFFSET,"Invalid index"),n&&(i+=xD.HARDENED_OFFSET),r=r.deriveChild(i);})),r}deriveChild(t){const e=t>=xD.HARDENED_OFFSET,r=vt$1.Buffer.allocUnsafe(4);let n;if(r.writeUInt32BE(t,0),e){BS.exports.ok(this.privateKey,"Could not derive hardened child key");let t=this.privateKey;const e=vt$1.Buffer.alloc(1,0);t=vt$1.Buffer.concat([e,t]),n=vt$1.Buffer.concat([t,r]);}else n=vt$1.Buffer.concat([this.publicKey,r]);const i=gv("sha512",this.chainCode).update(n).digest(),o=i.slice(0,32),a=i.slice(32),s=new xD(this.versions);if(this.privateKey)try{s.privateKey=function(t,e){const r=new xr$1(e);if(r.cmp(ID.n)>=0)throw new Error("tweak out of range or resulting private key is invalid");if(r.iadd(new xr$1(t)),r.cmp(ID.n)>=0&&r.isub(ID.n),r.isZero())throw new Error("tweak out of range or resulting private key is invalid");return r.toArrayLike(vt$1.Buffer,"be",32)}(this.privateKey,o);}catch(e){return this.deriveChild(t+1)}else try{s.publicKey=function(t,e,r){const n=AD(t);if(null===n)throw new Error(_D);if((e=new xr$1(e)).cmp(ID.n)>=0)throw new Error("tweak out of range or resulting public key is invalid");return vt$1.Buffer.from(ID.g.mul(e).add(n.getPublic()).encode(!0,r))}(this.publicKey,o,!0);}catch(e){return this.deriveChild(t+1)}return s.chainCode=a,s.depth=this.depth+1,s.parentFingerprint=this.fingerprint,s.index=t,s}sign(t){return function(t,e,r,n){if("function"==typeof r){const i=r;r=function(r){const o=i(t,e,null,n,r);if(!vt$1.Buffer.isBuffer(o)||32!==o.length)throw new Error(SD);return new xr$1(o)};}const i=new xr$1(e);if(i.cmp(ID.n)>=0||i.isZero())throw new Error(SD);const o=ED.sign(t,e,{canonical:!0,k:r,pers:n});return {signature:vt$1.Buffer.concat([o.r.toArrayLike(vt$1.Buffer,"be",32),o.s.toArrayLike(vt$1.Buffer,"be",32)]),recovery:o.recoveryParam}}(t,this.privateKey).signature}verify(t,e){return function(t,e,r){if(t.length%2!=0)throw new Error("Wrong message length");const n={r:e.slice(0,32),s:e.slice(32,64)},i=new xr$1(n.r),o=new xr$1(n.s);if(i.cmp(ID.n)>=0||o.cmp(ID.n)>=0)throw new Error("couldn't parse signature");if(1===o.cmp(ED.nh)||i.isZero()||o.isZero())return !1;const a=AD(r);if(null===a)throw new Error(_D);return ED.verify(t,n,{x:a.getPublic().x,y:a.getPublic().y})}(t,e,this.publicKey)}toJSON(){return {xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}}function TD(t,e,r){const n=vt$1.Buffer.allocUnsafe(78);n.writeUInt32BE(e,0),n.writeUInt8(t.depth,4);const i=t.depth?t.parentFingerprint:0;return n.writeUInt32BE(i,5),n.writeUInt32BE(t.index,9),t.chainCode.copy(n,13),r.copy(n,45),n}function PD(t){const e=yv("sha256").update(t).digest();return yv("rmd160").update(e).digest()}xD.HARDENED_OFFSET=2147483648;class OD{static decode(t){return wD.decode(t)}static encode(t){return wD.encode(t)}}class RD{constructor(t){this.key=t;}static newWithMnemonic(t,e){let r=ix.toSeed(t,e);return RD.newWithSeed(r)}static newWithSeed(t){return RD.newWithKey(xD.fromMasterSeed(t))}static newWithKey(t){return new RD(t)}getPrivateKeyBytes(){return this.key.privateKey}getPrivateKeyBase58(){return OD.encode(this.getPrivateKeyBytes())}getPublicKeyBytes(){return this.key.publicKey}getPublicKeyBase58(){return OD.encode(this.getPublicKeyBytes())}serialize(){return OD.decode(this.serializeBase58())}serializeBase58(){let t=OD.decode(this.key.privateExtendedKey),e=vt$1.Buffer.alloc(82);return t.copy(e),MS.hashTwice(t).copy(e,78,0,4),OD.encode(e)}serializePublicKey(){return OD.decode(this.serializePublicKeyBase58())}serializePublicKeyBase58(){let t=OD.decode(this.key.publicExtendedKey),e=vt$1.Buffer.alloc(82);return t.copy(e),MS.hashTwice(t).copy(e,78,0,4),OD.encode(e)}static deserialize(t){return this.deserializeBase58(OD.encode(t))}static deserializeBase58(t){return new RD(xD.fromExtendedKey(t))}static transformBip32HeaderToBuffer(t){let e=vt$1.Buffer.alloc(4);return e[0]=t>>24&255,e[1]=t>>16&255,e[2]=t>>8&255,e[3]=255&t,e}static paddingToExtendedPrivateKey(t){let e=vt$1.Buffer.alloc(RD.EXTENDED_PRIVATEKEY_BYTES);RD.transformBip32HeaderToBuffer(this.bip32HeaderP2PKHpriv).copy(e),t.copy(e,46,0,32);let r=vt$1.Buffer.alloc(78);return e.copy(r,0,0,78),MS.hashTwice(r).copy(e,78,0,4),e}static paddingToExtendedPublicKey(t){let e=vt$1.Buffer.alloc(RD.EXTENDED_PUBLICKEY_BYTES);RD.transformBip32HeaderToBuffer(this.bip32HeaderP2PKHpub).copy(e),t.copy(e,45,0,33);let r=vt$1.Buffer.alloc(78);return e.copy(r,0,0,78),MS.hashTwice(r).copy(e,78,0,4),e}deriveWithPath(t){return new RD(this.key.derive(t))}deriveWithIndex(t,e=!1){return e&&(t+=RD.HARDENED_BIT),new RD(this.key.deriveChild(t))}static getRedeemScript(t){let e=vt$1.Buffer.alloc(35);return e[0]=33,t.copy(e,1),e[34]=RD.PADDING_STANDARD,e}static getBinAddressFromBuffer(t){let e=this.getRedeemScript(t),r=MS.sha256ripemd160(e),n=vt$1.Buffer.alloc(r.length+1);n[0]=RD.PADDING_IDENTITY,r.copy(n,1),r=MS.hashTwice(n);let i=vt$1.Buffer.alloc(n.length+4);return n.copy(i,0),r.copy(i,n.length,0,4),i}getBinAddress(){return RD.getBinAddressFromBuffer(this.getPublicKeyBytes())}getAddress(){let t=this.getBinAddress();return OD.encode(t)}static toAddress(t){return OD.encode(this.getBinAddressFromBuffer(t))}static isAddressValid(t){let e=OD.decode(t);if(25!=e.length)return !1;if(e[0]!=RD.PADDING_IDENTITY)return !1;let r=MS.hashTwice(vt$1.Buffer.from(e.toString("hex").substr(0,21)));return r[0]==e[21]&&r[1]==e[22]&&r[2]==e[23]&&r[3]==e[24]}wipe(){}}RD.PUBLICKEY_BYTES=33,RD.PRIVATEKEY_BYTES=32,RD.SEED_BYTES=64,RD.EXTENDED_KEY_BYTES=82,RD.EXTENDED_PRIVATEKEY_BYTES=RD.EXTENDED_KEY_BYTES,RD.EXTENDED_PUBLICKEY_BYTES=RD.EXTENDED_KEY_BYTES,RD.HARDENED_BIT=2147483648,RD.PADDING_IDENTITY=103,RD.PADDING_STANDARD=173,RD.bip32HeaderP2PKHpub=76067358,RD.bip32HeaderP2PKHpriv=76066276,RD.bip32HeaderP2WPKHpub=78792518,RD.bip32HeaderP2WPKHpriv=78791436,RD.DERIVE_PATH_PREFIX="m/44'/0'/0'/0/",RD.PRE_DERIVED_PUBLICKEY_PATH="m/44'/0'/0'";class CD{static generateKeyAndIv(t){let e=vt$1.Buffer.from(t,"utf-8"),r=kv.createHash("md5").update(e).digest(),n=kv.createHash("md5").update(r).update(e).digest(),i=kv.createHash("md5").update(n).update(e).digest();return {key:vt$1.Buffer.concat([r,n]),iv:i}}static encrypt(t,e){let{key:r,iv:n}=CD.generateKeyAndIv(e),i=kv.createCipheriv("aes-256-cbc",r,n);return vt$1.Buffer.concat([i.update(t),i.final()])}static decrypt(t,e){let{key:r,iv:n}=this.generateKeyAndIv(e),i=kv.createDecipheriv("aes-256-cbc",r,n);return vt$1.Buffer.concat([i.update(t),i.final()])}static encryptToBase64(t,e){let r=this.encrypt(t,e);return jS.toUrlFormat(r.toString("base64"))}static decryptFromBase64(t,e){let r=vt$1.Buffer.from(jS.fromUrlFormat(t),"base64");return CD.decrypt(r,e)}}var MD={},ND={};Object.defineProperty(ND,"__esModule",{value:!0});const jD={};let BD;ND.wordlists=jD,ND._default=BD;try{ND._default=BD=[],jD.czech=BD;}catch(t){}try{ND._default=BD=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],jD.chinese_simplified=BD;}catch(t){}try{ND._default=BD=[],jD.chinese_traditional=BD;}catch(t){}try{ND._default=BD=[],jD.korean=BD;}catch(t){}try{ND._default=BD=["abaisser","abandon","abdiquer","abeille","abolir","aborder","aboutir","aboyer","abrasif","abreuver","abriter","abroger","abrupt","absence","absolu","absurde","abusif","abyssal","academie","acajou","acarien","accabler","accepter","acclamer","accolade","accroche","accuser","acerbe","achat","acheter","aciduler","acier","acompte","acquerir","acronyme","acteur","actif","actuel","adepte","adequat","adhesif","adjectif","adjuger","admettre","admirer","adopter","adorer","adoucir","adresse","adroit","adulte","adverbe","aerer","aeronef","affaire","affecter","affiche","affreux","affubler","agacer","agencer","agile","agiter","agrafer","agreable","agrume","aider","aiguille","ailier","aimable","aisance","ajouter","ajuster","alarmer","alchimie","alerte","algebre","algue","aliener","aliment","alleger","alliage","allouer","allumer","alourdir","alpaga","altesse","alveole","amateur","ambigu","ambre","amenager","amertume","amidon","amiral","amorcer","amour","amovible","amphibie","ampleur","amusant","analyse","anaphore","anarchie","anatomie","ancien","aneantir","angle","angoisse","anguleux","animal","annexer","annonce","annuel","anodin","anomalie","anonyme","anormal","antenne","antidote","anxieux","apaiser","aperitif","aplanir","apologie","appareil","appeler","apporter","appuyer","aquarium","aqueduc","arbitre","arbuste","ardeur","ardoise","argent","arlequin","armature","armement","armoire","armure","arpenter","arracher","arriver","arroser","arsenic","arteriel","article","aspect","asphalte","aspirer","assaut","asservir","assiette","associer","assurer","asticot","astre","astuce","atelier","atome","atrium","atroce","attaque","attentif","attirer","attraper","aubaine","auberge","audace","audible","augurer","aurore","automne","autruche","avaler","avancer","avarice","avenir","averse","aveugle","aviateur","avide","avion","aviser","avoine","avouer","avril","axial","axiome","badge","bafouer","bagage","baguette","baignade","balancer","balcon","baleine","balisage","bambin","bancaire","bandage","banlieue","banniere","banquier","barbier","baril","baron","barque","barrage","bassin","bastion","bataille","bateau","batterie","baudrier","bavarder","belette","belier","belote","benefice","berceau","berger","berline","bermuda","besace","besogne","betail","beurre","biberon","bicycle","bidule","bijou","bilan","bilingue","billard","binaire","biologie","biopsie","biotype","biscuit","bison","bistouri","bitume","bizarre","blafard","blague","blanchir","blessant","blinder","blond","bloquer","blouson","bobard","bobine","boire","boiser","bolide","bonbon","bondir","bonheur","bonifier","bonus","bordure","borne","botte","boucle","boueux","bougie","boulon","bouquin","bourse","boussole","boutique","boxeur","branche","brasier","brave","brebis","breche","breuvage","bricoler","brigade","brillant","brioche","brique","brochure","broder","bronzer","brousse","broyeur","brume","brusque","brutal","bruyant","buffle","buisson","bulletin","bureau","burin","bustier","butiner","butoir","buvable","buvette","cabanon","cabine","cachette","cadeau","cadre","cafeine","caillou","caisson","calculer","calepin","calibre","calmer","calomnie","calvaire","camarade","camera","camion","campagne","canal","caneton","canon","cantine","canular","capable","caporal","caprice","capsule","capter","capuche","carabine","carbone","caresser","caribou","carnage","carotte","carreau","carton","cascade","casier","casque","cassure","causer","caution","cavalier","caverne","caviar","cedille","ceinture","celeste","cellule","cendrier","censurer","central","cercle","cerebral","cerise","cerner","cerveau","cesser","chagrin","chaise","chaleur","chambre","chance","chapitre","charbon","chasseur","chaton","chausson","chavirer","chemise","chenille","chequier","chercher","cheval","chien","chiffre","chignon","chimere","chiot","chlorure","chocolat","choisir","chose","chouette","chrome","chute","cigare","cigogne","cimenter","cinema","cintrer","circuler","cirer","cirque","citerne","citoyen","citron","civil","clairon","clameur","claquer","classe","clavier","client","cligner","climat","clivage","cloche","clonage","cloporte","cobalt","cobra","cocasse","cocotier","coder","codifier","coffre","cogner","cohesion","coiffer","coincer","colere","colibri","colline","colmater","colonel","combat","comedie","commande","compact","concert","conduire","confier","congeler","connoter","consonne","contact","convexe","copain","copie","corail","corbeau","cordage","corniche","corpus","correct","cortege","cosmique","costume","coton","coude","coupure","courage","couteau","couvrir","coyote","crabe","crainte","cravate","crayon","creature","crediter","cremeux","creuser","crevette","cribler","crier","cristal","critere","croire","croquer","crotale","crucial","cruel","crypter","cubique","cueillir","cuillere","cuisine","cuivre","culminer","cultiver","cumuler","cupide","curatif","curseur","cyanure","cycle","cylindre","cynique","daigner","damier","danger","danseur","dauphin","debattre","debiter","deborder","debrider","debutant","decaler","decembre","dechirer","decider","declarer","decorer","decrire","decupler","dedale","deductif","deesse","defensif","defiler","defrayer","degager","degivrer","deglutir","degrafer","dejeuner","delice","deloger","demander","demeurer","demolir","denicher","denouer","dentelle","denuder","depart","depenser","dephaser","deplacer","deposer","deranger","derober","desastre","descente","desert","designer","desobeir","dessiner","destrier","detacher","detester","detourer","detresse","devancer","devenir","deviner","devoir","diable","dialogue","diamant","dicter","differer","digerer","digital","digne","diluer","dimanche","diminuer","dioxyde","directif","diriger","discuter","disposer","dissiper","distance","divertir","diviser","docile","docteur","dogme","doigt","domaine","domicile","dompter","donateur","donjon","donner","dopamine","dortoir","dorure","dosage","doseur","dossier","dotation","douanier","double","douceur","douter","doyen","dragon","draper","dresser","dribbler","droiture","duperie","duplexe","durable","durcir","dynastie","eblouir","ecarter","echarpe","echelle","eclairer","eclipse","eclore","ecluse","ecole","economie","ecorce","ecouter","ecraser","ecremer","ecrivain","ecrou","ecume","ecureuil","edifier","eduquer","effacer","effectif","effigie","effort","effrayer","effusion","egaliser","egarer","ejecter","elaborer","elargir","electron","elegant","elephant","eleve","eligible","elitisme","eloge","elucider","eluder","emballer","embellir","embryon","emeraude","emission","emmener","emotion","emouvoir","empereur","employer","emporter","emprise","emulsion","encadrer","enchere","enclave","encoche","endiguer","endosser","endroit","enduire","energie","enfance","enfermer","enfouir","engager","engin","englober","enigme","enjamber","enjeu","enlever","ennemi","ennuyeux","enrichir","enrobage","enseigne","entasser","entendre","entier","entourer","entraver","enumerer","envahir","enviable","envoyer","enzyme","eolien","epaissir","epargne","epatant","epaule","epicerie","epidemie","epier","epilogue","epine","episode","epitaphe","epoque","epreuve","eprouver","epuisant","equerre","equipe","eriger","erosion","erreur","eruption","escalier","espadon","espece","espiegle","espoir","esprit","esquiver","essayer","essence","essieu","essorer","estime","estomac","estrade","etagere","etaler","etanche","etatique","eteindre","etendoir","eternel","ethanol","ethique","ethnie","etirer","etoffer","etoile","etonnant","etourdir","etrange","etroit","etude","euphorie","evaluer","evasion","eventail","evidence","eviter","evolutif","evoquer","exact","exagerer","exaucer","exceller","excitant","exclusif","excuse","executer","exemple","exercer","exhaler","exhorter","exigence","exiler","exister","exotique","expedier","explorer","exposer","exprimer","exquis","extensif","extraire","exulter","fable","fabuleux","facette","facile","facture","faiblir","falaise","fameux","famille","farceur","farfelu","farine","farouche","fasciner","fatal","fatigue","faucon","fautif","faveur","favori","febrile","feconder","federer","felin","femme","femur","fendoir","feodal","fermer","feroce","ferveur","festival","feuille","feutre","fevrier","fiasco","ficeler","fictif","fidele","figure","filature","filetage","filiere","filleul","filmer","filou","filtrer","financer","finir","fiole","firme","fissure","fixer","flairer","flamme","flasque","flatteur","fleau","fleche","fleur","flexion","flocon","flore","fluctuer","fluide","fluvial","folie","fonderie","fongible","fontaine","forcer","forgeron","formuler","fortune","fossile","foudre","fougere","fouiller","foulure","fourmi","fragile","fraise","franchir","frapper","frayeur","fregate","freiner","frelon","fremir","frenesie","frere","friable","friction","frisson","frivole","froid","fromage","frontal","frotter","fruit","fugitif","fuite","fureur","furieux","furtif","fusion","futur","gagner","galaxie","galerie","gambader","garantir","gardien","garnir","garrigue","gazelle","gazon","geant","gelatine","gelule","gendarme","general","genie","genou","gentil","geologie","geometre","geranium","germe","gestuel","geyser","gibier","gicler","girafe","givre","glace","glaive","glisser","globe","gloire","glorieux","golfeur","gomme","gonfler","gorge","gorille","goudron","gouffre","goulot","goupille","gourmand","goutte","graduel","graffiti","graine","grand","grappin","gratuit","gravir","grenat","griffure","griller","grimper","grogner","gronder","grotte","groupe","gruger","grutier","gruyere","guepard","guerrier","guide","guimauve","guitare","gustatif","gymnaste","gyrostat","habitude","hachoir","halte","hameau","hangar","hanneton","haricot","harmonie","harpon","hasard","helium","hematome","herbe","herisson","hermine","heron","hesiter","heureux","hiberner","hibou","hilarant","histoire","hiver","homard","hommage","homogene","honneur","honorer","honteux","horde","horizon","horloge","hormone","horrible","houleux","housse","hublot","huileux","humain","humble","humide","humour","hurler","hydromel","hygiene","hymne","hypnose","idylle","ignorer","iguane","illicite","illusion","image","imbiber","imiter","immense","immobile","immuable","impact","imperial","implorer","imposer","imprimer","imputer","incarner","incendie","incident","incliner","incolore","indexer","indice","inductif","inedit","ineptie","inexact","infini","infliger","informer","infusion","ingerer","inhaler","inhiber","injecter","injure","innocent","inoculer","inonder","inscrire","insecte","insigne","insolite","inspirer","instinct","insulter","intact","intense","intime","intrigue","intuitif","inutile","invasion","inventer","inviter","invoquer","ironique","irradier","irreel","irriter","isoler","ivoire","ivresse","jaguar","jaillir","jambe","janvier","jardin","jauger","jaune","javelot","jetable","jeton","jeudi","jeunesse","joindre","joncher","jongler","joueur","jouissif","journal","jovial","joyau","joyeux","jubiler","jugement","junior","jupon","juriste","justice","juteux","juvenile","kayak","kimono","kiosque","label","labial","labourer","lacerer","lactose","lagune","laine","laisser","laitier","lambeau","lamelle","lampe","lanceur","langage","lanterne","lapin","largeur","larme","laurier","lavabo","lavoir","lecture","legal","leger","legume","lessive","lettre","levier","lexique","lezard","liasse","liberer","libre","licence","licorne","liege","lievre","ligature","ligoter","ligue","limer","limite","limonade","limpide","lineaire","lingot","lionceau","liquide","lisiere","lister","lithium","litige","littoral","livreur","logique","lointain","loisir","lombric","loterie","louer","lourd","loutre","louve","loyal","lubie","lucide","lucratif","lueur","lugubre","luisant","lumiere","lunaire","lundi","luron","lutter","luxueux","machine","magasin","magenta","magique","maigre","maillon","maintien","mairie","maison","majorer","malaxer","malefice","malheur","malice","mallette","mammouth","mandater","maniable","manquant","manteau","manuel","marathon","marbre","marchand","mardi","maritime","marqueur","marron","marteler","mascotte","massif","materiel","matiere","matraque","maudire","maussade","mauve","maximal","mechant","meconnu","medaille","medecin","mediter","meduse","meilleur","melange","melodie","membre","memoire","menacer","mener","menhir","mensonge","mentor","mercredi","merite","merle","messager","mesure","metal","meteore","methode","metier","meuble","miauler","microbe","miette","mignon","migrer","milieu","million","mimique","mince","mineral","minimal","minorer","minute","miracle","miroiter","missile","mixte","mobile","moderne","moelleux","mondial","moniteur","monnaie","monotone","monstre","montagne","monument","moqueur","morceau","morsure","mortier","moteur","motif","mouche","moufle","moulin","mousson","mouton","mouvant","multiple","munition","muraille","murene","murmure","muscle","museum","musicien","mutation","muter","mutuel","myriade","myrtille","mystere","mythique","nageur","nappe","narquois","narrer","natation","nation","nature","naufrage","nautique","navire","nebuleux","nectar","nefaste","negation","negliger","negocier","neige","nerveux","nettoyer","neurone","neutron","neveu","niche","nickel","nitrate","niveau","noble","nocif","nocturne","noirceur","noisette","nomade","nombreux","nommer","normatif","notable","notifier","notoire","nourrir","nouveau","novateur","novembre","novice","nuage","nuancer","nuire","nuisible","numero","nuptial","nuque","nutritif","obeir","objectif","obliger","obscur","observer","obstacle","obtenir","obturer","occasion","occuper","ocean","octobre","octroyer","octupler","oculaire","odeur","odorant","offenser","officier","offrir","ogive","oiseau","oisillon","olfactif","olivier","ombrage","omettre","onctueux","onduler","onereux","onirique","opale","opaque","operer","opinion","opportun","opprimer","opter","optique","orageux","orange","orbite","ordonner","oreille","organe","orgueil","orifice","ornement","orque","ortie","osciller","osmose","ossature","otarie","ouragan","ourson","outil","outrager","ouvrage","ovation","oxyde","oxygene","ozone","paisible","palace","palmares","palourde","palper","panache","panda","pangolin","paniquer","panneau","panorama","pantalon","papaye","papier","papoter","papyrus","paradoxe","parcelle","paresse","parfumer","parler","parole","parrain","parsemer","partager","parure","parvenir","passion","pasteque","paternel","patience","patron","pavillon","pavoiser","payer","paysage","peigne","peintre","pelage","pelican","pelle","pelouse","peluche","pendule","penetrer","penible","pensif","penurie","pepite","peplum","perdrix","perforer","periode","permuter","perplexe","persil","perte","peser","petale","petit","petrir","peuple","pharaon","phobie","phoque","photon","phrase","physique","piano","pictural","piece","pierre","pieuvre","pilote","pinceau","pipette","piquer","pirogue","piscine","piston","pivoter","pixel","pizza","placard","plafond","plaisir","planer","plaque","plastron","plateau","pleurer","plexus","pliage","plomb","plonger","pluie","plumage","pochette","poesie","poete","pointe","poirier","poisson","poivre","polaire","policier","pollen","polygone","pommade","pompier","ponctuel","ponderer","poney","portique","position","posseder","posture","potager","poteau","potion","pouce","poulain","poumon","pourpre","poussin","pouvoir","prairie","pratique","precieux","predire","prefixe","prelude","prenom","presence","pretexte","prevoir","primitif","prince","prison","priver","probleme","proceder","prodige","profond","progres","proie","projeter","prologue","promener","propre","prospere","proteger","prouesse","proverbe","prudence","pruneau","psychose","public","puceron","puiser","pulpe","pulsar","punaise","punitif","pupitre","purifier","puzzle","pyramide","quasar","querelle","question","quietude","quitter","quotient","racine","raconter","radieux","ragondin","raideur","raisin","ralentir","rallonge","ramasser","rapide","rasage","ratisser","ravager","ravin","rayonner","reactif","reagir","realiser","reanimer","recevoir","reciter","reclamer","recolter","recruter","reculer","recycler","rediger","redouter","refaire","reflexe","reformer","refrain","refuge","regalien","region","reglage","regulier","reiterer","rejeter","rejouer","relatif","relever","relief","remarque","remede","remise","remonter","remplir","remuer","renard","renfort","renifler","renoncer","rentrer","renvoi","replier","reporter","reprise","reptile","requin","reserve","resineux","resoudre","respect","rester","resultat","retablir","retenir","reticule","retomber","retracer","reunion","reussir","revanche","revivre","revolte","revulsif","richesse","rideau","rieur","rigide","rigoler","rincer","riposter","risible","risque","rituel","rival","riviere","rocheux","romance","rompre","ronce","rondin","roseau","rosier","rotatif","rotor","rotule","rouge","rouille","rouleau","routine","royaume","ruban","rubis","ruche","ruelle","rugueux","ruiner","ruisseau","ruser","rustique","rythme","sabler","saboter","sabre","sacoche","safari","sagesse","saisir","salade","salive","salon","saluer","samedi","sanction","sanglier","sarcasme","sardine","saturer","saugrenu","saumon","sauter","sauvage","savant","savonner","scalpel","scandale","scelerat","scenario","sceptre","schema","science","scinder","score","scrutin","sculpter","seance","secable","secher","secouer","secreter","sedatif","seduire","seigneur","sejour","selectif","semaine","sembler","semence","seminal","senateur","sensible","sentence","separer","sequence","serein","sergent","serieux","serrure","serum","service","sesame","sevir","sevrage","sextuple","sideral","siecle","sieger","siffler","sigle","signal","silence","silicium","simple","sincere","sinistre","siphon","sirop","sismique","situer","skier","social","socle","sodium","soigneux","soldat","soleil","solitude","soluble","sombre","sommeil","somnoler","sonde","songeur","sonnette","sonore","sorcier","sortir","sosie","sottise","soucieux","soudure","souffle","soulever","soupape","source","soutirer","souvenir","spacieux","spatial","special","sphere","spiral","stable","station","sternum","stimulus","stipuler","strict","studieux","stupeur","styliste","sublime","substrat","subtil","subvenir","succes","sucre","suffixe","suggerer","suiveur","sulfate","superbe","supplier","surface","suricate","surmener","surprise","sursaut","survie","suspect","syllabe","symbole","symetrie","synapse","syntaxe","systeme","tabac","tablier","tactile","tailler","talent","talisman","talonner","tambour","tamiser","tangible","tapis","taquiner","tarder","tarif","tartine","tasse","tatami","tatouage","taupe","taureau","taxer","temoin","temporel","tenaille","tendre","teneur","tenir","tension","terminer","terne","terrible","tetine","texte","theme","theorie","therapie","thorax","tibia","tiede","timide","tirelire","tiroir","tissu","titane","titre","tituber","toboggan","tolerant","tomate","tonique","tonneau","toponyme","torche","tordre","tornade","torpille","torrent","torse","tortue","totem","toucher","tournage","tousser","toxine","traction","trafic","tragique","trahir","train","trancher","travail","trefle","tremper","tresor","treuil","triage","tribunal","tricoter","trilogie","triomphe","tripler","triturer","trivial","trombone","tronc","tropical","troupeau","tuile","tulipe","tumulte","tunnel","turbine","tuteur","tutoyer","tuyau","tympan","typhon","typique","tyran","ubuesque","ultime","ultrason","unanime","unifier","union","unique","unitaire","univers","uranium","urbain","urticant","usage","usine","usuel","usure","utile","utopie","vacarme","vaccin","vagabond","vague","vaillant","vaincre","vaisseau","valable","valise","vallon","valve","vampire","vanille","vapeur","varier","vaseux","vassal","vaste","vecteur","vedette","vegetal","vehicule","veinard","veloce","vendredi","venerer","venger","venimeux","ventouse","verdure","verin","vernir","verrou","verser","vertu","veston","veteran","vetuste","vexant","vexer","viaduc","viande","victoire","vidange","video","vignette","vigueur","vilain","village","vinaigre","violon","vipere","virement","virtuose","virus","visage","viseur","vision","visqueux","visuel","vital","vitesse","viticole","vitrine","vivace","vivipare","vocation","voguer","voile","voisin","voiture","volaille","volcan","voltiger","volume","vorace","vortex","voter","vouloir","voyage","voyelle","wagon","xenon","yacht","zebre","zenith","zeste","zoologie"],jD.french=BD;}catch(t){}try{ND._default=BD=[],jD.italian=BD;}catch(t){}try{ND._default=BD=[],jD.spanish=BD;}catch(t){}try{ND._default=BD=[],jD.japanese=BD,jD.JA=BD;}catch(t){}try{ND._default=BD=[],jD.portuguese=BD;}catch(t){}try{ND._default=BD=["abandon","ability","able","about","above","absent","absorb","abstract","absurd","abuse","access","accident","account","accuse","achieve","acid","acoustic","acquire","across","act","action","actor","actress","actual","adapt","add","addict","address","adjust","admit","adult","advance","advice","aerobic","affair","afford","afraid","again","age","agent","agree","ahead","aim","air","airport","aisle","alarm","album","alcohol","alert","alien","all","alley","allow","almost","alone","alpha","already","also","alter","always","amateur","amazing","among","amount","amused","analyst","anchor","ancient","anger","angle","angry","animal","ankle","announce","annual","another","answer","antenna","antique","anxiety","any","apart","apology","appear","apple","approve","april","arch","arctic","area","arena","argue","arm","armed","armor","army","around","arrange","arrest","arrive","arrow","art","artefact","artist","artwork","ask","aspect","assault","asset","assist","assume","asthma","athlete","atom","attack","attend","attitude","attract","auction","audit","august","aunt","author","auto","autumn","average","avocado","avoid","awake","aware","away","awesome","awful","awkward","axis","baby","bachelor","bacon","badge","bag","balance","balcony","ball","bamboo","banana","banner","bar","barely","bargain","barrel","base","basic","basket","battle","beach","bean","beauty","because","become","beef","before","begin","behave","behind","believe","below","belt","bench","benefit","best","betray","better","between","beyond","bicycle","bid","bike","bind","biology","bird","birth","bitter","black","blade","blame","blanket","blast","bleak","bless","blind","blood","blossom","blouse","blue","blur","blush","board","boat","body","boil","bomb","bone","bonus","book","boost","border","boring","borrow","boss","bottom","bounce","box","boy","bracket","brain","brand","brass","brave","bread","breeze","brick","bridge","brief","bright","bring","brisk","broccoli","broken","bronze","broom","brother","brown","brush","bubble","buddy","budget","buffalo","build","bulb","bulk","bullet","bundle","bunker","burden","burger","burst","bus","business","busy","butter","buyer","buzz","cabbage","cabin","cable","cactus","cage","cake","call","calm","camera","camp","can","canal","cancel","candy","cannon","canoe","canvas","canyon","capable","capital","captain","car","carbon","card","cargo","carpet","carry","cart","case","cash","casino","castle","casual","cat","catalog","catch","category","cattle","caught","cause","caution","cave","ceiling","celery","cement","census","century","cereal","certain","chair","chalk","champion","change","chaos","chapter","charge","chase","chat","cheap","check","cheese","chef","cherry","chest","chicken","chief","child","chimney","choice","choose","chronic","chuckle","chunk","churn","cigar","cinnamon","circle","citizen","city","civil","claim","clap","clarify","claw","clay","clean","clerk","clever","click","client","cliff","climb","clinic","clip","clock","clog","close","cloth","cloud","clown","club","clump","cluster","clutch","coach","coast","coconut","code","coffee","coil","coin","collect","color","column","combine","come","comfort","comic","common","company","concert","conduct","confirm","congress","connect","consider","control","convince","cook","cool","copper","copy","coral","core","corn","correct","cost","cotton","couch","country","couple","course","cousin","cover","coyote","crack","cradle","craft","cram","crane","crash","crater","crawl","crazy","cream","credit","creek","crew","cricket","crime","crisp","critic","crop","cross","crouch","crowd","crucial","cruel","cruise","crumble","crunch","crush","cry","crystal","cube","culture","cup","cupboard","curious","current","curtain","curve","cushion","custom","cute","cycle","dad","damage","damp","dance","danger","daring","dash","daughter","dawn","day","deal","debate","debris","decade","december","decide","decline","decorate","decrease","deer","defense","define","defy","degree","delay","deliver","demand","demise","denial","dentist","deny","depart","depend","deposit","depth","deputy","derive","describe","desert","design","desk","despair","destroy","detail","detect","develop","device","devote","diagram","dial","diamond","diary","dice","diesel","diet","differ","digital","dignity","dilemma","dinner","dinosaur","direct","dirt","disagree","discover","disease","dish","dismiss","disorder","display","distance","divert","divide","divorce","dizzy","doctor","document","dog","doll","dolphin","domain","donate","donkey","donor","door","dose","double","dove","draft","dragon","drama","drastic","draw","dream","dress","drift","drill","drink","drip","drive","drop","drum","dry","duck","dumb","dune","during","dust","dutch","duty","dwarf","dynamic","eager","eagle","early","earn","earth","easily","east","easy","echo","ecology","economy","edge","edit","educate","effort","egg","eight","either","elbow","elder","electric","elegant","element","elephant","elevator","elite","else","embark","embody","embrace","emerge","emotion","employ","empower","empty","enable","enact","end","endless","endorse","enemy","energy","enforce","engage","engine","enhance","enjoy","enlist","enough","enrich","enroll","ensure","enter","entire","entry","envelope","episode","equal","equip","era","erase","erode","erosion","error","erupt","escape","essay","essence","estate","eternal","ethics","evidence","evil","evoke","evolve","exact","example","excess","exchange","excite","exclude","excuse","execute","exercise","exhaust","exhibit","exile","exist","exit","exotic","expand","expect","expire","explain","expose","express","extend","extra","eye","eyebrow","fabric","face","faculty","fade","faint","faith","fall","false","fame","family","famous","fan","fancy","fantasy","farm","fashion","fat","fatal","father","fatigue","fault","favorite","feature","february","federal","fee","feed","feel","female","fence","festival","fetch","fever","few","fiber","fiction","field","figure","file","film","filter","final","find","fine","finger","finish","fire","firm","first","fiscal","fish","fit","fitness","fix","flag","flame","flash","flat","flavor","flee","flight","flip","float","flock","floor","flower","fluid","flush","fly","foam","focus","fog","foil","fold","follow","food","foot","force","forest","forget","fork","fortune","forum","forward","fossil","foster","found","fox","fragile","frame","frequent","fresh","friend","fringe","frog","front","frost","frown","frozen","fruit","fuel","fun","funny","furnace","fury","future","gadget","gain","galaxy","gallery","game","gap","garage","garbage","garden","garlic","garment","gas","gasp","gate","gather","gauge","gaze","general","genius","genre","gentle","genuine","gesture","ghost","giant","gift","giggle","ginger","giraffe","girl","give","glad","glance","glare","glass","glide","glimpse","globe","gloom","glory","glove","glow","glue","goat","goddess","gold","good","goose","gorilla","gospel","gossip","govern","gown","grab","grace","grain","grant","grape","grass","gravity","great","green","grid","grief","grit","grocery","group","grow","grunt","guard","guess","guide","guilt","guitar","gun","gym","habit","hair","half","hammer","hamster","hand","happy","harbor","hard","harsh","harvest","hat","have","hawk","hazard","head","health","heart","heavy","hedgehog","height","hello","helmet","help","hen","hero","hidden","high","hill","hint","hip","hire","history","hobby","hockey","hold","hole","holiday","hollow","home","honey","hood","hope","horn","horror","horse","hospital","host","hotel","hour","hover","hub","huge","human","humble","humor","hundred","hungry","hunt","hurdle","hurry","hurt","husband","hybrid","ice","icon","idea","identify","idle","ignore","ill","illegal","illness","image","imitate","immense","immune","impact","impose","improve","impulse","inch","include","income","increase","index","indicate","indoor","industry","infant","inflict","inform","inhale","inherit","initial","inject","injury","inmate","inner","innocent","input","inquiry","insane","insect","inside","inspire","install","intact","interest","into","invest","invite","involve","iron","island","isolate","issue","item","ivory","jacket","jaguar","jar","jazz","jealous","jeans","jelly","jewel","job","join","joke","journey","joy","judge","juice","jump","jungle","junior","junk","just","kangaroo","keen","keep","ketchup","key","kick","kid","kidney","kind","kingdom","kiss","kit","kitchen","kite","kitten","kiwi","knee","knife","knock","know","lab","label","labor","ladder","lady","lake","lamp","language","laptop","large","later","latin","laugh","laundry","lava","law","lawn","lawsuit","layer","lazy","leader","leaf","learn","leave","lecture","left","leg","legal","legend","leisure","lemon","lend","length","lens","leopard","lesson","letter","level","liar","liberty","library","license","life","lift","light","like","limb","limit","link","lion","liquid","list","little","live","lizard","load","loan","lobster","local","lock","logic","lonely","long","loop","lottery","loud","lounge","love","loyal","lucky","luggage","lumber","lunar","lunch","luxury","lyrics","machine","mad","magic","magnet","maid","mail","main","major","make","mammal","man","manage","mandate","mango","mansion","manual","maple","marble","march","margin","marine","market","marriage","mask","mass","master","match","material","math","matrix","matter","maximum","maze","meadow","mean","measure","meat","mechanic","medal","media","melody","melt","member","memory","mention","menu","mercy","merge","merit","merry","mesh","message","metal","method","middle","midnight","milk","million","mimic","mind","minimum","minor","minute","miracle","mirror","misery","miss","mistake","mix","mixed","mixture","mobile","model","modify","mom","moment","monitor","monkey","monster","month","moon","moral","more","morning","mosquito","mother","motion","motor","mountain","mouse","move","movie","much","muffin","mule","multiply","muscle","museum","mushroom","music","must","mutual","myself","mystery","myth","naive","name","napkin","narrow","nasty","nation","nature","near","neck","need","negative","neglect","neither","nephew","nerve","nest","net","network","neutral","never","news","next","nice","night","noble","noise","nominee","noodle","normal","north","nose","notable","note","nothing","notice","novel","now","nuclear","number","nurse","nut","oak","obey","object","oblige","obscure","observe","obtain","obvious","occur","ocean","october","odor","off","offer","office","often","oil","okay","old","olive","olympic","omit","once","one","onion","online","only","open","opera","opinion","oppose","option","orange","orbit","orchard","order","ordinary","organ","orient","original","orphan","ostrich","other","outdoor","outer","output","outside","oval","oven","over","own","owner","oxygen","oyster","ozone","pact","paddle","page","pair","palace","palm","panda","panel","panic","panther","paper","parade","parent","park","parrot","party","pass","patch","path","patient","patrol","pattern","pause","pave","payment","peace","peanut","pear","peasant","pelican","pen","penalty","pencil","people","pepper","perfect","permit","person","pet","phone","photo","phrase","physical","piano","picnic","picture","piece","pig","pigeon","pill","pilot","pink","pioneer","pipe","pistol","pitch","pizza","place","planet","plastic","plate","play","please","pledge","pluck","plug","plunge","poem","poet","point","polar","pole","police","pond","pony","pool","popular","portion","position","possible","post","potato","pottery","poverty","powder","power","practice","praise","predict","prefer","prepare","present","pretty","prevent","price","pride","primary","print","priority","prison","private","prize","problem","process","produce","profit","program","project","promote","proof","property","prosper","protect","proud","provide","public","pudding","pull","pulp","pulse","pumpkin","punch","pupil","puppy","purchase","purity","purpose","purse","push","put","puzzle","pyramid","quality","quantum","quarter","question","quick","quit","quiz","quote","rabbit","raccoon","race","rack","radar","radio","rail","rain","raise","rally","ramp","ranch","random","range","rapid","rare","rate","rather","raven","raw","razor","ready","real","reason","rebel","rebuild","recall","receive","recipe","record","recycle","reduce","reflect","reform","refuse","region","regret","regular","reject","relax","release","relief","rely","remain","remember","remind","remove","render","renew","rent","reopen","repair","repeat","replace","report","require","rescue","resemble","resist","resource","response","result","retire","retreat","return","reunion","reveal","review","reward","rhythm","rib","ribbon","rice","rich","ride","ridge","rifle","right","rigid","ring","riot","ripple","risk","ritual","rival","river","road","roast","robot","robust","rocket","romance","roof","rookie","room","rose","rotate","rough","round","route","royal","rubber","rude","rug","rule","run","runway","rural","sad","saddle","sadness","safe","sail","salad","salmon","salon","salt","salute","same","sample","sand","satisfy","satoshi","sauce","sausage","save","say","scale","scan","scare","scatter","scene","scheme","school","science","scissors","scorpion","scout","scrap","screen","script","scrub","sea","search","season","seat","second","secret","section","security","seed","seek","segment","select","sell","seminar","senior","sense","sentence","series","service","session","settle","setup","seven","shadow","shaft","shallow","share","shed","shell","sheriff","shield","shift","shine","ship","shiver","shock","shoe","shoot","shop","short","shoulder","shove","shrimp","shrug","shuffle","shy","sibling","sick","side","siege","sight","sign","silent","silk","silly","silver","similar","simple","since","sing","siren","sister","situate","six","size","skate","sketch","ski","skill","skin","skirt","skull","slab","slam","sleep","slender","slice","slide","slight","slim","slogan","slot","slow","slush","small","smart","smile","smoke","smooth","snack","snake","snap","sniff","snow","soap","soccer","social","sock","soda","soft","solar","soldier","solid","solution","solve","someone","song","soon","sorry","sort","soul","sound","soup","source","south","space","spare","spatial","spawn","speak","special","speed","spell","spend","sphere","spice","spider","spike","spin","spirit","split","spoil","sponsor","spoon","sport","spot","spray","spread","spring","spy","square","squeeze","squirrel","stable","stadium","staff","stage","stairs","stamp","stand","start","state","stay","steak","steel","stem","step","stereo","stick","still","sting","stock","stomach","stone","stool","story","stove","strategy","street","strike","strong","struggle","student","stuff","stumble","style","subject","submit","subway","success","such","sudden","suffer","sugar","suggest","suit","summer","sun","sunny","sunset","super","supply","supreme","sure","surface","surge","surprise","surround","survey","suspect","sustain","swallow","swamp","swap","swarm","swear","sweet","swift","swim","swing","switch","sword","symbol","symptom","syrup","system","table","tackle","tag","tail","talent","talk","tank","tape","target","task","taste","tattoo","taxi","teach","team","tell","ten","tenant","tennis","tent","term","test","text","thank","that","theme","then","theory","there","they","thing","this","thought","three","thrive","throw","thumb","thunder","ticket","tide","tiger","tilt","timber","time","tiny","tip","tired","tissue","title","toast","tobacco","today","toddler","toe","together","toilet","token","tomato","tomorrow","tone","tongue","tonight","tool","tooth","top","topic","topple","torch","tornado","tortoise","toss","total","tourist","toward","tower","town","toy","track","trade","traffic","tragic","train","transfer","trap","trash","travel","tray","treat","tree","trend","trial","tribe","trick","trigger","trim","trip","trophy","trouble","truck","true","truly","trumpet","trust","truth","try","tube","tuition","tumble","tuna","tunnel","turkey","turn","turtle","twelve","twenty","twice","twin","twist","two","type","typical","ugly","umbrella","unable","unaware","uncle","uncover","under","undo","unfair","unfold","unhappy","uniform","unique","unit","universe","unknown","unlock","until","unusual","unveil","update","upgrade","uphold","upon","upper","upset","urban","urge","usage","use","used","useful","useless","usual","utility","vacant","vacuum","vague","valid","valley","valve","van","vanish","vapor","various","vast","vault","vehicle","velvet","vendor","venture","venue","verb","verify","version","very","vessel","veteran","viable","vibrant","vicious","victory","video","view","village","vintage","violin","virtual","virus","visa","visit","visual","vital","vivid","vocal","voice","void","volcano","volume","vote","voyage","wage","wagon","wait","walk","wall","walnut","want","warfare","warm","warrior","wash","wasp","waste","water","wave","way","wealth","weapon","wear","weasel","weather","web","wedding","weekend","weird","welcome","west","wet","whale","what","wheat","wheel","when","where","whip","whisper","wide","width","wife","wild","will","win","window","wine","wing","wink","winner","winter","wire","wisdom","wise","wish","witness","wolf","woman","wonder","wood","wool","word","work","world","worry","worth","wrap","wreck","wrestle","wrist","write","wrong","yard","year","yellow","you","young","youth","zebra","zero","zone","zoo"],jD.english=BD,jD.EN=BD;}catch(t){}Object.defineProperty(MD,"__esModule",{value:!0});const LD=kd,FD=Zd,UD=Jc.exports,zD=ND;let KD=zD._default;const qD="A wordlist is required but a default could not be found.\nPlease pass a 2048 word array explicitly.";function HD(t){return (t||"").normalize("NFKD")}function VD(t,e,r){for(;t.length<r;)t=e+t;return t}function WD(t){return parseInt(t,2)}function JD(t){return t.map((t=>VD(t.toString(2),"0",8))).join("")}function YD(t){const e=8*t.length/32,r=LD("sha256").update(t).digest();return JD(Array.from(r)).slice(0,e)}function ZD(t){return "mnemonic"+(t||"")}var GD=MD.mnemonicToSeedSync=function(t,e){const r=ei.from(HD(t),"utf8"),n=ei.from(ZD(HD(e)),"utf8");return FD.pbkdf2Sync(r,n,2048,64,"sha512")};function XD(t,e){if(!(e=e||KD))throw new Error(qD);const r=HD(t).split(" ");if(r.length%3!=0)throw new Error("Invalid mnemonic");const n=r.map((t=>{const r=e.indexOf(t);if(-1===r)throw new Error("Invalid mnemonic");return VD(r.toString(2),"0",11)})).join(""),i=32*Math.floor(n.length/33),o=n.slice(0,i),a=n.slice(i),s=o.match(/(.{1,8})/g).map(WD);if(s.length<16)throw new Error("Invalid entropy");if(s.length>32)throw new Error("Invalid entropy");if(s.length%4!=0)throw new Error("Invalid entropy");const u=ei.from(s);if(YD(u)!==a)throw new Error("Invalid mnemonic checksum");return u.toString("hex")}function $D(t,e){if(Bi(t)||(t=ei.from(t,"hex")),!(e=e||KD))throw new Error(qD);if(t.length<16)throw new TypeError("Invalid entropy");if(t.length>32)throw new TypeError("Invalid entropy");if(t.length%4!=0)throw new TypeError("Invalid entropy");const r=(JD(Array.from(t))+YD(t)).match(/(.{1,11})/g).map((t=>{const r=WD(t);return e[r]}));return ""===e[0]?r.join(""):r.join(" ")}MD.mnemonicToSeed=function(t,e){return Promise.resolve().then((()=>function(t,e,r,n,i){return Promise.resolve().then((()=>new Promise(((o,a)=>{FD.pbkdf2(t,e,r,n,i,((t,e)=>t?a(t):o(e)));}))))}(ei.from(HD(t),"utf8"),ei.from(ZD(HD(e)),"utf8"),2048,64,"sha512")))},MD.mnemonicToEntropy=XD;var QD=MD.entropyToMnemonic=$D;var tx=MD.generateMnemonic=function(t,e,r){if((t=t||128)%32!=0)throw new TypeError("Invalid entropy");return $D((e=e||UD)(t/8),r)};var ex=MD.validateMnemonic=function(t,e){try{XD(t,e);}catch(t){return !1}return !0};MD.setDefaultWordlist=function(t){const e=zD.wordlists[t];if(!e)throw new Error('Could not find wordlist for language "'+t+'"');KD=e;},MD.getDefaultWordlist=function(){if(!KD)throw new Error("No Default Wordlist set");return Object.keys(zD.wordlists).filter((t=>"JA"!==t&&"EN"!==t&&zD.wordlists[t].every(((t,e)=>t===KD[e]))))[0]};var rx=ND,nx=MD.wordlists=rx.wordlists;class ix{constructor(t=ix.ENGLISH){if(this.language=t,!(t in ix.WORDLISTS))throw new u$1("Unsupported language for mnemonic "+t)}static getInstance(t=ix.ENGLISH){return null!==t&&""!==t||(t=ix.ENGLISH),new ix(t)}generate(t){return t?QD(t,ix.WORDLISTS[this.language]):tx(ix.TWELVE_WORDS_ENTROPY,null,ix.WORDLISTS[this.language])}isValid(t){return Ot$1(null!=t&&""!==t,"Invalid mnemonic"),t=t.normalize("NFKD"),ex(t,ix.WORDLISTS[this.language])}static getLanguage(t){Ot$1(null!=t&&""!==t,"Invalid menmonic"),t=t.normalize("NFKD");for(let e of Object.keys(ix.WORDLISTS)){if(new ix(e).isValid(t))return e}return null}static checkIsValid(t){return Ot$1(null!=t&&""!==t,"Invalid menmonic"),null!=this.getLanguage(t)}static toSeed(t,e){return Ot$1(null!=t&&""!==t,"Invalid menmonic"),null==e&&(e=""),t=t.normalize("NFKD"),e=e.normalize("NFKD"),GD(t,e)}}function ox(t){if("string"!=typeof t)throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function ax(t,e){for(var r,n="",i=0,o=-1,a=0,s=0;s<=t.length;++s){if(s<t.length)r=t.charCodeAt(s);else {if(47===r)break;r=47;}if(47===r){if(o===s-1||1===a);else if(o!==s-1&&2===a){if(n.length<2||2!==i||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(n.length>2){var u=n.lastIndexOf("/");if(u!==n.length-1){-1===u?(n="",i=0):i=(n=n.slice(0,u)).length-1-n.lastIndexOf("/"),o=s,a=0;continue}}else if(2===n.length||1===n.length){n="",i=0,o=s,a=0;continue}e&&(n.length>0?n+="/..":n="..",i=2);}else n.length>0?n+="/"+t.slice(o+1,s):n=t.slice(o+1,s),i=s-o-1;o=s,a=0;}else 46===r&&-1!==a?++a:a=-1;}return n}ix.DEFAULT=null,ix.CHINESE_SIMPLIFIED="chinese_simplified",ix.CHINESE_TRADITIONAL="chinese_traditional",ix.CZECH="czech",ix.ENGLISH="english",ix.FRENCH="french",ix.ITALIAN="italian",ix.JAPANESE="japanese",ix.KOREAN="korean",ix.SPANISH="spanish",ix.TWELVE_WORDS_ENTROPY=128,ix.WORDLISTS={english:nx.english,czech:nx.czech,chinese_simplified:nx.chinese_simplified,chinese_traditional:nx.chinese_traditional,french:nx.french,italian:nx.italian,japanese:nx.japanese,spanish:nx.spanish,korean:nx.korean};var sx={resolve:function(){for(var t,e="",r=!1,n=arguments.length-1;n>=-1&&!r;n--){var i;n>=0?i=arguments[n]:(void 0===t&&(t=ke$1.cwd()),i=t),ox(i),0!==i.length&&(e=i+"/"+e,r=47===i.charCodeAt(0));}return e=ax(e,!r),r?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(t){if(ox(t),0===t.length)return ".";var e=47===t.charCodeAt(0),r=47===t.charCodeAt(t.length-1);return 0!==(t=ax(t,!e)).length||e||(t="."),t.length>0&&r&&(t+="/"),e?"/"+t:t},isAbsolute:function(t){return ox(t),t.length>0&&47===t.charCodeAt(0)},join:function(){if(0===arguments.length)return ".";for(var t,e=0;e<arguments.length;++e){var r=arguments[e];ox(r),r.length>0&&(void 0===t?t=r:t+="/"+r);}return void 0===t?".":sx.normalize(t)},relative:function(t,e){if(ox(t),ox(e),t===e)return "";if((t=sx.resolve(t))===(e=sx.resolve(e)))return "";for(var r=1;r<t.length&&47===t.charCodeAt(r);++r);for(var n=t.length,i=n-r,o=1;o<e.length&&47===e.charCodeAt(o);++o);for(var a=e.length-o,s=i<a?i:a,u=-1,c=0;c<=s;++c){if(c===s){if(a>s){if(47===e.charCodeAt(o+c))return e.slice(o+c+1);if(0===c)return e.slice(o+c)}else i>s&&(47===t.charCodeAt(r+c)?u=c:0===c&&(u=0));break}var l=t.charCodeAt(r+c);if(l!==e.charCodeAt(o+c))break;47===l&&(u=c);}var f="";for(c=r+u+1;c<=n;++c)c!==n&&47!==t.charCodeAt(c)||(0===f.length?f+="..":f+="/..");return f.length>0?f+e.slice(o+u):(o+=u,47===e.charCodeAt(o)&&++o,e.slice(o))},_makeLong:function(t){return t},dirname:function(t){if(ox(t),0===t.length)return ".";for(var e=t.charCodeAt(0),r=47===e,n=-1,i=!0,o=t.length-1;o>=1;--o)if(47===(e=t.charCodeAt(o))){if(!i){n=o;break}}else i=!1;return -1===n?r?"/":".":r&&1===n?"//":t.slice(0,n)},basename:function(t,e){if(void 0!==e&&"string"!=typeof e)throw new TypeError('"ext" argument must be a string');ox(t);var r,n=0,i=-1,o=!0;if(void 0!==e&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return "";var a=e.length-1,s=-1;for(r=t.length-1;r>=0;--r){var u=t.charCodeAt(r);if(47===u){if(!o){n=r+1;break}}else -1===s&&(o=!1,s=r+1),a>=0&&(u===e.charCodeAt(a)?-1==--a&&(i=r):(a=-1,i=s));}return n===i?i=s:-1===i&&(i=t.length),t.slice(n,i)}for(r=t.length-1;r>=0;--r)if(47===t.charCodeAt(r)){if(!o){n=r+1;break}}else -1===i&&(o=!1,i=r+1);return -1===i?"":t.slice(n,i)},extname:function(t){ox(t);for(var e=-1,r=0,n=-1,i=!0,o=0,a=t.length-1;a>=0;--a){var s=t.charCodeAt(a);if(47!==s)-1===n&&(i=!1,n=a+1),46===s?-1===e?e=a:1!==o&&(o=1):-1!==e&&(o=-1);else if(!i){r=a+1;break}}return -1===e||-1===n||0===o||1===o&&e===n-1&&e===r+1?"":t.slice(e,n)},format:function(t){if(null===t||"object"!=typeof t)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return function(t,e){var r=e.dir||e.root,n=e.base||(e.name||"")+(e.ext||"");return r?r===e.root?r+n:r+t+n:n}("/",t)},parse:function(t){ox(t);var e={root:"",dir:"",base:"",ext:"",name:""};if(0===t.length)return e;var r,n=t.charCodeAt(0),i=47===n;i?(e.root="/",r=1):r=0;for(var o=-1,a=0,s=-1,u=!0,c=t.length-1,l=0;c>=r;--c)if(47!==(n=t.charCodeAt(c)))-1===s&&(u=!1,s=c+1),46===n?-1===o?o=c:1!==l&&(l=1):-1!==o&&(l=-1);else if(!u){a=c+1;break}return -1===o||-1===s||0===l||1===l&&o===s-1&&o===a+1?-1!==s&&(e.base=e.name=0===a&&i?t.slice(1,s):t.slice(a,s)):(0===a&&i?(e.name=t.slice(1,o),e.base=t.slice(1,s)):(e.name=t.slice(a,o),e.base=t.slice(a,s)),e.ext=t.slice(o,s)),a>0?e.dir=t.slice(0,a-1):i&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};sx.posix=sx;var ux=sx;class cx{constructor(t,e){let r=t instanceof cx?t.getAbsolutePath():t;e&&(r+=cx.SEPARATOR+e),this.fullPath=r;}static exists(t){return "string"==typeof t&&(t=new cx(t)),t.exists()}static isFile(t){return "string"==typeof t&&(t=new cx(t)),t.isFile()}static isDirectory(t){return "string"==typeof t&&(t=new cx(t)),t.isDirectory()}getStats(){return this.fileStats?this.fileStats:this.exists()?AS(this.fullPath):null}exists(){return vS(this.fullPath)}length(){return this.exists()?this.getStats().size:0}getAbsolutePath(){return this.fullPath}getName(){return this.fullPath.includes(cx.SEPARATOR)?this.fullPath.substring(this.fullPath.lastIndexOf(cx.SEPARATOR)+1):this.fullPath}getParentDirectory(){let t=this.getParentDirectoryName();return t?new cx(t):null}getParentDirectoryName(){return this.fullPath.includes(cx.SEPARATOR)?this.fullPath.substring(0,this.fullPath.lastIndexOf(cx.SEPARATOR)):this.isDirectory?this.fullPath:""}isDirectory(){return !!this.exists()&&this.getStats().isDirectory()}isFile(){return !!this.exists()&&this.getStats().isFile()}list(){return this.exists()&&this.getStats().isDirectory()?_S(this.fullPath):null}listFiles(){if(!this.exists()||!this.getStats().isDirectory())return null;let t=[];return this.list().forEach((e=>{t.push(new cx(this.getAbsolutePath()+"/"+e));})),t}writeText(t){this.exists()&&!this.getStats().isFile()||DS(this.fullPath,t,{encoding:"utf-8"});}readText(){return this.exists()?SS(this.fullPath,{encoding:"utf-8"}):null}rename(t){if(this.exists()){let e=this.fullPath.includes(cx.SEPARATOR)&&!t.includes(cx.SEPARATOR)?this.getParentDirectoryName+cx.SEPARATOR+t:t;ES(this.fullPath,e);}}createFile(t){let e=t||!1;this.exists()&&!e||(DS(this.fullPath,"",{encoding:"utf-8"}),this.fileStats=void 0);}createDirectory(t){let e=t||!1;this.exists()&&!e||(this.mkdirpath(this.fullPath),this.fileStats=void 0);}mkdirpath(t){if(!vS(t))try{wS(t);}catch(e){let r=ux.dirname(t);if(r===t)throw e;this.mkdirpath(r),this.mkdirpath(t);}}delete(){this.exists()&&(this.isDirectory()?this.deleteDirectory(this.fullPath):xS(this.fullPath),this.fileStats=void 0);}deleteDirectory(t){vS(t)&&(_S(t).forEach(((e,r)=>{const n=ux.join(t,e);kS(n).isDirectory()?this.deleteDirectory(n):xS(n);})),IS(t));}toString(){return this.fullPath}}cx.SEPARATOR="/";class lx{constructor(){}static getInstance(){return lx.instance||(lx.instance=new lx),lx.instance}merge(t,e){return e}}class fx extends at$1{constructor(){super();}constructWithOperation(t){this.header=fx.Header.newWithPreviousTxId(t,null);}constructWithPreviousTxId(t,e){this.header=fx.Header.newWithPreviousTxId(t,e);}constructWithTransferTicket(t,e){this.header=fx.Header.newWithTransferTicket(t,e);}constructWithIDChainRequest(t){this.header=t.header,this.payload=t.payload,this.proof=t.proof;}getHeader(){return this.header}getOperation(){return this.header.getOperation()}getPayload(){return this.payload}setPayload(t){this.payload=t;}getProof(){return this.proof}setProof(t){this.proof=t;}getSigningInputs(){let t=this.getOperation().equals(fx.Operation.UPDATE)?this.header.getPreviousTxid():"",e=this.getOperation().equals(fx.Operation.TRANSFER)?this.header.getTicket():"";return [vt$1.Buffer.from(this.header.getSpecification()),vt$1.Buffer.from(this.header.getOperation().toString()),vt$1.Buffer.from(t),vt$1.Buffer.from(e),vt$1.Buffer.from(this.payload)]}isValid(){return r(this,void 0,void 0,(function*(){let t=this.proof.getVerificationMethod(),e=yield this.getSignerDocument();if(null==e)return !1;if(!e.isGenuine())return !1;if(this.getOperation().equals(fx.Operation.DEACTIVATE)){if(!e.isAuthenticationKey(t)&&!e.isAuthorizationKey(t))return !1}else if(!e.isAuthenticationKey(t))return !1;return e.verify(this.proof.getVerificationMethod(),this.proof.getSignature(),...this.getSigningInputs())}))}toJSON(t=null){return {header:this.header.toJSON(),payload:this.payload,proof:this.proof.toJSON()}}fromJSON(t,e=null){if(!t.header)throw new E$1("Missing header");if(this.header=fx.Header.parse(t.header),!t.payload)throw new E$1("Missing payload");if(this.payload=this.getString("payload",t.payload,{mandatory:!0,nullable:!1}),!t.proof)throw new E$1("Missing proof");this.proof=fx.Proof.parse(t.proof),this.sanitize();}}fx.DID_SPECIFICATION="elastos/did/1.0",fx.CREDENTIAL_SPECIFICATION="elastos/credential/1.0",function(t){class e{constructor(t,e){this.name=t,this.specification=e;}getSpecification(){return this.specification}toString(){return this.name}static fromString(t){return e[t.toUpperCase()]}equals(t){return this.name===t.name}}t.Operation=e,function(e){e.CREATE=new e("create",t.DID_SPECIFICATION),e.UPDATE=new e("update",t.DID_SPECIFICATION),e.TRANSFER=new e("transfer",t.DID_SPECIFICATION),e.DEACTIVATE=new e("deactivate",t.DID_SPECIFICATION),e.DECLARE=new e("declare",t.CREDENTIAL_SPECIFICATION),e.REVOKE=new e("revoke",t.CREDENTIAL_SPECIFICATION);}(e=t.Operation||(t.Operation={}));class r extends at$1{constructor(t=null){super(),this.specification=t;}static newWithPreviousTxId(t,e){let n=new r(t.getSpecification());return n.operation=t,n.previousTxid=e,n}static newWithTransferTicket(t,e){Ot$1(null!=e,"Invalid ticket");let n=new r(t.getSpecification());n.operation=t;let i=e.toString(!0);return n.ticket=jS.fromString(i),n.transferTicket=e,n}getSpecification(){return this.specification}getOperation(){return this.operation}getPreviousTxid(){return this.previousTxid}getTicket(){return this.ticket}getTransferTicket(){if(this.ticket&&!this.transferTicket){let t=jS.toString(this.ticket);try{this.transferTicket=lS.parse(t);}catch(t){throw new i("Invalid ticket",t)}}return this.transferTicket}toJSON(t=null){let e={};return e.specification=this.specification,e.operation=this.operation.toString(),this.previousTxid&&(e.previousTxid=this.previousTxid),this.ticket&&(e.ticket=this.ticket),e}fromJSON(t,r=null){this.specification=this.getString("specification",t.specification,{mandatory:!0,nullable:!1});let n=this.getString("operation",t.operation,{mandatory:!0,nullable:!1});this.operation=e.fromString(n),this.previousTxid=this.getString("previousTxid",t.previousTxid,{mandatory:!1,nullable:!1,defaultValue:null}),this.ticket=this.getString("ticket",t.ticket,{mandatory:!1,nullable:!1,defaultValue:null});}static parse(t,e=null){try{return at$1.deserialize(t,r,e)}catch(t){throw t instanceof E$1?t:new E$1(t)}}}t.Header=r;class n extends at$1{constructor(t=null,e=null,r=mr$1.DEFAULT_PUBLICKEY_TYPE){super(),this.type=null!=r?r:mr$1.DEFAULT_PUBLICKEY_TYPE,this.verificationMethod=t,this.signature=e;}getType(){return this.type}getVerificationMethod(){return this.verificationMethod}qualifyVerificationMethod(t){null==this.verificationMethod.getDid()&&(this.verificationMethod=jt$1.from(this.verificationMethod,t));}getSignature(){return this.signature}toJSON(t=null){return {type:this.type,verificationMethod:this.verificationMethod.toString(),signature:this.signature}}fromJSON(t,e=null){this.type=this.getString("type",t.type,{mandatory:!1,defaultValue:mr$1.DEFAULT_PUBLICKEY_TYPE,nullable:!1}),this.verificationMethod=this.getDidUrl("verificationMethod",t.verificationMethod,{mandatory:!0,nullable:!1}),this.signature=this.getString("signature",t.signature,{mandatory:!0,nullable:!1});}static parse(t,e=null){try{return at$1.deserialize(t,n,e)}catch(t){throw t instanceof E$1?t:new E$1(t)}}}t.Proof=n;}(fx||(fx={}));class hx extends at$1{constructor(t=null,e=null){super(),this.requestId=t,this.method=e;}getRequestId(){return this.requestId}getMethod(){return this.method}setParameters(t){this.params=t;}getParameters(){return this.params}hashCode(){return Mt$1(this.method)+this.params.hashCode()}equals(t){if(!(t instanceof hx))return !1;let e=t;return this.method===e.method&&this.params===e.params}toJSON(t=null){return {id:this.requestId,method:this.method,params:[this.params.toJSON(null)]}}fromJSON(t,e=null){if(this.requestId=super.getString("id",t.id,{mandatory:!1,nullable:!0}),this.method=this.getString("method",t.method,{mandatory:!0,nullable:!1}),!t.params)throw new x$1("Missing parameters");if(!Array.isArray(t.params))throw new x$1("Invalid parameters");this.params=this.paramsFromJson(t.params[0]);}}hx.ID="id",hx.METHOD="method",hx.PARAMETERS="params",function(t){t.Parameters=class extends at$1{};}(hx||(hx={}));class dx extends at$1{constructor(t=null,e=null){super(),this.jsonrpc=dx.JSON_RPC_VERSION,this.id=t,e instanceof class{constructor(t,e){this.code=t,this.message=e;}}?this.error=new dx.JsonRpcError(e.code,e.message):e instanceof dx.JsonRpcError?this.error=e:this.result=e;}getResponseId(){return this.id}getErrorCode(){return this.error.getCode()}getErrorMessage(){return this.error.getMessage()}getResult(){return this.result}toJSON(t=null){let e={};return e.id=this.id,e.jsonrpc=this.jsonrpc,this.result&&(e.result=this.result.toJSON(null)),this.error&&(e.error=this.error.toJSON()),e}fromJSON(t,e=null){if(this.id=this.getString("id",t.id,{mandatory:!1,nullable:!0,defaultValue:null}),this.jsonrpc=this.getString("jsonrpc",t.jsonrpc,{mandatory:!0,nullable:!1}),null==this.jsonrpc||this.jsonrpc!==dx.JSON_RPC_VERSION)throw new T$1("Invalid JsonRPC version");if(!t.result&&!t.error)throw new T$1("Missing response data");t.result&&(this.result=this.resultFromJson(t.result)),t.error&&(this.error=dx.JsonRpcError.parse(t.error));}}dx.JSON_RPC_VERSION="2.0",function(t){class e extends at$1{constructor(t=0,e=null,r=null){super(),this.code=t,this.message=e,this.data=r;}getCode(){return this.code}getMessage(){return this.message}getData(){return this.data}toJSON(t=null){return {code:this.code,message:this.message,data:this.data}}fromJSON(t,e=null){this.code=this.getNumber("code",t.code,{mandatory:!0,nullable:!1,defaultValue:0}),this.message=this.getString("message",t.message,{mandatory:!1,nullable:!0}),this.data=this.getString("data",t.data,{mandatory:!1,nullable:!0});}static parse(t,r=null){try{return at$1.deserialize(t,e,r)}catch(t){throw t instanceof T$1?t:new T$1(t)}}}t.JsonRpcError=e;t.Result=class extends at$1{};}(dx||(dx={}));class px extends hx{constructor(t=null){super(t,px.METHOD_NAME);}setParameters(t,e=!1){t instanceof Nt$1?super.setParameters(new yx(t,e)):t instanceof yx?super.setParameters(t):super.setParameters(new yx(Nt$1.from(t),e));}getDid(){return this.getParameters().did}isResolveAll(){return this.getParameters().all}toString(){let t=new jt$1.Builder(this.getParameters().did);return t.setQueryParameter(px.PARAMETER_ALL,this.getParameters().all?"true":"false"),t.build().toString()}paramsFromJson(t){return yx.parse(t)}static parse(t,e=null){try{return at$1.deserialize(t,px,e)}catch(t){throw t instanceof x$1?t:new x$1(t)}}}px.PARAMETER_DID="did",px.PARAMETER_ALL="all",px.METHOD_NAME="did_resolveDID";class yx extends hx.Parameters{constructor(t=null,e=!1){super(),this.did=t,this.all=e;}hashCode(){let t=this.did.hashCode();return t+=Mt$1(this.all),t}equals(t){if(!(t instanceof yx))return !1;let e=t;return !!this.did.equals(e.did)&&this.all==e.all}toJSON(t=null){let e={};return e.did=this.did.toString(),this.all&&!0===this.all&&(e.all=this.all),e}fromJSON(t,e=null){this.did=super.getDid("did",t.did,{mandatory:!0,nullable:!1}),this.all=this.getBoolean("all",t.all,{mandatory:!1,nullable:!1,defaultValue:!1});}static parse(t,e=null){try{return at$1.deserialize(t,yx,e)}catch(t){throw t instanceof x$1?t:new x$1(t)}}}class gx{constructor(t,e){this.name=e,this.value=t;}getValue(){return this.value}static fromValue(t){switch(String(t)){case"0":return gx.VALID;case"2":return gx.REVOKED;case"3":return gx.NOT_FOUND;default:throw new i("Invalid CredentialBiographyStatus")}}toString(){return this.name.toLowerCase()}equals(t){return this.value==t.value}}!function(t){t.VALID=new t(0,"valid"),t.REVOKED=new t(2,"revoked"),t.NOT_FOUND=new t(3,"not_found");}(gx||(gx={}));class mx extends dx.Result{constructor(t=null,e=null){super(),this.id=t,this.status=e;}getId(){return this.id}setStatus(t){this.status=t;}getStatus(){return this.status}getTransactionCount(){return null!=this.txs?this.txs.length:0}getTransaction(t){return null!=this.txs?this.txs[t]:null}getAllTransactions(){return null!=this.txs?this.txs:[]}addTransaction(t){null==this.txs&&(this.txs=[]),this.txs.push(t);}toJSON(t=null){let e={};return e.id=this.id.toString(),e.status=this.status.toString(),this.txs&&this.txs.length>0&&(e.transaction=Array.from(this.txs,(t=>t.toJSON()))),e}fromJSON(t,e=null){this.id=this.getDidUrl("id",t.id,{mandatory:!0,nullable:!1});let r=this.getNumber("status",t.status,{mandatory:!0,nullable:!1});if(this.status=gx.fromValue(r),this.status.equals(gx.NOT_FOUND)){if(t.transaction)throw new k$1("Should not include transaction")}else {if(!t.transaction)throw new k$1("Missing transaction");if(!Array.isArray(t.transaction)||0==t.transaction.length)throw new k$1("Invalid transaction");this.txs=Array.from(t.transaction,(t=>Ax.parse(t)));}}static parse(t,e=null){try{return at$1.deserialize(t,mx,e)}catch(t){throw t instanceof k$1?t:new k$1(t)}}}class bx extends dx{constructor(t=null,e=null){super(t,e);}resultFromJson(t){return mx.parse(t)}static parse(t,e=null){try{return at$1.deserialize(t,bx,e)}catch(t){throw t instanceof T$1?t:new T$1(t)}}}class vx extends at$1{constructor(t=null,e=null,r=null){super(),this.txId=t,this.timestamp=e,this.request=r;}getTransactionId(){return this.txId}getTimestamp(){return this.timestamp}getRequest(){return this.request}toJSON(t=null){return {txid:this.txId,timestamp:this.dateToString(this.timestamp),operation:this.request.toJSON()}}fromJSON(t,e=null){if(this.txId=this.getString("txid",t.txid,{mandatory:!0,nullable:!1}),this.timestamp=this.getDate("timestamp",t.timestamp,{mandatory:!0,nullable:!1}),!t.operation)throw new A$1("Missing request");this.request=this.requestFromJSON(t.operation);}}vx.TXID="txid",vx.TIMESTAMP="timestamp",vx.OPERATION="operation";class wx extends fx{static newWithOperation(t){let e=new wx;return e.constructWithOperation(t),e}static newWithPreviousTxId(t,e){let r=new wx;return r.constructWithPreviousTxId(t,e),r}static newWithTransferTicket(t,e){let r=new wx;return r.constructWithTransferTicket(t,e),r}static newWithDIDRequest(t){let e=new wx;e.constructWithIDChainRequest(t),e.did=t.did,e.doc=t.doc;}static create(t,e,n){return r(this,void 0,void 0,(function*(){let r=wx.newWithOperation(fx.Operation.CREATE);r.setPayload(t);try{yield r.seal(e,n);}catch(t){throw new h$1(t)}return r}))}static update(t,e,n,i){return r(this,void 0,void 0,(function*(){let r=wx.newWithPreviousTxId(fx.Operation.UPDATE,e);r.setPayload(t);try{yield r.seal(n,i);}catch(t){throw new h$1(t)}return r}))}static transfer(t,e,n,i){return r(this,void 0,void 0,(function*(){let r=wx.newWithTransferTicket(fx.Operation.TRANSFER,e);r.setPayload(t);try{yield r.seal(n,i);}catch(t){throw new h$1(t)}return r}))}static deactivate(t,e,n){return r(this,void 0,void 0,(function*(){let r=wx.newWithOperation(fx.Operation.DEACTIVATE);r.setPayload(t);try{yield r.seal(e,n);}catch(t){throw new h$1(t)}return r}))}static deactivateTarget(t,e,n,i,o){return r(this,void 0,void 0,(function*(){let r=wx.newWithOperation(fx.Operation.DEACTIVATE);r.setPayload(t);try{yield r.sealTarget(e,n,i,o);}catch(t){}return r}))}getPreviousTxid(){return this.getHeader().getPreviousTxid()}getTransferTicket(){return this.getHeader().getTransferTicket()}getDid(){return this.did}getDocument(){return this.doc}setPayload(t){if(t instanceof oS)if(this.doc=t,this.did=this.doc.getSubject(),this.getHeader().getOperation().equals(fx.Operation.DEACTIVATE))super.setPayload(this.doc.getSubject().toString());else {let t=this.doc.toString(!0),e=vt$1.Buffer.from(t,"utf-8");this.setPayload(jS.fromString(e.toString()));}else super.setPayload(t);}sanitize(){let t=this.getHeader();if(null==t)throw new E$1("Missing header");if(null==t.getSpecification())throw new E$1("Missing specification");if(t.getSpecification()!==wx.DID_SPECIFICATION)throw new E$1("Unsupported specification");let e=t.getOperation();if(e.equals(fx.Operation.CREATE));else if(e.equals(fx.Operation.UPDATE)){if(null==t.getPreviousTxid()||""===t.getPreviousTxid())throw new E$1("Missing previousTxid")}else if(e.equals(fx.Operation.TRANSFER)){if(null==t.getTicket()||""===t.getTicket())throw new E$1("Missing ticket")}else if(!e.equals(fx.Operation.DEACTIVATE))throw new E$1("Invalid operation "+t.getOperation().toString());let r=this.getPayload();if(null==r||""===r)throw new E$1("Missing payload");let n=this.getProof();if(null==n)throw new E$1("Missing proof");try{if(t.getOperation().equals(fx.Operation.DEACTIVATE))this.did=new Nt$1(r);else {let t=jS.toString(r);this.doc=oS._parseOnly(t),this.did=this.doc.getSubject();}}catch(t){throw new E$1("Invalid payload",t)}n.qualifyVerificationMethod(this.did);}seal(t,e){return r(this,void 0,void 0,(function*(){if(!this.doc.isAuthenticationKey(t))throw new I$1("Not an authentication key.");if(null==this.getPayload()||""===this.getPayload())throw new E$1("Missing payload");let r=yield this.doc.signWithId(t,e,...this.getSigningInputs());this.setProof(new wx.Proof(t,r));}))}sealTarget(t,e,n,i){return r(this,void 0,void 0,(function*(){if(!this.doc.isAuthorizationKey(t))throw new I$1("Not an authorization key: "+t);if(!e.isAuthenticationKey(n))throw new I$1("Not an authentication key: "+n);if(!this.getPayload()||null==this.getPayload())throw new E$1("Missing payload");let r=yield e.signWithId(n,i,...this.getSigningInputs());this.setProof(new wx.Proof(t,r));}))}getSignerDocument(){return r(this,void 0,void 0,(function*(){return null==this.doc?this.doc=yield this.did.resolve():this.doc.isCustomizedDid()&&(yield this.doc.resolveControllers()),this.doc}))}static parse(t,e=null){try{return at$1.deserialize(t,wx,e)}catch(t){throw t instanceof E$1?t:new E$1(t)}}}class _x extends vx{constructor(t=null,e=null,r=null){super(t,e,r);}getDid(){return this.getRequest().getDid()}requestFromJSON(t){return wx.parse(t)}static parse(t,e=null){try{return at$1.deserialize(t,_x,e)}catch(t){throw t instanceof A$1?t:new A$1(t)}}}class Sx extends hx{constructor(t=null){super(t,Sx.METHOD_NAME);}setParameters(t,e=null){t instanceof Ex?super.setParameters(t):super.setParameters(new Ex(t,e));}getId(){return this.getParameters().id}getIssuer(){return this.getParameters().issuer}toString(){let t=new jt$1.Builder(this.getParameters().id);return null!=this.getParameters().issuer&&t.setQueryParameter(Sx.PARAMETER_ISSUER,this.getParameters().issuer.toString()),t.build().toString()}paramsFromJson(t){return Ex.parse(t)}static parse(t,e=null){try{return at$1.deserialize(t,Sx,e)}catch(t){throw t instanceof x$1?t:new x$1(t)}}}Sx.PARAMETER_ID="id",Sx.PARAMETER_ISSUER="issuer",Sx.METHOD_NAME="did_resolveCredential";class Ex extends hx.Parameters{constructor(t=null,e=null){super(),this.id=t,this.issuer=e;}hashCode(){let t=this.id.hashCode();return null!=this.issuer&&(t+=this.issuer.hashCode()),t}equals(t){if(!(t instanceof Ex))return !1;let e=t;if(!this.id.equals(e.id))return !1;let r=null!=this.issuer?this.issuer:this.id.getDid(),n=null!=e.issuer?e.issuer:e.id.getDid();return r.equals(n)}toJSON(t=null){let e={};return e.id=this.id.toString(),this.issuer&&(e.issuer=this.issuer.toString()),e}fromJSON(t,e=null){this.id=super.getDidUrl("id",t.id,{mandatory:!0,nullable:!1}),this.issuer=this.getDid("issuer",t.issuer,{mandatory:!1,nullable:!0,defaultValue:null});}static parse(t,e=null){try{return at$1.deserialize(t,Ex,e)}catch(t){throw t instanceof x$1?t:new x$1(t)}}}class Ix extends fx{constructor(){super();}static newWithOperation(t){let e=new Ix;return e.constructWithOperation(t),e}static newWithCredentialRequest(t){let e=new Ix;return e.constructWithIDChainRequest(t),e.id=t.id,e.vc=t.vc,e.signer=t.signer,e}static declare(t,e,n,i){return r(this,void 0,void 0,(function*(){let r=Ix.newWithOperation(fx.Operation.DECLARE);r.setPayload(t),r.setSigner(e);try{yield r.seal(e,n,i);}catch(t){throw new h$1(t)}return r}))}static revoke(t,e,n,i){return r(this,void 0,void 0,(function*(){let r=Ix.newWithOperation(fx.Operation.REVOKE);r.setPayload(t),r.setSigner(e);try{yield r.seal(e,n,i);}catch(t){throw new h$1(t)}return r}))}setSigner(t){this.signer=t;}getCredentialId(){return this.id}getCredential(){return this.vc}setPayload(t){if(t instanceof vr$1){let e=t;if(this.id=e.getId(),this.vc=e,this.getHeader().getOperation().equals(fx.Operation.DECLARE)){let t=e.toString(!0);this.setPayload(jS.fromString(t));}else this.getHeader().getOperation().equals(fx.Operation.REVOKE)&&this.setPayload(e.getId().toString());}else t instanceof jt$1?(this.id=t,this.vc=null,super.setPayload(t.toString())):super.setPayload(t);}sanitize(){let t=this.getHeader();if(null==t)throw new E$1("Missing header");if(null==t.getSpecification())throw new E$1("Missing specification");if(t.getSpecification()!==Ix.CREDENTIAL_SPECIFICATION)throw new E$1("Unsupported specification");if(!t.getOperation().equals(fx.Operation.DECLARE)&&!t.getOperation().equals(fx.Operation.REVOKE))throw new E$1("Invalid operation "+t.getOperation());let e=this.getPayload();if(null==e||""===e)throw new E$1("Missing payload");let r=this.getProof();if(null==r)throw new E$1("Missing proof");try{if(t.getOperation().equals(fx.Operation.DECLARE)){let t=jS.toString(e);this.vc=vr$1.parse(t),this.id=this.vc.getId();}else this.id=jt$1.from(e);}catch(t){throw new E$1("Invalid payload",t)}r.qualifyVerificationMethod(this.id.getDid());}seal(t,e,n){return r(this,void 0,void 0,(function*(){if(!t.isAuthenticationKey(e))throw new I$1("Not an authentication key.");if(null==this.getPayload()||""===this.getPayload())throw new E$1("Missing payload");let r=yield t.signWithId(e,n,...this.getSigningInputs());this.setProof(new fx.Proof(e,r));}))}getSignerDocument(){return r(this,void 0,void 0,(function*(){return null!=this.signer||(this.getOperation().equals(fx.Operation.DECLARE)?this.signer=yield this.getCredential().getSubject().getId().resolve():this.signer=yield this.getProof().getVerificationMethod().getDid().resolve()),this.signer}))}static parse(t,e=null){try{return at$1.deserialize(t,Ix,e)}catch(t){throw t instanceof E$1?t:new E$1(t)}}}class Ax extends vx{constructor(t=null,e=null,r=null){super(t,e,r);}getId(){return this.getRequest().getCredentialId()}requestFromJSON(t){return Ix.parse(t)}static parse(t,e=null){try{return at$1.deserialize(t,Ax,e)}catch(t){throw t instanceof A$1?t:new A$1(t)}}}class kx extends hx{constructor(t=null){super(t,kx.METHOD_NAME);}setParameters(t,e=0,r=0){t instanceof Nt$1?super.setParameters(new Dx(t,e,r)):super.setParameters(t);}getDid(){return this.getParameters().did}getSkip(){return this.getParameters().skip}getLimit(){return this.getParameters().limit}toString(){let t=new jt$1.Builder(this.getParameters().did);return t.setPath("/credentials"),t.setQueryParameter(kx.PARAMETER_SKIP,this.getParameters().skip.toFixed()),t.setQueryParameter(kx.PARAMETER_LIMIT,this.getParameters().limit.toFixed()),t.build().toString()}paramsFromJson(t){return Dx.parse(t)}static parse(t,e=null){try{return at$1.deserialize(t,kx,e)}catch(t){throw t instanceof x$1?t:new x$1(t)}}}kx.PARAMETER_DID="did",kx.PARAMETER_SKIP="skip",kx.PARAMETER_LIMIT="limit",kx.METHOD_NAME="did_listCredentials";class Dx extends hx.Parameters{constructor(t=null,e=0,r=0){super(),this.did=t,this.skip=e,this.limit=r;}hashCode(){let t=this.did.hashCode();return t+=Mt$1(this.skip),t+=Mt$1(this.limit),t}equals(t){if(!(t instanceof Dx))return !1;let e=t;return !!this.did.equals(e.did)&&(this.skip==e.skip&&this.limit==e.limit)}toJSON(t=null){let e={};return e.did=this.did.toString(),this.skip&&0!=this.skip&&(e.skip=this.skip),this.limit&&0!=this.limit&&(e.limit=this.limit),e}fromJSON(t,e=null){this.did=super.getDid("did",t.did,{mandatory:!0,nullable:!1}),this.skip=this.getNumber("skip",t.skip,{mandatory:!1,nullable:!1,defaultValue:0}),this.limit=this.getNumber("limit",t.limit,{mandatory:!1,nullable:!1,defaultValue:0});}static parse(t,e=null){try{return at$1.deserialize(t,Dx,e)}catch(t){throw t instanceof x$1?t:new x$1(t)}}}class xx extends dx.Result{constructor(t=null){super(),this.did=t;}getDid(){return this.did}getCredentialIds(){return null!=this.credentialIds?this.credentialIds:[]}size(){return null!=this.credentialIds?this.credentialIds.length:0}getCredentialId(t){return null!=this.credentialIds?this.credentialIds[t]:null}addCredentialId(t){null==this.credentialIds&&(this.credentialIds=[]),this.credentialIds.push(t);}toJSON(t=null){let e={};return e.did=this.did.toString(),this.credentialIds&&this.credentialIds.length>0&&(e.credentials=Array.from(this.credentialIds,(t=>t.toString()))),e}fromJSON(t,e=null){if(this.did=super.getDid("did",t.did,{mandatory:!0,nullable:!1}),t.credentials){if(!Array.isArray(t.credentials))throw new k$1("Invalid credential list");t.credentials.length>0&&(this.credentialIds=Array.from(t.credentials,(t=>new jt$1(String(t)))));}}static parse(t,e=null){try{return at$1.deserialize(t,xx,e)}catch(t){throw t instanceof k$1?t:new k$1(t)}}}xx.DEFAULT_SIZE=128,xx.MAX_SIZE=512;class Tx{constructor(t,e){this.name=e,this.value=t;}getValue(){return this.value}static fromValue(t){switch(String(t)){case"0":return Tx.VALID;case"2":return Tx.DEACTIVATED;case"3":return Tx.NOT_FOUND;default:throw new i("Invalid DIDBiographyStatus")}}toString(){return this.name.toLowerCase()}equals(t){return this.value==t.value}}!function(t){t.VALID=new t(0,"valid"),t.DEACTIVATED=new t(2,"deactivated"),t.NOT_FOUND=new t(3,"not_found");}(Tx||(Tx={}));class Px extends dx.Result{constructor(t=null){super(),this.did=t;}getDid(){return this.did}setStatus(t){this.status=t;}getStatus(){return this.status}getTransactionCount(){return null!=this.txs?this.txs.length:0}getTransaction(t){return null!=this.txs?this.txs[t]:null}getAllTransactions(){return null!=this.txs?this.txs:[]}addTransaction(t){null==this.txs&&(this.txs=[]),this.txs.push(t);}toJSON(t=null){let e={};return e.did=this.did.toString(),e.status=this.status.toString(),this.txs&&this.txs.length>0&&(e.transaction=Array.from(this.txs,(t=>t.toJSON()))),e}fromJSON(t,e=null){this.did=super.getDid("did",t.did,{mandatory:!0,nullable:!1});let r=this.getNumber("status",t.status,{mandatory:!0,nullable:!1});if(this.status=Tx.fromValue(r),this.status.equals(Tx.NOT_FOUND)){if(t.transaction)throw new k$1("Should not include transaction")}else {if(!t.transaction)throw new k$1("Missing transaction");if(!Array.isArray(t.transaction)||0==t.transaction.length)throw new k$1("Invalid transaction");this.txs=Array.from(t.transaction,(t=>_x.parse(t)));}}static parse(t,e=null){try{return at$1.deserialize(t,Px,e)}catch(t){throw t instanceof k$1?t:new k$1(t)}}}class Ox extends dx{constructor(t=null,e=null){super(t,e);}resultFromJson(t){return xx.parse(t)}static parse(t,e=null){try{return at$1.deserialize(t,Ox,e)}catch(t){throw t instanceof T$1?t:new T$1(t)}}}class Rx extends dx{constructor(t=null,e=null){super(t,e);}resultFromJson(t){return Px.parse(t)}static parse(t,e=null){try{return at$1.deserialize(t,Rx,e)}catch(t){throw t instanceof T$1?t:new T$1(t)}}}const Cx=new e("DIDBackend");class Mx{constructor(t,e,n,i){e<0&&(e=0),n<0&&(n=0),i<0&&(i=0),this.adapter=t,this.cache=new pP({maxItems:n,maxAge:i/1e3,asyncLoader:t=>r(this,void 0,void 0,(function*(){return {value:yield this.resolve(t)}}))}),Cx.info("DID backend initialized, cache(init:{}, max:{}, ttl:{})",e,n,i/1e3);}static initialize(t,e=Mx.DEFAULT_CACHE_INITIAL_CAPACITY,r=Mx.DEFAULT_CACHE_MAX_CAPACITY,n=Mx.DEFAULT_CACHE_TTL){Ot$1(null!=t,"Invalid adapter"),Ot$1(e<=r,"Invalid cache capacity"),e=e<r?e:r,this.instance=new Mx(t,e,r,n);}static getInstance(){return Ot$1(null!=this.instance,"The DIDBackend was not initialized. Please call DIDBackend.initialize() with a valid DIDAdapter (i.e. new DefaultDIDAdapter()) first."),this.instance}static isInitialized(){return null!==this.instance}generateRequestId(){return pv(16).toString("hex")}getAdapter(){return this.adapter}setResolveHandle(t){this.resolveHandle=t;}resolve(t){return r(this,void 0,void 0,(function*(){let e=t.serialize(!0);Cx.trace("Resolving request: "+e);let r=yield this.getAdapter().resolve(e);if(Cx.trace("Resolving response: "+JSON.stringify(r)),null==r)throw new s$1("Unknown error, got null result.");let n=null;try{switch(t.getMethod()){case px.METHOD_NAME:n=Rx.parse(r,Rx);break;case Sx.METHOD_NAME:n=bx.parse(r,bx);break;case kx.METHOD_NAME:n=Ox.parse(r,Ox);break;default:throw Cx.error("INTERNAL - unknown resolve method '{}'",t.getMethod()),new s$1("Unknown resolve method: "+t.getMethod())}}catch(t){throw new s$1(t)}if(null==n.getResponseId()||n.getResponseId()!==t.getRequestId())throw new s$1("Mismatched resolve result with request.");if(null!=n.getResult())return n.getResult();throw new s$1("Server error("+n.getErrorCode()+"): "+n.getErrorMessage())}))}resolveDidBiography(t,e=!0,n=!1){return r(this,void 0,void 0,(function*(){Cx.info("Resolving DID {}, all={}...",t.toString(),e);let r=new px(this.generateRequestId());r.setParameters(t,e),n&&this.cache.invalidate(r);try{return yield this.cache.getAsync(r)}catch(t){throw new s$1(t)}}))}resolveDid(t,e=!1){return r(this,void 0,void 0,(function*(){if(Cx.debug("Resolving DID {}...",t.toString()),null!=this.resolveHandle){let e=this.resolveHandle.resolve(t);if(null!=e)return e}let n=yield this.resolveDidBiography(t,!1,e),i=null;if(n.getStatus().equals(Tx.VALID))i=n.getTransaction(0);else if(n.getStatus().equals(Tx.DEACTIVATED)){if(2!=n.getTransactionCount())throw new s$1("Invalid DID biography, wrong transaction count.");if(i=n.getTransaction(0),!i.getRequest().getOperation().equals(fx.Operation.DEACTIVATE))throw new s$1("Invalid DID biography, wrong status.");let t=n.getTransaction(1).getRequest().getDocument();if(null==t)throw new s$1("Invalid DID biography, invalid trancations.");let e=new class extends wx{constructor(t){super(),this.constructWithIDChainRequest(t);}getSignerDocument(){return r(this,void 0,void 0,(function*(){let e=null==this.getDocument()?t:this.getDocument();return e.isCustomizedDid()&&(yield e.resolveControllers()),e}))}}(i.getRequest());if(!(yield e.isValid()))throw new s$1("Invalid DID biography, transaction signature mismatch.");i=n.getTransaction(1);}else if(n.getStatus().equals(Tx.NOT_FOUND))return null;if(!i.getRequest().getOperation().equals(fx.Operation.CREATE)&&!i.getRequest().getOperation().equals(fx.Operation.UPDATE)&&!i.getRequest().getOperation().equals(fx.Operation.TRANSFER))throw new s$1("Invalid ID transaction, unknown operation.");if(!(yield i.getRequest().isValid()))throw new s$1("Invalid ID transaction, signature mismatch.");let o=i.getRequest().getDocument().clone();yield o.resolveControllers();let a=o.getMetadata();return a.setTransactionId(i.getTransactionId()),a.setSignature(o.getProof().getSignature()),a.setPublished(i.getTimestamp()),n.getStatus().equals(Tx.DEACTIVATED)&&a.setDeactivated(!0),o}))}resolveUntrustedDid(t,e){return r(this,void 0,void 0,(function*(){if(Cx.debug("Resolving untrusted DID {}...",t.toString()),null!=this.resolveHandle){let e=this.resolveHandle.resolve(t);if(null!=e)return e}let r=yield this.resolveDidBiography(t,!1,e),n=null;switch(r.getStatus().getValue()){case Tx.VALID.getValue():n=r.getTransaction(0);break;case Tx.DEACTIVATED.getValue():if(2!=r.getTransactionCount())throw new s$1("Invalid DID biography, wrong transaction count.");if(n=r.getTransaction(0),n.getRequest().getOperation()!=fx.Operation.DEACTIVATE)throw new s$1("Invalid DID biography, wrong status.");if(null==r.getTransaction(1).getRequest().getDocument())throw new s$1("Invalid DID biography, invalid trancations.");n=r.getTransaction(1);break;case Tx.NOT_FOUND.getValue():return null}if(n.getRequest().getOperation()!=fx.Operation.CREATE&&n.getRequest().getOperation()!=fx.Operation.UPDATE&&n.getRequest().getOperation()!=fx.Operation.TRANSFER)throw new s$1("Invalid ID transaction, unknown operation.");let i=n.getRequest().getDocument().clone();yield i.resolveControllers();let o=i.getMetadata();return o.setTransactionId(n.getTransactionId()),o.setSignature(i.getProof().getSignature()),o.setPublished(n.getTimestamp()),r.getStatus()==Tx.DEACTIVATED&&o.setDeactivated(!0),i}))}resolveCredentialBiography(t,e=null,r=!1){Cx.info("Resolving credential {}, issuer={}...",t,e);let n=new Sx(this.generateRequestId());n.setParameters(t,e),r&&this.cache.invalidate(n);try{return this.cache.getAsync(n)}catch(t){throw new s$1(t)}}resolveCredential(t,e=null,n=!1){return r(this,void 0,void 0,(function*(){Cx.debug("Resolving credential {}...",t);let r=yield this.resolveCredentialBiography(t,e,n),i=null;if(r.getStatus().equals(gx.VALID))i=r.getTransaction(0);else if(r.getStatus().equals(gx.REVOKED)){if(i=r.getTransaction(0),!i.getRequest().getOperation().equals(fx.Operation.REVOKE))throw new s$1("Invalid credential biography, wrong status.");if(r.getTransactionCount()<1||r.getTransactionCount()>2)throw new s$1("Invalid credential biography, transaction signature mismatch.");if(1==r.getTransactionCount()){if(!(yield i.getRequest().isValid()))throw new s$1("Invalid credential biography, transaction signature mismatch.");return null}{const t=r.getTransaction(1).getRequest().getCredential();let e=new class extends Ix{constructor(t){super(),this.constructWithIDChainRequest(t);}getCredential(){return t}}(i.getRequest());if(!(yield e.isValid()))throw new s$1("Invalid credential biography, transaction signature mismatch.")}i=r.getTransaction(1);}else if(r.getStatus().equals(gx.NOT_FOUND))return null;if(!i.getRequest().getOperation().equals(fx.Operation.DECLARE))throw new s$1("Invalid credential transaction, unknown operation.");if(!(yield i.getRequest().isValid()))throw new s$1("Invalid credential transaction, signature mismatch.");let o=i.getRequest().getCredential(),a=new fr$1(o.getId());return a.setTransactionId(i.getTransactionId()),a.setPublished(i.getTimestamp()),r.getStatus()==gx.REVOKED&&a.setRevoked(!0),o.setMetadata(a),o}))}listCredentials(t,e,n){return r(this,void 0,void 0,(function*(){Cx.info("List credentials for {}",t);let r=new kx(this.generateRequestId());r.setParameters(t,e,n);let i=yield this.resolve(r);return null==i||0==i.size()?null:i.getCredentialIds()}))}createTransaction(t,e){return r(this,void 0,void 0,(function*(){Cx.info("Create ID transaction...");let r=t.serialize(!0);Cx.trace("Transaction payload: '{}'",r),null==e&&(e=this.getAdapter()),yield e.createIdTransaction(r,null),Cx.info("ID transaction complete.");}))}invalidDidCache(t){let e=new px(this.generateRequestId());e.setParameters(t,!0),this.cache.invalidate(e),e.setParameters(t,!1),this.cache.invalidate(e);}invalidCredentialCache(t,e){let r=new Sx(this.generateRequestId());r.setParameters(t,e),this.cache.invalidate(r),null!=e&&(r.setParameters(t,null),this.cache.invalidate(r));}clearCache(){this.cache.invalidateAll();}createDid(t,e,n,i){return r(this,void 0,void 0,(function*(){let r=yield wx.create(t,e,n);yield this.createTransaction(r,i),this.invalidDidCache(t.getSubject());}))}updateDid(t,e,n,i,o){return r(this,void 0,void 0,(function*(){let r=yield wx.update(t,e,n,i);yield this.createTransaction(r,o),this.invalidDidCache(t.getSubject());}))}transferDid(t,e,n,i,o){return r(this,void 0,void 0,(function*(){let r=yield wx.transfer(t,e,n,i);yield this.createTransaction(r,o),this.invalidDidCache(t.getSubject());}))}deactivateDid(t,e,n,i){return r(this,void 0,void 0,(function*(){let r=yield wx.deactivate(t,e,n);yield this.createTransaction(r,i),this.invalidDidCache(t.getSubject());}))}deactivateTargetDid(t,e,n,i,o,a){return r(this,void 0,void 0,(function*(){let r=yield wx.deactivateTarget(t,e,n,i,o);yield this.createTransaction(r,a),this.invalidDidCache(t.getSubject());}))}declareCredential(t,e,n,i,o){return r(this,void 0,void 0,(function*(){let r=yield Ix.declare(t,e,n,i);yield this.createTransaction(r,o),this.invalidCredentialCache(t.getId(),null),this.invalidCredentialCache(t.getId(),t.getIssuer());}))}revokeCredential(t,e,n,i,o){return r(this,void 0,void 0,(function*(){if(t instanceof vr$1){let r=yield Ix.revoke(t,e,n,i);yield this.createTransaction(r,o),this.invalidCredentialCache(t.getId(),null),this.invalidCredentialCache(t.getId(),t.getIssuer());}else {let r=yield Ix.revoke(t,e,n,i);yield this.createTransaction(r,o),this.invalidCredentialCache(t,null),this.invalidCredentialCache(t,e.getSubject());}}))}}Mx.DEFAULT_CACHE_INITIAL_CAPACITY=16,Mx.DEFAULT_CACHE_MAX_CAPACITY=64,Mx.DEFAULT_CACHE_TTL=6e5,Mx.instance=null;var Nx={exports:{}},jx=function(t,e){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return t.apply(e,r)}},Bx=jx,Lx=Object.prototype.toString;function Fx(t){return "[object Array]"===Lx.call(t)}function Ux(t){return void 0===t}function zx(t){return null!==t&&"object"==typeof t}function Kx(t){if("[object Object]"!==Lx.call(t))return !1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}function qx(t){return "[object Function]"===Lx.call(t)}function Hx(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),Fx(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t);}var Vx={isArray:Fx,isArrayBuffer:function(t){return "[object ArrayBuffer]"===Lx.call(t)},isBuffer:function(t){return null!==t&&!Ux(t)&&null!==t.constructor&&!Ux(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return "undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return "undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return "string"==typeof t},isNumber:function(t){return "number"==typeof t},isObject:zx,isPlainObject:Kx,isUndefined:Ux,isDate:function(t){return "[object Date]"===Lx.call(t)},isFile:function(t){return "[object File]"===Lx.call(t)},isBlob:function(t){return "[object Blob]"===Lx.call(t)},isFunction:qx,isStream:function(t){return zx(t)&&qx(t.pipe)},isURLSearchParams:function(t){return "undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return ("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:Hx,merge:function t(){var e={};function r(r,n){Kx(e[n])&&Kx(r)?e[n]=t(e[n],r):Kx(r)?e[n]=t({},r):Fx(r)?e[n]=r.slice():e[n]=r;}for(var n=0,i=arguments.length;n<i;n++)Hx(arguments[n],r);return e},extend:function(t,e,r){return Hx(e,(function(e,n){t[n]=r&&"function"==typeof e?Bx(e,r):e;})),t},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},stripBOM:function(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t}},Wx=Vx;function Jx(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Yx=function(t,e,r){if(!e)return t;var n;if(r)n=r(e);else if(Wx.isURLSearchParams(e))n=e.toString();else {var i=[];Wx.forEach(e,(function(t,e){null!=t&&(Wx.isArray(t)?e+="[]":t=[t],Wx.forEach(t,(function(t){Wx.isDate(t)?t=t.toISOString():Wx.isObject(t)&&(t=JSON.stringify(t)),i.push(Jx(e)+"="+Jx(t));})));})),n=i.join("&");}if(n){var o=t.indexOf("#");-1!==o&&(t=t.slice(0,o)),t+=(-1===t.indexOf("?")?"?":"&")+n;}return t},Zx=Vx;function Gx(){this.handlers=[];}Gx.prototype.use=function(t,e,r){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1},Gx.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null);},Gx.prototype.forEach=function(t){Zx.forEach(this.handlers,(function(e){null!==e&&t(e);}));};var Xx=Gx,$x=Vx,Qx=function(t,e,r,n,i){return t.config=e,r&&(t.code=r),t.request=n,t.response=i,t.isAxiosError=!0,t.toJSON=function(){return {message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t},tT=Qx,eT=function(t,e,r,n,i){var o=new Error(t);return tT(o,e,r,n,i)},rT=eT,nT=Vx,iT=nT.isStandardBrowserEnv()?{write:function(t,e,r,n,i,o){var a=[];a.push(t+"="+encodeURIComponent(e)),nT.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),nT.isString(n)&&a.push("path="+n),nT.isString(i)&&a.push("domain="+i),!0===o&&a.push("secure"),document.cookie=a.join("; ");},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5);}}:{write:function(){},read:function(){return null},remove:function(){}},oT=function(t){return /^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)},aT=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t},sT=Vx,uT=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],cT=Vx,lT=cT.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function n(t){var n=t;return e&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return t=n(window.location.href),function(e){var r=cT.isString(e)?n(e):e;return r.protocol===t.protocol&&r.host===t.host}}():function(){return !0},fT=Vx,hT=function(t,e,r){var n=r.config.validateStatus;r.status&&n&&!n(r.status)?e(rT("Request failed with status code "+r.status,r.config,null,r.request,r)):t(r);},dT=iT,pT=Yx,yT=function(t,e){return t&&!oT(e)?aT(t,e):e},gT=function(t){var e,r,n,i={};return t?(sT.forEach(t.split("\n"),(function(t){if(n=t.indexOf(":"),e=sT.trim(t.substr(0,n)).toLowerCase(),r=sT.trim(t.substr(n+1)),e){if(i[e]&&uT.indexOf(e)>=0)return;i[e]="set-cookie"===e?(i[e]?i[e]:[]).concat([r]):i[e]?i[e]+", "+r:r;}})),i):i},mT=lT,bT=eT,vT=function(t){return new Promise((function(e,r){var n=t.data,i=t.headers,o=t.responseType;fT.isFormData(n)&&delete i["Content-Type"];var a=new XMLHttpRequest;if(t.auth){var s=t.auth.username||"",u=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.Authorization="Basic "+btoa(s+":"+u);}var c=yT(t.baseURL,t.url);function l(){if(a){var n="getAllResponseHeaders"in a?gT(a.getAllResponseHeaders()):null,i={data:o&&"text"!==o&&"json"!==o?a.response:a.responseText,status:a.status,statusText:a.statusText,headers:n,config:t,request:a};hT(e,r,i),a=null;}}if(a.open(t.method.toUpperCase(),pT(c,t.params,t.paramsSerializer),!0),a.timeout=t.timeout,"onloadend"in a?a.onloadend=l:a.onreadystatechange=function(){a&&4===a.readyState&&(0!==a.status||a.responseURL&&0===a.responseURL.indexOf("file:"))&&setTimeout(l);},a.onabort=function(){a&&(r(bT("Request aborted",t,"ECONNABORTED",a)),a=null);},a.onerror=function(){r(bT("Network Error",t,null,a)),a=null;},a.ontimeout=function(){var e="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),r(bT(e,t,t.transitional&&t.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",a)),a=null;},fT.isStandardBrowserEnv()){var f=(t.withCredentials||mT(c))&&t.xsrfCookieName?dT.read(t.xsrfCookieName):void 0;f&&(i[t.xsrfHeaderName]=f);}"setRequestHeader"in a&&fT.forEach(i,(function(t,e){void 0===n&&"content-type"===e.toLowerCase()?delete i[e]:a.setRequestHeader(e,t);})),fT.isUndefined(t.withCredentials)||(a.withCredentials=!!t.withCredentials),o&&"json"!==o&&(a.responseType=t.responseType),"function"==typeof t.onDownloadProgress&&a.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&a.upload&&a.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then((function(t){a&&(a.abort(),r(t),a=null);})),n||(n=null),a.send(n);}))},wT=Vx,_T=function(t,e){$x.forEach(t,(function(r,n){n!==e&&n.toUpperCase()===e.toUpperCase()&&(t[e]=r,delete t[n]);}));},ST=Qx,ET={"Content-Type":"application/x-www-form-urlencoded"};function IT(t,e){!wT.isUndefined(t)&&wT.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e);}var AT,kT={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==ke$1&&"[object process]"===Object.prototype.toString.call(ke$1))&&(AT=vT),AT),transformRequest:[function(t,e){return _T(e,"Accept"),_T(e,"Content-Type"),wT.isFormData(t)||wT.isArrayBuffer(t)||wT.isBuffer(t)||wT.isStream(t)||wT.isFile(t)||wT.isBlob(t)?t:wT.isArrayBufferView(t)?t.buffer:wT.isURLSearchParams(t)?(IT(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):wT.isObject(t)||e&&"application/json"===e["Content-Type"]?(IT(e,"application/json"),function(t,e,r){if(wT.isString(t))try{return (e||JSON.parse)(t),wT.trim(t)}catch(t){if("SyntaxError"!==t.name)throw t}return (r||JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){var e=this.transitional,r=e&&e.silentJSONParsing,n=e&&e.forcedJSONParsing,i=!r&&"json"===this.responseType;if(i||n&&wT.isString(t)&&t.length)try{return JSON.parse(t)}catch(t){if(i){if("SyntaxError"===t.name)throw ST(t,this,"E_JSON_PARSE");throw t}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};kT.headers={common:{Accept:"application/json, text/plain, */*"}},wT.forEach(["delete","get","head"],(function(t){kT.headers[t]={};})),wT.forEach(["post","put","patch"],(function(t){kT.headers[t]=wT.merge(ET);}));var DT=kT,xT=Vx,TT=DT,PT=function(t){return !(!t||!t.__CANCEL__)},OT=Vx,RT=function(t,e,r){var n=this||TT;return xT.forEach(r,(function(r){t=r.call(n,t,e);})),t},CT=PT,MT=DT;function NT(t){t.cancelToken&&t.cancelToken.throwIfRequested();}var jT=Vx,BT=function(t,e){e=e||{};var r={},n=["url","method","data"],i=["headers","auth","proxy","params"],o=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],a=["validateStatus"];function s(t,e){return jT.isPlainObject(t)&&jT.isPlainObject(e)?jT.merge(t,e):jT.isPlainObject(e)?jT.merge({},e):jT.isArray(e)?e.slice():e}function u(n){jT.isUndefined(e[n])?jT.isUndefined(t[n])||(r[n]=s(void 0,t[n])):r[n]=s(t[n],e[n]);}jT.forEach(n,(function(t){jT.isUndefined(e[t])||(r[t]=s(void 0,e[t]));})),jT.forEach(i,u),jT.forEach(o,(function(n){jT.isUndefined(e[n])?jT.isUndefined(t[n])||(r[n]=s(void 0,t[n])):r[n]=s(void 0,e[n]);})),jT.forEach(a,(function(n){n in e?r[n]=s(t[n],e[n]):n in t&&(r[n]=s(void 0,t[n]));}));var c=n.concat(i).concat(o).concat(a),l=Object.keys(t).concat(Object.keys(e)).filter((function(t){return -1===c.indexOf(t)}));return jT.forEach(l,u),r},LT={_from:"axios@^0.21.1",_id:"axios@0.21.4",_inBundle:!1,_integrity:"sha512-ut5vewkiu8jjGBdqpM44XxjuCjq9LAKeHVmoVfHVzy8eHgxxq8SbAVQNovDA8mVi05kP0Ea/n/UzcSHcTJQfNg==",_location:"/axios",_phantomChildren:{},_requested:{type:"range",registry:!0,raw:"axios@^0.21.1",name:"axios",escapedName:"axios",rawSpec:"^0.21.1",saveSpec:null,fetchSpec:"^0.21.1"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/axios/-/axios-0.21.4.tgz",_shasum:"c67b90dc0568e5c1cf2b0b858c43ba28e2eda575",_spec:"axios@^0.21.1",_where:"/Users/lifayi/dev/src/Elastos.DID.JS.SDK",author:{name:"Matt Zabriskie"},browser:{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},bugs:{url:"https://github.com/axios/axios/issues"},bundleDependencies:!1,bundlesize:[{path:"./dist/axios.min.js",threshold:"5kB"}],dependencies:{"follow-redirects":"^1.14.0"},deprecated:!1,description:"Promise based HTTP client for the browser and node.js",devDependencies:{coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},homepage:"https://axios-http.com",jsdelivr:"dist/axios.min.js",keywords:["xhr","http","ajax","promise","node"],license:"MIT",main:"index.js",name:"axios",repository:{type:"git",url:"git+https://github.com/axios/axios.git"},scripts:{build:"NODE_ENV=production grunt build",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",examples:"node ./examples/server.js",fix:"eslint --fix lib/**/*.js",postversion:"git push && git push --tags",preversion:"npm test",start:"node ./sandbox/server.js",test:"grunt test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json"},typings:"./index.d.ts",unpkg:"dist/axios.min.js",version:"0.21.4"},FT={};["object","boolean","number","function","string","symbol"].forEach((function(t,e){FT[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t};}));var UT={},zT=LT.version.split(".");function KT(t,e){for(var r=e?e.split("."):zT,n=t.split("."),i=0;i<3;i++){if(r[i]>n[i])return !0;if(r[i]<n[i])return !1}return !1}FT.transitional=function(t,e,r){var n=e&&KT(e);function i(t,e){return "[Axios v"+LT.version+"] Transitional option '"+t+"'"+e+(r?". "+r:"")}return function(r,o,a){if(!1===t)throw new Error(i(o," has been removed in "+e));return n&&!UT[o]&&(UT[o]=!0,console.warn(i(o," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(r,o,a)}};var qT={isOlderVersion:KT,assertOptions:function(t,e,r){if("object"!=typeof t)throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var o=n[i],a=e[o];if(a){var s=t[o],u=void 0===s||a(s,o,t);if(!0!==u)throw new TypeError("option "+o+" must be "+u)}else if(!0!==r)throw Error("Unknown option "+o)}},validators:FT},HT=Vx,VT=Yx,WT=Xx,JT=function(t){return NT(t),t.headers=t.headers||{},t.data=RT.call(t,t.data,t.headers,t.transformRequest),t.headers=OT.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),OT.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e];})),(t.adapter||MT.adapter)(t).then((function(e){return NT(t),e.data=RT.call(t,e.data,e.headers,t.transformResponse),e}),(function(e){return CT(e)||(NT(t),e&&e.response&&(e.response.data=RT.call(t,e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))},YT=BT,ZT=qT,GT=ZT.validators;function XT(t){this.defaults=t,this.interceptors={request:new WT,response:new WT};}XT.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=YT(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=t.transitional;void 0!==e&&ZT.assertOptions(e,{silentJSONParsing:GT.transitional(GT.boolean,"1.0.0"),forcedJSONParsing:GT.transitional(GT.boolean,"1.0.0"),clarifyTimeoutError:GT.transitional(GT.boolean,"1.0.0")},!1);var r=[],n=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(n=n&&e.synchronous,r.unshift(e.fulfilled,e.rejected));}));var i,o=[];if(this.interceptors.response.forEach((function(t){o.push(t.fulfilled,t.rejected);})),!n){var a=[JT,void 0];for(Array.prototype.unshift.apply(a,r),a=a.concat(o),i=Promise.resolve(t);a.length;)i=i.then(a.shift(),a.shift());return i}for(var s=t;r.length;){var u=r.shift(),c=r.shift();try{s=u(s);}catch(t){c(t);break}}try{i=JT(s);}catch(t){return Promise.reject(t)}for(;o.length;)i=i.then(o.shift(),o.shift());return i},XT.prototype.getUri=function(t){return t=YT(this.defaults,t),VT(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},HT.forEach(["delete","get","head","options"],(function(t){XT.prototype[t]=function(e,r){return this.request(YT(r||{},{method:t,url:e,data:(r||{}).data}))};})),HT.forEach(["post","put","patch"],(function(t){XT.prototype[t]=function(e,r,n){return this.request(YT(n||{},{method:t,url:e,data:r}))};}));var $T=XT;function QT(t){this.message=t;}QT.prototype.toString=function(){return "Cancel"+(this.message?": "+this.message:"")},QT.prototype.__CANCEL__=!0;var tP=QT,eP=tP;function rP(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t;}));var r=this;t((function(t){r.reason||(r.reason=new eP(t),e(r.reason));}));}rP.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},rP.source=function(){var t;return {token:new rP((function(e){t=e;})),cancel:t}};var nP=rP,iP=Vx,oP=jx,aP=$T,sP=BT;function uP(t){var e=new aP(t),r=oP(aP.prototype.request,e);return iP.extend(r,aP.prototype,e),iP.extend(r,e),r}var cP=uP(DT);cP.Axios=aP,cP.create=function(t){return uP(sP(cP.defaults,t))},cP.Cancel=tP,cP.CancelToken=nP,cP.isCancel=PT,cP.all=function(t){return Promise.all(t)},cP.spread=function(t){return function(e){return t.apply(null,e)}},cP.isAxiosError=function(t){return "object"==typeof t&&!0===t.isAxiosError},Nx.exports=cP,Nx.exports.default=cP;var lP=Nx.exports;const fP=new e("DefaultDIDAdapter");class hP{constructor(t){Ot$1(t&&null!=t,"Invalid resolver URL");let e=null;switch(t.toLowerCase()){case"mainnet":t=hP.MAINNET_RPC_ENDPOINTS[0],e=hP.MAINNET_RPC_ENDPOINTS;break;case"testnet":t=hP.TESTNET_RPC_ENDPOINTS[0],e=hP.TESTNET_RPC_ENDPOINTS;}try{this.rpcEndpoint=new URL(t);}catch(t){throw new i("Invalid resolver URL",t)}e&&this.checkNetwork(e);}checkEndpoint(t){return r(this,void 0,void 0,(function*(){let e={},r=Date.now();e.id=r,e.jsonrpc="2.0",e.method="eth_blockNumber";let n,i=JSON.stringify(e),o=Date.now();try{n=yield this.performRequest(t,i);let e=Date.now()-o;if(n.id!=r)throw new it$1("Invalid JSON RPC id.");let a=n.result;a.startsWith("0x")&&(a=a.substring(2));let s=parseInt(a,16);return new hP.CheckResult(t,e,s)}catch(e){return fP.info("Checking the resolver {}...error",t),hP.CheckResult.from(t)}}))}checkNetwork(t){return r(this,void 0,void 0,(function*(){let e=[],r=[];for(let n of t){let t=this.checkEndpoint(new URL(n)).then((t=>{e.push(t);}));r.push(t);}try{yield Promise.all(r);}catch(t){}e.length>0&&rS.sort(e);let n=e[0];n.available()&&(this.rpcEndpoint=n.endpoint);}))}performRequest(t,e){return new Promise(((r,n)=>{lP({method:"post",url:t.toString(),headers:{"Content-Type":"application/json",Accept:"application/json"},data:e,timeout:6e3}).then((t=>{t.status>=200&&t.status<400?r(t.data):n(new Y$1("HTTP error: "+t.statusText));})).catch((t=>{n(new Y$1("HTTP timeout"));}));}))}resolve(t){return r(this,void 0,void 0,(function*(){Ot$1(t&&null!=t,"Invalid request");try{return yield this.performRequest(this.rpcEndpoint,t)}catch(t){throw new J$1("Network error.")}}))}createIdTransaction(t,e){throw new W$1("Not implemented")}}hP.MAINNET_RPC_ENDPOINTS=["https://api.elastos.io/eid","https://api.trinity-tech.io/eid"],hP.TESTNET_RPC_ENDPOINTS=["https://api-testnet.elastos.io/eid","https://api-testnet.trinity-tech.io/eid"],function(t){class e{constructor(t,e,r){this.endpoint=t,this.latency=e,this.lastBlock=r;}static from(t){return new e(t,-1,-1)}equals(t){return 0==this.compareTo(t)}compareTo(t){if(null==t)return -1;if(t.latency<0&&this.latency<0)return 0;if(t.latency<0||this.latency<0)return this.latency<0?1:-1;let r=t.lastBlock.valueOf()-this.lastBlock.valueOf();return Math.abs(r)-e.MAX_DIFF>0||this.latency==t.latency?r>0?1:-1:this.latency-t.latency}available(){return this.latency>=0}}e.MAX_DIFF=10,t.CheckResult=e;}(hP||(hP={}));class pP{constructor(t={}){this.count=0,this.items=new Map,this.first=null,this.last=null,this.options=Object.assign({maxItems:void 0,maxAge:void 0,loader:void 0},t),this.invalidateAll();}put(t,e,r){this.putInternal(t,e,r);}putInternal(t,e,r){let n=this.getHash(t),i=this.items.get(n);if(i)i.value=e;else {let n=this.getHash(t);i={key:t,value:e,prev:null,next:null,meta:r},this.items.set(n,i),this.count++;}return this.options.maxAge&&(i.expires=Date.now()/1e3+this.options.maxAge),this.promote(i),this.options.maxItems&&this.count>this.options.maxItems&&this.invalidate(this.last.key),i}getHash(t){return "string"==typeof t?t:t.hashCode().toString()}get(t,e){let r=this.getHash(t),n=this.items.get(r);if(n&&n.expires&&Date.now()/1e3>=n.expires&&(this.invalidate(t),n=null),!n){let r=null;if(e?r=e:this.options.loader&&(r=this.options.loader),r){let{value:e,meta:i}=r(t);null!=e&&(n=this.putInternal(t,e,i));}if(!n)return null}return this.promote(n),n.value}getAsync(t,e){return r(this,void 0,void 0,(function*(){let r=this.getHash(t),n=this.items.get(r);if(n&&n.expires&&Date.now()/1e3>=n.expires&&(this.invalidate(t),n=null),!n){let r=null;if(e?r=e:this.options.asyncLoader&&(r=this.options.asyncLoader),r){let{value:e,meta:i}=yield r(t);null!=e&&(n=this.putInternal(t,e,i));}if(!n)return null}return this.promote(n),n.value}))}invalidateAll(t){t?this.items.forEach(((e,r,n)=>{t(e.key)&&this.invalidate(e.key);})):(this.items.clear(),this.first=null,this.last=null,this.count=0);}invalidate(t){let e=this.getHash(t),r=this.items.get(e);return !!r&&(this.count--,this.items.delete(e),r.prev&&(r.prev.next=r.next),r.next&&(r.next.prev=r.prev),r===this.first&&(this.first=r.next),r===this.last&&(this.last=r.prev),!0)}has(t){let e=this.getHash(t),r=this.items.get(e);return !!r&&!(r.expires&&Date.now()/1e3>=r.expires)}promote(t){t!==this.first&&(t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),t===this.last&&(this.last=t.prev),t.prev=null,t.next=this.first,this.first&&(this.first.prev=t),this.first=t,this.last||(this.last=t));}getMeta(t){let e=this.getHash(t),r=this.items.get(e);return r?r.expires&&Date.now()/1e3>=r.expires?(this.invalidate(t),null):(this.promote(r),r.meta):null}}

	var commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};

	function createCommonjsModule(fn) {
	  var module = { exports: {} };
		return fn(module, module.exports), module.exports;
	}

	function commonjsRequire (target) {
		throw new Error('Could not dynamically require "' + target + '". Please configure the dynamicRequireTargets option of @rollup/plugin-commonjs appropriately for this require call to behave properly.');
	}

	var moment = createCommonjsModule(function (module, exports) {
	(function (global, factory) {
	    module.exports = factory() ;
	}(commonjsGlobal, (function () {
	    var hookCallback;

	    function hooks() {
	        return hookCallback.apply(null, arguments);
	    }

	    // This is done to register the method called with moment()
	    // without creating circular dependencies.
	    function setHookCallback(callback) {
	        hookCallback = callback;
	    }

	    function isArray(input) {
	        return (
	            input instanceof Array ||
	            Object.prototype.toString.call(input) === '[object Array]'
	        );
	    }

	    function isObject(input) {
	        // IE8 will treat undefined and null as object if it wasn't for
	        // input != null
	        return (
	            input != null &&
	            Object.prototype.toString.call(input) === '[object Object]'
	        );
	    }

	    function hasOwnProp(a, b) {
	        return Object.prototype.hasOwnProperty.call(a, b);
	    }

	    function isObjectEmpty(obj) {
	        if (Object.getOwnPropertyNames) {
	            return Object.getOwnPropertyNames(obj).length === 0;
	        } else {
	            var k;
	            for (k in obj) {
	                if (hasOwnProp(obj, k)) {
	                    return false;
	                }
	            }
	            return true;
	        }
	    }

	    function isUndefined(input) {
	        return input === void 0;
	    }

	    function isNumber(input) {
	        return (
	            typeof input === 'number' ||
	            Object.prototype.toString.call(input) === '[object Number]'
	        );
	    }

	    function isDate(input) {
	        return (
	            input instanceof Date ||
	            Object.prototype.toString.call(input) === '[object Date]'
	        );
	    }

	    function map(arr, fn) {
	        var res = [],
	            i;
	        for (i = 0; i < arr.length; ++i) {
	            res.push(fn(arr[i], i));
	        }
	        return res;
	    }

	    function extend(a, b) {
	        for (var i in b) {
	            if (hasOwnProp(b, i)) {
	                a[i] = b[i];
	            }
	        }

	        if (hasOwnProp(b, 'toString')) {
	            a.toString = b.toString;
	        }

	        if (hasOwnProp(b, 'valueOf')) {
	            a.valueOf = b.valueOf;
	        }

	        return a;
	    }

	    function createUTC(input, format, locale, strict) {
	        return createLocalOrUTC(input, format, locale, strict, true).utc();
	    }

	    function defaultParsingFlags() {
	        // We need to deep clone this object.
	        return {
	            empty: false,
	            unusedTokens: [],
	            unusedInput: [],
	            overflow: -2,
	            charsLeftOver: 0,
	            nullInput: false,
	            invalidEra: null,
	            invalidMonth: null,
	            invalidFormat: false,
	            userInvalidated: false,
	            iso: false,
	            parsedDateParts: [],
	            era: null,
	            meridiem: null,
	            rfc2822: false,
	            weekdayMismatch: false,
	        };
	    }

	    function getParsingFlags(m) {
	        if (m._pf == null) {
	            m._pf = defaultParsingFlags();
	        }
	        return m._pf;
	    }

	    var some;
	    if (Array.prototype.some) {
	        some = Array.prototype.some;
	    } else {
	        some = function (fun) {
	            var t = Object(this),
	                len = t.length >>> 0,
	                i;

	            for (i = 0; i < len; i++) {
	                if (i in t && fun.call(this, t[i], i, t)) {
	                    return true;
	                }
	            }

	            return false;
	        };
	    }

	    function isValid(m) {
	        if (m._isValid == null) {
	            var flags = getParsingFlags(m),
	                parsedParts = some.call(flags.parsedDateParts, function (i) {
	                    return i != null;
	                }),
	                isNowValid =
	                    !isNaN(m._d.getTime()) &&
	                    flags.overflow < 0 &&
	                    !flags.empty &&
	                    !flags.invalidEra &&
	                    !flags.invalidMonth &&
	                    !flags.invalidWeekday &&
	                    !flags.weekdayMismatch &&
	                    !flags.nullInput &&
	                    !flags.invalidFormat &&
	                    !flags.userInvalidated &&
	                    (!flags.meridiem || (flags.meridiem && parsedParts));

	            if (m._strict) {
	                isNowValid =
	                    isNowValid &&
	                    flags.charsLeftOver === 0 &&
	                    flags.unusedTokens.length === 0 &&
	                    flags.bigHour === undefined;
	            }

	            if (Object.isFrozen == null || !Object.isFrozen(m)) {
	                m._isValid = isNowValid;
	            } else {
	                return isNowValid;
	            }
	        }
	        return m._isValid;
	    }

	    function createInvalid(flags) {
	        var m = createUTC(NaN);
	        if (flags != null) {
	            extend(getParsingFlags(m), flags);
	        } else {
	            getParsingFlags(m).userInvalidated = true;
	        }

	        return m;
	    }

	    // Plugins that add properties should also add the key here (null value),
	    // so we can properly clone ourselves.
	    var momentProperties = (hooks.momentProperties = []),
	        updateInProgress = false;

	    function copyConfig(to, from) {
	        var i, prop, val;

	        if (!isUndefined(from._isAMomentObject)) {
	            to._isAMomentObject = from._isAMomentObject;
	        }
	        if (!isUndefined(from._i)) {
	            to._i = from._i;
	        }
	        if (!isUndefined(from._f)) {
	            to._f = from._f;
	        }
	        if (!isUndefined(from._l)) {
	            to._l = from._l;
	        }
	        if (!isUndefined(from._strict)) {
	            to._strict = from._strict;
	        }
	        if (!isUndefined(from._tzm)) {
	            to._tzm = from._tzm;
	        }
	        if (!isUndefined(from._isUTC)) {
	            to._isUTC = from._isUTC;
	        }
	        if (!isUndefined(from._offset)) {
	            to._offset = from._offset;
	        }
	        if (!isUndefined(from._pf)) {
	            to._pf = getParsingFlags(from);
	        }
	        if (!isUndefined(from._locale)) {
	            to._locale = from._locale;
	        }

	        if (momentProperties.length > 0) {
	            for (i = 0; i < momentProperties.length; i++) {
	                prop = momentProperties[i];
	                val = from[prop];
	                if (!isUndefined(val)) {
	                    to[prop] = val;
	                }
	            }
	        }

	        return to;
	    }

	    // Moment prototype object
	    function Moment(config) {
	        copyConfig(this, config);
	        this._d = new Date(config._d != null ? config._d.getTime() : NaN);
	        if (!this.isValid()) {
	            this._d = new Date(NaN);
	        }
	        // Prevent infinite loop in case updateOffset creates new moment
	        // objects.
	        if (updateInProgress === false) {
	            updateInProgress = true;
	            hooks.updateOffset(this);
	            updateInProgress = false;
	        }
	    }

	    function isMoment(obj) {
	        return (
	            obj instanceof Moment || (obj != null && obj._isAMomentObject != null)
	        );
	    }

	    function warn(msg) {
	        if (
	            hooks.suppressDeprecationWarnings === false &&
	            typeof console !== 'undefined' &&
	            console.warn
	        ) {
	            console.warn('Deprecation warning: ' + msg);
	        }
	    }

	    function deprecate(msg, fn) {
	        var firstTime = true;

	        return extend(function () {
	            if (hooks.deprecationHandler != null) {
	                hooks.deprecationHandler(null, msg);
	            }
	            if (firstTime) {
	                var args = [],
	                    arg,
	                    i,
	                    key;
	                for (i = 0; i < arguments.length; i++) {
	                    arg = '';
	                    if (typeof arguments[i] === 'object') {
	                        arg += '\n[' + i + '] ';
	                        for (key in arguments[0]) {
	                            if (hasOwnProp(arguments[0], key)) {
	                                arg += key + ': ' + arguments[0][key] + ', ';
	                            }
	                        }
	                        arg = arg.slice(0, -2); // Remove trailing comma and space
	                    } else {
	                        arg = arguments[i];
	                    }
	                    args.push(arg);
	                }
	                warn(
	                    msg +
	                        '\nArguments: ' +
	                        Array.prototype.slice.call(args).join('') +
	                        '\n' +
	                        new Error().stack
	                );
	                firstTime = false;
	            }
	            return fn.apply(this, arguments);
	        }, fn);
	    }

	    var deprecations = {};

	    function deprecateSimple(name, msg) {
	        if (hooks.deprecationHandler != null) {
	            hooks.deprecationHandler(name, msg);
	        }
	        if (!deprecations[name]) {
	            warn(msg);
	            deprecations[name] = true;
	        }
	    }

	    hooks.suppressDeprecationWarnings = false;
	    hooks.deprecationHandler = null;

	    function isFunction(input) {
	        return (
	            (typeof Function !== 'undefined' && input instanceof Function) ||
	            Object.prototype.toString.call(input) === '[object Function]'
	        );
	    }

	    function set(config) {
	        var prop, i;
	        for (i in config) {
	            if (hasOwnProp(config, i)) {
	                prop = config[i];
	                if (isFunction(prop)) {
	                    this[i] = prop;
	                } else {
	                    this['_' + i] = prop;
	                }
	            }
	        }
	        this._config = config;
	        // Lenient ordinal parsing accepts just a number in addition to
	        // number + (possibly) stuff coming from _dayOfMonthOrdinalParse.
	        // TODO: Remove "ordinalParse" fallback in next major release.
	        this._dayOfMonthOrdinalParseLenient = new RegExp(
	            (this._dayOfMonthOrdinalParse.source || this._ordinalParse.source) +
	                '|' +
	                /\d{1,2}/.source
	        );
	    }

	    function mergeConfigs(parentConfig, childConfig) {
	        var res = extend({}, parentConfig),
	            prop;
	        for (prop in childConfig) {
	            if (hasOwnProp(childConfig, prop)) {
	                if (isObject(parentConfig[prop]) && isObject(childConfig[prop])) {
	                    res[prop] = {};
	                    extend(res[prop], parentConfig[prop]);
	                    extend(res[prop], childConfig[prop]);
	                } else if (childConfig[prop] != null) {
	                    res[prop] = childConfig[prop];
	                } else {
	                    delete res[prop];
	                }
	            }
	        }
	        for (prop in parentConfig) {
	            if (
	                hasOwnProp(parentConfig, prop) &&
	                !hasOwnProp(childConfig, prop) &&
	                isObject(parentConfig[prop])
	            ) {
	                // make sure changes to properties don't modify parent config
	                res[prop] = extend({}, res[prop]);
	            }
	        }
	        return res;
	    }

	    function Locale(config) {
	        if (config != null) {
	            this.set(config);
	        }
	    }

	    var keys;

	    if (Object.keys) {
	        keys = Object.keys;
	    } else {
	        keys = function (obj) {
	            var i,
	                res = [];
	            for (i in obj) {
	                if (hasOwnProp(obj, i)) {
	                    res.push(i);
	                }
	            }
	            return res;
	        };
	    }

	    var defaultCalendar = {
	        sameDay: '[Today at] LT',
	        nextDay: '[Tomorrow at] LT',
	        nextWeek: 'dddd [at] LT',
	        lastDay: '[Yesterday at] LT',
	        lastWeek: '[Last] dddd [at] LT',
	        sameElse: 'L',
	    };

	    function calendar(key, mom, now) {
	        var output = this._calendar[key] || this._calendar['sameElse'];
	        return isFunction(output) ? output.call(mom, now) : output;
	    }

	    function zeroFill(number, targetLength, forceSign) {
	        var absNumber = '' + Math.abs(number),
	            zerosToFill = targetLength - absNumber.length,
	            sign = number >= 0;
	        return (
	            (sign ? (forceSign ? '+' : '') : '-') +
	            Math.pow(10, Math.max(0, zerosToFill)).toString().substr(1) +
	            absNumber
	        );
	    }

	    var formattingTokens = /(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,
	        localFormattingTokens = /(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,
	        formatFunctions = {},
	        formatTokenFunctions = {};

	    // token:    'M'
	    // padded:   ['MM', 2]
	    // ordinal:  'Mo'
	    // callback: function () { this.month() + 1 }
	    function addFormatToken(token, padded, ordinal, callback) {
	        var func = callback;
	        if (typeof callback === 'string') {
	            func = function () {
	                return this[callback]();
	            };
	        }
	        if (token) {
	            formatTokenFunctions[token] = func;
	        }
	        if (padded) {
	            formatTokenFunctions[padded[0]] = function () {
	                return zeroFill(func.apply(this, arguments), padded[1], padded[2]);
	            };
	        }
	        if (ordinal) {
	            formatTokenFunctions[ordinal] = function () {
	                return this.localeData().ordinal(
	                    func.apply(this, arguments),
	                    token
	                );
	            };
	        }
	    }

	    function removeFormattingTokens(input) {
	        if (input.match(/\[[\s\S]/)) {
	            return input.replace(/^\[|\]$/g, '');
	        }
	        return input.replace(/\\/g, '');
	    }

	    function makeFormatFunction(format) {
	        var array = format.match(formattingTokens),
	            i,
	            length;

	        for (i = 0, length = array.length; i < length; i++) {
	            if (formatTokenFunctions[array[i]]) {
	                array[i] = formatTokenFunctions[array[i]];
	            } else {
	                array[i] = removeFormattingTokens(array[i]);
	            }
	        }

	        return function (mom) {
	            var output = '',
	                i;
	            for (i = 0; i < length; i++) {
	                output += isFunction(array[i])
	                    ? array[i].call(mom, format)
	                    : array[i];
	            }
	            return output;
	        };
	    }

	    // format date using native date object
	    function formatMoment(m, format) {
	        if (!m.isValid()) {
	            return m.localeData().invalidDate();
	        }

	        format = expandFormat(format, m.localeData());
	        formatFunctions[format] =
	            formatFunctions[format] || makeFormatFunction(format);

	        return formatFunctions[format](m);
	    }

	    function expandFormat(format, locale) {
	        var i = 5;

	        function replaceLongDateFormatTokens(input) {
	            return locale.longDateFormat(input) || input;
	        }

	        localFormattingTokens.lastIndex = 0;
	        while (i >= 0 && localFormattingTokens.test(format)) {
	            format = format.replace(
	                localFormattingTokens,
	                replaceLongDateFormatTokens
	            );
	            localFormattingTokens.lastIndex = 0;
	            i -= 1;
	        }

	        return format;
	    }

	    var defaultLongDateFormat = {
	        LTS: 'h:mm:ss A',
	        LT: 'h:mm A',
	        L: 'MM/DD/YYYY',
	        LL: 'MMMM D, YYYY',
	        LLL: 'MMMM D, YYYY h:mm A',
	        LLLL: 'dddd, MMMM D, YYYY h:mm A',
	    };

	    function longDateFormat(key) {
	        var format = this._longDateFormat[key],
	            formatUpper = this._longDateFormat[key.toUpperCase()];

	        if (format || !formatUpper) {
	            return format;
	        }

	        this._longDateFormat[key] = formatUpper
	            .match(formattingTokens)
	            .map(function (tok) {
	                if (
	                    tok === 'MMMM' ||
	                    tok === 'MM' ||
	                    tok === 'DD' ||
	                    tok === 'dddd'
	                ) {
	                    return tok.slice(1);
	                }
	                return tok;
	            })
	            .join('');

	        return this._longDateFormat[key];
	    }

	    var defaultInvalidDate = 'Invalid date';

	    function invalidDate() {
	        return this._invalidDate;
	    }

	    var defaultOrdinal = '%d',
	        defaultDayOfMonthOrdinalParse = /\d{1,2}/;

	    function ordinal(number) {
	        return this._ordinal.replace('%d', number);
	    }

	    var defaultRelativeTime = {
	        future: 'in %s',
	        past: '%s ago',
	        s: 'a few seconds',
	        ss: '%d seconds',
	        m: 'a minute',
	        mm: '%d minutes',
	        h: 'an hour',
	        hh: '%d hours',
	        d: 'a day',
	        dd: '%d days',
	        w: 'a week',
	        ww: '%d weeks',
	        M: 'a month',
	        MM: '%d months',
	        y: 'a year',
	        yy: '%d years',
	    };

	    function relativeTime(number, withoutSuffix, string, isFuture) {
	        var output = this._relativeTime[string];
	        return isFunction(output)
	            ? output(number, withoutSuffix, string, isFuture)
	            : output.replace(/%d/i, number);
	    }

	    function pastFuture(diff, output) {
	        var format = this._relativeTime[diff > 0 ? 'future' : 'past'];
	        return isFunction(format) ? format(output) : format.replace(/%s/i, output);
	    }

	    var aliases = {};

	    function addUnitAlias(unit, shorthand) {
	        var lowerCase = unit.toLowerCase();
	        aliases[lowerCase] = aliases[lowerCase + 's'] = aliases[shorthand] = unit;
	    }

	    function normalizeUnits(units) {
	        return typeof units === 'string'
	            ? aliases[units] || aliases[units.toLowerCase()]
	            : undefined;
	    }

	    function normalizeObjectUnits(inputObject) {
	        var normalizedInput = {},
	            normalizedProp,
	            prop;

	        for (prop in inputObject) {
	            if (hasOwnProp(inputObject, prop)) {
	                normalizedProp = normalizeUnits(prop);
	                if (normalizedProp) {
	                    normalizedInput[normalizedProp] = inputObject[prop];
	                }
	            }
	        }

	        return normalizedInput;
	    }

	    var priorities = {};

	    function addUnitPriority(unit, priority) {
	        priorities[unit] = priority;
	    }

	    function getPrioritizedUnits(unitsObj) {
	        var units = [],
	            u;
	        for (u in unitsObj) {
	            if (hasOwnProp(unitsObj, u)) {
	                units.push({ unit: u, priority: priorities[u] });
	            }
	        }
	        units.sort(function (a, b) {
	            return a.priority - b.priority;
	        });
	        return units;
	    }

	    function isLeapYear(year) {
	        return (year % 4 === 0 && year % 100 !== 0) || year % 400 === 0;
	    }

	    function absFloor(number) {
	        if (number < 0) {
	            // -0 -> 0
	            return Math.ceil(number) || 0;
	        } else {
	            return Math.floor(number);
	        }
	    }

	    function toInt(argumentForCoercion) {
	        var coercedNumber = +argumentForCoercion,
	            value = 0;

	        if (coercedNumber !== 0 && isFinite(coercedNumber)) {
	            value = absFloor(coercedNumber);
	        }

	        return value;
	    }

	    function makeGetSet(unit, keepTime) {
	        return function (value) {
	            if (value != null) {
	                set$1(this, unit, value);
	                hooks.updateOffset(this, keepTime);
	                return this;
	            } else {
	                return get(this, unit);
	            }
	        };
	    }

	    function get(mom, unit) {
	        return mom.isValid()
	            ? mom._d['get' + (mom._isUTC ? 'UTC' : '') + unit]()
	            : NaN;
	    }

	    function set$1(mom, unit, value) {
	        if (mom.isValid() && !isNaN(value)) {
	            if (
	                unit === 'FullYear' &&
	                isLeapYear(mom.year()) &&
	                mom.month() === 1 &&
	                mom.date() === 29
	            ) {
	                value = toInt(value);
	                mom._d['set' + (mom._isUTC ? 'UTC' : '') + unit](
	                    value,
	                    mom.month(),
	                    daysInMonth(value, mom.month())
	                );
	            } else {
	                mom._d['set' + (mom._isUTC ? 'UTC' : '') + unit](value);
	            }
	        }
	    }

	    // MOMENTS

	    function stringGet(units) {
	        units = normalizeUnits(units);
	        if (isFunction(this[units])) {
	            return this[units]();
	        }
	        return this;
	    }

	    function stringSet(units, value) {
	        if (typeof units === 'object') {
	            units = normalizeObjectUnits(units);
	            var prioritized = getPrioritizedUnits(units),
	                i;
	            for (i = 0; i < prioritized.length; i++) {
	                this[prioritized[i].unit](units[prioritized[i].unit]);
	            }
	        } else {
	            units = normalizeUnits(units);
	            if (isFunction(this[units])) {
	                return this[units](value);
	            }
	        }
	        return this;
	    }

	    var match1 = /\d/, //       0 - 9
	        match2 = /\d\d/, //      00 - 99
	        match3 = /\d{3}/, //     000 - 999
	        match4 = /\d{4}/, //    0000 - 9999
	        match6 = /[+-]?\d{6}/, // -999999 - 999999
	        match1to2 = /\d\d?/, //       0 - 99
	        match3to4 = /\d\d\d\d?/, //     999 - 9999
	        match5to6 = /\d\d\d\d\d\d?/, //   99999 - 999999
	        match1to3 = /\d{1,3}/, //       0 - 999
	        match1to4 = /\d{1,4}/, //       0 - 9999
	        match1to6 = /[+-]?\d{1,6}/, // -999999 - 999999
	        matchUnsigned = /\d+/, //       0 - inf
	        matchSigned = /[+-]?\d+/, //    -inf - inf
	        matchOffset = /Z|[+-]\d\d:?\d\d/gi, // +00:00 -00:00 +0000 -0000 or Z
	        matchShortOffset = /Z|[+-]\d\d(?::?\d\d)?/gi, // +00 -00 +00:00 -00:00 +0000 -0000 or Z
	        matchTimestamp = /[+-]?\d+(\.\d{1,3})?/, // 123456789 123456789.123
	        // any word (or two) characters or numbers including two/three word month in arabic.
	        // includes scottish gaelic two word and hyphenated months
	        matchWord = /[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,
	        regexes;

	    regexes = {};

	    function addRegexToken(token, regex, strictRegex) {
	        regexes[token] = isFunction(regex)
	            ? regex
	            : function (isStrict, localeData) {
	                  return isStrict && strictRegex ? strictRegex : regex;
	              };
	    }

	    function getParseRegexForToken(token, config) {
	        if (!hasOwnProp(regexes, token)) {
	            return new RegExp(unescapeFormat(token));
	        }

	        return regexes[token](config._strict, config._locale);
	    }

	    // Code from http://stackoverflow.com/questions/3561493/is-there-a-regexp-escape-function-in-javascript
	    function unescapeFormat(s) {
	        return regexEscape(
	            s
	                .replace('\\', '')
	                .replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g, function (
	                    matched,
	                    p1,
	                    p2,
	                    p3,
	                    p4
	                ) {
	                    return p1 || p2 || p3 || p4;
	                })
	        );
	    }

	    function regexEscape(s) {
	        return s.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&');
	    }

	    var tokens = {};

	    function addParseToken(token, callback) {
	        var i,
	            func = callback;
	        if (typeof token === 'string') {
	            token = [token];
	        }
	        if (isNumber(callback)) {
	            func = function (input, array) {
	                array[callback] = toInt(input);
	            };
	        }
	        for (i = 0; i < token.length; i++) {
	            tokens[token[i]] = func;
	        }
	    }

	    function addWeekParseToken(token, callback) {
	        addParseToken(token, function (input, array, config, token) {
	            config._w = config._w || {};
	            callback(input, config._w, config, token);
	        });
	    }

	    function addTimeToArrayFromToken(token, input, config) {
	        if (input != null && hasOwnProp(tokens, token)) {
	            tokens[token](input, config._a, config, token);
	        }
	    }

	    var YEAR = 0,
	        MONTH = 1,
	        DATE = 2,
	        HOUR = 3,
	        MINUTE = 4,
	        SECOND = 5,
	        MILLISECOND = 6,
	        WEEK = 7,
	        WEEKDAY = 8;

	    function mod(n, x) {
	        return ((n % x) + x) % x;
	    }

	    var indexOf;

	    if (Array.prototype.indexOf) {
	        indexOf = Array.prototype.indexOf;
	    } else {
	        indexOf = function (o) {
	            // I know
	            var i;
	            for (i = 0; i < this.length; ++i) {
	                if (this[i] === o) {
	                    return i;
	                }
	            }
	            return -1;
	        };
	    }

	    function daysInMonth(year, month) {
	        if (isNaN(year) || isNaN(month)) {
	            return NaN;
	        }
	        var modMonth = mod(month, 12);
	        year += (month - modMonth) / 12;
	        return modMonth === 1
	            ? isLeapYear(year)
	                ? 29
	                : 28
	            : 31 - ((modMonth % 7) % 2);
	    }

	    // FORMATTING

	    addFormatToken('M', ['MM', 2], 'Mo', function () {
	        return this.month() + 1;
	    });

	    addFormatToken('MMM', 0, 0, function (format) {
	        return this.localeData().monthsShort(this, format);
	    });

	    addFormatToken('MMMM', 0, 0, function (format) {
	        return this.localeData().months(this, format);
	    });

	    // ALIASES

	    addUnitAlias('month', 'M');

	    // PRIORITY

	    addUnitPriority('month', 8);

	    // PARSING

	    addRegexToken('M', match1to2);
	    addRegexToken('MM', match1to2, match2);
	    addRegexToken('MMM', function (isStrict, locale) {
	        return locale.monthsShortRegex(isStrict);
	    });
	    addRegexToken('MMMM', function (isStrict, locale) {
	        return locale.monthsRegex(isStrict);
	    });

	    addParseToken(['M', 'MM'], function (input, array) {
	        array[MONTH] = toInt(input) - 1;
	    });

	    addParseToken(['MMM', 'MMMM'], function (input, array, config, token) {
	        var month = config._locale.monthsParse(input, token, config._strict);
	        // if we didn't find a month name, mark the date as invalid.
	        if (month != null) {
	            array[MONTH] = month;
	        } else {
	            getParsingFlags(config).invalidMonth = input;
	        }
	    });

	    // LOCALES

	    var defaultLocaleMonths = 'January_February_March_April_May_June_July_August_September_October_November_December'.split(
	            '_'
	        ),
	        defaultLocaleMonthsShort = 'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split(
	            '_'
	        ),
	        MONTHS_IN_FORMAT = /D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,
	        defaultMonthsShortRegex = matchWord,
	        defaultMonthsRegex = matchWord;

	    function localeMonths(m, format) {
	        if (!m) {
	            return isArray(this._months)
	                ? this._months
	                : this._months['standalone'];
	        }
	        return isArray(this._months)
	            ? this._months[m.month()]
	            : this._months[
	                  (this._months.isFormat || MONTHS_IN_FORMAT).test(format)
	                      ? 'format'
	                      : 'standalone'
	              ][m.month()];
	    }

	    function localeMonthsShort(m, format) {
	        if (!m) {
	            return isArray(this._monthsShort)
	                ? this._monthsShort
	                : this._monthsShort['standalone'];
	        }
	        return isArray(this._monthsShort)
	            ? this._monthsShort[m.month()]
	            : this._monthsShort[
	                  MONTHS_IN_FORMAT.test(format) ? 'format' : 'standalone'
	              ][m.month()];
	    }

	    function handleStrictParse(monthName, format, strict) {
	        var i,
	            ii,
	            mom,
	            llc = monthName.toLocaleLowerCase();
	        if (!this._monthsParse) {
	            // this is not used
	            this._monthsParse = [];
	            this._longMonthsParse = [];
	            this._shortMonthsParse = [];
	            for (i = 0; i < 12; ++i) {
	                mom = createUTC([2000, i]);
	                this._shortMonthsParse[i] = this.monthsShort(
	                    mom,
	                    ''
	                ).toLocaleLowerCase();
	                this._longMonthsParse[i] = this.months(mom, '').toLocaleLowerCase();
	            }
	        }

	        if (strict) {
	            if (format === 'MMM') {
	                ii = indexOf.call(this._shortMonthsParse, llc);
	                return ii !== -1 ? ii : null;
	            } else {
	                ii = indexOf.call(this._longMonthsParse, llc);
	                return ii !== -1 ? ii : null;
	            }
	        } else {
	            if (format === 'MMM') {
	                ii = indexOf.call(this._shortMonthsParse, llc);
	                if (ii !== -1) {
	                    return ii;
	                }
	                ii = indexOf.call(this._longMonthsParse, llc);
	                return ii !== -1 ? ii : null;
	            } else {
	                ii = indexOf.call(this._longMonthsParse, llc);
	                if (ii !== -1) {
	                    return ii;
	                }
	                ii = indexOf.call(this._shortMonthsParse, llc);
	                return ii !== -1 ? ii : null;
	            }
	        }
	    }

	    function localeMonthsParse(monthName, format, strict) {
	        var i, mom, regex;

	        if (this._monthsParseExact) {
	            return handleStrictParse.call(this, monthName, format, strict);
	        }

	        if (!this._monthsParse) {
	            this._monthsParse = [];
	            this._longMonthsParse = [];
	            this._shortMonthsParse = [];
	        }

	        // TODO: add sorting
	        // Sorting makes sure if one month (or abbr) is a prefix of another
	        // see sorting in computeMonthsParse
	        for (i = 0; i < 12; i++) {
	            // make the regex if we don't have it already
	            mom = createUTC([2000, i]);
	            if (strict && !this._longMonthsParse[i]) {
	                this._longMonthsParse[i] = new RegExp(
	                    '^' + this.months(mom, '').replace('.', '') + '$',
	                    'i'
	                );
	                this._shortMonthsParse[i] = new RegExp(
	                    '^' + this.monthsShort(mom, '').replace('.', '') + '$',
	                    'i'
	                );
	            }
	            if (!strict && !this._monthsParse[i]) {
	                regex =
	                    '^' + this.months(mom, '') + '|^' + this.monthsShort(mom, '');
	                this._monthsParse[i] = new RegExp(regex.replace('.', ''), 'i');
	            }
	            // test the regex
	            if (
	                strict &&
	                format === 'MMMM' &&
	                this._longMonthsParse[i].test(monthName)
	            ) {
	                return i;
	            } else if (
	                strict &&
	                format === 'MMM' &&
	                this._shortMonthsParse[i].test(monthName)
	            ) {
	                return i;
	            } else if (!strict && this._monthsParse[i].test(monthName)) {
	                return i;
	            }
	        }
	    }

	    // MOMENTS

	    function setMonth(mom, value) {
	        var dayOfMonth;

	        if (!mom.isValid()) {
	            // No op
	            return mom;
	        }

	        if (typeof value === 'string') {
	            if (/^\d+$/.test(value)) {
	                value = toInt(value);
	            } else {
	                value = mom.localeData().monthsParse(value);
	                // TODO: Another silent failure?
	                if (!isNumber(value)) {
	                    return mom;
	                }
	            }
	        }

	        dayOfMonth = Math.min(mom.date(), daysInMonth(mom.year(), value));
	        mom._d['set' + (mom._isUTC ? 'UTC' : '') + 'Month'](value, dayOfMonth);
	        return mom;
	    }

	    function getSetMonth(value) {
	        if (value != null) {
	            setMonth(this, value);
	            hooks.updateOffset(this, true);
	            return this;
	        } else {
	            return get(this, 'Month');
	        }
	    }

	    function getDaysInMonth() {
	        return daysInMonth(this.year(), this.month());
	    }

	    function monthsShortRegex(isStrict) {
	        if (this._monthsParseExact) {
	            if (!hasOwnProp(this, '_monthsRegex')) {
	                computeMonthsParse.call(this);
	            }
	            if (isStrict) {
	                return this._monthsShortStrictRegex;
	            } else {
	                return this._monthsShortRegex;
	            }
	        } else {
	            if (!hasOwnProp(this, '_monthsShortRegex')) {
	                this._monthsShortRegex = defaultMonthsShortRegex;
	            }
	            return this._monthsShortStrictRegex && isStrict
	                ? this._monthsShortStrictRegex
	                : this._monthsShortRegex;
	        }
	    }

	    function monthsRegex(isStrict) {
	        if (this._monthsParseExact) {
	            if (!hasOwnProp(this, '_monthsRegex')) {
	                computeMonthsParse.call(this);
	            }
	            if (isStrict) {
	                return this._monthsStrictRegex;
	            } else {
	                return this._monthsRegex;
	            }
	        } else {
	            if (!hasOwnProp(this, '_monthsRegex')) {
	                this._monthsRegex = defaultMonthsRegex;
	            }
	            return this._monthsStrictRegex && isStrict
	                ? this._monthsStrictRegex
	                : this._monthsRegex;
	        }
	    }

	    function computeMonthsParse() {
	        function cmpLenRev(a, b) {
	            return b.length - a.length;
	        }

	        var shortPieces = [],
	            longPieces = [],
	            mixedPieces = [],
	            i,
	            mom;
	        for (i = 0; i < 12; i++) {
	            // make the regex if we don't have it already
	            mom = createUTC([2000, i]);
	            shortPieces.push(this.monthsShort(mom, ''));
	            longPieces.push(this.months(mom, ''));
	            mixedPieces.push(this.months(mom, ''));
	            mixedPieces.push(this.monthsShort(mom, ''));
	        }
	        // Sorting makes sure if one month (or abbr) is a prefix of another it
	        // will match the longer piece.
	        shortPieces.sort(cmpLenRev);
	        longPieces.sort(cmpLenRev);
	        mixedPieces.sort(cmpLenRev);
	        for (i = 0; i < 12; i++) {
	            shortPieces[i] = regexEscape(shortPieces[i]);
	            longPieces[i] = regexEscape(longPieces[i]);
	        }
	        for (i = 0; i < 24; i++) {
	            mixedPieces[i] = regexEscape(mixedPieces[i]);
	        }

	        this._monthsRegex = new RegExp('^(' + mixedPieces.join('|') + ')', 'i');
	        this._monthsShortRegex = this._monthsRegex;
	        this._monthsStrictRegex = new RegExp(
	            '^(' + longPieces.join('|') + ')',
	            'i'
	        );
	        this._monthsShortStrictRegex = new RegExp(
	            '^(' + shortPieces.join('|') + ')',
	            'i'
	        );
	    }

	    // FORMATTING

	    addFormatToken('Y', 0, 0, function () {
	        var y = this.year();
	        return y <= 9999 ? zeroFill(y, 4) : '+' + y;
	    });

	    addFormatToken(0, ['YY', 2], 0, function () {
	        return this.year() % 100;
	    });

	    addFormatToken(0, ['YYYY', 4], 0, 'year');
	    addFormatToken(0, ['YYYYY', 5], 0, 'year');
	    addFormatToken(0, ['YYYYYY', 6, true], 0, 'year');

	    // ALIASES

	    addUnitAlias('year', 'y');

	    // PRIORITIES

	    addUnitPriority('year', 1);

	    // PARSING

	    addRegexToken('Y', matchSigned);
	    addRegexToken('YY', match1to2, match2);
	    addRegexToken('YYYY', match1to4, match4);
	    addRegexToken('YYYYY', match1to6, match6);
	    addRegexToken('YYYYYY', match1to6, match6);

	    addParseToken(['YYYYY', 'YYYYYY'], YEAR);
	    addParseToken('YYYY', function (input, array) {
	        array[YEAR] =
	            input.length === 2 ? hooks.parseTwoDigitYear(input) : toInt(input);
	    });
	    addParseToken('YY', function (input, array) {
	        array[YEAR] = hooks.parseTwoDigitYear(input);
	    });
	    addParseToken('Y', function (input, array) {
	        array[YEAR] = parseInt(input, 10);
	    });

	    // HELPERS

	    function daysInYear(year) {
	        return isLeapYear(year) ? 366 : 365;
	    }

	    // HOOKS

	    hooks.parseTwoDigitYear = function (input) {
	        return toInt(input) + (toInt(input) > 68 ? 1900 : 2000);
	    };

	    // MOMENTS

	    var getSetYear = makeGetSet('FullYear', true);

	    function getIsLeapYear() {
	        return isLeapYear(this.year());
	    }

	    function createDate(y, m, d, h, M, s, ms) {
	        // can't just apply() to create a date:
	        // https://stackoverflow.com/q/181348
	        var date;
	        // the date constructor remaps years 0-99 to 1900-1999
	        if (y < 100 && y >= 0) {
	            // preserve leap years using a full 400 year cycle, then reset
	            date = new Date(y + 400, m, d, h, M, s, ms);
	            if (isFinite(date.getFullYear())) {
	                date.setFullYear(y);
	            }
	        } else {
	            date = new Date(y, m, d, h, M, s, ms);
	        }

	        return date;
	    }

	    function createUTCDate(y) {
	        var date, args;
	        // the Date.UTC function remaps years 0-99 to 1900-1999
	        if (y < 100 && y >= 0) {
	            args = Array.prototype.slice.call(arguments);
	            // preserve leap years using a full 400 year cycle, then reset
	            args[0] = y + 400;
	            date = new Date(Date.UTC.apply(null, args));
	            if (isFinite(date.getUTCFullYear())) {
	                date.setUTCFullYear(y);
	            }
	        } else {
	            date = new Date(Date.UTC.apply(null, arguments));
	        }

	        return date;
	    }

	    // start-of-first-week - start-of-year
	    function firstWeekOffset(year, dow, doy) {
	        var // first-week day -- which january is always in the first week (4 for iso, 1 for other)
	            fwd = 7 + dow - doy,
	            // first-week day local weekday -- which local weekday is fwd
	            fwdlw = (7 + createUTCDate(year, 0, fwd).getUTCDay() - dow) % 7;

	        return -fwdlw + fwd - 1;
	    }

	    // https://en.wikipedia.org/wiki/ISO_week_date#Calculating_a_date_given_the_year.2C_week_number_and_weekday
	    function dayOfYearFromWeeks(year, week, weekday, dow, doy) {
	        var localWeekday = (7 + weekday - dow) % 7,
	            weekOffset = firstWeekOffset(year, dow, doy),
	            dayOfYear = 1 + 7 * (week - 1) + localWeekday + weekOffset,
	            resYear,
	            resDayOfYear;

	        if (dayOfYear <= 0) {
	            resYear = year - 1;
	            resDayOfYear = daysInYear(resYear) + dayOfYear;
	        } else if (dayOfYear > daysInYear(year)) {
	            resYear = year + 1;
	            resDayOfYear = dayOfYear - daysInYear(year);
	        } else {
	            resYear = year;
	            resDayOfYear = dayOfYear;
	        }

	        return {
	            year: resYear,
	            dayOfYear: resDayOfYear,
	        };
	    }

	    function weekOfYear(mom, dow, doy) {
	        var weekOffset = firstWeekOffset(mom.year(), dow, doy),
	            week = Math.floor((mom.dayOfYear() - weekOffset - 1) / 7) + 1,
	            resWeek,
	            resYear;

	        if (week < 1) {
	            resYear = mom.year() - 1;
	            resWeek = week + weeksInYear(resYear, dow, doy);
	        } else if (week > weeksInYear(mom.year(), dow, doy)) {
	            resWeek = week - weeksInYear(mom.year(), dow, doy);
	            resYear = mom.year() + 1;
	        } else {
	            resYear = mom.year();
	            resWeek = week;
	        }

	        return {
	            week: resWeek,
	            year: resYear,
	        };
	    }

	    function weeksInYear(year, dow, doy) {
	        var weekOffset = firstWeekOffset(year, dow, doy),
	            weekOffsetNext = firstWeekOffset(year + 1, dow, doy);
	        return (daysInYear(year) - weekOffset + weekOffsetNext) / 7;
	    }

	    // FORMATTING

	    addFormatToken('w', ['ww', 2], 'wo', 'week');
	    addFormatToken('W', ['WW', 2], 'Wo', 'isoWeek');

	    // ALIASES

	    addUnitAlias('week', 'w');
	    addUnitAlias('isoWeek', 'W');

	    // PRIORITIES

	    addUnitPriority('week', 5);
	    addUnitPriority('isoWeek', 5);

	    // PARSING

	    addRegexToken('w', match1to2);
	    addRegexToken('ww', match1to2, match2);
	    addRegexToken('W', match1to2);
	    addRegexToken('WW', match1to2, match2);

	    addWeekParseToken(['w', 'ww', 'W', 'WW'], function (
	        input,
	        week,
	        config,
	        token
	    ) {
	        week[token.substr(0, 1)] = toInt(input);
	    });

	    // HELPERS

	    // LOCALES

	    function localeWeek(mom) {
	        return weekOfYear(mom, this._week.dow, this._week.doy).week;
	    }

	    var defaultLocaleWeek = {
	        dow: 0, // Sunday is the first day of the week.
	        doy: 6, // The week that contains Jan 6th is the first week of the year.
	    };

	    function localeFirstDayOfWeek() {
	        return this._week.dow;
	    }

	    function localeFirstDayOfYear() {
	        return this._week.doy;
	    }

	    // MOMENTS

	    function getSetWeek(input) {
	        var week = this.localeData().week(this);
	        return input == null ? week : this.add((input - week) * 7, 'd');
	    }

	    function getSetISOWeek(input) {
	        var week = weekOfYear(this, 1, 4).week;
	        return input == null ? week : this.add((input - week) * 7, 'd');
	    }

	    // FORMATTING

	    addFormatToken('d', 0, 'do', 'day');

	    addFormatToken('dd', 0, 0, function (format) {
	        return this.localeData().weekdaysMin(this, format);
	    });

	    addFormatToken('ddd', 0, 0, function (format) {
	        return this.localeData().weekdaysShort(this, format);
	    });

	    addFormatToken('dddd', 0, 0, function (format) {
	        return this.localeData().weekdays(this, format);
	    });

	    addFormatToken('e', 0, 0, 'weekday');
	    addFormatToken('E', 0, 0, 'isoWeekday');

	    // ALIASES

	    addUnitAlias('day', 'd');
	    addUnitAlias('weekday', 'e');
	    addUnitAlias('isoWeekday', 'E');

	    // PRIORITY
	    addUnitPriority('day', 11);
	    addUnitPriority('weekday', 11);
	    addUnitPriority('isoWeekday', 11);

	    // PARSING

	    addRegexToken('d', match1to2);
	    addRegexToken('e', match1to2);
	    addRegexToken('E', match1to2);
	    addRegexToken('dd', function (isStrict, locale) {
	        return locale.weekdaysMinRegex(isStrict);
	    });
	    addRegexToken('ddd', function (isStrict, locale) {
	        return locale.weekdaysShortRegex(isStrict);
	    });
	    addRegexToken('dddd', function (isStrict, locale) {
	        return locale.weekdaysRegex(isStrict);
	    });

	    addWeekParseToken(['dd', 'ddd', 'dddd'], function (input, week, config, token) {
	        var weekday = config._locale.weekdaysParse(input, token, config._strict);
	        // if we didn't get a weekday name, mark the date as invalid
	        if (weekday != null) {
	            week.d = weekday;
	        } else {
	            getParsingFlags(config).invalidWeekday = input;
	        }
	    });

	    addWeekParseToken(['d', 'e', 'E'], function (input, week, config, token) {
	        week[token] = toInt(input);
	    });

	    // HELPERS

	    function parseWeekday(input, locale) {
	        if (typeof input !== 'string') {
	            return input;
	        }

	        if (!isNaN(input)) {
	            return parseInt(input, 10);
	        }

	        input = locale.weekdaysParse(input);
	        if (typeof input === 'number') {
	            return input;
	        }

	        return null;
	    }

	    function parseIsoWeekday(input, locale) {
	        if (typeof input === 'string') {
	            return locale.weekdaysParse(input) % 7 || 7;
	        }
	        return isNaN(input) ? null : input;
	    }

	    // LOCALES
	    function shiftWeekdays(ws, n) {
	        return ws.slice(n, 7).concat(ws.slice(0, n));
	    }

	    var defaultLocaleWeekdays = 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split(
	            '_'
	        ),
	        defaultLocaleWeekdaysShort = 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),
	        defaultLocaleWeekdaysMin = 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),
	        defaultWeekdaysRegex = matchWord,
	        defaultWeekdaysShortRegex = matchWord,
	        defaultWeekdaysMinRegex = matchWord;

	    function localeWeekdays(m, format) {
	        var weekdays = isArray(this._weekdays)
	            ? this._weekdays
	            : this._weekdays[
	                  m && m !== true && this._weekdays.isFormat.test(format)
	                      ? 'format'
	                      : 'standalone'
	              ];
	        return m === true
	            ? shiftWeekdays(weekdays, this._week.dow)
	            : m
	            ? weekdays[m.day()]
	            : weekdays;
	    }

	    function localeWeekdaysShort(m) {
	        return m === true
	            ? shiftWeekdays(this._weekdaysShort, this._week.dow)
	            : m
	            ? this._weekdaysShort[m.day()]
	            : this._weekdaysShort;
	    }

	    function localeWeekdaysMin(m) {
	        return m === true
	            ? shiftWeekdays(this._weekdaysMin, this._week.dow)
	            : m
	            ? this._weekdaysMin[m.day()]
	            : this._weekdaysMin;
	    }

	    function handleStrictParse$1(weekdayName, format, strict) {
	        var i,
	            ii,
	            mom,
	            llc = weekdayName.toLocaleLowerCase();
	        if (!this._weekdaysParse) {
	            this._weekdaysParse = [];
	            this._shortWeekdaysParse = [];
	            this._minWeekdaysParse = [];

	            for (i = 0; i < 7; ++i) {
	                mom = createUTC([2000, 1]).day(i);
	                this._minWeekdaysParse[i] = this.weekdaysMin(
	                    mom,
	                    ''
	                ).toLocaleLowerCase();
	                this._shortWeekdaysParse[i] = this.weekdaysShort(
	                    mom,
	                    ''
	                ).toLocaleLowerCase();
	                this._weekdaysParse[i] = this.weekdays(mom, '').toLocaleLowerCase();
	            }
	        }

	        if (strict) {
	            if (format === 'dddd') {
	                ii = indexOf.call(this._weekdaysParse, llc);
	                return ii !== -1 ? ii : null;
	            } else if (format === 'ddd') {
	                ii = indexOf.call(this._shortWeekdaysParse, llc);
	                return ii !== -1 ? ii : null;
	            } else {
	                ii = indexOf.call(this._minWeekdaysParse, llc);
	                return ii !== -1 ? ii : null;
	            }
	        } else {
	            if (format === 'dddd') {
	                ii = indexOf.call(this._weekdaysParse, llc);
	                if (ii !== -1) {
	                    return ii;
	                }
	                ii = indexOf.call(this._shortWeekdaysParse, llc);
	                if (ii !== -1) {
	                    return ii;
	                }
	                ii = indexOf.call(this._minWeekdaysParse, llc);
	                return ii !== -1 ? ii : null;
	            } else if (format === 'ddd') {
	                ii = indexOf.call(this._shortWeekdaysParse, llc);
	                if (ii !== -1) {
	                    return ii;
	                }
	                ii = indexOf.call(this._weekdaysParse, llc);
	                if (ii !== -1) {
	                    return ii;
	                }
	                ii = indexOf.call(this._minWeekdaysParse, llc);
	                return ii !== -1 ? ii : null;
	            } else {
	                ii = indexOf.call(this._minWeekdaysParse, llc);
	                if (ii !== -1) {
	                    return ii;
	                }
	                ii = indexOf.call(this._weekdaysParse, llc);
	                if (ii !== -1) {
	                    return ii;
	                }
	                ii = indexOf.call(this._shortWeekdaysParse, llc);
	                return ii !== -1 ? ii : null;
	            }
	        }
	    }

	    function localeWeekdaysParse(weekdayName, format, strict) {
	        var i, mom, regex;

	        if (this._weekdaysParseExact) {
	            return handleStrictParse$1.call(this, weekdayName, format, strict);
	        }

	        if (!this._weekdaysParse) {
	            this._weekdaysParse = [];
	            this._minWeekdaysParse = [];
	            this._shortWeekdaysParse = [];
	            this._fullWeekdaysParse = [];
	        }

	        for (i = 0; i < 7; i++) {
	            // make the regex if we don't have it already

	            mom = createUTC([2000, 1]).day(i);
	            if (strict && !this._fullWeekdaysParse[i]) {
	                this._fullWeekdaysParse[i] = new RegExp(
	                    '^' + this.weekdays(mom, '').replace('.', '\\.?') + '$',
	                    'i'
	                );
	                this._shortWeekdaysParse[i] = new RegExp(
	                    '^' + this.weekdaysShort(mom, '').replace('.', '\\.?') + '$',
	                    'i'
	                );
	                this._minWeekdaysParse[i] = new RegExp(
	                    '^' + this.weekdaysMin(mom, '').replace('.', '\\.?') + '$',
	                    'i'
	                );
	            }
	            if (!this._weekdaysParse[i]) {
	                regex =
	                    '^' +
	                    this.weekdays(mom, '') +
	                    '|^' +
	                    this.weekdaysShort(mom, '') +
	                    '|^' +
	                    this.weekdaysMin(mom, '');
	                this._weekdaysParse[i] = new RegExp(regex.replace('.', ''), 'i');
	            }
	            // test the regex
	            if (
	                strict &&
	                format === 'dddd' &&
	                this._fullWeekdaysParse[i].test(weekdayName)
	            ) {
	                return i;
	            } else if (
	                strict &&
	                format === 'ddd' &&
	                this._shortWeekdaysParse[i].test(weekdayName)
	            ) {
	                return i;
	            } else if (
	                strict &&
	                format === 'dd' &&
	                this._minWeekdaysParse[i].test(weekdayName)
	            ) {
	                return i;
	            } else if (!strict && this._weekdaysParse[i].test(weekdayName)) {
	                return i;
	            }
	        }
	    }

	    // MOMENTS

	    function getSetDayOfWeek(input) {
	        if (!this.isValid()) {
	            return input != null ? this : NaN;
	        }
	        var day = this._isUTC ? this._d.getUTCDay() : this._d.getDay();
	        if (input != null) {
	            input = parseWeekday(input, this.localeData());
	            return this.add(input - day, 'd');
	        } else {
	            return day;
	        }
	    }

	    function getSetLocaleDayOfWeek(input) {
	        if (!this.isValid()) {
	            return input != null ? this : NaN;
	        }
	        var weekday = (this.day() + 7 - this.localeData()._week.dow) % 7;
	        return input == null ? weekday : this.add(input - weekday, 'd');
	    }

	    function getSetISODayOfWeek(input) {
	        if (!this.isValid()) {
	            return input != null ? this : NaN;
	        }

	        // behaves the same as moment#day except
	        // as a getter, returns 7 instead of 0 (1-7 range instead of 0-6)
	        // as a setter, sunday should belong to the previous week.

	        if (input != null) {
	            var weekday = parseIsoWeekday(input, this.localeData());
	            return this.day(this.day() % 7 ? weekday : weekday - 7);
	        } else {
	            return this.day() || 7;
	        }
	    }

	    function weekdaysRegex(isStrict) {
	        if (this._weekdaysParseExact) {
	            if (!hasOwnProp(this, '_weekdaysRegex')) {
	                computeWeekdaysParse.call(this);
	            }
	            if (isStrict) {
	                return this._weekdaysStrictRegex;
	            } else {
	                return this._weekdaysRegex;
	            }
	        } else {
	            if (!hasOwnProp(this, '_weekdaysRegex')) {
	                this._weekdaysRegex = defaultWeekdaysRegex;
	            }
	            return this._weekdaysStrictRegex && isStrict
	                ? this._weekdaysStrictRegex
	                : this._weekdaysRegex;
	        }
	    }

	    function weekdaysShortRegex(isStrict) {
	        if (this._weekdaysParseExact) {
	            if (!hasOwnProp(this, '_weekdaysRegex')) {
	                computeWeekdaysParse.call(this);
	            }
	            if (isStrict) {
	                return this._weekdaysShortStrictRegex;
	            } else {
	                return this._weekdaysShortRegex;
	            }
	        } else {
	            if (!hasOwnProp(this, '_weekdaysShortRegex')) {
	                this._weekdaysShortRegex = defaultWeekdaysShortRegex;
	            }
	            return this._weekdaysShortStrictRegex && isStrict
	                ? this._weekdaysShortStrictRegex
	                : this._weekdaysShortRegex;
	        }
	    }

	    function weekdaysMinRegex(isStrict) {
	        if (this._weekdaysParseExact) {
	            if (!hasOwnProp(this, '_weekdaysRegex')) {
	                computeWeekdaysParse.call(this);
	            }
	            if (isStrict) {
	                return this._weekdaysMinStrictRegex;
	            } else {
	                return this._weekdaysMinRegex;
	            }
	        } else {
	            if (!hasOwnProp(this, '_weekdaysMinRegex')) {
	                this._weekdaysMinRegex = defaultWeekdaysMinRegex;
	            }
	            return this._weekdaysMinStrictRegex && isStrict
	                ? this._weekdaysMinStrictRegex
	                : this._weekdaysMinRegex;
	        }
	    }

	    function computeWeekdaysParse() {
	        function cmpLenRev(a, b) {
	            return b.length - a.length;
	        }

	        var minPieces = [],
	            shortPieces = [],
	            longPieces = [],
	            mixedPieces = [],
	            i,
	            mom,
	            minp,
	            shortp,
	            longp;
	        for (i = 0; i < 7; i++) {
	            // make the regex if we don't have it already
	            mom = createUTC([2000, 1]).day(i);
	            minp = regexEscape(this.weekdaysMin(mom, ''));
	            shortp = regexEscape(this.weekdaysShort(mom, ''));
	            longp = regexEscape(this.weekdays(mom, ''));
	            minPieces.push(minp);
	            shortPieces.push(shortp);
	            longPieces.push(longp);
	            mixedPieces.push(minp);
	            mixedPieces.push(shortp);
	            mixedPieces.push(longp);
	        }
	        // Sorting makes sure if one weekday (or abbr) is a prefix of another it
	        // will match the longer piece.
	        minPieces.sort(cmpLenRev);
	        shortPieces.sort(cmpLenRev);
	        longPieces.sort(cmpLenRev);
	        mixedPieces.sort(cmpLenRev);

	        this._weekdaysRegex = new RegExp('^(' + mixedPieces.join('|') + ')', 'i');
	        this._weekdaysShortRegex = this._weekdaysRegex;
	        this._weekdaysMinRegex = this._weekdaysRegex;

	        this._weekdaysStrictRegex = new RegExp(
	            '^(' + longPieces.join('|') + ')',
	            'i'
	        );
	        this._weekdaysShortStrictRegex = new RegExp(
	            '^(' + shortPieces.join('|') + ')',
	            'i'
	        );
	        this._weekdaysMinStrictRegex = new RegExp(
	            '^(' + minPieces.join('|') + ')',
	            'i'
	        );
	    }

	    // FORMATTING

	    function hFormat() {
	        return this.hours() % 12 || 12;
	    }

	    function kFormat() {
	        return this.hours() || 24;
	    }

	    addFormatToken('H', ['HH', 2], 0, 'hour');
	    addFormatToken('h', ['hh', 2], 0, hFormat);
	    addFormatToken('k', ['kk', 2], 0, kFormat);

	    addFormatToken('hmm', 0, 0, function () {
	        return '' + hFormat.apply(this) + zeroFill(this.minutes(), 2);
	    });

	    addFormatToken('hmmss', 0, 0, function () {
	        return (
	            '' +
	            hFormat.apply(this) +
	            zeroFill(this.minutes(), 2) +
	            zeroFill(this.seconds(), 2)
	        );
	    });

	    addFormatToken('Hmm', 0, 0, function () {
	        return '' + this.hours() + zeroFill(this.minutes(), 2);
	    });

	    addFormatToken('Hmmss', 0, 0, function () {
	        return (
	            '' +
	            this.hours() +
	            zeroFill(this.minutes(), 2) +
	            zeroFill(this.seconds(), 2)
	        );
	    });

	    function meridiem(token, lowercase) {
	        addFormatToken(token, 0, 0, function () {
	            return this.localeData().meridiem(
	                this.hours(),
	                this.minutes(),
	                lowercase
	            );
	        });
	    }

	    meridiem('a', true);
	    meridiem('A', false);

	    // ALIASES

	    addUnitAlias('hour', 'h');

	    // PRIORITY
	    addUnitPriority('hour', 13);

	    // PARSING

	    function matchMeridiem(isStrict, locale) {
	        return locale._meridiemParse;
	    }

	    addRegexToken('a', matchMeridiem);
	    addRegexToken('A', matchMeridiem);
	    addRegexToken('H', match1to2);
	    addRegexToken('h', match1to2);
	    addRegexToken('k', match1to2);
	    addRegexToken('HH', match1to2, match2);
	    addRegexToken('hh', match1to2, match2);
	    addRegexToken('kk', match1to2, match2);

	    addRegexToken('hmm', match3to4);
	    addRegexToken('hmmss', match5to6);
	    addRegexToken('Hmm', match3to4);
	    addRegexToken('Hmmss', match5to6);

	    addParseToken(['H', 'HH'], HOUR);
	    addParseToken(['k', 'kk'], function (input, array, config) {
	        var kInput = toInt(input);
	        array[HOUR] = kInput === 24 ? 0 : kInput;
	    });
	    addParseToken(['a', 'A'], function (input, array, config) {
	        config._isPm = config._locale.isPM(input);
	        config._meridiem = input;
	    });
	    addParseToken(['h', 'hh'], function (input, array, config) {
	        array[HOUR] = toInt(input);
	        getParsingFlags(config).bigHour = true;
	    });
	    addParseToken('hmm', function (input, array, config) {
	        var pos = input.length - 2;
	        array[HOUR] = toInt(input.substr(0, pos));
	        array[MINUTE] = toInt(input.substr(pos));
	        getParsingFlags(config).bigHour = true;
	    });
	    addParseToken('hmmss', function (input, array, config) {
	        var pos1 = input.length - 4,
	            pos2 = input.length - 2;
	        array[HOUR] = toInt(input.substr(0, pos1));
	        array[MINUTE] = toInt(input.substr(pos1, 2));
	        array[SECOND] = toInt(input.substr(pos2));
	        getParsingFlags(config).bigHour = true;
	    });
	    addParseToken('Hmm', function (input, array, config) {
	        var pos = input.length - 2;
	        array[HOUR] = toInt(input.substr(0, pos));
	        array[MINUTE] = toInt(input.substr(pos));
	    });
	    addParseToken('Hmmss', function (input, array, config) {
	        var pos1 = input.length - 4,
	            pos2 = input.length - 2;
	        array[HOUR] = toInt(input.substr(0, pos1));
	        array[MINUTE] = toInt(input.substr(pos1, 2));
	        array[SECOND] = toInt(input.substr(pos2));
	    });

	    // LOCALES

	    function localeIsPM(input) {
	        // IE8 Quirks Mode & IE7 Standards Mode do not allow accessing strings like arrays
	        // Using charAt should be more compatible.
	        return (input + '').toLowerCase().charAt(0) === 'p';
	    }

	    var defaultLocaleMeridiemParse = /[ap]\.?m?\.?/i,
	        // Setting the hour should keep the time, because the user explicitly
	        // specified which hour they want. So trying to maintain the same hour (in
	        // a new timezone) makes sense. Adding/subtracting hours does not follow
	        // this rule.
	        getSetHour = makeGetSet('Hours', true);

	    function localeMeridiem(hours, minutes, isLower) {
	        if (hours > 11) {
	            return isLower ? 'pm' : 'PM';
	        } else {
	            return isLower ? 'am' : 'AM';
	        }
	    }

	    var baseConfig = {
	        calendar: defaultCalendar,
	        longDateFormat: defaultLongDateFormat,
	        invalidDate: defaultInvalidDate,
	        ordinal: defaultOrdinal,
	        dayOfMonthOrdinalParse: defaultDayOfMonthOrdinalParse,
	        relativeTime: defaultRelativeTime,

	        months: defaultLocaleMonths,
	        monthsShort: defaultLocaleMonthsShort,

	        week: defaultLocaleWeek,

	        weekdays: defaultLocaleWeekdays,
	        weekdaysMin: defaultLocaleWeekdaysMin,
	        weekdaysShort: defaultLocaleWeekdaysShort,

	        meridiemParse: defaultLocaleMeridiemParse,
	    };

	    // internal storage for locale config files
	    var locales = {},
	        localeFamilies = {},
	        globalLocale;

	    function commonPrefix(arr1, arr2) {
	        var i,
	            minl = Math.min(arr1.length, arr2.length);
	        for (i = 0; i < minl; i += 1) {
	            if (arr1[i] !== arr2[i]) {
	                return i;
	            }
	        }
	        return minl;
	    }

	    function normalizeLocale(key) {
	        return key ? key.toLowerCase().replace('_', '-') : key;
	    }

	    // pick the locale from the array
	    // try ['en-au', 'en-gb'] as 'en-au', 'en-gb', 'en', as in move through the list trying each
	    // substring from most specific to least, but move to the next array item if it's a more specific variant than the current root
	    function chooseLocale(names) {
	        var i = 0,
	            j,
	            next,
	            locale,
	            split;

	        while (i < names.length) {
	            split = normalizeLocale(names[i]).split('-');
	            j = split.length;
	            next = normalizeLocale(names[i + 1]);
	            next = next ? next.split('-') : null;
	            while (j > 0) {
	                locale = loadLocale(split.slice(0, j).join('-'));
	                if (locale) {
	                    return locale;
	                }
	                if (
	                    next &&
	                    next.length >= j &&
	                    commonPrefix(split, next) >= j - 1
	                ) {
	                    //the next array item is better than a shallower substring of this one
	                    break;
	                }
	                j--;
	            }
	            i++;
	        }
	        return globalLocale;
	    }

	    function loadLocale(name) {
	        var oldLocale = null,
	            aliasedRequire;
	        // TODO: Find a better way to register and load all the locales in Node
	        if (
	            locales[name] === undefined &&
	            'object' !== 'undefined' &&
	            module &&
	            module.exports
	        ) {
	            try {
	                oldLocale = globalLocale._abbr;
	                aliasedRequire = commonjsRequire;
	                aliasedRequire('./locale/' + name);
	                getSetGlobalLocale(oldLocale);
	            } catch (e) {
	                // mark as not found to avoid repeating expensive file require call causing high CPU
	                // when trying to find en-US, en_US, en-us for every format call
	                locales[name] = null; // null means not found
	            }
	        }
	        return locales[name];
	    }

	    // This function will load locale and then set the global locale.  If
	    // no arguments are passed in, it will simply return the current global
	    // locale key.
	    function getSetGlobalLocale(key, values) {
	        var data;
	        if (key) {
	            if (isUndefined(values)) {
	                data = getLocale(key);
	            } else {
	                data = defineLocale(key, values);
	            }

	            if (data) {
	                // moment.duration._locale = moment._locale = data;
	                globalLocale = data;
	            } else {
	                if (typeof console !== 'undefined' && console.warn) {
	                    //warn user if arguments are passed but the locale could not be set
	                    console.warn(
	                        'Locale ' + key + ' not found. Did you forget to load it?'
	                    );
	                }
	            }
	        }

	        return globalLocale._abbr;
	    }

	    function defineLocale(name, config) {
	        if (config !== null) {
	            var locale,
	                parentConfig = baseConfig;
	            config.abbr = name;
	            if (locales[name] != null) {
	                deprecateSimple(
	                    'defineLocaleOverride',
	                    'use moment.updateLocale(localeName, config) to change ' +
	                        'an existing locale. moment.defineLocale(localeName, ' +
	                        'config) should only be used for creating a new locale ' +
	                        'See http://momentjs.com/guides/#/warnings/define-locale/ for more info.'
	                );
	                parentConfig = locales[name]._config;
	            } else if (config.parentLocale != null) {
	                if (locales[config.parentLocale] != null) {
	                    parentConfig = locales[config.parentLocale]._config;
	                } else {
	                    locale = loadLocale(config.parentLocale);
	                    if (locale != null) {
	                        parentConfig = locale._config;
	                    } else {
	                        if (!localeFamilies[config.parentLocale]) {
	                            localeFamilies[config.parentLocale] = [];
	                        }
	                        localeFamilies[config.parentLocale].push({
	                            name: name,
	                            config: config,
	                        });
	                        return null;
	                    }
	                }
	            }
	            locales[name] = new Locale(mergeConfigs(parentConfig, config));

	            if (localeFamilies[name]) {
	                localeFamilies[name].forEach(function (x) {
	                    defineLocale(x.name, x.config);
	                });
	            }

	            // backwards compat for now: also set the locale
	            // make sure we set the locale AFTER all child locales have been
	            // created, so we won't end up with the child locale set.
	            getSetGlobalLocale(name);

	            return locales[name];
	        } else {
	            // useful for testing
	            delete locales[name];
	            return null;
	        }
	    }

	    function updateLocale(name, config) {
	        if (config != null) {
	            var locale,
	                tmpLocale,
	                parentConfig = baseConfig;

	            if (locales[name] != null && locales[name].parentLocale != null) {
	                // Update existing child locale in-place to avoid memory-leaks
	                locales[name].set(mergeConfigs(locales[name]._config, config));
	            } else {
	                // MERGE
	                tmpLocale = loadLocale(name);
	                if (tmpLocale != null) {
	                    parentConfig = tmpLocale._config;
	                }
	                config = mergeConfigs(parentConfig, config);
	                if (tmpLocale == null) {
	                    // updateLocale is called for creating a new locale
	                    // Set abbr so it will have a name (getters return
	                    // undefined otherwise).
	                    config.abbr = name;
	                }
	                locale = new Locale(config);
	                locale.parentLocale = locales[name];
	                locales[name] = locale;
	            }

	            // backwards compat for now: also set the locale
	            getSetGlobalLocale(name);
	        } else {
	            // pass null for config to unupdate, useful for tests
	            if (locales[name] != null) {
	                if (locales[name].parentLocale != null) {
	                    locales[name] = locales[name].parentLocale;
	                    if (name === getSetGlobalLocale()) {
	                        getSetGlobalLocale(name);
	                    }
	                } else if (locales[name] != null) {
	                    delete locales[name];
	                }
	            }
	        }
	        return locales[name];
	    }

	    // returns locale data
	    function getLocale(key) {
	        var locale;

	        if (key && key._locale && key._locale._abbr) {
	            key = key._locale._abbr;
	        }

	        if (!key) {
	            return globalLocale;
	        }

	        if (!isArray(key)) {
	            //short-circuit everything else
	            locale = loadLocale(key);
	            if (locale) {
	                return locale;
	            }
	            key = [key];
	        }

	        return chooseLocale(key);
	    }

	    function listLocales() {
	        return keys(locales);
	    }

	    function checkOverflow(m) {
	        var overflow,
	            a = m._a;

	        if (a && getParsingFlags(m).overflow === -2) {
	            overflow =
	                a[MONTH] < 0 || a[MONTH] > 11
	                    ? MONTH
	                    : a[DATE] < 1 || a[DATE] > daysInMonth(a[YEAR], a[MONTH])
	                    ? DATE
	                    : a[HOUR] < 0 ||
	                      a[HOUR] > 24 ||
	                      (a[HOUR] === 24 &&
	                          (a[MINUTE] !== 0 ||
	                              a[SECOND] !== 0 ||
	                              a[MILLISECOND] !== 0))
	                    ? HOUR
	                    : a[MINUTE] < 0 || a[MINUTE] > 59
	                    ? MINUTE
	                    : a[SECOND] < 0 || a[SECOND] > 59
	                    ? SECOND
	                    : a[MILLISECOND] < 0 || a[MILLISECOND] > 999
	                    ? MILLISECOND
	                    : -1;

	            if (
	                getParsingFlags(m)._overflowDayOfYear &&
	                (overflow < YEAR || overflow > DATE)
	            ) {
	                overflow = DATE;
	            }
	            if (getParsingFlags(m)._overflowWeeks && overflow === -1) {
	                overflow = WEEK;
	            }
	            if (getParsingFlags(m)._overflowWeekday && overflow === -1) {
	                overflow = WEEKDAY;
	            }

	            getParsingFlags(m).overflow = overflow;
	        }

	        return m;
	    }

	    // iso 8601 regex
	    // 0000-00-00 0000-W00 or 0000-W00-0 + T + 00 or 00:00 or 00:00:00 or 00:00:00.000 + +00:00 or +0000 or +00)
	    var extendedIsoRegex = /^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,
	        basicIsoRegex = /^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,
	        tzRegex = /Z|[+-]\d\d(?::?\d\d)?/,
	        isoDates = [
	            ['YYYYYY-MM-DD', /[+-]\d{6}-\d\d-\d\d/],
	            ['YYYY-MM-DD', /\d{4}-\d\d-\d\d/],
	            ['GGGG-[W]WW-E', /\d{4}-W\d\d-\d/],
	            ['GGGG-[W]WW', /\d{4}-W\d\d/, false],
	            ['YYYY-DDD', /\d{4}-\d{3}/],
	            ['YYYY-MM', /\d{4}-\d\d/, false],
	            ['YYYYYYMMDD', /[+-]\d{10}/],
	            ['YYYYMMDD', /\d{8}/],
	            ['GGGG[W]WWE', /\d{4}W\d{3}/],
	            ['GGGG[W]WW', /\d{4}W\d{2}/, false],
	            ['YYYYDDD', /\d{7}/],
	            ['YYYYMM', /\d{6}/, false],
	            ['YYYY', /\d{4}/, false],
	        ],
	        // iso time formats and regexes
	        isoTimes = [
	            ['HH:mm:ss.SSSS', /\d\d:\d\d:\d\d\.\d+/],
	            ['HH:mm:ss,SSSS', /\d\d:\d\d:\d\d,\d+/],
	            ['HH:mm:ss', /\d\d:\d\d:\d\d/],
	            ['HH:mm', /\d\d:\d\d/],
	            ['HHmmss.SSSS', /\d\d\d\d\d\d\.\d+/],
	            ['HHmmss,SSSS', /\d\d\d\d\d\d,\d+/],
	            ['HHmmss', /\d\d\d\d\d\d/],
	            ['HHmm', /\d\d\d\d/],
	            ['HH', /\d\d/],
	        ],
	        aspNetJsonRegex = /^\/?Date\((-?\d+)/i,
	        // RFC 2822 regex: For details see https://tools.ietf.org/html/rfc2822#section-3.3
	        rfc2822 = /^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,
	        obsOffsets = {
	            UT: 0,
	            GMT: 0,
	            EDT: -4 * 60,
	            EST: -5 * 60,
	            CDT: -5 * 60,
	            CST: -6 * 60,
	            MDT: -6 * 60,
	            MST: -7 * 60,
	            PDT: -7 * 60,
	            PST: -8 * 60,
	        };

	    // date from iso format
	    function configFromISO(config) {
	        var i,
	            l,
	            string = config._i,
	            match = extendedIsoRegex.exec(string) || basicIsoRegex.exec(string),
	            allowTime,
	            dateFormat,
	            timeFormat,
	            tzFormat;

	        if (match) {
	            getParsingFlags(config).iso = true;

	            for (i = 0, l = isoDates.length; i < l; i++) {
	                if (isoDates[i][1].exec(match[1])) {
	                    dateFormat = isoDates[i][0];
	                    allowTime = isoDates[i][2] !== false;
	                    break;
	                }
	            }
	            if (dateFormat == null) {
	                config._isValid = false;
	                return;
	            }
	            if (match[3]) {
	                for (i = 0, l = isoTimes.length; i < l; i++) {
	                    if (isoTimes[i][1].exec(match[3])) {
	                        // match[2] should be 'T' or space
	                        timeFormat = (match[2] || ' ') + isoTimes[i][0];
	                        break;
	                    }
	                }
	                if (timeFormat == null) {
	                    config._isValid = false;
	                    return;
	                }
	            }
	            if (!allowTime && timeFormat != null) {
	                config._isValid = false;
	                return;
	            }
	            if (match[4]) {
	                if (tzRegex.exec(match[4])) {
	                    tzFormat = 'Z';
	                } else {
	                    config._isValid = false;
	                    return;
	                }
	            }
	            config._f = dateFormat + (timeFormat || '') + (tzFormat || '');
	            configFromStringAndFormat(config);
	        } else {
	            config._isValid = false;
	        }
	    }

	    function extractFromRFC2822Strings(
	        yearStr,
	        monthStr,
	        dayStr,
	        hourStr,
	        minuteStr,
	        secondStr
	    ) {
	        var result = [
	            untruncateYear(yearStr),
	            defaultLocaleMonthsShort.indexOf(monthStr),
	            parseInt(dayStr, 10),
	            parseInt(hourStr, 10),
	            parseInt(minuteStr, 10),
	        ];

	        if (secondStr) {
	            result.push(parseInt(secondStr, 10));
	        }

	        return result;
	    }

	    function untruncateYear(yearStr) {
	        var year = parseInt(yearStr, 10);
	        if (year <= 49) {
	            return 2000 + year;
	        } else if (year <= 999) {
	            return 1900 + year;
	        }
	        return year;
	    }

	    function preprocessRFC2822(s) {
	        // Remove comments and folding whitespace and replace multiple-spaces with a single space
	        return s
	            .replace(/\([^)]*\)|[\n\t]/g, ' ')
	            .replace(/(\s\s+)/g, ' ')
	            .replace(/^\s\s*/, '')
	            .replace(/\s\s*$/, '');
	    }

	    function checkWeekday(weekdayStr, parsedInput, config) {
	        if (weekdayStr) {
	            // TODO: Replace the vanilla JS Date object with an independent day-of-week check.
	            var weekdayProvided = defaultLocaleWeekdaysShort.indexOf(weekdayStr),
	                weekdayActual = new Date(
	                    parsedInput[0],
	                    parsedInput[1],
	                    parsedInput[2]
	                ).getDay();
	            if (weekdayProvided !== weekdayActual) {
	                getParsingFlags(config).weekdayMismatch = true;
	                config._isValid = false;
	                return false;
	            }
	        }
	        return true;
	    }

	    function calculateOffset(obsOffset, militaryOffset, numOffset) {
	        if (obsOffset) {
	            return obsOffsets[obsOffset];
	        } else if (militaryOffset) {
	            // the only allowed military tz is Z
	            return 0;
	        } else {
	            var hm = parseInt(numOffset, 10),
	                m = hm % 100,
	                h = (hm - m) / 100;
	            return h * 60 + m;
	        }
	    }

	    // date and time from ref 2822 format
	    function configFromRFC2822(config) {
	        var match = rfc2822.exec(preprocessRFC2822(config._i)),
	            parsedArray;
	        if (match) {
	            parsedArray = extractFromRFC2822Strings(
	                match[4],
	                match[3],
	                match[2],
	                match[5],
	                match[6],
	                match[7]
	            );
	            if (!checkWeekday(match[1], parsedArray, config)) {
	                return;
	            }

	            config._a = parsedArray;
	            config._tzm = calculateOffset(match[8], match[9], match[10]);

	            config._d = createUTCDate.apply(null, config._a);
	            config._d.setUTCMinutes(config._d.getUTCMinutes() - config._tzm);

	            getParsingFlags(config).rfc2822 = true;
	        } else {
	            config._isValid = false;
	        }
	    }

	    // date from 1) ASP.NET, 2) ISO, 3) RFC 2822 formats, or 4) optional fallback if parsing isn't strict
	    function configFromString(config) {
	        var matched = aspNetJsonRegex.exec(config._i);
	        if (matched !== null) {
	            config._d = new Date(+matched[1]);
	            return;
	        }

	        configFromISO(config);
	        if (config._isValid === false) {
	            delete config._isValid;
	        } else {
	            return;
	        }

	        configFromRFC2822(config);
	        if (config._isValid === false) {
	            delete config._isValid;
	        } else {
	            return;
	        }

	        if (config._strict) {
	            config._isValid = false;
	        } else {
	            // Final attempt, use Input Fallback
	            hooks.createFromInputFallback(config);
	        }
	    }

	    hooks.createFromInputFallback = deprecate(
	        'value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), ' +
	            'which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are ' +
	            'discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.',
	        function (config) {
	            config._d = new Date(config._i + (config._useUTC ? ' UTC' : ''));
	        }
	    );

	    // Pick the first defined of two or three arguments.
	    function defaults(a, b, c) {
	        if (a != null) {
	            return a;
	        }
	        if (b != null) {
	            return b;
	        }
	        return c;
	    }

	    function currentDateArray(config) {
	        // hooks is actually the exported moment object
	        var nowValue = new Date(hooks.now());
	        if (config._useUTC) {
	            return [
	                nowValue.getUTCFullYear(),
	                nowValue.getUTCMonth(),
	                nowValue.getUTCDate(),
	            ];
	        }
	        return [nowValue.getFullYear(), nowValue.getMonth(), nowValue.getDate()];
	    }

	    // convert an array to a date.
	    // the array should mirror the parameters below
	    // note: all values past the year are optional and will default to the lowest possible value.
	    // [year, month, day , hour, minute, second, millisecond]
	    function configFromArray(config) {
	        var i,
	            date,
	            input = [],
	            currentDate,
	            expectedWeekday,
	            yearToUse;

	        if (config._d) {
	            return;
	        }

	        currentDate = currentDateArray(config);

	        //compute day of the year from weeks and weekdays
	        if (config._w && config._a[DATE] == null && config._a[MONTH] == null) {
	            dayOfYearFromWeekInfo(config);
	        }

	        //if the day of the year is set, figure out what it is
	        if (config._dayOfYear != null) {
	            yearToUse = defaults(config._a[YEAR], currentDate[YEAR]);

	            if (
	                config._dayOfYear > daysInYear(yearToUse) ||
	                config._dayOfYear === 0
	            ) {
	                getParsingFlags(config)._overflowDayOfYear = true;
	            }

	            date = createUTCDate(yearToUse, 0, config._dayOfYear);
	            config._a[MONTH] = date.getUTCMonth();
	            config._a[DATE] = date.getUTCDate();
	        }

	        // Default to current date.
	        // * if no year, month, day of month are given, default to today
	        // * if day of month is given, default month and year
	        // * if month is given, default only year
	        // * if year is given, don't default anything
	        for (i = 0; i < 3 && config._a[i] == null; ++i) {
	            config._a[i] = input[i] = currentDate[i];
	        }

	        // Zero out whatever was not defaulted, including time
	        for (; i < 7; i++) {
	            config._a[i] = input[i] =
	                config._a[i] == null ? (i === 2 ? 1 : 0) : config._a[i];
	        }

	        // Check for 24:00:00.000
	        if (
	            config._a[HOUR] === 24 &&
	            config._a[MINUTE] === 0 &&
	            config._a[SECOND] === 0 &&
	            config._a[MILLISECOND] === 0
	        ) {
	            config._nextDay = true;
	            config._a[HOUR] = 0;
	        }

	        config._d = (config._useUTC ? createUTCDate : createDate).apply(
	            null,
	            input
	        );
	        expectedWeekday = config._useUTC
	            ? config._d.getUTCDay()
	            : config._d.getDay();

	        // Apply timezone offset from input. The actual utcOffset can be changed
	        // with parseZone.
	        if (config._tzm != null) {
	            config._d.setUTCMinutes(config._d.getUTCMinutes() - config._tzm);
	        }

	        if (config._nextDay) {
	            config._a[HOUR] = 24;
	        }

	        // check for mismatching day of week
	        if (
	            config._w &&
	            typeof config._w.d !== 'undefined' &&
	            config._w.d !== expectedWeekday
	        ) {
	            getParsingFlags(config).weekdayMismatch = true;
	        }
	    }

	    function dayOfYearFromWeekInfo(config) {
	        var w, weekYear, week, weekday, dow, doy, temp, weekdayOverflow, curWeek;

	        w = config._w;
	        if (w.GG != null || w.W != null || w.E != null) {
	            dow = 1;
	            doy = 4;

	            // TODO: We need to take the current isoWeekYear, but that depends on
	            // how we interpret now (local, utc, fixed offset). So create
	            // a now version of current config (take local/utc/offset flags, and
	            // create now).
	            weekYear = defaults(
	                w.GG,
	                config._a[YEAR],
	                weekOfYear(createLocal(), 1, 4).year
	            );
	            week = defaults(w.W, 1);
	            weekday = defaults(w.E, 1);
	            if (weekday < 1 || weekday > 7) {
	                weekdayOverflow = true;
	            }
	        } else {
	            dow = config._locale._week.dow;
	            doy = config._locale._week.doy;

	            curWeek = weekOfYear(createLocal(), dow, doy);

	            weekYear = defaults(w.gg, config._a[YEAR], curWeek.year);

	            // Default to current week.
	            week = defaults(w.w, curWeek.week);

	            if (w.d != null) {
	                // weekday -- low day numbers are considered next week
	                weekday = w.d;
	                if (weekday < 0 || weekday > 6) {
	                    weekdayOverflow = true;
	                }
	            } else if (w.e != null) {
	                // local weekday -- counting starts from beginning of week
	                weekday = w.e + dow;
	                if (w.e < 0 || w.e > 6) {
	                    weekdayOverflow = true;
	                }
	            } else {
	                // default to beginning of week
	                weekday = dow;
	            }
	        }
	        if (week < 1 || week > weeksInYear(weekYear, dow, doy)) {
	            getParsingFlags(config)._overflowWeeks = true;
	        } else if (weekdayOverflow != null) {
	            getParsingFlags(config)._overflowWeekday = true;
	        } else {
	            temp = dayOfYearFromWeeks(weekYear, week, weekday, dow, doy);
	            config._a[YEAR] = temp.year;
	            config._dayOfYear = temp.dayOfYear;
	        }
	    }

	    // constant that refers to the ISO standard
	    hooks.ISO_8601 = function () {};

	    // constant that refers to the RFC 2822 form
	    hooks.RFC_2822 = function () {};

	    // date from string and format string
	    function configFromStringAndFormat(config) {
	        // TODO: Move this to another part of the creation flow to prevent circular deps
	        if (config._f === hooks.ISO_8601) {
	            configFromISO(config);
	            return;
	        }
	        if (config._f === hooks.RFC_2822) {
	            configFromRFC2822(config);
	            return;
	        }
	        config._a = [];
	        getParsingFlags(config).empty = true;

	        // This array is used to make a Date, either with `new Date` or `Date.UTC`
	        var string = '' + config._i,
	            i,
	            parsedInput,
	            tokens,
	            token,
	            skipped,
	            stringLength = string.length,
	            totalParsedInputLength = 0,
	            era;

	        tokens =
	            expandFormat(config._f, config._locale).match(formattingTokens) || [];

	        for (i = 0; i < tokens.length; i++) {
	            token = tokens[i];
	            parsedInput = (string.match(getParseRegexForToken(token, config)) ||
	                [])[0];
	            if (parsedInput) {
	                skipped = string.substr(0, string.indexOf(parsedInput));
	                if (skipped.length > 0) {
	                    getParsingFlags(config).unusedInput.push(skipped);
	                }
	                string = string.slice(
	                    string.indexOf(parsedInput) + parsedInput.length
	                );
	                totalParsedInputLength += parsedInput.length;
	            }
	            // don't parse if it's not a known token
	            if (formatTokenFunctions[token]) {
	                if (parsedInput) {
	                    getParsingFlags(config).empty = false;
	                } else {
	                    getParsingFlags(config).unusedTokens.push(token);
	                }
	                addTimeToArrayFromToken(token, parsedInput, config);
	            } else if (config._strict && !parsedInput) {
	                getParsingFlags(config).unusedTokens.push(token);
	            }
	        }

	        // add remaining unparsed input length to the string
	        getParsingFlags(config).charsLeftOver =
	            stringLength - totalParsedInputLength;
	        if (string.length > 0) {
	            getParsingFlags(config).unusedInput.push(string);
	        }

	        // clear _12h flag if hour is <= 12
	        if (
	            config._a[HOUR] <= 12 &&
	            getParsingFlags(config).bigHour === true &&
	            config._a[HOUR] > 0
	        ) {
	            getParsingFlags(config).bigHour = undefined;
	        }

	        getParsingFlags(config).parsedDateParts = config._a.slice(0);
	        getParsingFlags(config).meridiem = config._meridiem;
	        // handle meridiem
	        config._a[HOUR] = meridiemFixWrap(
	            config._locale,
	            config._a[HOUR],
	            config._meridiem
	        );

	        // handle era
	        era = getParsingFlags(config).era;
	        if (era !== null) {
	            config._a[YEAR] = config._locale.erasConvertYear(era, config._a[YEAR]);
	        }

	        configFromArray(config);
	        checkOverflow(config);
	    }

	    function meridiemFixWrap(locale, hour, meridiem) {
	        var isPm;

	        if (meridiem == null) {
	            // nothing to do
	            return hour;
	        }
	        if (locale.meridiemHour != null) {
	            return locale.meridiemHour(hour, meridiem);
	        } else if (locale.isPM != null) {
	            // Fallback
	            isPm = locale.isPM(meridiem);
	            if (isPm && hour < 12) {
	                hour += 12;
	            }
	            if (!isPm && hour === 12) {
	                hour = 0;
	            }
	            return hour;
	        } else {
	            // this is not supposed to happen
	            return hour;
	        }
	    }

	    // date from string and array of format strings
	    function configFromStringAndArray(config) {
	        var tempConfig,
	            bestMoment,
	            scoreToBeat,
	            i,
	            currentScore,
	            validFormatFound,
	            bestFormatIsValid = false;

	        if (config._f.length === 0) {
	            getParsingFlags(config).invalidFormat = true;
	            config._d = new Date(NaN);
	            return;
	        }

	        for (i = 0; i < config._f.length; i++) {
	            currentScore = 0;
	            validFormatFound = false;
	            tempConfig = copyConfig({}, config);
	            if (config._useUTC != null) {
	                tempConfig._useUTC = config._useUTC;
	            }
	            tempConfig._f = config._f[i];
	            configFromStringAndFormat(tempConfig);

	            if (isValid(tempConfig)) {
	                validFormatFound = true;
	            }

	            // if there is any input that was not parsed add a penalty for that format
	            currentScore += getParsingFlags(tempConfig).charsLeftOver;

	            //or tokens
	            currentScore += getParsingFlags(tempConfig).unusedTokens.length * 10;

	            getParsingFlags(tempConfig).score = currentScore;

	            if (!bestFormatIsValid) {
	                if (
	                    scoreToBeat == null ||
	                    currentScore < scoreToBeat ||
	                    validFormatFound
	                ) {
	                    scoreToBeat = currentScore;
	                    bestMoment = tempConfig;
	                    if (validFormatFound) {
	                        bestFormatIsValid = true;
	                    }
	                }
	            } else {
	                if (currentScore < scoreToBeat) {
	                    scoreToBeat = currentScore;
	                    bestMoment = tempConfig;
	                }
	            }
	        }

	        extend(config, bestMoment || tempConfig);
	    }

	    function configFromObject(config) {
	        if (config._d) {
	            return;
	        }

	        var i = normalizeObjectUnits(config._i),
	            dayOrDate = i.day === undefined ? i.date : i.day;
	        config._a = map(
	            [i.year, i.month, dayOrDate, i.hour, i.minute, i.second, i.millisecond],
	            function (obj) {
	                return obj && parseInt(obj, 10);
	            }
	        );

	        configFromArray(config);
	    }

	    function createFromConfig(config) {
	        var res = new Moment(checkOverflow(prepareConfig(config)));
	        if (res._nextDay) {
	            // Adding is smart enough around DST
	            res.add(1, 'd');
	            res._nextDay = undefined;
	        }

	        return res;
	    }

	    function prepareConfig(config) {
	        var input = config._i,
	            format = config._f;

	        config._locale = config._locale || getLocale(config._l);

	        if (input === null || (format === undefined && input === '')) {
	            return createInvalid({ nullInput: true });
	        }

	        if (typeof input === 'string') {
	            config._i = input = config._locale.preparse(input);
	        }

	        if (isMoment(input)) {
	            return new Moment(checkOverflow(input));
	        } else if (isDate(input)) {
	            config._d = input;
	        } else if (isArray(format)) {
	            configFromStringAndArray(config);
	        } else if (format) {
	            configFromStringAndFormat(config);
	        } else {
	            configFromInput(config);
	        }

	        if (!isValid(config)) {
	            config._d = null;
	        }

	        return config;
	    }

	    function configFromInput(config) {
	        var input = config._i;
	        if (isUndefined(input)) {
	            config._d = new Date(hooks.now());
	        } else if (isDate(input)) {
	            config._d = new Date(input.valueOf());
	        } else if (typeof input === 'string') {
	            configFromString(config);
	        } else if (isArray(input)) {
	            config._a = map(input.slice(0), function (obj) {
	                return parseInt(obj, 10);
	            });
	            configFromArray(config);
	        } else if (isObject(input)) {
	            configFromObject(config);
	        } else if (isNumber(input)) {
	            // from milliseconds
	            config._d = new Date(input);
	        } else {
	            hooks.createFromInputFallback(config);
	        }
	    }

	    function createLocalOrUTC(input, format, locale, strict, isUTC) {
	        var c = {};

	        if (format === true || format === false) {
	            strict = format;
	            format = undefined;
	        }

	        if (locale === true || locale === false) {
	            strict = locale;
	            locale = undefined;
	        }

	        if (
	            (isObject(input) && isObjectEmpty(input)) ||
	            (isArray(input) && input.length === 0)
	        ) {
	            input = undefined;
	        }
	        // object construction must be done this way.
	        // https://github.com/moment/moment/issues/1423
	        c._isAMomentObject = true;
	        c._useUTC = c._isUTC = isUTC;
	        c._l = locale;
	        c._i = input;
	        c._f = format;
	        c._strict = strict;

	        return createFromConfig(c);
	    }

	    function createLocal(input, format, locale, strict) {
	        return createLocalOrUTC(input, format, locale, strict, false);
	    }

	    var prototypeMin = deprecate(
	            'moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/',
	            function () {
	                var other = createLocal.apply(null, arguments);
	                if (this.isValid() && other.isValid()) {
	                    return other < this ? this : other;
	                } else {
	                    return createInvalid();
	                }
	            }
	        ),
	        prototypeMax = deprecate(
	            'moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/',
	            function () {
	                var other = createLocal.apply(null, arguments);
	                if (this.isValid() && other.isValid()) {
	                    return other > this ? this : other;
	                } else {
	                    return createInvalid();
	                }
	            }
	        );

	    // Pick a moment m from moments so that m[fn](other) is true for all
	    // other. This relies on the function fn to be transitive.
	    //
	    // moments should either be an array of moment objects or an array, whose
	    // first element is an array of moment objects.
	    function pickBy(fn, moments) {
	        var res, i;
	        if (moments.length === 1 && isArray(moments[0])) {
	            moments = moments[0];
	        }
	        if (!moments.length) {
	            return createLocal();
	        }
	        res = moments[0];
	        for (i = 1; i < moments.length; ++i) {
	            if (!moments[i].isValid() || moments[i][fn](res)) {
	                res = moments[i];
	            }
	        }
	        return res;
	    }

	    // TODO: Use [].sort instead?
	    function min() {
	        var args = [].slice.call(arguments, 0);

	        return pickBy('isBefore', args);
	    }

	    function max() {
	        var args = [].slice.call(arguments, 0);

	        return pickBy('isAfter', args);
	    }

	    var now = function () {
	        return Date.now ? Date.now() : +new Date();
	    };

	    var ordering = [
	        'year',
	        'quarter',
	        'month',
	        'week',
	        'day',
	        'hour',
	        'minute',
	        'second',
	        'millisecond',
	    ];

	    function isDurationValid(m) {
	        var key,
	            unitHasDecimal = false,
	            i;
	        for (key in m) {
	            if (
	                hasOwnProp(m, key) &&
	                !(
	                    indexOf.call(ordering, key) !== -1 &&
	                    (m[key] == null || !isNaN(m[key]))
	                )
	            ) {
	                return false;
	            }
	        }

	        for (i = 0; i < ordering.length; ++i) {
	            if (m[ordering[i]]) {
	                if (unitHasDecimal) {
	                    return false; // only allow non-integers for smallest unit
	                }
	                if (parseFloat(m[ordering[i]]) !== toInt(m[ordering[i]])) {
	                    unitHasDecimal = true;
	                }
	            }
	        }

	        return true;
	    }

	    function isValid$1() {
	        return this._isValid;
	    }

	    function createInvalid$1() {
	        return createDuration(NaN);
	    }

	    function Duration(duration) {
	        var normalizedInput = normalizeObjectUnits(duration),
	            years = normalizedInput.year || 0,
	            quarters = normalizedInput.quarter || 0,
	            months = normalizedInput.month || 0,
	            weeks = normalizedInput.week || normalizedInput.isoWeek || 0,
	            days = normalizedInput.day || 0,
	            hours = normalizedInput.hour || 0,
	            minutes = normalizedInput.minute || 0,
	            seconds = normalizedInput.second || 0,
	            milliseconds = normalizedInput.millisecond || 0;

	        this._isValid = isDurationValid(normalizedInput);

	        // representation for dateAddRemove
	        this._milliseconds =
	            +milliseconds +
	            seconds * 1e3 + // 1000
	            minutes * 6e4 + // 1000 * 60
	            hours * 1000 * 60 * 60; //using 1000 * 60 * 60 instead of 36e5 to avoid floating point rounding errors https://github.com/moment/moment/issues/2978
	        // Because of dateAddRemove treats 24 hours as different from a
	        // day when working around DST, we need to store them separately
	        this._days = +days + weeks * 7;
	        // It is impossible to translate months into days without knowing
	        // which months you are are talking about, so we have to store
	        // it separately.
	        this._months = +months + quarters * 3 + years * 12;

	        this._data = {};

	        this._locale = getLocale();

	        this._bubble();
	    }

	    function isDuration(obj) {
	        return obj instanceof Duration;
	    }

	    function absRound(number) {
	        if (number < 0) {
	            return Math.round(-1 * number) * -1;
	        } else {
	            return Math.round(number);
	        }
	    }

	    // compare two arrays, return the number of differences
	    function compareArrays(array1, array2, dontConvert) {
	        var len = Math.min(array1.length, array2.length),
	            lengthDiff = Math.abs(array1.length - array2.length),
	            diffs = 0,
	            i;
	        for (i = 0; i < len; i++) {
	            if (
	                (dontConvert && array1[i] !== array2[i]) ||
	                (!dontConvert && toInt(array1[i]) !== toInt(array2[i]))
	            ) {
	                diffs++;
	            }
	        }
	        return diffs + lengthDiff;
	    }

	    // FORMATTING

	    function offset(token, separator) {
	        addFormatToken(token, 0, 0, function () {
	            var offset = this.utcOffset(),
	                sign = '+';
	            if (offset < 0) {
	                offset = -offset;
	                sign = '-';
	            }
	            return (
	                sign +
	                zeroFill(~~(offset / 60), 2) +
	                separator +
	                zeroFill(~~offset % 60, 2)
	            );
	        });
	    }

	    offset('Z', ':');
	    offset('ZZ', '');

	    // PARSING

	    addRegexToken('Z', matchShortOffset);
	    addRegexToken('ZZ', matchShortOffset);
	    addParseToken(['Z', 'ZZ'], function (input, array, config) {
	        config._useUTC = true;
	        config._tzm = offsetFromString(matchShortOffset, input);
	    });

	    // HELPERS

	    // timezone chunker
	    // '+10:00' > ['10',  '00']
	    // '-1530'  > ['-15', '30']
	    var chunkOffset = /([\+\-]|\d\d)/gi;

	    function offsetFromString(matcher, string) {
	        var matches = (string || '').match(matcher),
	            chunk,
	            parts,
	            minutes;

	        if (matches === null) {
	            return null;
	        }

	        chunk = matches[matches.length - 1] || [];
	        parts = (chunk + '').match(chunkOffset) || ['-', 0, 0];
	        minutes = +(parts[1] * 60) + toInt(parts[2]);

	        return minutes === 0 ? 0 : parts[0] === '+' ? minutes : -minutes;
	    }

	    // Return a moment from input, that is local/utc/zone equivalent to model.
	    function cloneWithOffset(input, model) {
	        var res, diff;
	        if (model._isUTC) {
	            res = model.clone();
	            diff =
	                (isMoment(input) || isDate(input)
	                    ? input.valueOf()
	                    : createLocal(input).valueOf()) - res.valueOf();
	            // Use low-level api, because this fn is low-level api.
	            res._d.setTime(res._d.valueOf() + diff);
	            hooks.updateOffset(res, false);
	            return res;
	        } else {
	            return createLocal(input).local();
	        }
	    }

	    function getDateOffset(m) {
	        // On Firefox.24 Date#getTimezoneOffset returns a floating point.
	        // https://github.com/moment/moment/pull/1871
	        return -Math.round(m._d.getTimezoneOffset());
	    }

	    // HOOKS

	    // This function will be called whenever a moment is mutated.
	    // It is intended to keep the offset in sync with the timezone.
	    hooks.updateOffset = function () {};

	    // MOMENTS

	    // keepLocalTime = true means only change the timezone, without
	    // affecting the local hour. So 5:31:26 +0300 --[utcOffset(2, true)]-->
	    // 5:31:26 +0200 It is possible that 5:31:26 doesn't exist with offset
	    // +0200, so we adjust the time as needed, to be valid.
	    //
	    // Keeping the time actually adds/subtracts (one hour)
	    // from the actual represented time. That is why we call updateOffset
	    // a second time. In case it wants us to change the offset again
	    // _changeInProgress == true case, then we have to adjust, because
	    // there is no such time in the given timezone.
	    function getSetOffset(input, keepLocalTime, keepMinutes) {
	        var offset = this._offset || 0,
	            localAdjust;
	        if (!this.isValid()) {
	            return input != null ? this : NaN;
	        }
	        if (input != null) {
	            if (typeof input === 'string') {
	                input = offsetFromString(matchShortOffset, input);
	                if (input === null) {
	                    return this;
	                }
	            } else if (Math.abs(input) < 16 && !keepMinutes) {
	                input = input * 60;
	            }
	            if (!this._isUTC && keepLocalTime) {
	                localAdjust = getDateOffset(this);
	            }
	            this._offset = input;
	            this._isUTC = true;
	            if (localAdjust != null) {
	                this.add(localAdjust, 'm');
	            }
	            if (offset !== input) {
	                if (!keepLocalTime || this._changeInProgress) {
	                    addSubtract(
	                        this,
	                        createDuration(input - offset, 'm'),
	                        1,
	                        false
	                    );
	                } else if (!this._changeInProgress) {
	                    this._changeInProgress = true;
	                    hooks.updateOffset(this, true);
	                    this._changeInProgress = null;
	                }
	            }
	            return this;
	        } else {
	            return this._isUTC ? offset : getDateOffset(this);
	        }
	    }

	    function getSetZone(input, keepLocalTime) {
	        if (input != null) {
	            if (typeof input !== 'string') {
	                input = -input;
	            }

	            this.utcOffset(input, keepLocalTime);

	            return this;
	        } else {
	            return -this.utcOffset();
	        }
	    }

	    function setOffsetToUTC(keepLocalTime) {
	        return this.utcOffset(0, keepLocalTime);
	    }

	    function setOffsetToLocal(keepLocalTime) {
	        if (this._isUTC) {
	            this.utcOffset(0, keepLocalTime);
	            this._isUTC = false;

	            if (keepLocalTime) {
	                this.subtract(getDateOffset(this), 'm');
	            }
	        }
	        return this;
	    }

	    function setOffsetToParsedOffset() {
	        if (this._tzm != null) {
	            this.utcOffset(this._tzm, false, true);
	        } else if (typeof this._i === 'string') {
	            var tZone = offsetFromString(matchOffset, this._i);
	            if (tZone != null) {
	                this.utcOffset(tZone);
	            } else {
	                this.utcOffset(0, true);
	            }
	        }
	        return this;
	    }

	    function hasAlignedHourOffset(input) {
	        if (!this.isValid()) {
	            return false;
	        }
	        input = input ? createLocal(input).utcOffset() : 0;

	        return (this.utcOffset() - input) % 60 === 0;
	    }

	    function isDaylightSavingTime() {
	        return (
	            this.utcOffset() > this.clone().month(0).utcOffset() ||
	            this.utcOffset() > this.clone().month(5).utcOffset()
	        );
	    }

	    function isDaylightSavingTimeShifted() {
	        if (!isUndefined(this._isDSTShifted)) {
	            return this._isDSTShifted;
	        }

	        var c = {},
	            other;

	        copyConfig(c, this);
	        c = prepareConfig(c);

	        if (c._a) {
	            other = c._isUTC ? createUTC(c._a) : createLocal(c._a);
	            this._isDSTShifted =
	                this.isValid() && compareArrays(c._a, other.toArray()) > 0;
	        } else {
	            this._isDSTShifted = false;
	        }

	        return this._isDSTShifted;
	    }

	    function isLocal() {
	        return this.isValid() ? !this._isUTC : false;
	    }

	    function isUtcOffset() {
	        return this.isValid() ? this._isUTC : false;
	    }

	    function isUtc() {
	        return this.isValid() ? this._isUTC && this._offset === 0 : false;
	    }

	    // ASP.NET json date format regex
	    var aspNetRegex = /^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,
	        // from http://docs.closure-library.googlecode.com/git/closure_goog_date_date.js.source.html
	        // somewhat more in line with 4.4.3.2 2004 spec, but allows decimal anywhere
	        // and further modified to allow for strings containing both week and day
	        isoRegex = /^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;

	    function createDuration(input, key) {
	        var duration = input,
	            // matching against regexp is expensive, do it on demand
	            match = null,
	            sign,
	            ret,
	            diffRes;

	        if (isDuration(input)) {
	            duration = {
	                ms: input._milliseconds,
	                d: input._days,
	                M: input._months,
	            };
	        } else if (isNumber(input) || !isNaN(+input)) {
	            duration = {};
	            if (key) {
	                duration[key] = +input;
	            } else {
	                duration.milliseconds = +input;
	            }
	        } else if ((match = aspNetRegex.exec(input))) {
	            sign = match[1] === '-' ? -1 : 1;
	            duration = {
	                y: 0,
	                d: toInt(match[DATE]) * sign,
	                h: toInt(match[HOUR]) * sign,
	                m: toInt(match[MINUTE]) * sign,
	                s: toInt(match[SECOND]) * sign,
	                ms: toInt(absRound(match[MILLISECOND] * 1000)) * sign, // the millisecond decimal point is included in the match
	            };
	        } else if ((match = isoRegex.exec(input))) {
	            sign = match[1] === '-' ? -1 : 1;
	            duration = {
	                y: parseIso(match[2], sign),
	                M: parseIso(match[3], sign),
	                w: parseIso(match[4], sign),
	                d: parseIso(match[5], sign),
	                h: parseIso(match[6], sign),
	                m: parseIso(match[7], sign),
	                s: parseIso(match[8], sign),
	            };
	        } else if (duration == null) {
	            // checks for null or undefined
	            duration = {};
	        } else if (
	            typeof duration === 'object' &&
	            ('from' in duration || 'to' in duration)
	        ) {
	            diffRes = momentsDifference(
	                createLocal(duration.from),
	                createLocal(duration.to)
	            );

	            duration = {};
	            duration.ms = diffRes.milliseconds;
	            duration.M = diffRes.months;
	        }

	        ret = new Duration(duration);

	        if (isDuration(input) && hasOwnProp(input, '_locale')) {
	            ret._locale = input._locale;
	        }

	        if (isDuration(input) && hasOwnProp(input, '_isValid')) {
	            ret._isValid = input._isValid;
	        }

	        return ret;
	    }

	    createDuration.fn = Duration.prototype;
	    createDuration.invalid = createInvalid$1;

	    function parseIso(inp, sign) {
	        // We'd normally use ~~inp for this, but unfortunately it also
	        // converts floats to ints.
	        // inp may be undefined, so careful calling replace on it.
	        var res = inp && parseFloat(inp.replace(',', '.'));
	        // apply sign while we're at it
	        return (isNaN(res) ? 0 : res) * sign;
	    }

	    function positiveMomentsDifference(base, other) {
	        var res = {};

	        res.months =
	            other.month() - base.month() + (other.year() - base.year()) * 12;
	        if (base.clone().add(res.months, 'M').isAfter(other)) {
	            --res.months;
	        }

	        res.milliseconds = +other - +base.clone().add(res.months, 'M');

	        return res;
	    }

	    function momentsDifference(base, other) {
	        var res;
	        if (!(base.isValid() && other.isValid())) {
	            return { milliseconds: 0, months: 0 };
	        }

	        other = cloneWithOffset(other, base);
	        if (base.isBefore(other)) {
	            res = positiveMomentsDifference(base, other);
	        } else {
	            res = positiveMomentsDifference(other, base);
	            res.milliseconds = -res.milliseconds;
	            res.months = -res.months;
	        }

	        return res;
	    }

	    // TODO: remove 'name' arg after deprecation is removed
	    function createAdder(direction, name) {
	        return function (val, period) {
	            var dur, tmp;
	            //invert the arguments, but complain about it
	            if (period !== null && !isNaN(+period)) {
	                deprecateSimple(
	                    name,
	                    'moment().' +
	                        name +
	                        '(period, number) is deprecated. Please use moment().' +
	                        name +
	                        '(number, period). ' +
	                        'See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.'
	                );
	                tmp = val;
	                val = period;
	                period = tmp;
	            }

	            dur = createDuration(val, period);
	            addSubtract(this, dur, direction);
	            return this;
	        };
	    }

	    function addSubtract(mom, duration, isAdding, updateOffset) {
	        var milliseconds = duration._milliseconds,
	            days = absRound(duration._days),
	            months = absRound(duration._months);

	        if (!mom.isValid()) {
	            // No op
	            return;
	        }

	        updateOffset = updateOffset == null ? true : updateOffset;

	        if (months) {
	            setMonth(mom, get(mom, 'Month') + months * isAdding);
	        }
	        if (days) {
	            set$1(mom, 'Date', get(mom, 'Date') + days * isAdding);
	        }
	        if (milliseconds) {
	            mom._d.setTime(mom._d.valueOf() + milliseconds * isAdding);
	        }
	        if (updateOffset) {
	            hooks.updateOffset(mom, days || months);
	        }
	    }

	    var add = createAdder(1, 'add'),
	        subtract = createAdder(-1, 'subtract');

	    function isString(input) {
	        return typeof input === 'string' || input instanceof String;
	    }

	    // type MomentInput = Moment | Date | string | number | (number | string)[] | MomentInputObject | void; // null | undefined
	    function isMomentInput(input) {
	        return (
	            isMoment(input) ||
	            isDate(input) ||
	            isString(input) ||
	            isNumber(input) ||
	            isNumberOrStringArray(input) ||
	            isMomentInputObject(input) ||
	            input === null ||
	            input === undefined
	        );
	    }

	    function isMomentInputObject(input) {
	        var objectTest = isObject(input) && !isObjectEmpty(input),
	            propertyTest = false,
	            properties = [
	                'years',
	                'year',
	                'y',
	                'months',
	                'month',
	                'M',
	                'days',
	                'day',
	                'd',
	                'dates',
	                'date',
	                'D',
	                'hours',
	                'hour',
	                'h',
	                'minutes',
	                'minute',
	                'm',
	                'seconds',
	                'second',
	                's',
	                'milliseconds',
	                'millisecond',
	                'ms',
	            ],
	            i,
	            property;

	        for (i = 0; i < properties.length; i += 1) {
	            property = properties[i];
	            propertyTest = propertyTest || hasOwnProp(input, property);
	        }

	        return objectTest && propertyTest;
	    }

	    function isNumberOrStringArray(input) {
	        var arrayTest = isArray(input),
	            dataTypeTest = false;
	        if (arrayTest) {
	            dataTypeTest =
	                input.filter(function (item) {
	                    return !isNumber(item) && isString(input);
	                }).length === 0;
	        }
	        return arrayTest && dataTypeTest;
	    }

	    function isCalendarSpec(input) {
	        var objectTest = isObject(input) && !isObjectEmpty(input),
	            propertyTest = false,
	            properties = [
	                'sameDay',
	                'nextDay',
	                'lastDay',
	                'nextWeek',
	                'lastWeek',
	                'sameElse',
	            ],
	            i,
	            property;

	        for (i = 0; i < properties.length; i += 1) {
	            property = properties[i];
	            propertyTest = propertyTest || hasOwnProp(input, property);
	        }

	        return objectTest && propertyTest;
	    }

	    function getCalendarFormat(myMoment, now) {
	        var diff = myMoment.diff(now, 'days', true);
	        return diff < -6
	            ? 'sameElse'
	            : diff < -1
	            ? 'lastWeek'
	            : diff < 0
	            ? 'lastDay'
	            : diff < 1
	            ? 'sameDay'
	            : diff < 2
	            ? 'nextDay'
	            : diff < 7
	            ? 'nextWeek'
	            : 'sameElse';
	    }

	    function calendar$1(time, formats) {
	        // Support for single parameter, formats only overload to the calendar function
	        if (arguments.length === 1) {
	            if (!arguments[0]) {
	                time = undefined;
	                formats = undefined;
	            } else if (isMomentInput(arguments[0])) {
	                time = arguments[0];
	                formats = undefined;
	            } else if (isCalendarSpec(arguments[0])) {
	                formats = arguments[0];
	                time = undefined;
	            }
	        }
	        // We want to compare the start of today, vs this.
	        // Getting start-of-today depends on whether we're local/utc/offset or not.
	        var now = time || createLocal(),
	            sod = cloneWithOffset(now, this).startOf('day'),
	            format = hooks.calendarFormat(this, sod) || 'sameElse',
	            output =
	                formats &&
	                (isFunction(formats[format])
	                    ? formats[format].call(this, now)
	                    : formats[format]);

	        return this.format(
	            output || this.localeData().calendar(format, this, createLocal(now))
	        );
	    }

	    function clone() {
	        return new Moment(this);
	    }

	    function isAfter(input, units) {
	        var localInput = isMoment(input) ? input : createLocal(input);
	        if (!(this.isValid() && localInput.isValid())) {
	            return false;
	        }
	        units = normalizeUnits(units) || 'millisecond';
	        if (units === 'millisecond') {
	            return this.valueOf() > localInput.valueOf();
	        } else {
	            return localInput.valueOf() < this.clone().startOf(units).valueOf();
	        }
	    }

	    function isBefore(input, units) {
	        var localInput = isMoment(input) ? input : createLocal(input);
	        if (!(this.isValid() && localInput.isValid())) {
	            return false;
	        }
	        units = normalizeUnits(units) || 'millisecond';
	        if (units === 'millisecond') {
	            return this.valueOf() < localInput.valueOf();
	        } else {
	            return this.clone().endOf(units).valueOf() < localInput.valueOf();
	        }
	    }

	    function isBetween(from, to, units, inclusivity) {
	        var localFrom = isMoment(from) ? from : createLocal(from),
	            localTo = isMoment(to) ? to : createLocal(to);
	        if (!(this.isValid() && localFrom.isValid() && localTo.isValid())) {
	            return false;
	        }
	        inclusivity = inclusivity || '()';
	        return (
	            (inclusivity[0] === '('
	                ? this.isAfter(localFrom, units)
	                : !this.isBefore(localFrom, units)) &&
	            (inclusivity[1] === ')'
	                ? this.isBefore(localTo, units)
	                : !this.isAfter(localTo, units))
	        );
	    }

	    function isSame(input, units) {
	        var localInput = isMoment(input) ? input : createLocal(input),
	            inputMs;
	        if (!(this.isValid() && localInput.isValid())) {
	            return false;
	        }
	        units = normalizeUnits(units) || 'millisecond';
	        if (units === 'millisecond') {
	            return this.valueOf() === localInput.valueOf();
	        } else {
	            inputMs = localInput.valueOf();
	            return (
	                this.clone().startOf(units).valueOf() <= inputMs &&
	                inputMs <= this.clone().endOf(units).valueOf()
	            );
	        }
	    }

	    function isSameOrAfter(input, units) {
	        return this.isSame(input, units) || this.isAfter(input, units);
	    }

	    function isSameOrBefore(input, units) {
	        return this.isSame(input, units) || this.isBefore(input, units);
	    }

	    function diff(input, units, asFloat) {
	        var that, zoneDelta, output;

	        if (!this.isValid()) {
	            return NaN;
	        }

	        that = cloneWithOffset(input, this);

	        if (!that.isValid()) {
	            return NaN;
	        }

	        zoneDelta = (that.utcOffset() - this.utcOffset()) * 6e4;

	        units = normalizeUnits(units);

	        switch (units) {
	            case 'year':
	                output = monthDiff(this, that) / 12;
	                break;
	            case 'month':
	                output = monthDiff(this, that);
	                break;
	            case 'quarter':
	                output = monthDiff(this, that) / 3;
	                break;
	            case 'second':
	                output = (this - that) / 1e3;
	                break; // 1000
	            case 'minute':
	                output = (this - that) / 6e4;
	                break; // 1000 * 60
	            case 'hour':
	                output = (this - that) / 36e5;
	                break; // 1000 * 60 * 60
	            case 'day':
	                output = (this - that - zoneDelta) / 864e5;
	                break; // 1000 * 60 * 60 * 24, negate dst
	            case 'week':
	                output = (this - that - zoneDelta) / 6048e5;
	                break; // 1000 * 60 * 60 * 24 * 7, negate dst
	            default:
	                output = this - that;
	        }

	        return asFloat ? output : absFloor(output);
	    }

	    function monthDiff(a, b) {
	        if (a.date() < b.date()) {
	            // end-of-month calculations work correct when the start month has more
	            // days than the end month.
	            return -monthDiff(b, a);
	        }
	        // difference in months
	        var wholeMonthDiff = (b.year() - a.year()) * 12 + (b.month() - a.month()),
	            // b is in (anchor - 1 month, anchor + 1 month)
	            anchor = a.clone().add(wholeMonthDiff, 'months'),
	            anchor2,
	            adjust;

	        if (b - anchor < 0) {
	            anchor2 = a.clone().add(wholeMonthDiff - 1, 'months');
	            // linear across the month
	            adjust = (b - anchor) / (anchor - anchor2);
	        } else {
	            anchor2 = a.clone().add(wholeMonthDiff + 1, 'months');
	            // linear across the month
	            adjust = (b - anchor) / (anchor2 - anchor);
	        }

	        //check for negative zero, return zero if negative zero
	        return -(wholeMonthDiff + adjust) || 0;
	    }

	    hooks.defaultFormat = 'YYYY-MM-DDTHH:mm:ssZ';
	    hooks.defaultFormatUtc = 'YYYY-MM-DDTHH:mm:ss[Z]';

	    function toString() {
	        return this.clone().locale('en').format('ddd MMM DD YYYY HH:mm:ss [GMT]ZZ');
	    }

	    function toISOString(keepOffset) {
	        if (!this.isValid()) {
	            return null;
	        }
	        var utc = keepOffset !== true,
	            m = utc ? this.clone().utc() : this;
	        if (m.year() < 0 || m.year() > 9999) {
	            return formatMoment(
	                m,
	                utc
	                    ? 'YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]'
	                    : 'YYYYYY-MM-DD[T]HH:mm:ss.SSSZ'
	            );
	        }
	        if (isFunction(Date.prototype.toISOString)) {
	            // native implementation is ~50x faster, use it when we can
	            if (utc) {
	                return this.toDate().toISOString();
	            } else {
	                return new Date(this.valueOf() + this.utcOffset() * 60 * 1000)
	                    .toISOString()
	                    .replace('Z', formatMoment(m, 'Z'));
	            }
	        }
	        return formatMoment(
	            m,
	            utc ? 'YYYY-MM-DD[T]HH:mm:ss.SSS[Z]' : 'YYYY-MM-DD[T]HH:mm:ss.SSSZ'
	        );
	    }

	    /**
	     * Return a human readable representation of a moment that can
	     * also be evaluated to get a new moment which is the same
	     *
	     * @link https://nodejs.org/dist/latest/docs/api/util.html#util_custom_inspect_function_on_objects
	     */
	    function inspect() {
	        if (!this.isValid()) {
	            return 'moment.invalid(/* ' + this._i + ' */)';
	        }
	        var func = 'moment',
	            zone = '',
	            prefix,
	            year,
	            datetime,
	            suffix;
	        if (!this.isLocal()) {
	            func = this.utcOffset() === 0 ? 'moment.utc' : 'moment.parseZone';
	            zone = 'Z';
	        }
	        prefix = '[' + func + '("]';
	        year = 0 <= this.year() && this.year() <= 9999 ? 'YYYY' : 'YYYYYY';
	        datetime = '-MM-DD[T]HH:mm:ss.SSS';
	        suffix = zone + '[")]';

	        return this.format(prefix + year + datetime + suffix);
	    }

	    function format(inputString) {
	        if (!inputString) {
	            inputString = this.isUtc()
	                ? hooks.defaultFormatUtc
	                : hooks.defaultFormat;
	        }
	        var output = formatMoment(this, inputString);
	        return this.localeData().postformat(output);
	    }

	    function from(time, withoutSuffix) {
	        if (
	            this.isValid() &&
	            ((isMoment(time) && time.isValid()) || createLocal(time).isValid())
	        ) {
	            return createDuration({ to: this, from: time })
	                .locale(this.locale())
	                .humanize(!withoutSuffix);
	        } else {
	            return this.localeData().invalidDate();
	        }
	    }

	    function fromNow(withoutSuffix) {
	        return this.from(createLocal(), withoutSuffix);
	    }

	    function to(time, withoutSuffix) {
	        if (
	            this.isValid() &&
	            ((isMoment(time) && time.isValid()) || createLocal(time).isValid())
	        ) {
	            return createDuration({ from: this, to: time })
	                .locale(this.locale())
	                .humanize(!withoutSuffix);
	        } else {
	            return this.localeData().invalidDate();
	        }
	    }

	    function toNow(withoutSuffix) {
	        return this.to(createLocal(), withoutSuffix);
	    }

	    // If passed a locale key, it will set the locale for this
	    // instance.  Otherwise, it will return the locale configuration
	    // variables for this instance.
	    function locale(key) {
	        var newLocaleData;

	        if (key === undefined) {
	            return this._locale._abbr;
	        } else {
	            newLocaleData = getLocale(key);
	            if (newLocaleData != null) {
	                this._locale = newLocaleData;
	            }
	            return this;
	        }
	    }

	    var lang = deprecate(
	        'moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.',
	        function (key) {
	            if (key === undefined) {
	                return this.localeData();
	            } else {
	                return this.locale(key);
	            }
	        }
	    );

	    function localeData() {
	        return this._locale;
	    }

	    var MS_PER_SECOND = 1000,
	        MS_PER_MINUTE = 60 * MS_PER_SECOND,
	        MS_PER_HOUR = 60 * MS_PER_MINUTE,
	        MS_PER_400_YEARS = (365 * 400 + 97) * 24 * MS_PER_HOUR;

	    // actual modulo - handles negative numbers (for dates before 1970):
	    function mod$1(dividend, divisor) {
	        return ((dividend % divisor) + divisor) % divisor;
	    }

	    function localStartOfDate(y, m, d) {
	        // the date constructor remaps years 0-99 to 1900-1999
	        if (y < 100 && y >= 0) {
	            // preserve leap years using a full 400 year cycle, then reset
	            return new Date(y + 400, m, d) - MS_PER_400_YEARS;
	        } else {
	            return new Date(y, m, d).valueOf();
	        }
	    }

	    function utcStartOfDate(y, m, d) {
	        // Date.UTC remaps years 0-99 to 1900-1999
	        if (y < 100 && y >= 0) {
	            // preserve leap years using a full 400 year cycle, then reset
	            return Date.UTC(y + 400, m, d) - MS_PER_400_YEARS;
	        } else {
	            return Date.UTC(y, m, d);
	        }
	    }

	    function startOf(units) {
	        var time, startOfDate;
	        units = normalizeUnits(units);
	        if (units === undefined || units === 'millisecond' || !this.isValid()) {
	            return this;
	        }

	        startOfDate = this._isUTC ? utcStartOfDate : localStartOfDate;

	        switch (units) {
	            case 'year':
	                time = startOfDate(this.year(), 0, 1);
	                break;
	            case 'quarter':
	                time = startOfDate(
	                    this.year(),
	                    this.month() - (this.month() % 3),
	                    1
	                );
	                break;
	            case 'month':
	                time = startOfDate(this.year(), this.month(), 1);
	                break;
	            case 'week':
	                time = startOfDate(
	                    this.year(),
	                    this.month(),
	                    this.date() - this.weekday()
	                );
	                break;
	            case 'isoWeek':
	                time = startOfDate(
	                    this.year(),
	                    this.month(),
	                    this.date() - (this.isoWeekday() - 1)
	                );
	                break;
	            case 'day':
	            case 'date':
	                time = startOfDate(this.year(), this.month(), this.date());
	                break;
	            case 'hour':
	                time = this._d.valueOf();
	                time -= mod$1(
	                    time + (this._isUTC ? 0 : this.utcOffset() * MS_PER_MINUTE),
	                    MS_PER_HOUR
	                );
	                break;
	            case 'minute':
	                time = this._d.valueOf();
	                time -= mod$1(time, MS_PER_MINUTE);
	                break;
	            case 'second':
	                time = this._d.valueOf();
	                time -= mod$1(time, MS_PER_SECOND);
	                break;
	        }

	        this._d.setTime(time);
	        hooks.updateOffset(this, true);
	        return this;
	    }

	    function endOf(units) {
	        var time, startOfDate;
	        units = normalizeUnits(units);
	        if (units === undefined || units === 'millisecond' || !this.isValid()) {
	            return this;
	        }

	        startOfDate = this._isUTC ? utcStartOfDate : localStartOfDate;

	        switch (units) {
	            case 'year':
	                time = startOfDate(this.year() + 1, 0, 1) - 1;
	                break;
	            case 'quarter':
	                time =
	                    startOfDate(
	                        this.year(),
	                        this.month() - (this.month() % 3) + 3,
	                        1
	                    ) - 1;
	                break;
	            case 'month':
	                time = startOfDate(this.year(), this.month() + 1, 1) - 1;
	                break;
	            case 'week':
	                time =
	                    startOfDate(
	                        this.year(),
	                        this.month(),
	                        this.date() - this.weekday() + 7
	                    ) - 1;
	                break;
	            case 'isoWeek':
	                time =
	                    startOfDate(
	                        this.year(),
	                        this.month(),
	                        this.date() - (this.isoWeekday() - 1) + 7
	                    ) - 1;
	                break;
	            case 'day':
	            case 'date':
	                time = startOfDate(this.year(), this.month(), this.date() + 1) - 1;
	                break;
	            case 'hour':
	                time = this._d.valueOf();
	                time +=
	                    MS_PER_HOUR -
	                    mod$1(
	                        time + (this._isUTC ? 0 : this.utcOffset() * MS_PER_MINUTE),
	                        MS_PER_HOUR
	                    ) -
	                    1;
	                break;
	            case 'minute':
	                time = this._d.valueOf();
	                time += MS_PER_MINUTE - mod$1(time, MS_PER_MINUTE) - 1;
	                break;
	            case 'second':
	                time = this._d.valueOf();
	                time += MS_PER_SECOND - mod$1(time, MS_PER_SECOND) - 1;
	                break;
	        }

	        this._d.setTime(time);
	        hooks.updateOffset(this, true);
	        return this;
	    }

	    function valueOf() {
	        return this._d.valueOf() - (this._offset || 0) * 60000;
	    }

	    function unix() {
	        return Math.floor(this.valueOf() / 1000);
	    }

	    function toDate() {
	        return new Date(this.valueOf());
	    }

	    function toArray() {
	        var m = this;
	        return [
	            m.year(),
	            m.month(),
	            m.date(),
	            m.hour(),
	            m.minute(),
	            m.second(),
	            m.millisecond(),
	        ];
	    }

	    function toObject() {
	        var m = this;
	        return {
	            years: m.year(),
	            months: m.month(),
	            date: m.date(),
	            hours: m.hours(),
	            minutes: m.minutes(),
	            seconds: m.seconds(),
	            milliseconds: m.milliseconds(),
	        };
	    }

	    function toJSON() {
	        // new Date(NaN).toJSON() === null
	        return this.isValid() ? this.toISOString() : null;
	    }

	    function isValid$2() {
	        return isValid(this);
	    }

	    function parsingFlags() {
	        return extend({}, getParsingFlags(this));
	    }

	    function invalidAt() {
	        return getParsingFlags(this).overflow;
	    }

	    function creationData() {
	        return {
	            input: this._i,
	            format: this._f,
	            locale: this._locale,
	            isUTC: this._isUTC,
	            strict: this._strict,
	        };
	    }

	    addFormatToken('N', 0, 0, 'eraAbbr');
	    addFormatToken('NN', 0, 0, 'eraAbbr');
	    addFormatToken('NNN', 0, 0, 'eraAbbr');
	    addFormatToken('NNNN', 0, 0, 'eraName');
	    addFormatToken('NNNNN', 0, 0, 'eraNarrow');

	    addFormatToken('y', ['y', 1], 'yo', 'eraYear');
	    addFormatToken('y', ['yy', 2], 0, 'eraYear');
	    addFormatToken('y', ['yyy', 3], 0, 'eraYear');
	    addFormatToken('y', ['yyyy', 4], 0, 'eraYear');

	    addRegexToken('N', matchEraAbbr);
	    addRegexToken('NN', matchEraAbbr);
	    addRegexToken('NNN', matchEraAbbr);
	    addRegexToken('NNNN', matchEraName);
	    addRegexToken('NNNNN', matchEraNarrow);

	    addParseToken(['N', 'NN', 'NNN', 'NNNN', 'NNNNN'], function (
	        input,
	        array,
	        config,
	        token
	    ) {
	        var era = config._locale.erasParse(input, token, config._strict);
	        if (era) {
	            getParsingFlags(config).era = era;
	        } else {
	            getParsingFlags(config).invalidEra = input;
	        }
	    });

	    addRegexToken('y', matchUnsigned);
	    addRegexToken('yy', matchUnsigned);
	    addRegexToken('yyy', matchUnsigned);
	    addRegexToken('yyyy', matchUnsigned);
	    addRegexToken('yo', matchEraYearOrdinal);

	    addParseToken(['y', 'yy', 'yyy', 'yyyy'], YEAR);
	    addParseToken(['yo'], function (input, array, config, token) {
	        var match;
	        if (config._locale._eraYearOrdinalRegex) {
	            match = input.match(config._locale._eraYearOrdinalRegex);
	        }

	        if (config._locale.eraYearOrdinalParse) {
	            array[YEAR] = config._locale.eraYearOrdinalParse(input, match);
	        } else {
	            array[YEAR] = parseInt(input, 10);
	        }
	    });

	    function localeEras(m, format) {
	        var i,
	            l,
	            date,
	            eras = this._eras || getLocale('en')._eras;
	        for (i = 0, l = eras.length; i < l; ++i) {
	            switch (typeof eras[i].since) {
	                case 'string':
	                    // truncate time
	                    date = hooks(eras[i].since).startOf('day');
	                    eras[i].since = date.valueOf();
	                    break;
	            }

	            switch (typeof eras[i].until) {
	                case 'undefined':
	                    eras[i].until = +Infinity;
	                    break;
	                case 'string':
	                    // truncate time
	                    date = hooks(eras[i].until).startOf('day').valueOf();
	                    eras[i].until = date.valueOf();
	                    break;
	            }
	        }
	        return eras;
	    }

	    function localeErasParse(eraName, format, strict) {
	        var i,
	            l,
	            eras = this.eras(),
	            name,
	            abbr,
	            narrow;
	        eraName = eraName.toUpperCase();

	        for (i = 0, l = eras.length; i < l; ++i) {
	            name = eras[i].name.toUpperCase();
	            abbr = eras[i].abbr.toUpperCase();
	            narrow = eras[i].narrow.toUpperCase();

	            if (strict) {
	                switch (format) {
	                    case 'N':
	                    case 'NN':
	                    case 'NNN':
	                        if (abbr === eraName) {
	                            return eras[i];
	                        }
	                        break;

	                    case 'NNNN':
	                        if (name === eraName) {
	                            return eras[i];
	                        }
	                        break;

	                    case 'NNNNN':
	                        if (narrow === eraName) {
	                            return eras[i];
	                        }
	                        break;
	                }
	            } else if ([name, abbr, narrow].indexOf(eraName) >= 0) {
	                return eras[i];
	            }
	        }
	    }

	    function localeErasConvertYear(era, year) {
	        var dir = era.since <= era.until ? +1 : -1;
	        if (year === undefined) {
	            return hooks(era.since).year();
	        } else {
	            return hooks(era.since).year() + (year - era.offset) * dir;
	        }
	    }

	    function getEraName() {
	        var i,
	            l,
	            val,
	            eras = this.localeData().eras();
	        for (i = 0, l = eras.length; i < l; ++i) {
	            // truncate time
	            val = this.clone().startOf('day').valueOf();

	            if (eras[i].since <= val && val <= eras[i].until) {
	                return eras[i].name;
	            }
	            if (eras[i].until <= val && val <= eras[i].since) {
	                return eras[i].name;
	            }
	        }

	        return '';
	    }

	    function getEraNarrow() {
	        var i,
	            l,
	            val,
	            eras = this.localeData().eras();
	        for (i = 0, l = eras.length; i < l; ++i) {
	            // truncate time
	            val = this.clone().startOf('day').valueOf();

	            if (eras[i].since <= val && val <= eras[i].until) {
	                return eras[i].narrow;
	            }
	            if (eras[i].until <= val && val <= eras[i].since) {
	                return eras[i].narrow;
	            }
	        }

	        return '';
	    }

	    function getEraAbbr() {
	        var i,
	            l,
	            val,
	            eras = this.localeData().eras();
	        for (i = 0, l = eras.length; i < l; ++i) {
	            // truncate time
	            val = this.clone().startOf('day').valueOf();

	            if (eras[i].since <= val && val <= eras[i].until) {
	                return eras[i].abbr;
	            }
	            if (eras[i].until <= val && val <= eras[i].since) {
	                return eras[i].abbr;
	            }
	        }

	        return '';
	    }

	    function getEraYear() {
	        var i,
	            l,
	            dir,
	            val,
	            eras = this.localeData().eras();
	        for (i = 0, l = eras.length; i < l; ++i) {
	            dir = eras[i].since <= eras[i].until ? +1 : -1;

	            // truncate time
	            val = this.clone().startOf('day').valueOf();

	            if (
	                (eras[i].since <= val && val <= eras[i].until) ||
	                (eras[i].until <= val && val <= eras[i].since)
	            ) {
	                return (
	                    (this.year() - hooks(eras[i].since).year()) * dir +
	                    eras[i].offset
	                );
	            }
	        }

	        return this.year();
	    }

	    function erasNameRegex(isStrict) {
	        if (!hasOwnProp(this, '_erasNameRegex')) {
	            computeErasParse.call(this);
	        }
	        return isStrict ? this._erasNameRegex : this._erasRegex;
	    }

	    function erasAbbrRegex(isStrict) {
	        if (!hasOwnProp(this, '_erasAbbrRegex')) {
	            computeErasParse.call(this);
	        }
	        return isStrict ? this._erasAbbrRegex : this._erasRegex;
	    }

	    function erasNarrowRegex(isStrict) {
	        if (!hasOwnProp(this, '_erasNarrowRegex')) {
	            computeErasParse.call(this);
	        }
	        return isStrict ? this._erasNarrowRegex : this._erasRegex;
	    }

	    function matchEraAbbr(isStrict, locale) {
	        return locale.erasAbbrRegex(isStrict);
	    }

	    function matchEraName(isStrict, locale) {
	        return locale.erasNameRegex(isStrict);
	    }

	    function matchEraNarrow(isStrict, locale) {
	        return locale.erasNarrowRegex(isStrict);
	    }

	    function matchEraYearOrdinal(isStrict, locale) {
	        return locale._eraYearOrdinalRegex || matchUnsigned;
	    }

	    function computeErasParse() {
	        var abbrPieces = [],
	            namePieces = [],
	            narrowPieces = [],
	            mixedPieces = [],
	            i,
	            l,
	            eras = this.eras();

	        for (i = 0, l = eras.length; i < l; ++i) {
	            namePieces.push(regexEscape(eras[i].name));
	            abbrPieces.push(regexEscape(eras[i].abbr));
	            narrowPieces.push(regexEscape(eras[i].narrow));

	            mixedPieces.push(regexEscape(eras[i].name));
	            mixedPieces.push(regexEscape(eras[i].abbr));
	            mixedPieces.push(regexEscape(eras[i].narrow));
	        }

	        this._erasRegex = new RegExp('^(' + mixedPieces.join('|') + ')', 'i');
	        this._erasNameRegex = new RegExp('^(' + namePieces.join('|') + ')', 'i');
	        this._erasAbbrRegex = new RegExp('^(' + abbrPieces.join('|') + ')', 'i');
	        this._erasNarrowRegex = new RegExp(
	            '^(' + narrowPieces.join('|') + ')',
	            'i'
	        );
	    }

	    // FORMATTING

	    addFormatToken(0, ['gg', 2], 0, function () {
	        return this.weekYear() % 100;
	    });

	    addFormatToken(0, ['GG', 2], 0, function () {
	        return this.isoWeekYear() % 100;
	    });

	    function addWeekYearFormatToken(token, getter) {
	        addFormatToken(0, [token, token.length], 0, getter);
	    }

	    addWeekYearFormatToken('gggg', 'weekYear');
	    addWeekYearFormatToken('ggggg', 'weekYear');
	    addWeekYearFormatToken('GGGG', 'isoWeekYear');
	    addWeekYearFormatToken('GGGGG', 'isoWeekYear');

	    // ALIASES

	    addUnitAlias('weekYear', 'gg');
	    addUnitAlias('isoWeekYear', 'GG');

	    // PRIORITY

	    addUnitPriority('weekYear', 1);
	    addUnitPriority('isoWeekYear', 1);

	    // PARSING

	    addRegexToken('G', matchSigned);
	    addRegexToken('g', matchSigned);
	    addRegexToken('GG', match1to2, match2);
	    addRegexToken('gg', match1to2, match2);
	    addRegexToken('GGGG', match1to4, match4);
	    addRegexToken('gggg', match1to4, match4);
	    addRegexToken('GGGGG', match1to6, match6);
	    addRegexToken('ggggg', match1to6, match6);

	    addWeekParseToken(['gggg', 'ggggg', 'GGGG', 'GGGGG'], function (
	        input,
	        week,
	        config,
	        token
	    ) {
	        week[token.substr(0, 2)] = toInt(input);
	    });

	    addWeekParseToken(['gg', 'GG'], function (input, week, config, token) {
	        week[token] = hooks.parseTwoDigitYear(input);
	    });

	    // MOMENTS

	    function getSetWeekYear(input) {
	        return getSetWeekYearHelper.call(
	            this,
	            input,
	            this.week(),
	            this.weekday(),
	            this.localeData()._week.dow,
	            this.localeData()._week.doy
	        );
	    }

	    function getSetISOWeekYear(input) {
	        return getSetWeekYearHelper.call(
	            this,
	            input,
	            this.isoWeek(),
	            this.isoWeekday(),
	            1,
	            4
	        );
	    }

	    function getISOWeeksInYear() {
	        return weeksInYear(this.year(), 1, 4);
	    }

	    function getISOWeeksInISOWeekYear() {
	        return weeksInYear(this.isoWeekYear(), 1, 4);
	    }

	    function getWeeksInYear() {
	        var weekInfo = this.localeData()._week;
	        return weeksInYear(this.year(), weekInfo.dow, weekInfo.doy);
	    }

	    function getWeeksInWeekYear() {
	        var weekInfo = this.localeData()._week;
	        return weeksInYear(this.weekYear(), weekInfo.dow, weekInfo.doy);
	    }

	    function getSetWeekYearHelper(input, week, weekday, dow, doy) {
	        var weeksTarget;
	        if (input == null) {
	            return weekOfYear(this, dow, doy).year;
	        } else {
	            weeksTarget = weeksInYear(input, dow, doy);
	            if (week > weeksTarget) {
	                week = weeksTarget;
	            }
	            return setWeekAll.call(this, input, week, weekday, dow, doy);
	        }
	    }

	    function setWeekAll(weekYear, week, weekday, dow, doy) {
	        var dayOfYearData = dayOfYearFromWeeks(weekYear, week, weekday, dow, doy),
	            date = createUTCDate(dayOfYearData.year, 0, dayOfYearData.dayOfYear);

	        this.year(date.getUTCFullYear());
	        this.month(date.getUTCMonth());
	        this.date(date.getUTCDate());
	        return this;
	    }

	    // FORMATTING

	    addFormatToken('Q', 0, 'Qo', 'quarter');

	    // ALIASES

	    addUnitAlias('quarter', 'Q');

	    // PRIORITY

	    addUnitPriority('quarter', 7);

	    // PARSING

	    addRegexToken('Q', match1);
	    addParseToken('Q', function (input, array) {
	        array[MONTH] = (toInt(input) - 1) * 3;
	    });

	    // MOMENTS

	    function getSetQuarter(input) {
	        return input == null
	            ? Math.ceil((this.month() + 1) / 3)
	            : this.month((input - 1) * 3 + (this.month() % 3));
	    }

	    // FORMATTING

	    addFormatToken('D', ['DD', 2], 'Do', 'date');

	    // ALIASES

	    addUnitAlias('date', 'D');

	    // PRIORITY
	    addUnitPriority('date', 9);

	    // PARSING

	    addRegexToken('D', match1to2);
	    addRegexToken('DD', match1to2, match2);
	    addRegexToken('Do', function (isStrict, locale) {
	        // TODO: Remove "ordinalParse" fallback in next major release.
	        return isStrict
	            ? locale._dayOfMonthOrdinalParse || locale._ordinalParse
	            : locale._dayOfMonthOrdinalParseLenient;
	    });

	    addParseToken(['D', 'DD'], DATE);
	    addParseToken('Do', function (input, array) {
	        array[DATE] = toInt(input.match(match1to2)[0]);
	    });

	    // MOMENTS

	    var getSetDayOfMonth = makeGetSet('Date', true);

	    // FORMATTING

	    addFormatToken('DDD', ['DDDD', 3], 'DDDo', 'dayOfYear');

	    // ALIASES

	    addUnitAlias('dayOfYear', 'DDD');

	    // PRIORITY
	    addUnitPriority('dayOfYear', 4);

	    // PARSING

	    addRegexToken('DDD', match1to3);
	    addRegexToken('DDDD', match3);
	    addParseToken(['DDD', 'DDDD'], function (input, array, config) {
	        config._dayOfYear = toInt(input);
	    });

	    // HELPERS

	    // MOMENTS

	    function getSetDayOfYear(input) {
	        var dayOfYear =
	            Math.round(
	                (this.clone().startOf('day') - this.clone().startOf('year')) / 864e5
	            ) + 1;
	        return input == null ? dayOfYear : this.add(input - dayOfYear, 'd');
	    }

	    // FORMATTING

	    addFormatToken('m', ['mm', 2], 0, 'minute');

	    // ALIASES

	    addUnitAlias('minute', 'm');

	    // PRIORITY

	    addUnitPriority('minute', 14);

	    // PARSING

	    addRegexToken('m', match1to2);
	    addRegexToken('mm', match1to2, match2);
	    addParseToken(['m', 'mm'], MINUTE);

	    // MOMENTS

	    var getSetMinute = makeGetSet('Minutes', false);

	    // FORMATTING

	    addFormatToken('s', ['ss', 2], 0, 'second');

	    // ALIASES

	    addUnitAlias('second', 's');

	    // PRIORITY

	    addUnitPriority('second', 15);

	    // PARSING

	    addRegexToken('s', match1to2);
	    addRegexToken('ss', match1to2, match2);
	    addParseToken(['s', 'ss'], SECOND);

	    // MOMENTS

	    var getSetSecond = makeGetSet('Seconds', false);

	    // FORMATTING

	    addFormatToken('S', 0, 0, function () {
	        return ~~(this.millisecond() / 100);
	    });

	    addFormatToken(0, ['SS', 2], 0, function () {
	        return ~~(this.millisecond() / 10);
	    });

	    addFormatToken(0, ['SSS', 3], 0, 'millisecond');
	    addFormatToken(0, ['SSSS', 4], 0, function () {
	        return this.millisecond() * 10;
	    });
	    addFormatToken(0, ['SSSSS', 5], 0, function () {
	        return this.millisecond() * 100;
	    });
	    addFormatToken(0, ['SSSSSS', 6], 0, function () {
	        return this.millisecond() * 1000;
	    });
	    addFormatToken(0, ['SSSSSSS', 7], 0, function () {
	        return this.millisecond() * 10000;
	    });
	    addFormatToken(0, ['SSSSSSSS', 8], 0, function () {
	        return this.millisecond() * 100000;
	    });
	    addFormatToken(0, ['SSSSSSSSS', 9], 0, function () {
	        return this.millisecond() * 1000000;
	    });

	    // ALIASES

	    addUnitAlias('millisecond', 'ms');

	    // PRIORITY

	    addUnitPriority('millisecond', 16);

	    // PARSING

	    addRegexToken('S', match1to3, match1);
	    addRegexToken('SS', match1to3, match2);
	    addRegexToken('SSS', match1to3, match3);

	    var token, getSetMillisecond;
	    for (token = 'SSSS'; token.length <= 9; token += 'S') {
	        addRegexToken(token, matchUnsigned);
	    }

	    function parseMs(input, array) {
	        array[MILLISECOND] = toInt(('0.' + input) * 1000);
	    }

	    for (token = 'S'; token.length <= 9; token += 'S') {
	        addParseToken(token, parseMs);
	    }

	    getSetMillisecond = makeGetSet('Milliseconds', false);

	    // FORMATTING

	    addFormatToken('z', 0, 0, 'zoneAbbr');
	    addFormatToken('zz', 0, 0, 'zoneName');

	    // MOMENTS

	    function getZoneAbbr() {
	        return this._isUTC ? 'UTC' : '';
	    }

	    function getZoneName() {
	        return this._isUTC ? 'Coordinated Universal Time' : '';
	    }

	    var proto = Moment.prototype;

	    proto.add = add;
	    proto.calendar = calendar$1;
	    proto.clone = clone;
	    proto.diff = diff;
	    proto.endOf = endOf;
	    proto.format = format;
	    proto.from = from;
	    proto.fromNow = fromNow;
	    proto.to = to;
	    proto.toNow = toNow;
	    proto.get = stringGet;
	    proto.invalidAt = invalidAt;
	    proto.isAfter = isAfter;
	    proto.isBefore = isBefore;
	    proto.isBetween = isBetween;
	    proto.isSame = isSame;
	    proto.isSameOrAfter = isSameOrAfter;
	    proto.isSameOrBefore = isSameOrBefore;
	    proto.isValid = isValid$2;
	    proto.lang = lang;
	    proto.locale = locale;
	    proto.localeData = localeData;
	    proto.max = prototypeMax;
	    proto.min = prototypeMin;
	    proto.parsingFlags = parsingFlags;
	    proto.set = stringSet;
	    proto.startOf = startOf;
	    proto.subtract = subtract;
	    proto.toArray = toArray;
	    proto.toObject = toObject;
	    proto.toDate = toDate;
	    proto.toISOString = toISOString;
	    proto.inspect = inspect;
	    if (typeof Symbol !== 'undefined' && Symbol.for != null) {
	        proto[Symbol.for('nodejs.util.inspect.custom')] = function () {
	            return 'Moment<' + this.format() + '>';
	        };
	    }
	    proto.toJSON = toJSON;
	    proto.toString = toString;
	    proto.unix = unix;
	    proto.valueOf = valueOf;
	    proto.creationData = creationData;
	    proto.eraName = getEraName;
	    proto.eraNarrow = getEraNarrow;
	    proto.eraAbbr = getEraAbbr;
	    proto.eraYear = getEraYear;
	    proto.year = getSetYear;
	    proto.isLeapYear = getIsLeapYear;
	    proto.weekYear = getSetWeekYear;
	    proto.isoWeekYear = getSetISOWeekYear;
	    proto.quarter = proto.quarters = getSetQuarter;
	    proto.month = getSetMonth;
	    proto.daysInMonth = getDaysInMonth;
	    proto.week = proto.weeks = getSetWeek;
	    proto.isoWeek = proto.isoWeeks = getSetISOWeek;
	    proto.weeksInYear = getWeeksInYear;
	    proto.weeksInWeekYear = getWeeksInWeekYear;
	    proto.isoWeeksInYear = getISOWeeksInYear;
	    proto.isoWeeksInISOWeekYear = getISOWeeksInISOWeekYear;
	    proto.date = getSetDayOfMonth;
	    proto.day = proto.days = getSetDayOfWeek;
	    proto.weekday = getSetLocaleDayOfWeek;
	    proto.isoWeekday = getSetISODayOfWeek;
	    proto.dayOfYear = getSetDayOfYear;
	    proto.hour = proto.hours = getSetHour;
	    proto.minute = proto.minutes = getSetMinute;
	    proto.second = proto.seconds = getSetSecond;
	    proto.millisecond = proto.milliseconds = getSetMillisecond;
	    proto.utcOffset = getSetOffset;
	    proto.utc = setOffsetToUTC;
	    proto.local = setOffsetToLocal;
	    proto.parseZone = setOffsetToParsedOffset;
	    proto.hasAlignedHourOffset = hasAlignedHourOffset;
	    proto.isDST = isDaylightSavingTime;
	    proto.isLocal = isLocal;
	    proto.isUtcOffset = isUtcOffset;
	    proto.isUtc = isUtc;
	    proto.isUTC = isUtc;
	    proto.zoneAbbr = getZoneAbbr;
	    proto.zoneName = getZoneName;
	    proto.dates = deprecate(
	        'dates accessor is deprecated. Use date instead.',
	        getSetDayOfMonth
	    );
	    proto.months = deprecate(
	        'months accessor is deprecated. Use month instead',
	        getSetMonth
	    );
	    proto.years = deprecate(
	        'years accessor is deprecated. Use year instead',
	        getSetYear
	    );
	    proto.zone = deprecate(
	        'moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/',
	        getSetZone
	    );
	    proto.isDSTShifted = deprecate(
	        'isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information',
	        isDaylightSavingTimeShifted
	    );

	    function createUnix(input) {
	        return createLocal(input * 1000);
	    }

	    function createInZone() {
	        return createLocal.apply(null, arguments).parseZone();
	    }

	    function preParsePostFormat(string) {
	        return string;
	    }

	    var proto$1 = Locale.prototype;

	    proto$1.calendar = calendar;
	    proto$1.longDateFormat = longDateFormat;
	    proto$1.invalidDate = invalidDate;
	    proto$1.ordinal = ordinal;
	    proto$1.preparse = preParsePostFormat;
	    proto$1.postformat = preParsePostFormat;
	    proto$1.relativeTime = relativeTime;
	    proto$1.pastFuture = pastFuture;
	    proto$1.set = set;
	    proto$1.eras = localeEras;
	    proto$1.erasParse = localeErasParse;
	    proto$1.erasConvertYear = localeErasConvertYear;
	    proto$1.erasAbbrRegex = erasAbbrRegex;
	    proto$1.erasNameRegex = erasNameRegex;
	    proto$1.erasNarrowRegex = erasNarrowRegex;

	    proto$1.months = localeMonths;
	    proto$1.monthsShort = localeMonthsShort;
	    proto$1.monthsParse = localeMonthsParse;
	    proto$1.monthsRegex = monthsRegex;
	    proto$1.monthsShortRegex = monthsShortRegex;
	    proto$1.week = localeWeek;
	    proto$1.firstDayOfYear = localeFirstDayOfYear;
	    proto$1.firstDayOfWeek = localeFirstDayOfWeek;

	    proto$1.weekdays = localeWeekdays;
	    proto$1.weekdaysMin = localeWeekdaysMin;
	    proto$1.weekdaysShort = localeWeekdaysShort;
	    proto$1.weekdaysParse = localeWeekdaysParse;

	    proto$1.weekdaysRegex = weekdaysRegex;
	    proto$1.weekdaysShortRegex = weekdaysShortRegex;
	    proto$1.weekdaysMinRegex = weekdaysMinRegex;

	    proto$1.isPM = localeIsPM;
	    proto$1.meridiem = localeMeridiem;

	    function get$1(format, index, field, setter) {
	        var locale = getLocale(),
	            utc = createUTC().set(setter, index);
	        return locale[field](utc, format);
	    }

	    function listMonthsImpl(format, index, field) {
	        if (isNumber(format)) {
	            index = format;
	            format = undefined;
	        }

	        format = format || '';

	        if (index != null) {
	            return get$1(format, index, field, 'month');
	        }

	        var i,
	            out = [];
	        for (i = 0; i < 12; i++) {
	            out[i] = get$1(format, i, field, 'month');
	        }
	        return out;
	    }

	    // ()
	    // (5)
	    // (fmt, 5)
	    // (fmt)
	    // (true)
	    // (true, 5)
	    // (true, fmt, 5)
	    // (true, fmt)
	    function listWeekdaysImpl(localeSorted, format, index, field) {
	        if (typeof localeSorted === 'boolean') {
	            if (isNumber(format)) {
	                index = format;
	                format = undefined;
	            }

	            format = format || '';
	        } else {
	            format = localeSorted;
	            index = format;
	            localeSorted = false;

	            if (isNumber(format)) {
	                index = format;
	                format = undefined;
	            }

	            format = format || '';
	        }

	        var locale = getLocale(),
	            shift = localeSorted ? locale._week.dow : 0,
	            i,
	            out = [];

	        if (index != null) {
	            return get$1(format, (index + shift) % 7, field, 'day');
	        }

	        for (i = 0; i < 7; i++) {
	            out[i] = get$1(format, (i + shift) % 7, field, 'day');
	        }
	        return out;
	    }

	    function listMonths(format, index) {
	        return listMonthsImpl(format, index, 'months');
	    }

	    function listMonthsShort(format, index) {
	        return listMonthsImpl(format, index, 'monthsShort');
	    }

	    function listWeekdays(localeSorted, format, index) {
	        return listWeekdaysImpl(localeSorted, format, index, 'weekdays');
	    }

	    function listWeekdaysShort(localeSorted, format, index) {
	        return listWeekdaysImpl(localeSorted, format, index, 'weekdaysShort');
	    }

	    function listWeekdaysMin(localeSorted, format, index) {
	        return listWeekdaysImpl(localeSorted, format, index, 'weekdaysMin');
	    }

	    getSetGlobalLocale('en', {
	        eras: [
	            {
	                since: '0001-01-01',
	                until: +Infinity,
	                offset: 1,
	                name: 'Anno Domini',
	                narrow: 'AD',
	                abbr: 'AD',
	            },
	            {
	                since: '0000-12-31',
	                until: -Infinity,
	                offset: 1,
	                name: 'Before Christ',
	                narrow: 'BC',
	                abbr: 'BC',
	            },
	        ],
	        dayOfMonthOrdinalParse: /\d{1,2}(th|st|nd|rd)/,
	        ordinal: function (number) {
	            var b = number % 10,
	                output =
	                    toInt((number % 100) / 10) === 1
	                        ? 'th'
	                        : b === 1
	                        ? 'st'
	                        : b === 2
	                        ? 'nd'
	                        : b === 3
	                        ? 'rd'
	                        : 'th';
	            return number + output;
	        },
	    });

	    // Side effect imports

	    hooks.lang = deprecate(
	        'moment.lang is deprecated. Use moment.locale instead.',
	        getSetGlobalLocale
	    );
	    hooks.langData = deprecate(
	        'moment.langData is deprecated. Use moment.localeData instead.',
	        getLocale
	    );

	    var mathAbs = Math.abs;

	    function abs() {
	        var data = this._data;

	        this._milliseconds = mathAbs(this._milliseconds);
	        this._days = mathAbs(this._days);
	        this._months = mathAbs(this._months);

	        data.milliseconds = mathAbs(data.milliseconds);
	        data.seconds = mathAbs(data.seconds);
	        data.minutes = mathAbs(data.minutes);
	        data.hours = mathAbs(data.hours);
	        data.months = mathAbs(data.months);
	        data.years = mathAbs(data.years);

	        return this;
	    }

	    function addSubtract$1(duration, input, value, direction) {
	        var other = createDuration(input, value);

	        duration._milliseconds += direction * other._milliseconds;
	        duration._days += direction * other._days;
	        duration._months += direction * other._months;

	        return duration._bubble();
	    }

	    // supports only 2.0-style add(1, 's') or add(duration)
	    function add$1(input, value) {
	        return addSubtract$1(this, input, value, 1);
	    }

	    // supports only 2.0-style subtract(1, 's') or subtract(duration)
	    function subtract$1(input, value) {
	        return addSubtract$1(this, input, value, -1);
	    }

	    function absCeil(number) {
	        if (number < 0) {
	            return Math.floor(number);
	        } else {
	            return Math.ceil(number);
	        }
	    }

	    function bubble() {
	        var milliseconds = this._milliseconds,
	            days = this._days,
	            months = this._months,
	            data = this._data,
	            seconds,
	            minutes,
	            hours,
	            years,
	            monthsFromDays;

	        // if we have a mix of positive and negative values, bubble down first
	        // check: https://github.com/moment/moment/issues/2166
	        if (
	            !(
	                (milliseconds >= 0 && days >= 0 && months >= 0) ||
	                (milliseconds <= 0 && days <= 0 && months <= 0)
	            )
	        ) {
	            milliseconds += absCeil(monthsToDays(months) + days) * 864e5;
	            days = 0;
	            months = 0;
	        }

	        // The following code bubbles up values, see the tests for
	        // examples of what that means.
	        data.milliseconds = milliseconds % 1000;

	        seconds = absFloor(milliseconds / 1000);
	        data.seconds = seconds % 60;

	        minutes = absFloor(seconds / 60);
	        data.minutes = minutes % 60;

	        hours = absFloor(minutes / 60);
	        data.hours = hours % 24;

	        days += absFloor(hours / 24);

	        // convert days to months
	        monthsFromDays = absFloor(daysToMonths(days));
	        months += monthsFromDays;
	        days -= absCeil(monthsToDays(monthsFromDays));

	        // 12 months -> 1 year
	        years = absFloor(months / 12);
	        months %= 12;

	        data.days = days;
	        data.months = months;
	        data.years = years;

	        return this;
	    }

	    function daysToMonths(days) {
	        // 400 years have 146097 days (taking into account leap year rules)
	        // 400 years have 12 months === 4800
	        return (days * 4800) / 146097;
	    }

	    function monthsToDays(months) {
	        // the reverse of daysToMonths
	        return (months * 146097) / 4800;
	    }

	    function as(units) {
	        if (!this.isValid()) {
	            return NaN;
	        }
	        var days,
	            months,
	            milliseconds = this._milliseconds;

	        units = normalizeUnits(units);

	        if (units === 'month' || units === 'quarter' || units === 'year') {
	            days = this._days + milliseconds / 864e5;
	            months = this._months + daysToMonths(days);
	            switch (units) {
	                case 'month':
	                    return months;
	                case 'quarter':
	                    return months / 3;
	                case 'year':
	                    return months / 12;
	            }
	        } else {
	            // handle milliseconds separately because of floating point math errors (issue #1867)
	            days = this._days + Math.round(monthsToDays(this._months));
	            switch (units) {
	                case 'week':
	                    return days / 7 + milliseconds / 6048e5;
	                case 'day':
	                    return days + milliseconds / 864e5;
	                case 'hour':
	                    return days * 24 + milliseconds / 36e5;
	                case 'minute':
	                    return days * 1440 + milliseconds / 6e4;
	                case 'second':
	                    return days * 86400 + milliseconds / 1000;
	                // Math.floor prevents floating point math errors here
	                case 'millisecond':
	                    return Math.floor(days * 864e5) + milliseconds;
	                default:
	                    throw new Error('Unknown unit ' + units);
	            }
	        }
	    }

	    // TODO: Use this.as('ms')?
	    function valueOf$1() {
	        if (!this.isValid()) {
	            return NaN;
	        }
	        return (
	            this._milliseconds +
	            this._days * 864e5 +
	            (this._months % 12) * 2592e6 +
	            toInt(this._months / 12) * 31536e6
	        );
	    }

	    function makeAs(alias) {
	        return function () {
	            return this.as(alias);
	        };
	    }

	    var asMilliseconds = makeAs('ms'),
	        asSeconds = makeAs('s'),
	        asMinutes = makeAs('m'),
	        asHours = makeAs('h'),
	        asDays = makeAs('d'),
	        asWeeks = makeAs('w'),
	        asMonths = makeAs('M'),
	        asQuarters = makeAs('Q'),
	        asYears = makeAs('y');

	    function clone$1() {
	        return createDuration(this);
	    }

	    function get$2(units) {
	        units = normalizeUnits(units);
	        return this.isValid() ? this[units + 's']() : NaN;
	    }

	    function makeGetter(name) {
	        return function () {
	            return this.isValid() ? this._data[name] : NaN;
	        };
	    }

	    var milliseconds = makeGetter('milliseconds'),
	        seconds = makeGetter('seconds'),
	        minutes = makeGetter('minutes'),
	        hours = makeGetter('hours'),
	        days = makeGetter('days'),
	        months = makeGetter('months'),
	        years = makeGetter('years');

	    function weeks() {
	        return absFloor(this.days() / 7);
	    }

	    var round = Math.round,
	        thresholds = {
	            ss: 44, // a few seconds to seconds
	            s: 45, // seconds to minute
	            m: 45, // minutes to hour
	            h: 22, // hours to day
	            d: 26, // days to month/week
	            w: null, // weeks to month
	            M: 11, // months to year
	        };

	    // helper function for moment.fn.from, moment.fn.fromNow, and moment.duration.fn.humanize
	    function substituteTimeAgo(string, number, withoutSuffix, isFuture, locale) {
	        return locale.relativeTime(number || 1, !!withoutSuffix, string, isFuture);
	    }

	    function relativeTime$1(posNegDuration, withoutSuffix, thresholds, locale) {
	        var duration = createDuration(posNegDuration).abs(),
	            seconds = round(duration.as('s')),
	            minutes = round(duration.as('m')),
	            hours = round(duration.as('h')),
	            days = round(duration.as('d')),
	            months = round(duration.as('M')),
	            weeks = round(duration.as('w')),
	            years = round(duration.as('y')),
	            a =
	                (seconds <= thresholds.ss && ['s', seconds]) ||
	                (seconds < thresholds.s && ['ss', seconds]) ||
	                (minutes <= 1 && ['m']) ||
	                (minutes < thresholds.m && ['mm', minutes]) ||
	                (hours <= 1 && ['h']) ||
	                (hours < thresholds.h && ['hh', hours]) ||
	                (days <= 1 && ['d']) ||
	                (days < thresholds.d && ['dd', days]);

	        if (thresholds.w != null) {
	            a =
	                a ||
	                (weeks <= 1 && ['w']) ||
	                (weeks < thresholds.w && ['ww', weeks]);
	        }
	        a = a ||
	            (months <= 1 && ['M']) ||
	            (months < thresholds.M && ['MM', months]) ||
	            (years <= 1 && ['y']) || ['yy', years];

	        a[2] = withoutSuffix;
	        a[3] = +posNegDuration > 0;
	        a[4] = locale;
	        return substituteTimeAgo.apply(null, a);
	    }

	    // This function allows you to set the rounding function for relative time strings
	    function getSetRelativeTimeRounding(roundingFunction) {
	        if (roundingFunction === undefined) {
	            return round;
	        }
	        if (typeof roundingFunction === 'function') {
	            round = roundingFunction;
	            return true;
	        }
	        return false;
	    }

	    // This function allows you to set a threshold for relative time strings
	    function getSetRelativeTimeThreshold(threshold, limit) {
	        if (thresholds[threshold] === undefined) {
	            return false;
	        }
	        if (limit === undefined) {
	            return thresholds[threshold];
	        }
	        thresholds[threshold] = limit;
	        if (threshold === 's') {
	            thresholds.ss = limit - 1;
	        }
	        return true;
	    }

	    function humanize(argWithSuffix, argThresholds) {
	        if (!this.isValid()) {
	            return this.localeData().invalidDate();
	        }

	        var withSuffix = false,
	            th = thresholds,
	            locale,
	            output;

	        if (typeof argWithSuffix === 'object') {
	            argThresholds = argWithSuffix;
	            argWithSuffix = false;
	        }
	        if (typeof argWithSuffix === 'boolean') {
	            withSuffix = argWithSuffix;
	        }
	        if (typeof argThresholds === 'object') {
	            th = Object.assign({}, thresholds, argThresholds);
	            if (argThresholds.s != null && argThresholds.ss == null) {
	                th.ss = argThresholds.s - 1;
	            }
	        }

	        locale = this.localeData();
	        output = relativeTime$1(this, !withSuffix, th, locale);

	        if (withSuffix) {
	            output = locale.pastFuture(+this, output);
	        }

	        return locale.postformat(output);
	    }

	    var abs$1 = Math.abs;

	    function sign(x) {
	        return (x > 0) - (x < 0) || +x;
	    }

	    function toISOString$1() {
	        // for ISO strings we do not use the normal bubbling rules:
	        //  * milliseconds bubble up until they become hours
	        //  * days do not bubble at all
	        //  * months bubble up until they become years
	        // This is because there is no context-free conversion between hours and days
	        // (think of clock changes)
	        // and also not between days and months (28-31 days per month)
	        if (!this.isValid()) {
	            return this.localeData().invalidDate();
	        }

	        var seconds = abs$1(this._milliseconds) / 1000,
	            days = abs$1(this._days),
	            months = abs$1(this._months),
	            minutes,
	            hours,
	            years,
	            s,
	            total = this.asSeconds(),
	            totalSign,
	            ymSign,
	            daysSign,
	            hmsSign;

	        if (!total) {
	            // this is the same as C#'s (Noda) and python (isodate)...
	            // but not other JS (goog.date)
	            return 'P0D';
	        }

	        // 3600 seconds -> 60 minutes -> 1 hour
	        minutes = absFloor(seconds / 60);
	        hours = absFloor(minutes / 60);
	        seconds %= 60;
	        minutes %= 60;

	        // 12 months -> 1 year
	        years = absFloor(months / 12);
	        months %= 12;

	        // inspired by https://github.com/dordille/moment-isoduration/blob/master/moment.isoduration.js
	        s = seconds ? seconds.toFixed(3).replace(/\.?0+$/, '') : '';

	        totalSign = total < 0 ? '-' : '';
	        ymSign = sign(this._months) !== sign(total) ? '-' : '';
	        daysSign = sign(this._days) !== sign(total) ? '-' : '';
	        hmsSign = sign(this._milliseconds) !== sign(total) ? '-' : '';

	        return (
	            totalSign +
	            'P' +
	            (years ? ymSign + years + 'Y' : '') +
	            (months ? ymSign + months + 'M' : '') +
	            (days ? daysSign + days + 'D' : '') +
	            (hours || minutes || seconds ? 'T' : '') +
	            (hours ? hmsSign + hours + 'H' : '') +
	            (minutes ? hmsSign + minutes + 'M' : '') +
	            (seconds ? hmsSign + s + 'S' : '')
	        );
	    }

	    var proto$2 = Duration.prototype;

	    proto$2.isValid = isValid$1;
	    proto$2.abs = abs;
	    proto$2.add = add$1;
	    proto$2.subtract = subtract$1;
	    proto$2.as = as;
	    proto$2.asMilliseconds = asMilliseconds;
	    proto$2.asSeconds = asSeconds;
	    proto$2.asMinutes = asMinutes;
	    proto$2.asHours = asHours;
	    proto$2.asDays = asDays;
	    proto$2.asWeeks = asWeeks;
	    proto$2.asMonths = asMonths;
	    proto$2.asQuarters = asQuarters;
	    proto$2.asYears = asYears;
	    proto$2.valueOf = valueOf$1;
	    proto$2._bubble = bubble;
	    proto$2.clone = clone$1;
	    proto$2.get = get$2;
	    proto$2.milliseconds = milliseconds;
	    proto$2.seconds = seconds;
	    proto$2.minutes = minutes;
	    proto$2.hours = hours;
	    proto$2.days = days;
	    proto$2.weeks = weeks;
	    proto$2.months = months;
	    proto$2.years = years;
	    proto$2.humanize = humanize;
	    proto$2.toISOString = toISOString$1;
	    proto$2.toString = toISOString$1;
	    proto$2.toJSON = toISOString$1;
	    proto$2.locale = locale;
	    proto$2.localeData = localeData;

	    proto$2.toIsoString = deprecate(
	        'toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)',
	        toISOString$1
	    );
	    proto$2.lang = lang;

	    // FORMATTING

	    addFormatToken('X', 0, 0, 'unix');
	    addFormatToken('x', 0, 0, 'valueOf');

	    // PARSING

	    addRegexToken('x', matchSigned);
	    addRegexToken('X', matchTimestamp);
	    addParseToken('X', function (input, array, config) {
	        config._d = new Date(parseFloat(input) * 1000);
	    });
	    addParseToken('x', function (input, array, config) {
	        config._d = new Date(toInt(input));
	    });

	    //! moment.js

	    hooks.version = '2.29.1';

	    setHookCallback(createLocal);

	    hooks.fn = proto;
	    hooks.min = min;
	    hooks.max = max;
	    hooks.now = now;
	    hooks.utc = createUTC;
	    hooks.unix = createUnix;
	    hooks.months = listMonths;
	    hooks.isDate = isDate;
	    hooks.locale = getSetGlobalLocale;
	    hooks.invalid = createInvalid;
	    hooks.duration = createDuration;
	    hooks.isMoment = isMoment;
	    hooks.weekdays = listWeekdays;
	    hooks.parseZone = createInZone;
	    hooks.localeData = getLocale;
	    hooks.isDuration = isDuration;
	    hooks.monthsShort = listMonthsShort;
	    hooks.weekdaysMin = listWeekdaysMin;
	    hooks.defineLocale = defineLocale;
	    hooks.updateLocale = updateLocale;
	    hooks.locales = listLocales;
	    hooks.weekdaysShort = listWeekdaysShort;
	    hooks.normalizeUnits = normalizeUnits;
	    hooks.relativeTimeRounding = getSetRelativeTimeRounding;
	    hooks.relativeTimeThreshold = getSetRelativeTimeThreshold;
	    hooks.calendarFormat = getCalendarFormat;
	    hooks.prototype = proto;

	    // currently HTML5 input type only supports 24-hour formats
	    hooks.HTML5_FMT = {
	        DATETIME_LOCAL: 'YYYY-MM-DDTHH:mm', // <input type="datetime-local" />
	        DATETIME_LOCAL_SECONDS: 'YYYY-MM-DDTHH:mm:ss', // <input type="datetime-local" step="1" />
	        DATETIME_LOCAL_MS: 'YYYY-MM-DDTHH:mm:ss.SSS', // <input type="datetime-local" step="0.001" />
	        DATE: 'YYYY-MM-DD', // <input type="date" />
	        TIME: 'HH:mm', // <input type="time" />
	        TIME_SECONDS: 'HH:mm:ss', // <input type="time" step="1" />
	        TIME_MS: 'HH:mm:ss.SSS', // <input type="time" step="0.001" />
	        WEEK: 'GGGG-[W]WW', // <input type="week" />
	        MONTH: 'YYYY-MM', // <input type="month" />
	    };

	    return hooks;

	})));
	});

	/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */
	/* global Reflect, Promise */

	var extendStatics = function(d, b) {
	    extendStatics = Object.setPrototypeOf ||
	        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
	    return extendStatics(d, b);
	};

	function __extends(d, b) {
	    if (typeof b !== "function" && b !== null)
	        throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
	    extendStatics(d, b);
	    function __() { this.constructor = d; }
	    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	}

	function __values(o) {
	    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
	    if (m) return m.call(o);
	    if (o && typeof o.length === "number") return {
	        next: function () {
	            if (o && i >= o.length) o = void 0;
	            return { value: o && o[i++], done: !o };
	        }
	    };
	    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
	}

	function __read(o, n) {
	    var m = typeof Symbol === "function" && o[Symbol.iterator];
	    if (!m) return o;
	    var i = m.call(o), r, ar = [], e;
	    try {
	        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
	    }
	    catch (error) { e = { error: error }; }
	    finally {
	        try {
	            if (r && !r.done && (m = i["return"])) m.call(i);
	        }
	        finally { if (e) throw e.error; }
	    }
	    return ar;
	}

	function __spreadArray(to, from, pack) {
	    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
	        if (ar || !(i in from)) {
	            if (!ar) ar = Array.prototype.slice.call(from, 0, i);
	            ar[i] = from[i];
	        }
	    }
	    return to.concat(ar || Array.prototype.slice.call(from));
	}

	function isFunction(value) {
	    return typeof value === 'function';
	}

	function createErrorClass(createImpl) {
	    var _super = function (instance) {
	        Error.call(instance);
	        instance.stack = new Error().stack;
	    };
	    var ctorFunc = createImpl(_super);
	    ctorFunc.prototype = Object.create(Error.prototype);
	    ctorFunc.prototype.constructor = ctorFunc;
	    return ctorFunc;
	}

	var UnsubscriptionError = createErrorClass(function (_super) {
	    return function UnsubscriptionErrorImpl(errors) {
	        _super(this);
	        this.message = errors
	            ? errors.length + " errors occurred during unsubscription:\n" + errors.map(function (err, i) { return i + 1 + ") " + err.toString(); }).join('\n  ')
	            : '';
	        this.name = 'UnsubscriptionError';
	        this.errors = errors;
	    };
	});

	function arrRemove(arr, item) {
	    if (arr) {
	        var index = arr.indexOf(item);
	        0 <= index && arr.splice(index, 1);
	    }
	}

	var Subscription = (function () {
	    function Subscription(initialTeardown) {
	        this.initialTeardown = initialTeardown;
	        this.closed = false;
	        this._parentage = null;
	        this._finalizers = null;
	    }
	    Subscription.prototype.unsubscribe = function () {
	        var e_1, _a, e_2, _b;
	        var errors;
	        if (!this.closed) {
	            this.closed = true;
	            var _parentage = this._parentage;
	            if (_parentage) {
	                this._parentage = null;
	                if (Array.isArray(_parentage)) {
	                    try {
	                        for (var _parentage_1 = __values(_parentage), _parentage_1_1 = _parentage_1.next(); !_parentage_1_1.done; _parentage_1_1 = _parentage_1.next()) {
	                            var parent_1 = _parentage_1_1.value;
	                            parent_1.remove(this);
	                        }
	                    }
	                    catch (e_1_1) { e_1 = { error: e_1_1 }; }
	                    finally {
	                        try {
	                            if (_parentage_1_1 && !_parentage_1_1.done && (_a = _parentage_1.return)) _a.call(_parentage_1);
	                        }
	                        finally { if (e_1) throw e_1.error; }
	                    }
	                }
	                else {
	                    _parentage.remove(this);
	                }
	            }
	            var initialFinalizer = this.initialTeardown;
	            if (isFunction(initialFinalizer)) {
	                try {
	                    initialFinalizer();
	                }
	                catch (e) {
	                    errors = e instanceof UnsubscriptionError ? e.errors : [e];
	                }
	            }
	            var _finalizers = this._finalizers;
	            if (_finalizers) {
	                this._finalizers = null;
	                try {
	                    for (var _finalizers_1 = __values(_finalizers), _finalizers_1_1 = _finalizers_1.next(); !_finalizers_1_1.done; _finalizers_1_1 = _finalizers_1.next()) {
	                        var finalizer = _finalizers_1_1.value;
	                        try {
	                            execFinalizer(finalizer);
	                        }
	                        catch (err) {
	                            errors = errors !== null && errors !== void 0 ? errors : [];
	                            if (err instanceof UnsubscriptionError) {
	                                errors = __spreadArray(__spreadArray([], __read(errors)), __read(err.errors));
	                            }
	                            else {
	                                errors.push(err);
	                            }
	                        }
	                    }
	                }
	                catch (e_2_1) { e_2 = { error: e_2_1 }; }
	                finally {
	                    try {
	                        if (_finalizers_1_1 && !_finalizers_1_1.done && (_b = _finalizers_1.return)) _b.call(_finalizers_1);
	                    }
	                    finally { if (e_2) throw e_2.error; }
	                }
	            }
	            if (errors) {
	                throw new UnsubscriptionError(errors);
	            }
	        }
	    };
	    Subscription.prototype.add = function (teardown) {
	        var _a;
	        if (teardown && teardown !== this) {
	            if (this.closed) {
	                execFinalizer(teardown);
	            }
	            else {
	                if (teardown instanceof Subscription) {
	                    if (teardown.closed || teardown._hasParent(this)) {
	                        return;
	                    }
	                    teardown._addParent(this);
	                }
	                (this._finalizers = (_a = this._finalizers) !== null && _a !== void 0 ? _a : []).push(teardown);
	            }
	        }
	    };
	    Subscription.prototype._hasParent = function (parent) {
	        var _parentage = this._parentage;
	        return _parentage === parent || (Array.isArray(_parentage) && _parentage.includes(parent));
	    };
	    Subscription.prototype._addParent = function (parent) {
	        var _parentage = this._parentage;
	        this._parentage = Array.isArray(_parentage) ? (_parentage.push(parent), _parentage) : _parentage ? [_parentage, parent] : parent;
	    };
	    Subscription.prototype._removeParent = function (parent) {
	        var _parentage = this._parentage;
	        if (_parentage === parent) {
	            this._parentage = null;
	        }
	        else if (Array.isArray(_parentage)) {
	            arrRemove(_parentage, parent);
	        }
	    };
	    Subscription.prototype.remove = function (teardown) {
	        var _finalizers = this._finalizers;
	        _finalizers && arrRemove(_finalizers, teardown);
	        if (teardown instanceof Subscription) {
	            teardown._removeParent(this);
	        }
	    };
	    Subscription.EMPTY = (function () {
	        var empty = new Subscription();
	        empty.closed = true;
	        return empty;
	    })();
	    return Subscription;
	}());
	var EMPTY_SUBSCRIPTION = Subscription.EMPTY;
	function isSubscription(value) {
	    return (value instanceof Subscription ||
	        (value && 'closed' in value && isFunction(value.remove) && isFunction(value.add) && isFunction(value.unsubscribe)));
	}
	function execFinalizer(finalizer) {
	    if (isFunction(finalizer)) {
	        finalizer();
	    }
	    else {
	        finalizer.unsubscribe();
	    }
	}

	var config = {
	    onUnhandledError: null,
	    onStoppedNotification: null,
	    Promise: undefined,
	    useDeprecatedSynchronousErrorHandling: false,
	    useDeprecatedNextContext: false,
	};

	var timeoutProvider = {
	    setTimeout: function (handler, timeout) {
	        var args = [];
	        for (var _i = 2; _i < arguments.length; _i++) {
	            args[_i - 2] = arguments[_i];
	        }
	        var delegate = timeoutProvider.delegate;
	        if (delegate === null || delegate === void 0 ? void 0 : delegate.setTimeout) {
	            return delegate.setTimeout.apply(delegate, __spreadArray([handler, timeout], __read(args)));
	        }
	        return setTimeout.apply(void 0, __spreadArray([handler, timeout], __read(args)));
	    },
	    clearTimeout: function (handle) {
	        var delegate = timeoutProvider.delegate;
	        return ((delegate === null || delegate === void 0 ? void 0 : delegate.clearTimeout) || clearTimeout)(handle);
	    },
	    delegate: undefined,
	};

	function reportUnhandledError(err) {
	    timeoutProvider.setTimeout(function () {
	        {
	            throw err;
	        }
	    });
	}

	function noop() { }

	var context = null;
	function errorContext(cb) {
	    if (config.useDeprecatedSynchronousErrorHandling) {
	        var isRoot = !context;
	        if (isRoot) {
	            context = { errorThrown: false, error: null };
	        }
	        cb();
	        if (isRoot) {
	            var _a = context, errorThrown = _a.errorThrown, error = _a.error;
	            context = null;
	            if (errorThrown) {
	                throw error;
	            }
	        }
	    }
	    else {
	        cb();
	    }
	}

	var Subscriber = (function (_super) {
	    __extends(Subscriber, _super);
	    function Subscriber(destination) {
	        var _this = _super.call(this) || this;
	        _this.isStopped = false;
	        if (destination) {
	            _this.destination = destination;
	            if (isSubscription(destination)) {
	                destination.add(_this);
	            }
	        }
	        else {
	            _this.destination = EMPTY_OBSERVER;
	        }
	        return _this;
	    }
	    Subscriber.create = function (next, error, complete) {
	        return new SafeSubscriber(next, error, complete);
	    };
	    Subscriber.prototype.next = function (value) {
	        if (this.isStopped) ;
	        else {
	            this._next(value);
	        }
	    };
	    Subscriber.prototype.error = function (err) {
	        if (this.isStopped) ;
	        else {
	            this.isStopped = true;
	            this._error(err);
	        }
	    };
	    Subscriber.prototype.complete = function () {
	        if (this.isStopped) ;
	        else {
	            this.isStopped = true;
	            this._complete();
	        }
	    };
	    Subscriber.prototype.unsubscribe = function () {
	        if (!this.closed) {
	            this.isStopped = true;
	            _super.prototype.unsubscribe.call(this);
	            this.destination = null;
	        }
	    };
	    Subscriber.prototype._next = function (value) {
	        this.destination.next(value);
	    };
	    Subscriber.prototype._error = function (err) {
	        try {
	            this.destination.error(err);
	        }
	        finally {
	            this.unsubscribe();
	        }
	    };
	    Subscriber.prototype._complete = function () {
	        try {
	            this.destination.complete();
	        }
	        finally {
	            this.unsubscribe();
	        }
	    };
	    return Subscriber;
	}(Subscription));
	var _bind = Function.prototype.bind;
	function bind(fn, thisArg) {
	    return _bind.call(fn, thisArg);
	}
	var ConsumerObserver = (function () {
	    function ConsumerObserver(partialObserver) {
	        this.partialObserver = partialObserver;
	    }
	    ConsumerObserver.prototype.next = function (value) {
	        var partialObserver = this.partialObserver;
	        if (partialObserver.next) {
	            try {
	                partialObserver.next(value);
	            }
	            catch (error) {
	                handleUnhandledError(error);
	            }
	        }
	    };
	    ConsumerObserver.prototype.error = function (err) {
	        var partialObserver = this.partialObserver;
	        if (partialObserver.error) {
	            try {
	                partialObserver.error(err);
	            }
	            catch (error) {
	                handleUnhandledError(error);
	            }
	        }
	        else {
	            handleUnhandledError(err);
	        }
	    };
	    ConsumerObserver.prototype.complete = function () {
	        var partialObserver = this.partialObserver;
	        if (partialObserver.complete) {
	            try {
	                partialObserver.complete();
	            }
	            catch (error) {
	                handleUnhandledError(error);
	            }
	        }
	    };
	    return ConsumerObserver;
	}());
	var SafeSubscriber = (function (_super) {
	    __extends(SafeSubscriber, _super);
	    function SafeSubscriber(observerOrNext, error, complete) {
	        var _this = _super.call(this) || this;
	        var partialObserver;
	        if (isFunction(observerOrNext) || !observerOrNext) {
	            partialObserver = {
	                next: observerOrNext !== null && observerOrNext !== void 0 ? observerOrNext : undefined,
	                error: error !== null && error !== void 0 ? error : undefined,
	                complete: complete !== null && complete !== void 0 ? complete : undefined,
	            };
	        }
	        else {
	            var context_1;
	            if (_this && config.useDeprecatedNextContext) {
	                context_1 = Object.create(observerOrNext);
	                context_1.unsubscribe = function () { return _this.unsubscribe(); };
	                partialObserver = {
	                    next: observerOrNext.next && bind(observerOrNext.next, context_1),
	                    error: observerOrNext.error && bind(observerOrNext.error, context_1),
	                    complete: observerOrNext.complete && bind(observerOrNext.complete, context_1),
	                };
	            }
	            else {
	                partialObserver = observerOrNext;
	            }
	        }
	        _this.destination = new ConsumerObserver(partialObserver);
	        return _this;
	    }
	    return SafeSubscriber;
	}(Subscriber));
	function handleUnhandledError(error) {
	    {
	        reportUnhandledError(error);
	    }
	}
	function defaultErrorHandler(err) {
	    throw err;
	}
	var EMPTY_OBSERVER = {
	    closed: true,
	    next: noop,
	    error: defaultErrorHandler,
	    complete: noop,
	};

	var observable = (function () { return (typeof Symbol === 'function' && Symbol.observable) || '@@observable'; })();

	function identity(x) {
	    return x;
	}

	function pipeFromArray(fns) {
	    if (fns.length === 0) {
	        return identity;
	    }
	    if (fns.length === 1) {
	        return fns[0];
	    }
	    return function piped(input) {
	        return fns.reduce(function (prev, fn) { return fn(prev); }, input);
	    };
	}

	var Observable = (function () {
	    function Observable(subscribe) {
	        if (subscribe) {
	            this._subscribe = subscribe;
	        }
	    }
	    Observable.prototype.lift = function (operator) {
	        var observable = new Observable();
	        observable.source = this;
	        observable.operator = operator;
	        return observable;
	    };
	    Observable.prototype.subscribe = function (observerOrNext, error, complete) {
	        var _this = this;
	        var subscriber = isSubscriber(observerOrNext) ? observerOrNext : new SafeSubscriber(observerOrNext, error, complete);
	        errorContext(function () {
	            var _a = _this, operator = _a.operator, source = _a.source;
	            subscriber.add(operator
	                ?
	                    operator.call(subscriber, source)
	                : source
	                    ?
	                        _this._subscribe(subscriber)
	                    :
	                        _this._trySubscribe(subscriber));
	        });
	        return subscriber;
	    };
	    Observable.prototype._trySubscribe = function (sink) {
	        try {
	            return this._subscribe(sink);
	        }
	        catch (err) {
	            sink.error(err);
	        }
	    };
	    Observable.prototype.forEach = function (next, promiseCtor) {
	        var _this = this;
	        promiseCtor = getPromiseCtor(promiseCtor);
	        return new promiseCtor(function (resolve, reject) {
	            var subscriber = new SafeSubscriber({
	                next: function (value) {
	                    try {
	                        next(value);
	                    }
	                    catch (err) {
	                        reject(err);
	                        subscriber.unsubscribe();
	                    }
	                },
	                error: reject,
	                complete: resolve,
	            });
	            _this.subscribe(subscriber);
	        });
	    };
	    Observable.prototype._subscribe = function (subscriber) {
	        var _a;
	        return (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber);
	    };
	    Observable.prototype[observable] = function () {
	        return this;
	    };
	    Observable.prototype.pipe = function () {
	        var operations = [];
	        for (var _i = 0; _i < arguments.length; _i++) {
	            operations[_i] = arguments[_i];
	        }
	        return pipeFromArray(operations)(this);
	    };
	    Observable.prototype.toPromise = function (promiseCtor) {
	        var _this = this;
	        promiseCtor = getPromiseCtor(promiseCtor);
	        return new promiseCtor(function (resolve, reject) {
	            var value;
	            _this.subscribe(function (x) { return (value = x); }, function (err) { return reject(err); }, function () { return resolve(value); });
	        });
	    };
	    Observable.create = function (subscribe) {
	        return new Observable(subscribe);
	    };
	    return Observable;
	}());
	function getPromiseCtor(promiseCtor) {
	    var _a;
	    return (_a = promiseCtor !== null && promiseCtor !== void 0 ? promiseCtor : config.Promise) !== null && _a !== void 0 ? _a : Promise;
	}
	function isObserver(value) {
	    return value && isFunction(value.next) && isFunction(value.error) && isFunction(value.complete);
	}
	function isSubscriber(value) {
	    return (value && value instanceof Subscriber) || (isObserver(value) && isSubscription(value));
	}

	var ObjectUnsubscribedError = createErrorClass(function (_super) {
	    return function ObjectUnsubscribedErrorImpl() {
	        _super(this);
	        this.name = 'ObjectUnsubscribedError';
	        this.message = 'object unsubscribed';
	    };
	});

	var Subject = (function (_super) {
	    __extends(Subject, _super);
	    function Subject() {
	        var _this = _super.call(this) || this;
	        _this.closed = false;
	        _this.currentObservers = null;
	        _this.observers = [];
	        _this.isStopped = false;
	        _this.hasError = false;
	        _this.thrownError = null;
	        return _this;
	    }
	    Subject.prototype.lift = function (operator) {
	        var subject = new AnonymousSubject(this, this);
	        subject.operator = operator;
	        return subject;
	    };
	    Subject.prototype._throwIfClosed = function () {
	        if (this.closed) {
	            throw new ObjectUnsubscribedError();
	        }
	    };
	    Subject.prototype.next = function (value) {
	        var _this = this;
	        errorContext(function () {
	            var e_1, _a;
	            _this._throwIfClosed();
	            if (!_this.isStopped) {
	                if (!_this.currentObservers) {
	                    _this.currentObservers = Array.from(_this.observers);
	                }
	                try {
	                    for (var _b = __values(_this.currentObservers), _c = _b.next(); !_c.done; _c = _b.next()) {
	                        var observer = _c.value;
	                        observer.next(value);
	                    }
	                }
	                catch (e_1_1) { e_1 = { error: e_1_1 }; }
	                finally {
	                    try {
	                        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
	                    }
	                    finally { if (e_1) throw e_1.error; }
	                }
	            }
	        });
	    };
	    Subject.prototype.error = function (err) {
	        var _this = this;
	        errorContext(function () {
	            _this._throwIfClosed();
	            if (!_this.isStopped) {
	                _this.hasError = _this.isStopped = true;
	                _this.thrownError = err;
	                var observers = _this.observers;
	                while (observers.length) {
	                    observers.shift().error(err);
	                }
	            }
	        });
	    };
	    Subject.prototype.complete = function () {
	        var _this = this;
	        errorContext(function () {
	            _this._throwIfClosed();
	            if (!_this.isStopped) {
	                _this.isStopped = true;
	                var observers = _this.observers;
	                while (observers.length) {
	                    observers.shift().complete();
	                }
	            }
	        });
	    };
	    Subject.prototype.unsubscribe = function () {
	        this.isStopped = this.closed = true;
	        this.observers = this.currentObservers = null;
	    };
	    Object.defineProperty(Subject.prototype, "observed", {
	        get: function () {
	            var _a;
	            return ((_a = this.observers) === null || _a === void 0 ? void 0 : _a.length) > 0;
	        },
	        enumerable: false,
	        configurable: true
	    });
	    Subject.prototype._trySubscribe = function (subscriber) {
	        this._throwIfClosed();
	        return _super.prototype._trySubscribe.call(this, subscriber);
	    };
	    Subject.prototype._subscribe = function (subscriber) {
	        this._throwIfClosed();
	        this._checkFinalizedStatuses(subscriber);
	        return this._innerSubscribe(subscriber);
	    };
	    Subject.prototype._innerSubscribe = function (subscriber) {
	        var _this = this;
	        var _a = this, hasError = _a.hasError, isStopped = _a.isStopped, observers = _a.observers;
	        if (hasError || isStopped) {
	            return EMPTY_SUBSCRIPTION;
	        }
	        this.currentObservers = null;
	        observers.push(subscriber);
	        return new Subscription(function () {
	            _this.currentObservers = null;
	            arrRemove(observers, subscriber);
	        });
	    };
	    Subject.prototype._checkFinalizedStatuses = function (subscriber) {
	        var _a = this, hasError = _a.hasError, thrownError = _a.thrownError, isStopped = _a.isStopped;
	        if (hasError) {
	            subscriber.error(thrownError);
	        }
	        else if (isStopped) {
	            subscriber.complete();
	        }
	    };
	    Subject.prototype.asObservable = function () {
	        var observable = new Observable();
	        observable.source = this;
	        return observable;
	    };
	    Subject.create = function (destination, source) {
	        return new AnonymousSubject(destination, source);
	    };
	    return Subject;
	}(Observable));
	var AnonymousSubject = (function (_super) {
	    __extends(AnonymousSubject, _super);
	    function AnonymousSubject(destination, source) {
	        var _this = _super.call(this) || this;
	        _this.destination = destination;
	        _this.source = source;
	        return _this;
	    }
	    AnonymousSubject.prototype.next = function (value) {
	        var _a, _b;
	        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.next) === null || _b === void 0 ? void 0 : _b.call(_a, value);
	    };
	    AnonymousSubject.prototype.error = function (err) {
	        var _a, _b;
	        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.error) === null || _b === void 0 ? void 0 : _b.call(_a, err);
	    };
	    AnonymousSubject.prototype.complete = function () {
	        var _a, _b;
	        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.complete) === null || _b === void 0 ? void 0 : _b.call(_a);
	    };
	    AnonymousSubject.prototype._subscribe = function (subscriber) {
	        var _a, _b;
	        return (_b = (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber)) !== null && _b !== void 0 ? _b : EMPTY_SUBSCRIPTION;
	    };
	    return AnonymousSubject;
	}(Subject));

	var BehaviorSubject = (function (_super) {
	    __extends(BehaviorSubject, _super);
	    function BehaviorSubject(_value) {
	        var _this = _super.call(this) || this;
	        _this._value = _value;
	        return _this;
	    }
	    Object.defineProperty(BehaviorSubject.prototype, "value", {
	        get: function () {
	            return this.getValue();
	        },
	        enumerable: false,
	        configurable: true
	    });
	    BehaviorSubject.prototype._subscribe = function (subscriber) {
	        var subscription = _super.prototype._subscribe.call(this, subscriber);
	        !subscription.closed && subscriber.next(this._value);
	        return subscription;
	    };
	    BehaviorSubject.prototype.getValue = function () {
	        var _a = this, hasError = _a.hasError, thrownError = _a.thrownError, _value = _a._value;
	        if (hasError) {
	            throw thrownError;
	        }
	        this._throwIfClosed();
	        return _value;
	    };
	    BehaviorSubject.prototype.next = function (value) {
	        _super.prototype.next.call(this, (this._value = value));
	    };
	    return BehaviorSubject;
	}(Subject));

	class s{async set(e,t){window.localStorage.setItem(e,t);}async get(e,t){let n=window.localStorage.getItem(e);return n||t}async unset(e){window.localStorage.removeItem(e);}}function a(e,t){if(window.elastosconnectivity||(window.elastosconnectivity={}),window.elastosconnectivity[e])return window.elastosconnectivity[e];{let n=t();return window.elastosconnectivity[e]=n,n}}class l{constructor(){this.storageLayer=new s;}setStorageLayer(e){this.storageLayer=e;}set(e,t,n=!1){if(n){if(!v.getActiveConnector())throw new Error("Cannot isolate stored data for active connector as no active connector is defined");e=v.getActiveConnector().name+"_"+e;}return this.storageLayer.set(e,t)}async get(e,t,n=!1){if(n){if(!v.getActiveConnector())throw new Error("Cannot isolate stored data for active connector as no active connector is defined");e=v.getActiveConnector().name+"_"+e;}return this.storageLayer.get(e,t)}async unset(e,t=!1){if(t){if(!v.getActiveConnector())throw new Error("Cannot isolate stored data for active connector as no active connector is defined");e=v.getActiveConnector().name+"_"+e;}return this.storageLayer.unset(e)}setJSON(e,t,n=!1){return this.set(e,JSON.stringify(t),n)}async getJSON(e,t,n=!1){return JSON.parse(await this.get(e,JSON.stringify(t),n))}}const c=a("storage",(()=>new l)),u=()=>{let e=16;var t,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),r=[];for(e=e||n.length,t=0;t<6;t++)r[t]=n[0|Math.random()*e];return r.join("")},d=u,p=()=>new Error("This method is not implemented in the connector. Ask the connector developer to update the implementation");class h{constructor(){}async saveAppInstanceDIDInfo(e,t,n){console.log("Saving app instance DID info for store "+e+" and did "+t),await c.set("dappsdk_appinstancedidstoreid",e,!0),await c.set("dappsdk_appinstancedidstring",t,!0),await c.set("dappsdk_appinstancedidstorepassword",n,!0);}async cleanupConnectorContext(e){await c.unset("dappsdk_appinstancedidstoreid",!0),await c.unset("dappsdk_appinstancedidstring",!0),await c.unset("dappsdk_appinstancedidstorepassword",!0);}generateRandomPassword(){return u()}static openDidStore(t){return new Promise((async n=>{try{n(await PS.open(t));}catch(e){n(null);}}))}static loadDID(e,t){return new Promise((async(n,r)=>{try{let i=await e.loadDid(t);i?n(i.getSubject()):r("Null DIDDocument loaded for did string "+e);}catch(e){r(e);}}))}static loadDIDCredentials(e,t){return new Promise((async(n,r)=>{try{let r=await e.listCredentials(t.toString()),i=[];for(let t of r)i.push(await e.loadCredential(t));n(i);}catch(e){r(e);}}))}}class f{log(...e){console.log.apply(console,e);}warn(...e){console.warn.apply(console,e);}error(...e){console.error.apply(console,e);}}class g{constructor(){this.logger=new f;}setLoggerLayer(e){this.logger=e;}log(...e){this.logger.log.apply(this.logger,e);}warn(...e){this.logger.warn.apply(this.logger,e);}error(...e){this.logger.error.apply(this.logger,e);}}const m=a("logger",(()=>new g));class y{constructor(){this.connectors=[],this.activeConnector=null,this.genericUIHandler=null,this.applicationDID=null;}async registerConnector(e){if(e){if(m.log("Registering connector with name",e.name),this.connectors.findIndex((t=>t.name===e.name))>=0)throw new Error("Connector with name "+e.name+" already exists");this.connectors.push(e);let t=await c.get("activeconnectorname",null);t==e.name&&(m.log("Reactivating previously saved connector:"+t),this.activeConnector=e);}}async unregisterConnector(e){this.activeConnector&&this.activeConnector.name==e&&this.setActiveConnector(null);let t=this.connectors.findIndex((t=>t.name===e));if(t<0)throw new Error("Connector with name "+e+" doesn't exist");this.connectors.splice(t,1);}async setActiveConnector(e){if(null==e&&this.activeConnector)await this.cleanupConnectorContext(this.activeConnector),m.log("Forgetting the currently active connector"),this.activeConnector=null;else if(null!=e){let t=this.connectors.find((t=>t.name===e));if(!t)throw new Error("Failed to set active connector. Connector "+e+" not found!");this.activeConnector&&this.activeConnector.name!==e&&await this.cleanupConnectorContext(this.activeConnector),this.activeConnector=t;}c.set("activeconnectorname",e);}async cleanupConnectorContext(e){m.log("Cleaning up connector context for: "+e.name),await(new h).cleanupConnectorContext(e);}getActiveConnector(){return "elastos"in window?window.elastos:this.activeConnector}getAvailableConnectors(){return this.connectors}setApplicationDID(e){this.applicationDID=e;}getApplicationDID(){if(!this.applicationDID)throw new Error("No application DID defined yet. Please call setApplicationDID() first.");return this.applicationDID}setGenericUIHandler(e){this.genericUIHandler=e;}}const v=a("connectivity",(()=>new y));var E,w;!function(e){e.PUBLISHED="published",e.ERROR="error",e.CANCELLED="cancelled";}(E||(E={}));class b{static async ensureActiveConnector(e,t){if(null!=v.getActiveConnector())e();else if(1==v.getAvailableConnectors().length)v.setActiveConnector(v.getAvailableConnectors()[0].name),e();else {await v.genericUIHandler.showConnectorChooser()?e():(m.warn("Cannot ensure active connector. No connector available, or user did not pick one"),t());}}}!function(e){e.MAINNET="mainnet",e.TESTNET="testnet",e.DEVNET="devnet";}(w||(w={}));class C{constructor(){this.min=1,this.max=1;}withReason(e){return this.reason=e,this}withMin(e){return this.min=e,this}withMax(e){return this.max=e,this}withNoMatchRecommendations(e){return this.noMatchRecommendations=e,this}withClaim(e){return this.claims=[e],this}withAnyOfClaims(e){return this.claims=e,this}}class D{withQuery(e){return this.query=e,this}withIssuers(e){return this.issuers=e,this}}function _(e){return (new D).withQuery(e)}function A(e,t=!1){return (new C).withReason(e).withMin(t?1:0)}function T(e){return _(`$[?(@.type.indexOf('${e}') >= 0)]`)}function S(e){return _(`$[?(@.id == "${e}" || @.id.match(/#${e}$/))]`)}function I(e,t,n=!0){return A(e,n).withAnyOfClaims([T(t)])}var P;Object.freeze({__proto__:null,get UpdateHiveVaultAddressStatus(){return E},DIDAccess:class{constructor(){this.helper=null,this.helper=new h;}async getCredentials(e){return new Promise(((t,n)=>{b.ensureActiveConnector((async()=>{if(v.getActiveConnector().getCredentials)try{let n=await v.getActiveConnector().getCredentials(e);t(n);}catch(e){n(e);}else n(p());}),(()=>{t(null);}));}))}async requestCredentials(e){return new Promise(((t,n)=>{b.ensureActiveConnector((async()=>{if(v.getActiveConnector().requestCredentials)try{let r=!1;e.nonce||(e.nonce=d(),r=!0);let i=!1;e.realm||(e.realm=d(),i=!0),e._version=2;let o=await v.getActiveConnector().requestCredentials(e);if(o){if(r&&e.nonce!==o.getProof().getNonce())return void n(new Error("Automatically generated nonce doesn't match nonce in the returned presentation"));if(i&&e.realm!==o.getProof().getRealm())return void n(new Error("Automatically generated realm doesn't match realm in the returned presentation"))}t(o);}catch(e){n(e);}else n(p());}),(()=>{t(null);}));}))}async issueCredential(e,t,n,r,i){return new Promise(((o,s)=>{b.ensureActiveConnector((async()=>{if(v.getActiveConnector().issueCredential)try{let s=await v.getActiveConnector().issueCredential(e,t,n,r,i);o(s);}catch(e){s(e);}else s(p());}),(()=>{o(null);}));}))}async importCredentials(e,t){return new Promise(((n,r)=>{b.ensureActiveConnector((async()=>{if(v.getActiveConnector().importCredentials)try{let r=await v.getActiveConnector().importCredentials(e,t);n(r);}catch(e){r(e);}else r(p());}),(()=>{n(null);}));}))}async deleteCredentials(e,t){let n;return n="string"==typeof e?[e]:e,new Promise(((e,r)=>{b.ensureActiveConnector((async()=>{if(v.getActiveConnector().deleteCredentials)try{let r=await v.getActiveConnector().deleteCredentials(n,t);e(r);}catch(e){r(e);}else r(p());}),(()=>{e(null);}));}))}async signData(e,t,n){return new Promise(((r,i)=>{b.ensureActiveConnector((async()=>{if(v.getActiveConnector().signData)try{let i=await v.getActiveConnector().signData(e,t,n);r(i);}catch(e){i(e);}else i(p());}),(()=>{r(null);}));}))}async requestPublish(){return new Promise(((e,t)=>{b.ensureActiveConnector((async()=>{if(v.getActiveConnector().requestPublish)try{let t=await v.getActiveConnector().requestPublish();e(t);}catch(e){t(e);}else t(p());}),(()=>{e(null);}));}))}async updateHiveVaultAddress(e,t){return new Promise(((n,r)=>{b.ensureActiveConnector((async()=>{if(v.getActiveConnector().updateHiveVaultAddress)try{let r=await v.getActiveConnector().updateHiveVaultAddress(e,t);n(r);}catch(e){r(e);}else r(p());}),(()=>{n(null);}));}))}importCredentialContext(e,t){return new Promise(((n,r)=>{b.ensureActiveConnector((async()=>{if(v.getActiveConnector().importCredentialContext)try{let r=await v.getActiveConnector().importCredentialContext(e,t);n(r);}catch(e){r(e);}else r(p());}),(()=>{n(null);}));}))}async generateAppIdCredential(){return new Promise(((e,t)=>{b.ensureActiveConnector((async()=>{if(v.getActiveConnector().generateAppIdCredential)try{let t=await this.getOrCreateAppInstanceDID();if(!t)return void e(null);let n=t.did;m.log("Starting to generate a new App ID credential.");let r=await v.getActiveConnector().generateAppIdCredential(n.toString(),v.getApplicationDID());await t.didStore.storeCredential(r),e(r);}catch(e){t(e);}else t(p());}),(()=>{e(null);}));}))}async generateHiveBackupCredential(e,t,n){return new Promise(((r,i)=>{b.ensureActiveConnector((async()=>{if(v.getActiveConnector().generateHiveBackupCredential)try{let i=await v.getActiveConnector().generateHiveBackupCredential(e,t,n);r(i);}catch(e){i(e);}else i(p());}),(()=>{r(null);}));}))}async getExistingAppIdentityCredential(){m.log("Trying to get an existing app ID credential from storage");let e=await this.getOrCreateAppInstanceDID();if(!e)return null;let t=e.did;m.log("App Instance DID:",t);let n=await e.didStore.loadCredential(t.toString()+"#app-id-credential");if(n){if(moment(await n.getExpirationDate()).isBefore(moment().subtract(1,"hours")))return m.log("Existing credential is expired or almost expired - renewing it"),null;m.log("Returning existing app id credential found in app's local storage");}return n}async getOrCreateAppInstanceDID(){let e=null,t=null,n=null;return m.log("Getting or creating app instance DID"),new Promise(((r,i)=>{b.ensureActiveConnector((async()=>{try{let i=await this.getExistingAppInstanceDIDInfo();if(i&&(e=await h.openDidStore(i.storeId),e))try{t=await h.loadDID(e,i.didString),n=i.storePassword;}catch(e){m.error(e);}if(!e||!t){m.log("No app instance DID found. Creating a new one");let r=await this.createNewAppInstanceDID();e=r.didStore,t=r.did,n=r.storePassword;}await h.loadDIDCredentials(e,t),r({did:t,didStore:e,storePassword:n});}catch(e){i(e);}}),(()=>{r(null);}));}))}async getExistingAppInstanceDIDInfo(){let e=await c.get("dappsdk_appinstancedidstoreid",null,!0),t=await c.get("dappsdk_appinstancedidstring",null,!0),n=await c.get("dappsdk_appinstancedidstorepassword",null,!0);return e&&t?{storeId:e,didString:t,storePassword:n}:null}fastCreateDID(r){return m.log("Fast DID creation with language "+r),new Promise((async(i,o)=>{try{let o=await ix.getInstance(r).generate(),s=u(),a=await PS.open(s),l=this.helper.generateRandomPassword(),c=sS.createFromMnemonic(o,null,a,l);i({didStoreId:s,didStore:a,did:(await c.newDid(l)).getSubject(),storePassword:l});}catch(e){o(e);}}))}async createNewAppInstanceDID(){let e=await this.fastCreateDID(ix.ENGLISH);return await this.helper.saveAppInstanceDIDInfo(e.didStoreId,e.did.toString(),e.storePassword),{didStore:e.didStore,did:e.did,storePassword:e.storePassword}}},DIDHelper:h,get ElastosIODIDAdapterMode(){return w},ElastosIODIDAdapter:class extends hP{constructor(e){let t=null;switch(e){case w.MAINNET:t="https://api.elastos.io/eid";break;case w.TESTNET:t="https://api-testnet.elastos.io/eid";break;case w.DEVNET:t="https://api-testnet.elastos.io/newid";break;default:throw new Error("Unhandled ElastosIO DID adapter mode: "+e)}console.log("Using ElastosIO DID adapter with resolver url:",t),super(t);}},ClaimDescription:C,Claim:D,claimWithJsonPathQuery:_,claimDescription:A,typeClaim:T,idClaim:S,simpleIdClaim:function(e,t,n=!0){return A(e,n).withAnyOfClaims([S(t)])},simpleTypeClaim:I,standardNameClaim:function(e,t=!0){return I(e,"NameCredential",t)},standardEmailClaim:function(e,t=!0){return I(e,"EmailCredential",t)}});!function(e){e.Vault=class{getDatabase(){}},e.errorOfType=function(e,t){return !1};}(P||(P={}));class k{}class O{}class N extends O{static fromJson(e){if(!e)return null;let t=new N;return t.key=e.key,t.creationDate=e.creationDate,t.modificationDate=e.modificationDate,t.deletionDate=e.deletionDate,t.data=e.data,t}}var R=Object.freeze({__proto__:null,HiveDataSync:class{constructor(e,t=!1){if(this.userVault=e,this.showDebugLogs=t,this.contexts=[],!e)throw new Error("The backup restore helper can't be used without a user vault. Please make sure the vault was correctly initialized.");this.userVault=e,this.showDebugLogs=t;}addSyncContext(e,t,n,r){let i=new k;i.name=e,i.onRemoteInsertion=t,i.onRemoteModification=n,i.onRemoteDeletion=r,this.contexts.push(i);}async upsertDatabaseEntry(e,t,n){await this.upsertDatabaseEntryLocally(e,t,n),await this.sync();}async upsertDatabaseEntryLocally(e,t,n){let r=(new Date).getTime(),i=await this.loadLocalDatabaseEntry(e,t),o=null;i?(o=i,o.data=n,o.modificationDate=r,o.deletionDate=null,this.logDebug("upsertDatabaseEntryLocally() - updating existing entry",o)):(o={key:t,creationDate:r,modificationDate:r,deletionDate:null,syncDate:null,data:n},this.logDebug("upsertDatabaseEntryLocally() - creating new entry",o)),await this.saveLocalDatabaseEntry(e,o);}async deleteDatabaseEntry(e,t,n=!1){n?await this.deleteDatabaseEntryLocallyForReal(e,t):(await this.deleteDatabaseEntryLocallyMarkOnly(e,t),await this.sync());}async getDatabaseEntry(e,t){return this.loadLocalDatabaseEntry(e,t)}async loadLocalDatabaseEntry(e,t){let n=await this.loadSettingsEntry(e+"_"+t);return n?N.fromJson(n):null}async saveLocalDatabaseEntry(e,t){await this.addKeyToSavedEntriesList(e,t.key),await this.saveSettingsEntry(e+"_"+t.key,t);}async deleteDatabaseEntryLocallyMarkOnly(e,t){let n=await this.loadLocalDatabaseEntry(e,t);if(n){let t=(new Date).getTime();n.deletionDate=t,n.modificationDate=t,await this.saveLocalDatabaseEntry(e,n),this.logDebug("deleteDatabaseEntryLocallyMarkOnly() - marking entry as deleted",n);}else this.logWarn("Tried to mark entry as deleted but entry can't be found in local model!",t);}async deleteDatabaseEntryLocallyForReal(e,t){this.logDebug("Really deleting local database entry",e,t),await this.saveSettingsEntry(e+"_"+t,null),await this.removeKeyFromSavedEntriesList(e,t);}async upsertDatabaseEntryOnVault(e,t){let n={key:t.key,creationDate:t.creationDate,modificationDate:t.modificationDate,deletionDate:t.deletionDate,data:t.data};await this.getVaultDatabaseEntry(e,t.key)?(this.logDebug("Updating vault entry: ",e,t.key,n),await this.userVault.getDatabase().updateOne(this.getCollectionNameForContext(e),{key:t.key},{$set:n})):(this.logDebug("Inserting new vault entry: ",e,t.key,n),await this.userVault.getDatabase().insertOne(this.getCollectionNameForContext(e),n));}async getVaultDatabaseEntry(e,t){let n=this.getCollectionNameForContext(e);this.logDebug("Fetching vault entry with key",t,"in collection",n);let r=await this.userVault.getDatabase().findOne(n,{key:t});return this.logDebug("Fetched vault entry:",r),r}async createContextCollection(e){let t=this.getCollectionNameForContext(e);this.logDebug("Making sure the collection "+t+" exists"),await this.userVault.getDatabase().createCollection(t);}async sync(e=!0){this.log("Synchronization starting...");for(let t of this.contexts){let n;this.log("Synchronizing context:",t),await this.createContextCollection(t.name),n=e?await this.getVaultModifiedEntriesSinceLastFullLocalSync(t.name):await this.getAllVaultEntries(t.name);for(let e of n){let n=await this.loadLocalDatabaseEntry(t.name,e.key);if(n){if(n.modificationDate<e.modificationDate)if(e.deletionDate){if(this.logDebug("Entry found on the vault and locally, and deleted on the vault. Calling onRemoteDeletion()"),!await t.onRemoteDeletion(e))return this.logDebug("onRemoteDeletion() has failed on the app side. Stopping synchronization. Will retry later",t.name,e.key),!1;{let r=(new Date).getTime();n.modificationDate=e.modificationDate,n.deletionDate=e.deletionDate,n.data=e.data,n.syncDate=r,await this.saveLocalDatabaseEntry(t.name,n);}}else {if(this.logDebug("Entry found on the vault and locally, and modified more recently on the vault. Calling onRemoteModification()"),!await t.onRemoteModification(e))return this.logDebug("onRemoteModification() has failed on the app side. Stopping synchronization. Will retry later",t.name,e.key),!1;{let r=(new Date).getTime();n.modificationDate=e.modificationDate,n.data=e.data,n.syncDate=r,await this.saveLocalDatabaseEntry(t.name,n);}}}else if(!e.deletionDate){if(this.logDebug("Entry found on the vault but not existing locally. Calling onRemoteInsertion()"),!await t.onRemoteInsertion(e))return this.logDebug("onRemoteInsertion() has failed on the app side. Stopping synchronization. Will retry later",t.name,e.key),!1;{let n={key:e.key,creationDate:e.creationDate,modificationDate:e.modificationDate,deletionDate:null,syncDate:(new Date).getTime(),data:e.data};this.logDebug("After onRemoteInsertion() - creating new entry",n),await this.saveLocalDatabaseEntry(t.name,n);}}}let r=await this.getSavedEntriesList(t.name);for(let e of r){let n=await this.loadLocalDatabaseEntry(t.name,e);if(this.logDebug("Checking if local entry needs to be synced with vault",n),n)if(!n.syncDate||n.syncDate<n.modificationDate){let r=await this.getVaultDatabaseEntry(t.name,e);!r||n.modificationDate>r.modificationDate?(this.logDebug("Local entry has modifications, sending changes to the vault"),await this.upsertDatabaseEntryOnVault(t.name,n),n.deletionDate?(this.logDebug("Local entry is deleted and was synced to vault. Now deleting permanently"),await this.deleteDatabaseEntryLocallyForReal(t.name,n.key)):(this.logDebug("Local entry is not deleted, saving sync date"),n.syncDate=(new Date).getTime(),await this.saveLocalDatabaseEntry(t.name,n))):this.logDebug("Up to date (local modification not more recent than vault modification)",n);}else this.logDebug("Already synchronized (no local modification since last sync)",n);else this.logWarn("Local entry with key "+e+" exists in saved entries list but the entry itself can't be found. This is an abnormal state. Local entry is skipped.");}this.saveLastFullSuccessfulSyncDate();}return !0}async wipeLocalContextData(e){this.logDebug("Wiping local context data for context",e);let t=await this.getSavedEntriesList(e);for(let n of t)await this.deleteDatabaseEntryLocallyForReal(e,n);await this.clearLastFullSuccessfulSyncDate();}async getVaultModifiedEntriesSinceLastFullLocalSync(e){let t=await this.getLastFullSuccessfulSyncDate();this.logDebug("Fetching vault modified entries since last full local sync",t);let n=this.getCollectionNameForContext(e),r={};t&&(r.modificationDate={$gt:t});try{let e=await this.userVault.getDatabase().findMany(n,r);return this.logDebug("Received vault modified entries since last full local sync:",e),e}catch(e){if(P.errorOfType(e,"COLLECTION_NOT_FOUND"))return this.logDebug("Backup collection does not exist on the vault yet, thus no modified entries returned"),[];throw e}}async getAllVaultEntries(e){this.logDebug("Fetching all vault entries for context",e);let t=this.getCollectionNameForContext(e);try{let e=await this.userVault.getDatabase().findMany(t,{});return this.logDebug("Received vault entries:",e),e}catch(e){let t=e;if(t.getType&&"COLLECTION_NOT_FOUND"==t.getType())return this.logDebug("Backup collection does not exist on the vault yet, thus no entries returned"),[];throw e}}async getLastFullSuccessfulSyncDate(){return await this.loadSettingsEntry("lastfullsyncdate")}async saveLastFullSuccessfulSyncDate(){return this.saveSettingsEntry("lastfullsyncdate",(new Date).getTime())}async clearLastFullSuccessfulSyncDate(){return this.logDebug("Clearing last full sync date"),this.saveSettingsEntry("lastfullsyncdate",null)}getCollectionNameForContext(e){return "backup_"+e}async addKeyToSavedEntriesList(e,t){let n=e+"_index",r=await this.getSavedEntriesList(e);r.indexOf(t)<0&&r.push(t),await this.saveSettingsEntry(n,r);}async removeKeyFromSavedEntriesList(e,t){let n=e+"_index",r=await this.getSavedEntriesList(e),i=r.indexOf(t);i>=0&&r.splice(i,1),await this.saveSettingsEntry(n,r);}async getSavedEntriesList(e){let t=e+"_index";return await this.loadSettingsEntry(t)||[]}saveSettingsEntry(e,t){return c.set(e,t)}loadSettingsEntry(e){return c.get(e,null)}log(e,...t){m.log("BackupRestore: ",e,t);}logWarn(e,...t){m.warn("BackupRestore: ",e,...t);}logDebug(e,...t){this.showDebugLogs&&m.log("BackupRestore[debug]: ",e,...t);}},SyncContext:k,BackupRestoreEntry:O,LocalBackupRestoreEntry:N});Object.freeze({__proto__:null,HiveAccess:class{changeHiveProvider(){}},AuthHelper:class{constructor(){}},Utils:class{},DataSync:R});var x=Object.freeze({__proto__:null});Object.freeze({__proto__:null,Connectors:x});function U(){}const F=e=>e;function G(e){return e()}function j(){return Object.create(null)}function V(e){e.forEach(G);}function B(e){return "function"==typeof e}function z(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function W(e,...t){if(null==e)return U;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function q(e,t,n){e.$$.on_destroy.push(W(t,n));}function X(e,t,n,r){return e[1]&&r?function(e,t){for(const n in t)e[n]=t[n];return e}(n.ctx.slice(),e[1](r(t))):n.ctx}function H(e,t,n,r,i,o,s){const a=function(e,t,n,r){if(e[2]&&r){const i=e[2](r(n));if(void 0===t.dirty)return i;if("object"==typeof i){const e=[],n=Math.max(t.dirty.length,i.length);for(let r=0;r<n;r+=1)e[r]=t.dirty[r]|i[r];return e}return t.dirty|i}return t.dirty}(t,r,i,o);if(a){const i=X(t,n,r,s);e.p(i,a);}}const K="undefined"!=typeof window;let Y=K?()=>window.performance.now():()=>Date.now(),Z=K?e=>requestAnimationFrame(e):U;const J=new Set;function Q(e){J.forEach((t=>{t.c(e)||(J.delete(t),t.f());})),0!==J.size&&Z(Q);}function ee(e,t){e.appendChild(t);}function te(e,t,n){e.insertBefore(t,n||null);}function ne(e){e.parentNode.removeChild(e);}function re(e){return document.createElement(e)}function ie(e){return document.createTextNode(e)}function oe(){return ie(" ")}function se(){return ie("")}function ae(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function le(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n);}function ce(e,t,n){t in e?e[t]="boolean"==typeof e[t]&&""===n||n:le(e,t,n);}function ue(e,t){t=""+t,e.wholeText!==t&&(e.data=t);}function de(e,t,n){e.classList[n?"add":"remove"](t);}function pe(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}const he=new Set;let fe,ge=0;function me(e,t,n,r,i,o,s,a=0){const l=16.666/r;let c="{\n";for(let e=0;e<=1;e+=l){const r=t+(n-t)*o(e);c+=100*e+`%{${s(r,1-r)}}\n`;}const u=c+`100% {${s(n,1-n)}}\n}`,d=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${a}`,p=e.ownerDocument;he.add(p);const h=p.__svelte_stylesheet||(p.__svelte_stylesheet=p.head.appendChild(re("style")).sheet),f=p.__svelte_rules||(p.__svelte_rules={});f[d]||(f[d]=!0,h.insertRule(`@keyframes ${d} ${u}`,h.cssRules.length));const g=e.style.animation||"";return e.style.animation=`${g?`${g}, `:""}${d} ${r}ms linear ${i}ms 1 both`,ge+=1,d}function ye(e,t){const n=(e.style.animation||"").split(", "),r=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),i=n.length-r.length;i&&(e.style.animation=r.join(", "),ge-=i,ge||Z((()=>{ge||(he.forEach((e=>{const t=e.__svelte_stylesheet;let n=t.cssRules.length;for(;n--;)t.deleteRule(n);e.__svelte_rules={};})),he.clear());})));}function ve(e){fe=e;}function Ee(){if(!fe)throw new Error("Function called outside component initialization");return fe}function we(e,t){Ee().$$.context.set(e,t);}const be=[],Ce=[],De=[],_e=[],Ae=Promise.resolve();let Te=!1;function Se(e){De.push(e);}let Ie=!1;const Pe=new Set;function Le(){if(!Ie){Ie=!0;do{for(let e=0;e<be.length;e+=1){const t=be[e];ve(t),ke(t.$$);}for(ve(null),be.length=0;Ce.length;)Ce.pop()();for(let e=0;e<De.length;e+=1){const t=De[e];Pe.has(t)||(Pe.add(t),t());}De.length=0;}while(be.length);for(;_e.length;)_e.pop()();Te=!1,Ie=!1,Pe.clear();}}function ke(e){if(null!==e.fragment){e.update(),V(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Se);}}let Oe;function Ne(e,t,n){e.dispatchEvent(pe(`${t?"intro":"outro"}${n}`));}const Re=new Set;let Me;function xe(){Me={r:0,c:[],p:Me};}function $e(){Me.r||V(Me.c),Me=Me.p;}function Ue(e,t){e&&e.i&&(Re.delete(e),e.i(t));}function Fe(e,t,n,r){if(e&&e.o){if(Re.has(e))return;Re.add(e),Me.c.push((()=>{Re.delete(e),r&&(n&&e.d(1),r());})),e.o(t);}}const Ge={duration:0};function je(e,t,n,r){let i=t(e,n),o=r?0:1,s=null,a=null,l=null;function c(){l&&ye(e,l);}function u(e,t){const n=e.b-o;return t*=Math.abs(n),{a:o,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function d(t){const{delay:n=0,duration:r=300,easing:d=F,tick:p=U,css:h}=i||Ge,f={start:Y()+n,b:t};t||(f.group=Me,Me.r+=1),s||a?a=f:(h&&(c(),l=me(e,o,t,r,n,d,h)),t&&p(0,1),s=u(f,r),Se((()=>Ne(e,t,"start"))),function(e){0===J.size&&Z(Q),new Promise((n=>{J.add({c:e,f:n});}));}((t=>{if(a&&t>a.start&&(s=u(a,r),a=null,Ne(e,s.b,"start"),h&&(c(),l=me(e,o,s.b,s.duration,0,d,i.css))),s)if(t>=s.end)p(o=s.b,1-o),Ne(e,s.b,"end"),a||(s.b?c():--s.group.r||V(s.group.c)),s=null;else if(t>=s.start){const e=t-s.start;o=s.a+s.d*d(e/s.duration),p(o,1-o);}return !(!s&&!a)})));}return {run(e){B(i)?(Oe||(Oe=Promise.resolve(),Oe.then((()=>{Oe=null;}))),Oe).then((()=>{i=i(),d(e);})):d(e);},end(){c(),s=a=null;}}}function Ve(e){e&&e.c();}function Be(e,t,n,r){const{fragment:i,on_mount:o,on_destroy:s,after_update:a}=e.$$;i&&i.m(t,n),r||Se((()=>{const t=o.map(G).filter(B);s?s.push(...t):V(t),e.$$.on_mount=[];})),a.forEach(Se);}function ze(e,t){const n=e.$$;null!==n.fragment&&(V(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[]);}function We(e,t){-1===e.$$.dirty[0]&&(be.push(e),Te||(Te=!0,Ae.then(Le)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31;}function qe(e,t,n,r,i,o,s=[-1]){const a=fe;ve(e);const l=e.$$={fragment:null,ctx:null,props:o,update:U,not_equal:i,bound:j(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:t.context||[]),callbacks:j(),dirty:s,skip_bound:!1};let c=!1;if(l.ctx=n?n(e,t.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return l.ctx&&i(l.ctx[t],l.ctx[t]=o)&&(!l.skip_bound&&l.bound[t]&&l.bound[t](o),c&&We(e,t)),n})):[],l.update(),c=!0,V(l.before_update),l.fragment=!!r&&r(l.ctx),t.target){if(t.hydrate){const e=function(e){return Array.from(e.childNodes)}(t.target);l.fragment&&l.fragment.l(e),e.forEach(ne);}else l.fragment&&l.fragment.c();t.intro&&Ue(e.$$.fragment),Be(e,t.target,t.anchor,t.customElement),Le();}ve(a);}class Xe{$destroy(){ze(this,1),this.$destroy=U;}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1);}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1);}}const He=[];function Ke(e,t=U){let n;const r=[];function i(t){if(z(e,t)&&(e=t,n)){const t=!He.length;for(let t=0;t<r.length;t+=1){const n=r[t];n[1](),He.push(n,e);}if(t){for(let e=0;e<He.length;e+=2)He[e][0](He[e+1]);He.length=0;}}}return {set:i,update:function(t){i(t(e));},subscribe:function(o,s=U){const a=[o,s];return r.push(a),1===r.length&&(n=t(i)||U),o(e),()=>{const e=r.indexOf(a);-1!==e&&r.splice(e,1),0===r.length&&(n(),n=null);}}}}function Ye(e,t,n){const r=!Array.isArray(e),i=r?[e]:e,o=t.length<2;return {subscribe:Ke(n,(e=>{let n=!1;const s=[];let a=0,l=U;const c=()=>{if(a)return;l();const n=t(r?s[0]:s,e);o?e(n):l=B(n)?n:U;},u=i.map(((e,t)=>W(e,(e=>{s[t]=e,a&=~(1<<t),n&&c();}),(()=>{a|=1<<t;}))));return n=!0,c(),function(){V(u),l();}})).subscribe}}const Ze=Ke(null);function Je(e,{delay:t=0,duration:n=400,easing:r=F}={}){const i=+getComputedStyle(e).opacity;return {delay:t,duration:n,easing:r,css:e=>"opacity: "+e*i}}class Qe{constructor(){this.darkMode=!1;}enableDarkMode(e){this.darkMode=e;}}const et=a("theme",(()=>new Qe));function tt(e){let t,n,r,i,o,s,a,l,c,u,d,p=e[1].closeButton&&nt(e);var h=e[2];return h&&(s=new h({})),{c(){t=re("div"),n=re("div"),r=re("div"),p&&p.c(),i=oe(),o=re("div"),s&&Ve(s.$$.fragment),le(o,"class","content svelte-kqf8ju"),le(o,"style",e[13]),le(r,"class","window svelte-kqf8ju"),le(r,"role","dialog"),le(r,"aria-modal","true"),le(r,"style",e[12]),de(r,"dark-mode",et.darkMode),le(n,"class","window-wrap svelte-kqf8ju"),le(n,"style",e[11]),le(t,"class","bg svelte-kqf8ju"),le(t,"style",e[10]);},m(a,l){te(a,t,l),ee(t,n),ee(n,r),p&&p.m(r,null),ee(r,i),ee(r,o),s&&Be(s,o,null),e[39](r),e[40](n),e[41](t),c=!0,u||(d=[ae(r,"introstart",(function(){B(e[6])&&e[6].apply(this,arguments);})),ae(r,"outrostart",(function(){B(e[7])&&e[7].apply(this,arguments);})),ae(r,"introend",(function(){B(e[8])&&e[8].apply(this,arguments);})),ae(r,"outroend",(function(){B(e[9])&&e[9].apply(this,arguments);})),ae(t,"click",e[19])],u=!0);},p(a,l){if((e=a)[1].closeButton?p?(p.p(e,l),2&l[0]&&Ue(p,1)):(p=nt(e),p.c(),Ue(p,1),p.m(r,i)):p&&(xe(),Fe(p,1,1,(()=>{p=null;})),$e()),h!==(h=e[2])){if(s){xe();const e=s;Fe(e.$$.fragment,1,0,(()=>{ze(e,1);})),$e();}h?(s=new h({}),Ve(s.$$.fragment),Ue(s.$$.fragment,1),Be(s,o,null)):s=null;}(!c||8192&l[0])&&le(o,"style",e[13]),(!c||4096&l[0])&&le(r,"style",e[12]),(!c||2048&l[0])&&le(n,"style",e[11]),(!c||1024&l[0])&&le(t,"style",e[10]);},i(n){c||(Ue(p),s&&Ue(s.$$.fragment,n),Se((()=>{a||(a=je(r,e[16],e[1].transitionWindowProps,!0)),a.run(1);})),Se((()=>{l||(l=je(t,e[15],e[1].transitionBgProps,!0)),l.run(1);})),c=!0);},o(n){Fe(p),s&&Fe(s.$$.fragment,n),a||(a=je(r,e[16],e[1].transitionWindowProps,!1)),a.run(0),l||(l=je(t,e[15],e[1].transitionBgProps,!1)),l.run(0),c=!1;},d(n){n&&ne(t),p&&p.d(),s&&ze(s),e[39](null),n&&a&&a.end(),e[40](null),e[41](null),n&&l&&l.end(),u=!1,V(d);}}}function nt(e){let t,n,r,i,o;const s=[it,rt],a=[];function l(e,n){return 2&n[0]&&(t=!!e[17](e[1].closeButton)),t?0:1}return n=l(e,[-1]),r=a[n]=s[n](e),{c(){r.c(),i=se();},m(e,t){a[n].m(e,t),te(e,i,t),o=!0;},p(e,t){let o=n;n=l(e,t),n===o?a[n].p(e,t):(xe(),Fe(a[o],1,1,(()=>{a[o]=null;})),$e(),r=a[n],r?r.p(e,t):(r=a[n]=s[n](e),r.c()),Ue(r,1),r.m(i.parentNode,i));},i(e){o||(Ue(r),o=!0);},o(e){Fe(r),o=!1;},d(e){a[n].d(e),e&&ne(i);}}}function rt(e){let t,n,r;return {c(){t=re("button"),le(t,"class","close svelte-kqf8ju"),le(t,"style",e[14]);},m(i,o){te(i,t,o),n||(r=ae(t,"click",e[0]),n=!0);},p(e,n){16384&n[0]&&le(t,"style",e[14]);},i:U,o:U,d(e){e&&ne(t),n=!1,r();}}}function it(e){let t,n,r;var i=e[1].closeButton;function o(e){return {props:{onClose:e[0]}}}return i&&(t=new i(o(e))),{c(){t&&Ve(t.$$.fragment),n=se();},m(e,i){t&&Be(t,e,i),te(e,n,i),r=!0;},p(e,r){if(i!==(i=e[1].closeButton)){if(t){xe();const e=t;Fe(e.$$.fragment,1,0,(()=>{ze(e,1);})),$e();}i?(t=new i(o(e)),Ve(t.$$.fragment),Ue(t.$$.fragment,1),Be(t,n.parentNode,n)):t=null;}},i(e){r||(t&&Ue(t.$$.fragment,e),r=!0);},o(e){t&&Fe(t.$$.fragment,e),r=!1;},d(e){e&&ne(n),t&&ze(t,e);}}}function ot(e){let t,n,r,i,o=e[2]&&tt(e);const s=e[38].default,a=function(e,t,n,r){if(e){const i=X(e,t,n,r);return e[0](i)}}(s,e,e[37],null);return {c(){o&&o.c(),t=oe(),a&&a.c();},m(s,l){o&&o.m(s,l),te(s,t,l),a&&a.m(s,l),n=!0,r||(i=ae(window,"keydown",e[18]),r=!0);},p(e,r){e[2]?o?(o.p(e,r),4&r[0]&&Ue(o,1)):(o=tt(e),o.c(),Ue(o,1),o.m(t.parentNode,t)):o&&(xe(),Fe(o,1,1,(()=>{o=null;})),$e()),a&&a.p&&(!n||64&r[1])&&H(a,s,e,e[37],r,null,null);},i(e){n||(Ue(o),Ue(a,e),n=!0);},o(e){Fe(o),Fe(a,e),n=!1;},d(e){o&&o.d(e),e&&ne(t),a&&a.d(e),r=!1,i();}}}function st(e,t={}){return function(n){return new e({...n,props:{...t,...n.props}})}}function at(e,t,n){let r,i,o,s,a,l,c,{$$slots:u={},$$scope:d}=t;const p=function(){const e=Ee();return (t,n)=>{const r=e.$$.callbacks[t];if(r){const i=pe(t,n);r.slice().forEach((t=>{t.call(e,i);}));}}}(),h=we;let{show:f=null}=t,{key:g="simple-modal"}=t,{closeButton:m=!0}=t,{closeOnEsc:y=!0}=t,{closeOnOuterClick:v=!0}=t,{styleBg:E={top:0,left:0}}=t,{styleWindowWrap:w={}}=t,{styleWindow:b={}}=t,{styleContent:C={}}=t,{styleCloseButton:D={}}=t,{setContext:_=h}=t,{transitionBg:A=Je}=t,{transitionBgProps:T={duration:250}}=t,{transitionWindow:S=A}=t,{transitionWindowProps:I=T}=t;const P={closeButton:m,closeOnEsc:y,closeOnOuterClick:v,styleBg:E,styleWindowWrap:w,styleWindow:b,styleContent:C,styleCloseButton:D,transitionBg:A,transitionBgProps:T,transitionWindow:S,transitionWindowProps:I};let L,k,O,N=Object.assign({},P),R=null;const M=e=>Object.keys(e).reduce(((t,n)=>`${t}; ${(e=>e.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase())(n)}: ${e[n]}`),""),x=e=>!!(e&&e.constructor&&e.call&&e.apply),$=()=>{};let U=$,F=$,G=$,j=$,V={};const B=(e,t={},r={})=>{n(2,R=st(e,t)),n(1,N=Object.assign(Object.assign({},P),r)),n(6,U=()=>{V.onOpen&&V.onOpen(),p("opening");}),n(7,F=()=>{V.onClose&&V.onClose(),p("closing");}),n(8,G=()=>{V.onOpened&&V.onOpened(),p("opened");}),n(9,j=()=>{V.onClosed&&V.onClosed(),p("closed");});},z=(e={})=>{n(7,F=e.onClose||F),n(9,j=e.onClosed||j),n(2,R=null);};return _(g,{open:B,close:z}),e.$$set=e=>{"show"in e&&n(20,f=e.show),"key"in e&&n(21,g=e.key),"closeButton"in e&&n(22,m=e.closeButton),"closeOnEsc"in e&&n(23,y=e.closeOnEsc),"closeOnOuterClick"in e&&n(24,v=e.closeOnOuterClick),"styleBg"in e&&n(25,E=e.styleBg),"styleWindowWrap"in e&&n(26,w=e.styleWindowWrap),"styleWindow"in e&&n(27,b=e.styleWindow),"styleContent"in e&&n(28,C=e.styleContent),"styleCloseButton"in e&&n(29,D=e.styleCloseButton),"setContext"in e&&n(30,_=e.setContext),"transitionBg"in e&&n(31,A=e.transitionBg),"transitionBgProps"in e&&n(32,T=e.transitionBgProps),"transitionWindow"in e&&n(33,S=e.transitionWindow),"transitionWindowProps"in e&&n(34,I=e.transitionWindowProps),"$$scope"in e&&n(37,d=e.$$scope);},e.$$.update=()=>{2&e.$$.dirty[0]&&n(10,r=M(N.styleBg)),2&e.$$.dirty[0]&&n(11,i=M(N.styleWindowWrap)),2&e.$$.dirty[0]&&n(12,o=M(N.styleWindow)),2&e.$$.dirty[0]&&n(13,s=M(N.styleContent)),2&e.$$.dirty[0]&&n(14,a=M(N.styleCloseButton)),2&e.$$.dirty[0]&&n(15,l=N.transitionBg),2&e.$$.dirty[0]&&n(16,c=N.transitionWindow),1048576&e.$$.dirty[0]&&(x(f)?B(f):z());},[z,N,R,L,k,O,U,F,G,j,r,i,o,s,a,l,c,x,e=>{N.closeOnEsc&&R&&"Escape"===e.key&&(e.preventDefault(),z()),R&&e.key;},e=>{!N.closeOnOuterClick||e.target!==L&&e.target!==k||(e.preventDefault(),z());},f,g,m,y,v,E,w,b,C,D,_,A,T,S,I,e=>{V=e;},B,d,u,function(e){Ce[e?"unshift":"push"]((()=>{O=e,n(5,O);}));},function(e){Ce[e?"unshift":"push"]((()=>{k=e,n(4,k);}));},function(e){Ce[e?"unshift":"push"]((()=>{L=e,n(3,L);}));}]}class lt extends Xe{constructor(e){super(),qe(this,e,at,ot,z,{show:20,key:21,closeButton:22,closeOnEsc:23,closeOnOuterClick:24,styleBg:25,styleWindowWrap:26,styleWindow:27,styleContent:28,styleCloseButton:29,setContext:30,transitionBg:31,transitionBgProps:32,transitionWindow:33,transitionWindowProps:34,setCallback:35,open:36,close:0},[-1,-1]);}get setCallback(){return this.$$.ctx[35]}get open(){return this.$$.ctx[36]}get close(){return this.$$.ctx[0]}}function ct(e){let t,n,r=Ze&&function(e){let t,n,r={show:e[1]};return t=new lt({props:r}),e[4](t),{c(){Ve(t.$$.fragment);},m(e,r){Be(t,e,r),n=!0;},p(e,n){const r={};2&n&&(r.show=e[1]),t.$set(r);},i(e){n||(Ue(t.$$.fragment,e),n=!0);},o(e){Fe(t.$$.fragment,e),n=!1;},d(n){e[4](null),ze(t,n);}}}(e);return {c(){r&&r.c(),t=se();},m(e,i){r&&r.m(e,i),te(e,t,i),n=!0;},p(e,[t]){Ze&&r.p(e,t);},i(e){n||(Ue(r),n=!0);},o(e){Fe(r),n=!1;},d(e){r&&r.d(e),e&&ne(t);}}}function ut(e,t,n){let r,i;return q(e,Ze,(e=>n(1,r=e))),[i,r,function(e,t,n){Ze.set(st(e,t)),i.setCallback(n||{});},function(){i.close();},function(e){Ce[e?"unshift":"push"]((()=>{i=e,n(0,i);}));}]}class dt extends Xe{constructor(e){super(),qe(this,e,ut,ct,z,{show:2,close:3});}get show(){return this.$$.ctx[2]}get close(){return this.$$.ctx[3]}}class pt{constructor(){this.genericModalContainer=new dt({target:document.body});}getModal(){return this.genericModalContainer}}const ht=a("modal",(()=>new pt));var ft=function(e){return function(e){return !!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return "[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===gt}(e)}(e)};var gt="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function mt(e,t){return !1!==t.clone&&t.isMergeableObject(e)?bt((n=e,Array.isArray(n)?[]:{}),e,t):e;var n;}function yt(e,t,n){return e.concat(t).map((function(e){return mt(e,n)}))}function vt(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]}(e))}function Et(e,t){try{return t in e}catch(e){return !1}}function wt(e,t,n){var r={};return n.isMergeableObject(e)&&vt(e).forEach((function(t){r[t]=mt(e[t],n);})),vt(t).forEach((function(i){(function(e,t){return Et(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,i)||(Et(e,i)&&n.isMergeableObject(t[i])?r[i]=function(e,t){if(!t.customMerge)return bt;var n=t.customMerge(e);return "function"==typeof n?n:bt}(i,n)(e[i],t[i],n):r[i]=mt(t[i],n));})),r}function bt(e,t,n){(n=n||{}).arrayMerge=n.arrayMerge||yt,n.isMergeableObject=n.isMergeableObject||ft,n.cloneUnlessOtherwiseSpecified=mt;var r=Array.isArray(t);return r===Array.isArray(e)?r?n.arrayMerge(e,t,n):wt(e,t,n):mt(t,n)}bt.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return bt(e,n,t)}),{})};var Ct=bt,Dt=function(e,t){return (Dt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t;}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);})(e,t)};function _t(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e;}Dt(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n);}var At,Tt,St,It=function(){return (It=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function Pt(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function Lt(e){return e.type===Tt.literal}function kt(e){return e.type===Tt.argument}function Ot(e){return e.type===Tt.number}function Nt(e){return e.type===Tt.date}function Rt(e){return e.type===Tt.time}function Mt(e){return e.type===Tt.select}function xt(e){return e.type===Tt.plural}function $t(e){return e.type===Tt.pound}function Ut(e){return e.type===Tt.tag}function Ft(e){return !(!e||"object"!=typeof e||e.type!==St.number)}function Gt(e){return !(!e||"object"!=typeof e||e.type!==St.dateTime)}!function(e){e[e.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",e[e.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",e[e.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",e[e.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",e[e.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",e[e.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",e[e.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",e[e.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",e[e.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",e[e.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",e[e.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",e[e.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",e[e.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",e[e.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",e[e.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",e[e.INVALID_TAG=23]="INVALID_TAG",e[e.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",e[e.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",e[e.UNCLOSED_TAG=27]="UNCLOSED_TAG";}(At||(At={})),function(e){e[e.literal=0]="literal",e[e.argument=1]="argument",e[e.number=2]="number",e[e.date=3]="date",e[e.time=4]="time",e[e.select=5]="select",e[e.plural=6]="plural",e[e.pound=7]="pound",e[e.tag=8]="tag";}(Tt||(Tt={})),function(e){e[e.number=0]="number",e[e.dateTime=1]="dateTime";}(St||(St={}));var jt=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,Vt=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function Bt(e){var t={};return e.replace(Vt,(function(e){var n=e.length;switch(e[0]){case"G":t.era=4===n?"long":5===n?"narrow":"short";break;case"y":t.year=2===n?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":t.month=["numeric","2-digit","short","long","narrow"][n-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":t.day=["numeric","2-digit"][n-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":t.weekday=4===n?"short":5===n?"narrow":"short";break;case"e":if(n<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][n-4];break;case"c":if(n<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][n-4];break;case"a":t.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":t.hourCycle="h12",t.hour=["numeric","2-digit"][n-1];break;case"H":t.hourCycle="h23",t.hour=["numeric","2-digit"][n-1];break;case"K":t.hourCycle="h11",t.hour=["numeric","2-digit"][n-1];break;case"k":t.hourCycle="h24",t.hour=["numeric","2-digit"][n-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":t.minute=["numeric","2-digit"][n-1];break;case"s":t.second=["numeric","2-digit"][n-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":t.timeZoneName=n<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return ""})),t}var zt=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;var Wt,qt=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,Xt=/^(@+)?(\+|#+)?$/g,Ht=/(\*)(0+)|(#+)(0+)|(0+)/g,Kt=/^(0+)$/;function Yt(e){var t={};return e.replace(Xt,(function(e,n,r){return "string"!=typeof r?(t.minimumSignificantDigits=n.length,t.maximumSignificantDigits=n.length):"+"===r?t.minimumSignificantDigits=n.length:"#"===n[0]?t.maximumSignificantDigits=n.length:(t.minimumSignificantDigits=n.length,t.maximumSignificantDigits=n.length+("string"==typeof r?r.length:0)),""})),t}function Zt(e){switch(e){case"sign-auto":return {signDisplay:"auto"};case"sign-accounting":case"()":return {currencySign:"accounting"};case"sign-always":case"+!":return {signDisplay:"always"};case"sign-accounting-always":case"()!":return {signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return {signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return {signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return {signDisplay:"never"}}}function Jt(e){var t;if("E"===e[0]&&"E"===e[1]?(t={notation:"engineering"},e=e.slice(2)):"E"===e[0]&&(t={notation:"scientific"},e=e.slice(1)),t){var n=e.slice(0,2);if("+!"===n?(t.signDisplay="always",e=e.slice(2)):"+?"===n&&(t.signDisplay="exceptZero",e=e.slice(2)),!Kt.test(e))throw new Error("Malformed concise eng/scientific notation");t.minimumIntegerDigits=e.length;}return t}function Qt(e){var t=Zt(e);return t||{}}function en(e){for(var t={},n=0,r=e;n<r.length;n++){var i=r[n];switch(i.stem){case"percent":case"%":t.style="percent";continue;case"%x100":t.style="percent",t.scale=100;continue;case"currency":t.style="currency",t.currency=i.options[0];continue;case"group-off":case",_":t.useGrouping=!1;continue;case"precision-integer":case".":t.maximumFractionDigits=0;continue;case"measure-unit":case"unit":t.style="unit",t.unit=i.options[0].replace(/^(.*?)-/,"");continue;case"compact-short":case"K":t.notation="compact",t.compactDisplay="short";continue;case"compact-long":case"KK":t.notation="compact",t.compactDisplay="long";continue;case"scientific":t=It(It(It({},t),{notation:"scientific"}),i.options.reduce((function(e,t){return It(It({},e),Qt(t))}),{}));continue;case"engineering":t=It(It(It({},t),{notation:"engineering"}),i.options.reduce((function(e,t){return It(It({},e),Qt(t))}),{}));continue;case"notation-simple":t.notation="standard";continue;case"unit-width-narrow":t.currencyDisplay="narrowSymbol",t.unitDisplay="narrow";continue;case"unit-width-short":t.currencyDisplay="code",t.unitDisplay="short";continue;case"unit-width-full-name":t.currencyDisplay="name",t.unitDisplay="long";continue;case"unit-width-iso-code":t.currencyDisplay="symbol";continue;case"scale":t.scale=parseFloat(i.options[0]);continue;case"integer-width":if(i.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");i.options[0].replace(Ht,(function(e,n,r,i,o,s){if(n)t.minimumIntegerDigits=r.length;else {if(i&&o)throw new Error("We currently do not support maximum integer digits");if(s)throw new Error("We currently do not support exact integer digits")}return ""}));continue}if(Kt.test(i.stem))t.minimumIntegerDigits=i.stem.length;else if(qt.test(i.stem)){if(i.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");i.stem.replace(qt,(function(e,n,r,i,o,s){return "*"===r?t.minimumFractionDigits=n.length:i&&"#"===i[0]?t.maximumFractionDigits=i.length:o&&s?(t.minimumFractionDigits=o.length,t.maximumFractionDigits=o.length+s.length):(t.minimumFractionDigits=n.length,t.maximumFractionDigits=n.length),""})),i.options.length&&(t=It(It({},t),Yt(i.options[0])));}else if(Xt.test(i.stem))t=It(It({},t),Yt(i.stem));else {var o=Zt(i.stem);o&&(t=It(It({},t),o));var s=Jt(i.stem);s&&(t=It(It({},t),s));}}return t}var tn=new RegExp("^"+jt.source+"*"),nn=new RegExp(jt.source+"*$");function rn(e,t){return {start:e,end:t}}var on=!!String.prototype.startsWith,sn=!!String.fromCodePoint,an=!!Object.fromEntries,ln=!!String.prototype.codePointAt,cn=!!String.prototype.trimStart,un=!!String.prototype.trimEnd,dn=!!Number.isSafeInteger?Number.isSafeInteger:function(e){return "number"==typeof e&&isFinite(e)&&Math.floor(e)===e&&Math.abs(e)<=9007199254740991},pn=!0;try{pn="a"===(null===(Wt=wn("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu").exec("a"))||void 0===Wt?void 0:Wt[0]);}catch(e){pn=!1;}var hn,fn=on?function(e,t,n){return e.startsWith(t,n)}:function(e,t,n){return e.slice(n,n+t.length)===t},gn=sn?String.fromCodePoint:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n,r="",i=e.length,o=0;i>o;){if((n=e[o++])>1114111)throw RangeError(n+" is not a valid code point");r+=n<65536?String.fromCharCode(n):String.fromCharCode(55296+((n-=65536)>>10),n%1024+56320);}return r},mn=an?Object.fromEntries:function(e){for(var t={},n=0,r=e;n<r.length;n++){var i=r[n],o=i[0],s=i[1];t[o]=s;}return t},yn=ln?function(e,t){return e.codePointAt(t)}:function(e,t){var n=e.length;if(!(t<0||t>=n)){var r,i=e.charCodeAt(t);return i<55296||i>56319||t+1===n||(r=e.charCodeAt(t+1))<56320||r>57343?i:r-56320+(i-55296<<10)+65536}},vn=cn?function(e){return e.trimStart()}:function(e){return e.replace(tn,"")},En=un?function(e){return e.trimEnd()}:function(e){return e.replace(nn,"")};function wn(e,t){return new RegExp(e,t)}if(pn){var bn=wn("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");hn=function(e,t){var n;return bn.lastIndex=t,null!==(n=bn.exec(e)[1])&&void 0!==n?n:""};}else hn=function(e,t){for(var n=[];;){var r=yn(e,t);if(void 0===r||An(r)||Tn(r))break;n.push(r),t+=r>=65536?2:1;}return gn.apply(void 0,n)};var Cn=function(){function e(e,t){void 0===t&&(t={}),this.message=e,this.position={offset:0,line:1,column:1},this.ignoreTag=!!t.ignoreTag,this.requiresOtherClause=!!t.requiresOtherClause,this.shouldParseSkeletons=!!t.shouldParseSkeletons;}return e.prototype.parse=function(){if(0!==this.offset())throw Error("parser can only be used once");return this.parseMessage(0,"",!1)},e.prototype.parseMessage=function(e,t,n){for(var r=[];!this.isEOF();){var i=this.char();if(123===i){if((o=this.parseArgument(e,n)).err)return o;r.push(o.val);}else {if(125===i&&e>0)break;if(35!==i||"plural"!==t&&"selectordinal"!==t){if(60===i&&!this.ignoreTag&&47===this.peek()){if(n)break;return this.error(At.UNMATCHED_CLOSING_TAG,rn(this.clonePosition(),this.clonePosition()))}if(60===i&&!this.ignoreTag&&Dn(this.peek()||0)){if((o=this.parseTag(e,t)).err)return o;r.push(o.val);}else {var o;if((o=this.parseLiteral(e,t)).err)return o;r.push(o.val);}}else {var s=this.clonePosition();this.bump(),r.push({type:Tt.pound,location:rn(s,this.clonePosition())});}}}return {val:r,err:null}},e.prototype.parseTag=function(e,t){var n=this.clonePosition();this.bump();var r=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return {val:{type:Tt.literal,value:"<"+r+"/>",location:rn(n,this.clonePosition())},err:null};if(this.bumpIf(">")){var i=this.parseMessage(e+1,t,!0);if(i.err)return i;var o=i.val,s=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!Dn(this.char()))return this.error(At.INVALID_TAG,rn(s,this.clonePosition()));var a=this.clonePosition();return r!==this.parseTagName()?this.error(At.UNMATCHED_CLOSING_TAG,rn(a,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:Tt.tag,value:r,children:o,location:rn(n,this.clonePosition())},err:null}:this.error(At.INVALID_TAG,rn(s,this.clonePosition())))}return this.error(At.UNCLOSED_TAG,rn(n,this.clonePosition()))}return this.error(At.INVALID_TAG,rn(n,this.clonePosition()))},e.prototype.parseTagName=function(){var e=this.offset();for(this.bump();!this.isEOF()&&_n(this.char());)this.bump();return this.message.slice(e,this.offset())},e.prototype.parseLiteral=function(e,t){for(var n=this.clonePosition(),r="";;){var i=this.tryParseQuote(t);if(i)r+=i;else {var o=this.tryParseUnquoted(e,t);if(o)r+=o;else {var s=this.tryParseLeftAngleBracket();if(!s)break;r+=s;}}}var a=rn(n,this.clonePosition());return {val:{type:Tt.literal,value:r,location:a},err:null}},e.prototype.tryParseLeftAngleBracket=function(){return this.isEOF()||60!==this.char()||!this.ignoreTag&&(Dn(e=this.peek()||0)||47===e)?null:(this.bump(),"<");var e;},e.prototype.tryParseQuote=function(e){if(this.isEOF()||39!==this.char())return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if("plural"===e||"selectordinal"===e)break;return null;default:return null}this.bump();var t=[this.char()];for(this.bump();!this.isEOF();){var n=this.char();if(39===n){if(39!==this.peek()){this.bump();break}t.push(39),this.bump();}else t.push(n);this.bump();}return gn.apply(void 0,t)},e.prototype.tryParseUnquoted=function(e,t){if(this.isEOF())return null;var n=this.char();return 60===n||123===n||35===n&&("plural"===t||"selectordinal"===t)||125===n&&e>0?null:(this.bump(),gn(n))},e.prototype.parseArgument=function(e,t){var n=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(At.EXPECT_ARGUMENT_CLOSING_BRACE,rn(n,this.clonePosition()));if(125===this.char())return this.bump(),this.error(At.EMPTY_ARGUMENT,rn(n,this.clonePosition()));var r=this.parseIdentifierIfPossible().value;if(!r)return this.error(At.MALFORMED_ARGUMENT,rn(n,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(At.EXPECT_ARGUMENT_CLOSING_BRACE,rn(n,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:Tt.argument,value:r,location:rn(n,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(At.EXPECT_ARGUMENT_CLOSING_BRACE,rn(n,this.clonePosition())):this.parseArgumentOptions(e,t,r,n);default:return this.error(At.MALFORMED_ARGUMENT,rn(n,this.clonePosition()))}},e.prototype.parseIdentifierIfPossible=function(){var e=this.clonePosition(),t=this.offset(),n=hn(this.message,t),r=t+n.length;return this.bumpTo(r),{value:n,location:rn(e,this.clonePosition())}},e.prototype.parseArgumentOptions=function(e,t,n,r){var i,o=this.clonePosition(),s=this.parseIdentifierIfPossible().value,a=this.clonePosition();switch(s){case"":return this.error(At.EXPECT_ARGUMENT_TYPE,rn(o,a));case"number":case"date":case"time":this.bumpSpace();var l=null;if(this.bumpIf(",")){this.bumpSpace();var c=this.clonePosition();if((m=this.parseSimpleArgStyleIfPossible()).err)return m;if(0===(p=En(m.val)).length)return this.error(At.EXPECT_ARGUMENT_STYLE,rn(this.clonePosition(),this.clonePosition()));l={style:p,styleLocation:rn(c,this.clonePosition())};}if((y=this.tryParseArgumentClose(r)).err)return y;var u=rn(r,this.clonePosition());if(l&&fn(null==l?void 0:l.style,"::",0)){var d=vn(l.style.slice(2));if("number"===s)return (m=this.parseNumberSkeletonFromString(d,l.styleLocation)).err?m:{val:{type:Tt.number,value:n,location:u,style:m.val},err:null};if(0===d.length)return this.error(At.EXPECT_DATE_TIME_SKELETON,u);var p={type:St.dateTime,pattern:d,location:l.styleLocation,parsedOptions:this.shouldParseSkeletons?Bt(d):{}};return {val:{type:"date"===s?Tt.date:Tt.time,value:n,location:u,style:p},err:null}}return {val:{type:"number"===s?Tt.number:"date"===s?Tt.date:Tt.time,value:n,location:u,style:null!==(i=null==l?void 0:l.style)&&void 0!==i?i:null},err:null};case"plural":case"selectordinal":case"select":var h=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(At.EXPECT_SELECT_ARGUMENT_OPTIONS,rn(h,It({},h)));this.bumpSpace();var f=this.parseIdentifierIfPossible(),g=0;if("select"!==s&&"offset"===f.value){if(!this.bumpIf(":"))return this.error(At.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,rn(this.clonePosition(),this.clonePosition()));var m;if(this.bumpSpace(),(m=this.tryParseDecimalInteger(At.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,At.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE)).err)return m;this.bumpSpace(),f=this.parseIdentifierIfPossible(),g=m.val;}var y,v=this.tryParsePluralOrSelectOptions(e,s,t,f);if(v.err)return v;if((y=this.tryParseArgumentClose(r)).err)return y;var E=rn(r,this.clonePosition());return "select"===s?{val:{type:Tt.select,value:n,options:mn(v.val),location:E},err:null}:{val:{type:Tt.plural,value:n,options:mn(v.val),offset:g,pluralType:"plural"===s?"cardinal":"ordinal",location:E},err:null};default:return this.error(At.INVALID_ARGUMENT_TYPE,rn(o,a))}},e.prototype.tryParseArgumentClose=function(e){return this.isEOF()||125!==this.char()?this.error(At.EXPECT_ARGUMENT_CLOSING_BRACE,rn(e,this.clonePosition())):(this.bump(),{val:!0,err:null})},e.prototype.parseSimpleArgStyleIfPossible=function(){for(var e=0,t=this.clonePosition();!this.isEOF();){switch(this.char()){case 39:this.bump();var n=this.clonePosition();if(!this.bumpUntil("'"))return this.error(At.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,rn(n,this.clonePosition()));this.bump();break;case 123:e+=1,this.bump();break;case 125:if(!(e>0))return {val:this.message.slice(t.offset,this.offset()),err:null};e-=1;break;default:this.bump();}}return {val:this.message.slice(t.offset,this.offset()),err:null}},e.prototype.parseNumberSkeletonFromString=function(e,t){var n=[];try{n=function(e){if(0===e.length)throw new Error("Number skeleton cannot be empty");for(var t=[],n=0,r=e.split(zt).filter((function(e){return e.length>0}));n<r.length;n++){var i=r[n].split("/");if(0===i.length)throw new Error("Invalid number skeleton");for(var o=i[0],s=i.slice(1),a=0,l=s;a<l.length;a++)if(0===l[a].length)throw new Error("Invalid number skeleton");t.push({stem:o,options:s});}return t}(e);}catch(e){return this.error(At.INVALID_NUMBER_SKELETON,t)}return {val:{type:St.number,tokens:n,location:t,parsedOptions:this.shouldParseSkeletons?en(n):{}},err:null}},e.prototype.tryParsePluralOrSelectOptions=function(e,t,n,r){for(var i,o=!1,s=[],a=new Set,l=r.value,c=r.location;;){if(0===l.length){var u=this.clonePosition();if("select"===t||!this.bumpIf("="))break;var d=this.tryParseDecimalInteger(At.EXPECT_PLURAL_ARGUMENT_SELECTOR,At.INVALID_PLURAL_ARGUMENT_SELECTOR);if(d.err)return d;c=rn(u,this.clonePosition()),l=this.message.slice(u.offset,this.offset());}if(a.has(l))return this.error("select"===t?At.DUPLICATE_SELECT_ARGUMENT_SELECTOR:At.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,c);"other"===l&&(o=!0),this.bumpSpace();var p=this.clonePosition();if(!this.bumpIf("{"))return this.error("select"===t?At.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:At.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,rn(this.clonePosition(),this.clonePosition()));var h=this.parseMessage(e+1,t,n);if(h.err)return h;var f=this.tryParseArgumentClose(p);if(f.err)return f;s.push([l,{value:h.val,location:rn(p,this.clonePosition())}]),a.add(l),this.bumpSpace(),l=(i=this.parseIdentifierIfPossible()).value,c=i.location;}return 0===s.length?this.error("select"===t?At.EXPECT_SELECT_ARGUMENT_SELECTOR:At.EXPECT_PLURAL_ARGUMENT_SELECTOR,rn(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!o?this.error(At.MISSING_OTHER_CLAUSE,rn(this.clonePosition(),this.clonePosition())):{val:s,err:null}},e.prototype.tryParseDecimalInteger=function(e,t){var n=1,r=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(n=-1);for(var i=!1,o=0;!this.isEOF();){var s=this.char();if(!(s>=48&&s<=57))break;i=!0,o=10*o+(s-48),this.bump();}var a=rn(r,this.clonePosition());return i?dn(o*=n)?{val:o,err:null}:this.error(t,a):this.error(e,a)},e.prototype.offset=function(){return this.position.offset},e.prototype.isEOF=function(){return this.offset()===this.message.length},e.prototype.clonePosition=function(){return {offset:this.position.offset,line:this.position.line,column:this.position.column}},e.prototype.char=function(){var e=this.position.offset;if(e>=this.message.length)throw Error("out of bound");var t=yn(this.message,e);if(void 0===t)throw Error("Offset "+e+" is at invalid UTF-16 code unit boundary");return t},e.prototype.error=function(e,t){return {val:null,err:{kind:e,message:this.message,location:t}}},e.prototype.bump=function(){if(!this.isEOF()){var e=this.char();10===e?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=e<65536?1:2);}},e.prototype.bumpIf=function(e){if(fn(this.message,e,this.offset())){for(var t=0;t<e.length;t++)this.bump();return !0}return !1},e.prototype.bumpUntil=function(e){var t=this.offset(),n=this.message.indexOf(e,t);return n>=0?(this.bumpTo(n),!0):(this.bumpTo(this.message.length),!1)},e.prototype.bumpTo=function(e){if(this.offset()>e)throw Error("targetOffset "+e+" must be greater than or equal to the current offset "+this.offset());for(e=Math.min(e,this.message.length);;){var t=this.offset();if(t===e)break;if(t>e)throw Error("targetOffset "+e+" is at invalid UTF-16 code unit boundary");if(this.bump(),this.isEOF())break}},e.prototype.bumpSpace=function(){for(;!this.isEOF()&&An(this.char());)this.bump();},e.prototype.peek=function(){if(this.isEOF())return null;var e=this.char(),t=this.offset(),n=this.message.charCodeAt(t+(e>=65536?2:1));return null!=n?n:null},e}();function Dn(e){return e>=97&&e<=122||e>=65&&e<=90}function _n(e){return 45===e||46===e||e>=48&&e<=57||95===e||e>=97&&e<=122||e>=65&&e<=90||183==e||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=893||e>=895&&e<=8191||e>=8204&&e<=8205||e>=8255&&e<=8256||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039}function An(e){return e>=9&&e<=13||32===e||133===e||e>=8206&&e<=8207||8232===e||8233===e}function Tn(e){return e>=33&&e<=35||36===e||e>=37&&e<=39||40===e||41===e||42===e||43===e||44===e||45===e||e>=46&&e<=47||e>=58&&e<=59||e>=60&&e<=62||e>=63&&e<=64||91===e||92===e||93===e||94===e||96===e||123===e||124===e||125===e||126===e||161===e||e>=162&&e<=165||166===e||167===e||169===e||171===e||172===e||174===e||176===e||177===e||182===e||187===e||191===e||215===e||247===e||e>=8208&&e<=8213||e>=8214&&e<=8215||8216===e||8217===e||8218===e||e>=8219&&e<=8220||8221===e||8222===e||8223===e||e>=8224&&e<=8231||e>=8240&&e<=8248||8249===e||8250===e||e>=8251&&e<=8254||e>=8257&&e<=8259||8260===e||8261===e||8262===e||e>=8263&&e<=8273||8274===e||8275===e||e>=8277&&e<=8286||e>=8592&&e<=8596||e>=8597&&e<=8601||e>=8602&&e<=8603||e>=8604&&e<=8607||8608===e||e>=8609&&e<=8610||8611===e||e>=8612&&e<=8613||8614===e||e>=8615&&e<=8621||8622===e||e>=8623&&e<=8653||e>=8654&&e<=8655||e>=8656&&e<=8657||8658===e||8659===e||8660===e||e>=8661&&e<=8691||e>=8692&&e<=8959||e>=8960&&e<=8967||8968===e||8969===e||8970===e||8971===e||e>=8972&&e<=8991||e>=8992&&e<=8993||e>=8994&&e<=9e3||9001===e||9002===e||e>=9003&&e<=9083||9084===e||e>=9085&&e<=9114||e>=9115&&e<=9139||e>=9140&&e<=9179||e>=9180&&e<=9185||e>=9186&&e<=9254||e>=9255&&e<=9279||e>=9280&&e<=9290||e>=9291&&e<=9311||e>=9472&&e<=9654||9655===e||e>=9656&&e<=9664||9665===e||e>=9666&&e<=9719||e>=9720&&e<=9727||e>=9728&&e<=9838||9839===e||e>=9840&&e<=10087||10088===e||10089===e||10090===e||10091===e||10092===e||10093===e||10094===e||10095===e||10096===e||10097===e||10098===e||10099===e||10100===e||10101===e||e>=10132&&e<=10175||e>=10176&&e<=10180||10181===e||10182===e||e>=10183&&e<=10213||10214===e||10215===e||10216===e||10217===e||10218===e||10219===e||10220===e||10221===e||10222===e||10223===e||e>=10224&&e<=10239||e>=10240&&e<=10495||e>=10496&&e<=10626||10627===e||10628===e||10629===e||10630===e||10631===e||10632===e||10633===e||10634===e||10635===e||10636===e||10637===e||10638===e||10639===e||10640===e||10641===e||10642===e||10643===e||10644===e||10645===e||10646===e||10647===e||10648===e||e>=10649&&e<=10711||10712===e||10713===e||10714===e||10715===e||e>=10716&&e<=10747||10748===e||10749===e||e>=10750&&e<=11007||e>=11008&&e<=11055||e>=11056&&e<=11076||e>=11077&&e<=11078||e>=11079&&e<=11084||e>=11085&&e<=11123||e>=11124&&e<=11125||e>=11126&&e<=11157||11158===e||e>=11159&&e<=11263||e>=11776&&e<=11777||11778===e||11779===e||11780===e||11781===e||e>=11782&&e<=11784||11785===e||11786===e||11787===e||11788===e||11789===e||e>=11790&&e<=11798||11799===e||e>=11800&&e<=11801||11802===e||11803===e||11804===e||11805===e||e>=11806&&e<=11807||11808===e||11809===e||11810===e||11811===e||11812===e||11813===e||11814===e||11815===e||11816===e||11817===e||e>=11818&&e<=11822||11823===e||e>=11824&&e<=11833||e>=11834&&e<=11835||e>=11836&&e<=11839||11840===e||11841===e||11842===e||e>=11843&&e<=11855||e>=11856&&e<=11857||11858===e||e>=11859&&e<=11903||e>=12289&&e<=12291||12296===e||12297===e||12298===e||12299===e||12300===e||12301===e||12302===e||12303===e||12304===e||12305===e||e>=12306&&e<=12307||12308===e||12309===e||12310===e||12311===e||12312===e||12313===e||12314===e||12315===e||12316===e||12317===e||e>=12318&&e<=12319||12320===e||12336===e||64830===e||64831===e||e>=65093&&e<=65094}function Sn(e){e.forEach((function(e){if(delete e.location,Mt(e)||xt(e))for(var t in e.options)delete e.options[t].location,Sn(e.options[t].value);else Ot(e)&&Ft(e.style)||(Nt(e)||Rt(e))&&Gt(e.style)?delete e.style.location:Ut(e)&&Sn(e.children);}));}function In(e,t){void 0===t&&(t={}),t=It({shouldParseSkeletons:!0,requiresOtherClause:!0},t);var n=new Cn(e,t).parse();if(n.err){var r=SyntaxError(At[n.err.kind]);throw r.location=n.err.location,r.originalMessage=n.err.message,r}return (null==t?void 0:t.captureLocation)||Sn(n.val),n.val}function Pn(e,t){var n=t&&t.cache?t.cache:$n,r=t&&t.serializer?t.serializer:Rn;return (t&&t.strategy?t.strategy:Nn)(e,{cache:n,serializer:r})}function Ln(e,t,n,r){var i,o=null==(i=r)||"number"==typeof i||"boolean"==typeof i?r:n(r),s=t.get(o);return void 0===s&&(s=e.call(this,r),t.set(o,s)),s}function kn(e,t,n){var r=Array.prototype.slice.call(arguments,3),i=n(r),o=t.get(i);return void 0===o&&(o=e.apply(this,r),t.set(i,o)),o}function On(e,t,n,r,i){return n.bind(t,e,r,i)}function Nn(e,t){return On(e,this,1===e.length?Ln:kn,t.cache.create(),t.serializer)}var Rn=function(){return JSON.stringify(arguments)};function Mn(){this.cache=Object.create(null);}Mn.prototype.has=function(e){return e in this.cache},Mn.prototype.get=function(e){return this.cache[e]},Mn.prototype.set=function(e,t){this.cache[e]=t;};var xn,$n={create:function(){return new Mn}},Un={variadic:function(e,t){return On(e,this,kn,t.cache.create(),t.serializer)},monadic:function(e,t){return On(e,this,Ln,t.cache.create(),t.serializer)}};!function(e){e.MISSING_VALUE="MISSING_VALUE",e.INVALID_VALUE="INVALID_VALUE",e.MISSING_INTL_API="MISSING_INTL_API";}(xn||(xn={}));var Fn,Gn=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.code=n,i.originalMessage=r,i}return _t(t,e),t.prototype.toString=function(){return "[formatjs Error: "+this.code+"] "+this.message},t}(Error),jn=function(e){function t(t,n,r,i){return e.call(this,'Invalid values for "'+t+'": "'+n+'". Options are "'+Object.keys(r).join('", "')+'"',xn.INVALID_VALUE,i)||this}return _t(t,e),t}(Gn),Vn=function(e){function t(t,n,r){return e.call(this,'Value for "'+t+'" must be of type '+n,xn.INVALID_VALUE,r)||this}return _t(t,e),t}(Gn),Bn=function(e){function t(t,n){return e.call(this,'The intl string context variable "'+t+'" was not provided to the string "'+n+'"',xn.MISSING_VALUE,n)||this}return _t(t,e),t}(Gn);function zn(e){return "function"==typeof e}function Wn(e,t,n,r,i,o,s){if(1===e.length&&Lt(e[0]))return [{type:Fn.literal,value:e[0].value}];for(var a=[],l=0,c=e;l<c.length;l++){var u=c[l];if(Lt(u))a.push({type:Fn.literal,value:u.value});else if($t(u))"number"==typeof o&&a.push({type:Fn.literal,value:n.getNumberFormat(t).format(o)});else {var d=u.value;if(!i||!(d in i))throw new Bn(d,s);var p=i[d];if(kt(u))p&&"string"!=typeof p&&"number"!=typeof p||(p="string"==typeof p||"number"==typeof p?String(p):""),a.push({type:"string"==typeof p?Fn.literal:Fn.object,value:p});else if(Nt(u)){var h="string"==typeof u.style?r.date[u.style]:Gt(u.style)?u.style.parsedOptions:void 0;a.push({type:Fn.literal,value:n.getDateTimeFormat(t,h).format(p)});}else if(Rt(u)){h="string"==typeof u.style?r.time[u.style]:Gt(u.style)?u.style.parsedOptions:void 0;a.push({type:Fn.literal,value:n.getDateTimeFormat(t,h).format(p)});}else if(Ot(u)){(h="string"==typeof u.style?r.number[u.style]:Ft(u.style)?u.style.parsedOptions:void 0)&&h.scale&&(p*=h.scale||1),a.push({type:Fn.literal,value:n.getNumberFormat(t,h).format(p)});}else {if(Ut(u)){var f=u.children,g=u.value,m=i[g];if(!zn(m))throw new Vn(g,"function",s);var y=m(Wn(f,t,n,r,i,o).map((function(e){return e.value})));Array.isArray(y)||(y=[y]),a.push.apply(a,y.map((function(e){return {type:"string"==typeof e?Fn.literal:Fn.object,value:e}})));}if(Mt(u)){if(!(v=u.options[p]||u.options.other))throw new jn(u.value,p,Object.keys(u.options),s);a.push.apply(a,Wn(v.value,t,n,r,i));}else if(xt(u)){var v;if(!(v=u.options["="+p])){if(!Intl.PluralRules)throw new Gn('Intl.PluralRules is not available in this environment.\nTry polyfilling it using "@formatjs/intl-pluralrules"\n',xn.MISSING_INTL_API,s);var E=n.getPluralRules(t,{type:u.pluralType}).select(p-(u.offset||0));v=u.options[E]||u.options.other;}if(!v)throw new jn(u.value,p,Object.keys(u.options),s);a.push.apply(a,Wn(v.value,t,n,r,i,p-(u.offset||0)));}else;}}}return function(e){return e.length<2?e:e.reduce((function(e,t){var n=e[e.length-1];return n&&n.type===Fn.literal&&t.type===Fn.literal?n.value+=t.value:e.push(t),e}),[])}(a)}function qn(e,t){return t?Object.keys(e).reduce((function(n,r){var i,o;return n[r]=(i=e[r],(o=t[r])?It(It(It({},i||{}),o||{}),Object.keys(i).reduce((function(e,t){return e[t]=It(It({},i[t]),o[t]||{}),e}),{})):i),n}),It({},e)):e}function Xn(e){return {create:function(){return {has:function(t){return t in e},get:function(t){return e[t]},set:function(t,n){e[t]=n;}}}}}!function(e){e[e.literal=0]="literal",e[e.object=1]="object";}(Fn||(Fn={}));var Hn=function(){function e(t,n,r,i){var o,s=this;if(void 0===n&&(n=e.defaultLocale),this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(e){var t=s.formatToParts(e);if(1===t.length)return t[0].value;var n=t.reduce((function(e,t){return e.length&&t.type===Fn.literal&&"string"==typeof e[e.length-1]?e[e.length-1]+=t.value:e.push(t.value),e}),[]);return n.length<=1?n[0]||"":n},this.formatToParts=function(e){return Wn(s.ast,s.locales,s.formatters,s.formats,e,void 0,s.message)},this.resolvedOptions=function(){return {locale:Intl.NumberFormat.supportedLocalesOf(s.locales)[0]}},this.getAst=function(){return s.ast},"string"==typeof t){if(this.message=t,!e.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");this.ast=e.__parse(t,{ignoreTag:null==i?void 0:i.ignoreTag});}else this.ast=t;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=qn(e.formats,r),this.locales=n,this.formatters=i&&i.formatters||(void 0===(o=this.formatterCache)&&(o={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:Pn((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.NumberFormat).bind.apply(e,Pt([void 0],t)))}),{cache:Xn(o.number),strategy:Un.variadic}),getDateTimeFormat:Pn((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.DateTimeFormat).bind.apply(e,Pt([void 0],t)))}),{cache:Xn(o.dateTime),strategy:Un.variadic}),getPluralRules:Pn((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.PluralRules).bind.apply(e,Pt([void 0],t)))}),{cache:Xn(o.pluralRules),strategy:Un.variadic})});}return Object.defineProperty(e,"defaultLocale",{get:function(){return e.memoizedDefaultLocale||(e.memoizedDefaultLocale=(new Intl.NumberFormat).resolvedOptions().locale),e.memoizedDefaultLocale},enumerable:!1,configurable:!0}),e.memoizedDefaultLocale=null,e.__parse=In,e.formats={number:{currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},e}();const Kn={},Yn=(e,t,n)=>n?(t in Kn||(Kn[t]={}),e in Kn[t]||(Kn[t][e]=n),n):n,Zn=(e,t)=>{if(null==t)return;if(t in Kn&&e in Kn[t])return Kn[t][e];const n=gr(t);for(let r=0;r<n.length;r++){const i=tr(n[r],e);if(i)return Yn(e,t,i)}};let Jn;const Qn=Ke({});function er(e){return e in Jn}function tr(e,t){return er(e)?function(e,t){if(t in e)return e[t];const n=t.split(".");let r=e;for(let e=0;e<n.length;e++)if("object"==typeof r){if(e>0){const t=n.slice(e,n.length).join(".");if(t in r){r=r[t];break}}r=r[n[e]];}else r=void 0;return r}(function(e){return Jn[e]||null}(e),t):null}Ye([Qn],(([e])=>Object.keys(e))),Qn.subscribe((e=>Jn=e));const nr={};function rr(e){return nr[e]}function ir(e){return gr(e).some((e=>{var t;return null===(t=rr(e))||void 0===t?void 0:t.size}))}function or(e,t){return Promise.all(t.map((t=>(function(e,t){nr[e].delete(t),0===nr[e].size&&delete nr[e];}(e,t),t().then((e=>e.default||e)))))).then((t=>function(e,...t){delete Kn[e],Qn.update((n=>(n[e]=Ct.all([n[e]||{},...t]),n)));}(e,...t)))}const sr={};function ar(e){if(!ir(e))return e in sr?sr[e]:void 0;const t=function(e){return gr(e).map((e=>{const t=rr(e);return [e,t?[...t]:[]]})).filter((([,e])=>e.length>0))}(e);return sr[e]=Promise.all(t.map((([e,t])=>or(e,t)))).then((()=>{if(ir(e))return ar(e);delete sr[e];})),sr[e]}
	/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */function lr(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);}return n}const cr={fallbackLocale:null,initialLocale:null,loadingDelay:200,formats:{number:{scientific:{notation:"scientific"},engineering:{notation:"engineering"},compactLong:{notation:"compact",compactDisplay:"long"},compactShort:{notation:"compact",compactDisplay:"short"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},warnOnMissingMessages:!0,ignoreTag:!0};function ur(){return cr}const dr=Ke(!1);let pr;const hr=Ke(null);function fr(e){return e.split("-").map(((e,t,n)=>n.slice(0,t+1).join("-"))).reverse()}function gr(e,t=ur().fallbackLocale){const n=fr(e);return t?[...new Set([...n,...fr(t)])]:n}function mr(){return pr}hr.subscribe((e=>{pr=e,"undefined"!=typeof window&&null!==e&&document.documentElement.setAttribute("lang",e);}));const yr=hr.set;hr.set=e=>{if(function(e){if(null==e)return;const t=gr(e);for(let e=0;e<t.length;e++){const n=t[e];if(er(n))return n}}(e)&&ir(e)){const{loadingDelay:t}=ur();let n;return "undefined"!=typeof window&&null!=mr()&&t?n=window.setTimeout((()=>dr.set(!0)),t):dr.set(!0),ar(e).then((()=>{yr(e);})).finally((()=>{clearTimeout(n),dr.set(!1);}))}return yr(e)},hr.update=e=>yr(e(pr));const vr=e=>{const t=Object.create(null);return n=>{const r=JSON.stringify(n);return r in t?t[r]:t[r]=e(n)}},Er=(e,t)=>{const{formats:n}=ur();if(e in n&&t in n[e])return n[e][t];throw new Error(`[svelte-i18n] Unknown "${t}" ${e} format.`)},wr=vr((e=>{var{locale:t,format:n}=e,r=lr(e,["locale","format"]);if(null==t)throw new Error('[svelte-i18n] A "locale" must be set to format numbers');return n&&(r=Er("number",n)),new Intl.NumberFormat(t,r)})),br=vr((e=>{var{locale:t,format:n}=e,r=lr(e,["locale","format"]);if(null==t)throw new Error('[svelte-i18n] A "locale" must be set to format dates');return n?r=Er("date",n):0===Object.keys(r).length&&(r=Er("date","short")),new Intl.DateTimeFormat(t,r)})),Cr=vr((e=>{var{locale:t,format:n}=e,r=lr(e,["locale","format"]);if(null==t)throw new Error('[svelte-i18n] A "locale" must be set to format time values');return n?r=Er("time",n):0===Object.keys(r).length&&(r=Er("time","short")),new Intl.DateTimeFormat(t,r)})),Dr=vr(((e,t=mr())=>new Hn(e,t,ur().formats,{ignoreTag:ur().ignoreTag}))),_r=(e,t={})=>{"object"==typeof e&&(e=(t=e).id);const{values:n,locale:r=mr(),default:i}=t;if(null==r)throw new Error("[svelte-i18n] Cannot format a message without first setting the initial locale.");let o=Zn(e,r);if(o){if("string"!=typeof o)return console.warn(`[svelte-i18n] Message with id "${e}" must be of type "string", found: "${typeof o}". Gettin its value through the "$format" method is deprecated; use the "json" method instead.`),o}else console.warn(`[svelte-i18n] The message "${e}" was not found in "${gr(r).join('", "')}".${ir(mr())?"\n\nNote: there are at least one loader still registered to this locale that wasn't executed.":""}`),o=i||e;if(!n)return o;let s=o;try{s=Dr(o,r).format(n);}catch(t){console.warn(`[svelte-i18n] Message "${e}" has syntax error:`,t.message);}return s},Ar=(e,t)=>((e={})=>{var{locale:t=mr()}=e,n=lr(e,["locale"]);return Cr(Object.assign({locale:t},n))})(t).format(e),Tr=(e,t)=>((e={})=>{var{locale:t=mr()}=e,n=lr(e,["locale"]);return br(Object.assign({locale:t},n))})(t).format(e),Sr=(e,t)=>((e={})=>{var{locale:t=mr()}=e,n=lr(e,["locale"]);return wr(Object.assign({locale:t},n))})(t).format(e),Ir=(e,t=mr())=>Zn(e,t),Pr=Ye([hr,Qn],(()=>_r));function Lr(e,t,n){const r=e.slice();return r[7]=t[n],r}function kr(e){return {c:U,m:U,p:U,d:U}}function Or(e){let t,n,r,i,o,s=e[0](e[10])+"";function a(){return e[4](e[7])}return {c(){t=re("button"),n=ie(s),r=oe(),le(t,"class","svelte-r1kwme");},m(e,s){te(e,t,s),ee(t,n),te(e,r,s),i||(o=ae(t,"click",a),i=!0);},p(t,r){e=t,1&r&&s!==(s=e[0](e[10])+"")&&ue(n,s);},d(e){e&&ne(t),e&&ne(r),i=!1,o();}}}function Nr(e){return {c:U,m:U,p:U,d:U}}function Rr(e){let t,n={ctx:e,current:null,token:null,hasCatch:!1,pending:Nr,then:Or,catch:kr,value:10};return function(e,t){const n=t.token={};function r(e,r,i,o){if(t.token!==n)return;t.resolved=o;let s=t.ctx;void 0!==i&&(s=s.slice(),s[i]=o);const a=e&&(t.current=e)(s);let l=!1;t.block&&(t.blocks?t.blocks.forEach(((e,n)=>{n!==r&&e&&(xe(),Fe(e,1,1,(()=>{t.blocks[n]===e&&(t.blocks[n]=null);})),$e());})):t.block.d(1),a.c(),Ue(a,1),a.m(t.mount(),t.anchor),l=!0),t.block=a,t.blocks&&(t.blocks[r]=a),l&&Le();}if((i=e)&&"object"==typeof i&&"function"==typeof i.then){const n=Ee();if(e.then((e=>{ve(n),r(t.then,1,t.value,e),ve(null);}),(e=>{if(ve(n),r(t.catch,2,t.error,e),ve(null),!t.hasCatch)throw e})),t.current!==t.pending)return r(t.pending,0),!0}else {if(t.current!==t.then)return r(t.then,1,t.value,e),!0;t.resolved=e;}var i;}(e[7].getDisplayName(),n),{c(){t=se(),n.block.c();},m(e,r){te(e,t,r),n.block.m(e,n.anchor=r),n.mount=()=>t.parentNode,n.anchor=t;},p(t,r){!function(e,t,n){const r=t.slice(),{resolved:i}=e;e.current===e.then&&(r[e.value]=i),e.current===e.catch&&(r[e.error]=i),e.block.p(r,n);}(n,e=t,r);},d(e){e&&ne(t),n.block.d(e),n.token=null,n=null;}}}function Mr(e){let t,n,r,o,s,a,l,c,u,d,p,h,f,g,m=e[0]("credaccessprompt.please-choose")+"",y=e[0]("credaccessprompt.your-did")+"",E=e[0]("credaccessprompt.login-msg")+"",w=v.getAvailableConnectors(),b=[];for(let t=0;t<w.length;t+=1)b[t]=Rr(Lr(e,w,t));return {c(){t=re("ion-content"),n=re("ion-grid"),r=re("img"),o=oe(),s=re("h1"),a=ie(m),l=oe(),c=re("h2"),u=ie(y),d=oe(),p=re("footer"),h=re("p"),f=ie(E),g=oe();for(let e=0;e<b.length;e+=1)b[e].c();r.src!==("!theme.darkMode ? 'assets/icons/did.svg' : 'assets/icons/darkmode/did.svg'")&&le(r,"src","!theme.darkMode ? 'assets/icons/did.svg' : 'assets/icons/darkmode/did.svg'"),le(r,"alt",""),le(s,"class","svelte-r1kwme"),le(c,"class","svelte-r1kwme"),ce(n,"class","container"),ce(t,"class","ion-text-center"),le(h,"class","svelte-r1kwme"),le(p,"class","svelte-r1kwme"),de(p,"dark-mode",e[1].darkMode);},m(e,i){te(e,t,i),ee(t,n),ee(n,r),ee(n,o),ee(n,s),ee(s,a),ee(n,l),ee(n,c),ee(c,u),te(e,d,i),te(e,p,i),ee(p,h),ee(h,f),ee(p,g);for(let e=0;e<b.length;e+=1)b[e].m(p,null);},p(e,[t]){if(1&t&&m!==(m=e[0]("credaccessprompt.please-choose")+"")&&ue(a,m),1&t&&y!==(y=e[0]("credaccessprompt.your-did")+"")&&ue(u,y),1&t&&E!==(E=e[0]("credaccessprompt.login-msg")+"")&&ue(f,E),5&t){let n;for(w=v.getAvailableConnectors(),n=0;n<w.length;n+=1){const r=Lr(e,w,n);b[n]?b[n].p(r,t):(b[n]=Rr(r),b[n].c(),b[n].m(p,null));}for(;n<b.length;n+=1)b[n].d(1);b.length=w.length;}},i:U,o:U,d(e){e&&ne(t),e&&ne(d),e&&ne(p),function(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t);}(b,e);}}}function xr(e,t,n){let r;q(e,Pr,(e=>n(0,r=e)));var i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e));}catch(e){o(e);}}function a(e){try{l(r.throw(e));}catch(e){o(e);}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t);}))).then(s,a);}l((r=r.apply(e,t||[])).next());}))};let{onSelection:o=null}=t;const s=et;function a(e){return i(this,void 0,void 0,(function*(){v.setActiveConnector(e.name),ht.getModal().close(),setTimeout((()=>{o(e.name);}),500);}))}return e.$$set=e=>{"onSelection"in e&&n(3,o=e.onSelection);},[r,s,a,o,e=>a(e)]}Ye([hr],(()=>Ar)),Ye([hr],(()=>Tr)),Ye([hr],(()=>Sr)),Ye([hr,Qn],(()=>Ir));class $r extends Xe{constructor(e){super(),qe(this,e,xr,Mr,z,{onSelection:3});}}const Ur={"local-identity-name":"Temporary Identity",welcome:"Welcome to","my-first-did":"My First Identity","temp-did":"temporary identity",copied:"Copied to clipboard!",continue:"Continue",next:"Next",deadend:{"titlebar-title":"Forbidden",oops:"Ooops!",intro:"This application cannot be started manually. It must be started with specific intents only.","debug-revoke":"Debug: revoke hive auth","debug-call":"Debug: call vault API"},identitysetup:{"titlebar-title":"Identity Setup","slide2-msg":"This application uses decentralized identities (DIDs). With decentralized identities, you own your identity, your data.","slide2-msg2":"So it seems that you either don't know what this is yet, or you have never created your own identity? We are here to help, the following steps will automatically create and publish a brand new Elastos Identity and storage space for you.","slide3-msg":"In the future, if you want to better control or use this identity in other DID-powered applications, you may export it to a third party wallet application such as Elastos Essentials.","create-did":"Create Identity","create-did-msg":"Add a new identity to your device","publish-did":"Publish Identity","publish-did-msg":"Record identity to the public repository. This step takes between 10 and 15 minutes.","config-storage":"Configure Storage","config-storage-msg":"Setup a personal storage for your Identity's data.","progress-msg":"Please don't hesitate to leave at any time. You can return and resume your identity setup when you are ready.","done-msg":"All done, you now have a decentralized identity and storage space! When you better understand the advantages of DIDs later, you can export it and reuse it in other apps","create-my-did":"Create my Identity","error-msg":"Sorry, it seems like something unexpected happened. The problem has been reported to the team but in the meantime, would you like to restart the identity creation from the beginning?",restart:"Restart","takes-long-time":"(this takes several minutes)"},credaccess:{"titlebar-title":"Profile Request","profile-request":"Profile Request",intro:"You are currently using a",message:"This application is requesting some of your profile information. As this is a temporary identity, default information is going to be returned for now. Later on, you can fully manage your identity using an app such as Elastos Essentials."},credaccessprompt:{"titlebar-title":"Login","login-msg":"Select one of the following options","temp-did":"Temporary Identity","please-choose":"Please Choose","your-did":"Your Identity","elastos-essentials":"Elastos Essentials"},exportidentity:{"titlebar-title":"Export Identity",did:"Identity","copy-did":"Copy Identity","copy-paperkey":"Copy Paper Key",paperkey:"Paper Key","show-paperkey":"Show Paper Key","hide-paperkey":"Hide Paper Key","paperkey-not-copied-msg":"Safely store the words in your paper key in the right order. After that, you can copy and paste them in the import identity flow of your favorite identity apps (ex: Elastos Essentials).","paperkey-copied-msg":"Your paper key has been copied to your clipboard. Please save them safely. You can now open your third party identity app and import your identity using these words."},manageidentity:{"titlebar-title":"Manage Identity","did-management":"Identity Management",intro:"You are currently using a",intro2:"bound only to this application. Besides, this identity has currently not been saved and cannot be recovered if you reinstall the application, nor can it be shared with other applications.",intro3:"We recommend you to export your temporary identity to an external identity app such as Elastos Essentials (it has to be installed on your device first).","export-did":"Export Identity","edit-profile":"Edit Profile"},"edit-profile":{message:"Providing your information is optional. You can skip this step and continue.","enter-name":"Enter Name","enter-email":"Enter Email"}},Fr={"local-identity-name":"Identit temporaire",welcome:"Bienvenue sur","my-first-did":"Ma Premire Identit","temp-did":"identit temporaire",copied:"Copi dans le presse-papier!",continue:"Continuer",next:"Suivant",deadend:{"titlebar-title":"Interdit",oops:"Ooops!",intro:"Cette application ne peut pas tre lance manuellement. Elle doit tre lance uniquement via des intents spcifiques.","debug-revoke":"Debug: revoke hive auth","debug-call":"Debug: call vault API"},identitysetup:{"titlebar-title":"Cration d'une identit","slide2-msg":"Cette application utilise des identits dcentralises (DIDs). Avec une identit dcentralise, vous contrlez votre identit et vos donnes.","slide2-msg2":"Il semble que vous ne saviez pas de quoi il s'agit, ou que vous n'ayez pas encore cr ce genre d'identit? Les tapes suivante vont automatiquement crer et publier une toute nouvelle identit pour vous, puis configurer votre espace de stockage.","slide3-msg":"Dans l'avenir, pour mieux grer cette identit ou l'utiliser dans d'autres applications qui supportent les DIDs, vous pourrez l'exporter vers un portefeuille d'identit tiers tel qu'Elastos Essentials.","create-did":"Cration de l'identit","create-did-msg":"Ajoute la nouvelle identit sur votre appareil","publish-did":"Publication de l'identit","publish-did-msg":"Enregistre l'identit dans le rpertoire public. Cette tape prend entre 10 et 15 minutes.","config-storage":"Espace de stockage","config-storage-msg":"Configure un espace de stockage pour les donnes de vos applications.","progress-msg":"Cette tape tant longue, vous pouvez quitter l'application  tout moment et revenir plus tard, rien ne sera perdu.","done-msg":"C'est prt, vous avez maintenant une identit dcentralise et un espace de stockage! Lorsque vous aurez mieux compris les avantages des DIDs plus tard, vous pourrez l'exporter et l'utiliser dans d'autres applications.","create-my-did":"Crer mon Identit","error-msg":"Hmm, il semble qu'il y ait eu une erreur. Le problme a t envoy aux dveloppeurs mais pour l'instant, souhaitez-vous relancer la cration d'identit depuis le dbut?",restart:"Recommencer","takes-long-time":"(ceci prend plusieurs minutes)"},credaccess:{"titlebar-title":"Accs au Profil","profile-request":"Accs au Profil",intro:"Vous utilisez une",message:"Cette application demande un accs  certaines informations de votre profile. Comme vous utilisez une identit temporaire, des informations par dfaut vont tre retournes pour le moment. Plus tard, vous pourrez grer votre identit en dtail via une portefeuille d'identits tel qu'Elastos Essentials."},credaccessprompt:{"titlebar-title":"Connexion","login-msg":"Slectionnez l'une des options suivantes","temp-did":"Identit Temporaire","please-choose":"Veuillez choisir","your-did":"Votre identit","elastos-essentials":"Elastos Essentials"},exportidentity:{"titlebar-title":"Exporter l'identit",did:"Identit","copy-did":"Copier l'identit","copy-paperkey":"Copy Paper Key",paperkey:"Paper Key","show-paperkey":"Show Paper Key","hide-paperkey":"Hide Paper Key","paperkey-not-copied-msg":"Safely store the words in your paper key in the right order. After that, you can copy and paste them in the import identity flow of your favorite identity apps (ex: Elastos Essentials).","paperkey-copied-msg":"Your paper key has been copied to your clipboard. Please save them safely. You can now open your third party identity app and import your identity using these words."},manageidentity:{"titlebar-title":"Mon l'identit","did-management":"Gestion de l'identit",intro:"Vous utilisez actuellement une ",intro2:"enregistre uniquement dans cette application. De plus, cette identit n'a psa encore t sauvegarde et sera perdue si vous rinstallez l'application, et ne pourra pas tre rutilise dans d'autres applications.",intro3:"Nous vous recommandons d'exporter cette identit vers un portefeuille d'identit externe tel qu'Elastos Essentials (application tierce que vous devez d'abord installer).","export-did":"Exporter l'Identit","edit-profile":"Modifier le profil"},"edit-profile":{message:"Ces informations sont optionnelles. Vous pouvez passer cette tape si besoin.","enter-name":"Saisir un nom","enter-email":"Saisir une adresse email"}},Gr={"local-identity-name":"Temporary Identity",welcome:"","my-first-did":"","temp-did":"",copied:"",continue:"",next:"",deadend:{"titlebar-title":"",oops:"",intro:" ","debug-revoke":" Hive ","debug-call":" vault API"},identitysetup:{"titlebar-title":"","slide2-msg":"DID ","slide2-msg2":" Elastos","slide3-msg":"DIDElastos Essentials","create-did":"","create-did-msg":"","publish-did":"","publish-did-msg":" ","config-storage":"","config-storage-msg":"","progress-msg":"","done-msg":"DID","create-my-did":"","error-msg":" ",restart:"","takes-long-time":""},credaccess:{"titlebar-title":"","profile-request":"",intro:"",message:"  Elastos Essentials"},credaccessprompt:{"titlebar-title":"","login-msg":"","temp-did":"","please-choose":"","your-did":"","elastos-essentials":"Elastos Essentials"},exportidentity:{"titlebar-title":"",did:"","copy-did":"","copy-paperkey":"Copy Paper Key",paperkey:"Paper Key","show-paperkey":"Show Paper Key","hide-paperkey":"Hide Paper Key","paperkey-not-copied-msg":"Safely store the words in your paper key in the right order. After that, you can copy and paste them in the import identity flow of your favorite identity apps (ex: Elastos Essentials).","paperkey-copied-msg":"Your paper key has been copied to your clipboard. Please save them safely. You can now open your third party identity app and import your identity using these words."},manageidentity:{"titlebar-title":"","did-management":"",intro:"",intro2:" ",intro3:"Elastos Essentials","export-did":"","edit-profile":""},"edit-profile":{message:" ","enter-name":"","enter-email":""}};class jr{constructor(){this.activeLanguage=new BehaviorSubject("en"),this.baseLanguages={en:Ur,fr:Fr,zh:Gr},this.currentLanguages=this.baseLanguages,this.init();}init(){hr.subscribe((e=>{this.activeLanguage.next(e);})),Qn.set(this.currentLanguages),this.setLanguage("en");}setLanguage(e){m.log("Setting connectivity SDK language to: ",e),hr.set(e);}getLanguage(){return this.activeLanguage.value}addLanguage(e,t){this.currentLanguages[e]=t,Qn.set(this.currentLanguages);}translateInstant(e){return Dr(e).format()}}a("localization",(()=>new jr));var Br;!function(e){e.Cancelled="cancelled",e.Published="cancelled",e.Error="error";}(Br||(Br={}));Object.freeze({__proto__:null,get TransactionStatus(){return Br},WalletAccess:class{pay(e){return new Promise(((t,n)=>{b.ensureActiveConnector((async()=>{try{let n=await v.getActiveConnector().pay(e);t(n);}catch(e){n(e);}}),(()=>{t(null);}));}))}voteForDPoS(){throw new Error("Method not implemented.")}voteForCRCouncil(){throw new Error("Method not implemented.")}voteForCRProposal(){throw new Error("Method not implemented.")}sendSmartContractTransaction(e){throw new Error("Method not implemented.")}}});v.setGenericUIHandler(new class{constructor(){}async showConnectorChooser(){return new Promise((e=>{ht.getModal().show($r,{onSelection:t=>{m.log("Selected connector: "+t),e(t);}});}))}});

	class EssentialsBridge {
	    constructor() {
	        this.callbacks = new Map();
	    }
	    /**
	     * Internal js -> native message handler.
	     *
	     * Returns a promise that is resolved when the native code (essentials) sends the command
	     * response.
	     */
	    postMessage(handler, data) {
	        let id = Date.now() + Math.floor(Math.random() * 100000);
	        console.log("EssentialsBridge: postMessage", handler, id, data);
	        return new Promise((resolve, reject) => {
	            this.callbacks.set(id, { resolve, reject });
	            let object = {
	                id: id,
	                name: handler,
	                object: data,
	            };
	            window.webkit.messageHandlers.essentialsExtractor.postMessage(JSON.stringify(object));
	        });
	    }
	    /**
	     * Internal native result -> js
	     */
	    sendResponse(id, result) {
	        console.log("EssentialsBridge: sendResponse", id, result);
	        this.callbacks.get(id).resolve(result);
	    }
	    /**
	    * Internal native error -> js
	    */
	    sendError(id, error) {
	        console.log("EssentialsBridge: sendError", id, error);
	        let callback = this.callbacks.get(id);
	        if (callback) {
	            this.callbacks.get(id).reject(error);
	            this.callbacks.delete(id);
	        }
	    }
	}
	const essentialsBridge = new EssentialsBridge();

	class DIDOperations {
	    static async getCredentials(query) {
	        console.log("getCredentials request received", query);
	        let response = await essentialsBridge.postMessage("elastos_getCredentials", query);
	        console.log("getCredentials response received", response);
	        return hS.parse(JSON.stringify(response));
	    }
	    static async requestCredentials(request) {
	        console.log("requestCredentials request received", request);
	        let response = await this.postEssentialsUrlIntent("https://did.elastos.net/requestcredentials", {
	            request
	        });
	        console.log("requestCredentials response received", response);
	        return hS.parse(response.presentation);
	    }
	    static async importCredentials(credentials, options) {
	        console.log("importCredentials request received", credentials, options);
	        let query = {
	            credentials: credentials.map(c => JSON.parse(c.toString()))
	        };
	        if (options && options.forceToPublishCredentials)
	            query["forceToPublishCredentials"] = true;
	        let response = await this.postEssentialsUrlIntent("https://did.elastos.net/credimport", query);
	        let importedCredentials;
	        importedCredentials = response.importedcredentials.map(credentialUrl => {
	            return {
	                id: jt$1.from(credentialUrl)
	            };
	        });
	        console.log("importCredentials response received", response);
	        return importedCredentials;
	    }
	    static async signData(data, jwtExtra, signatureFieldName) {
	        console.log("signData request received", data, jwtExtra, signatureFieldName);
	        let response = await essentialsBridge.postMessage("elastos_signData", {
	            data, jwtExtra, signatureFieldName
	        });
	        console.log("signData response received", response);
	        return response;
	    }
	    static async deleteCredentials(credentialIds, options) {
	        console.log("deleteCredentials request received", credentialIds, options);
	        let response = await this.postEssentialsUrlIntent("https://did.elastos.net/creddelete", {
	            credentialsids: credentialIds,
	            options
	        });
	        console.log("deleteCredentials response received", response);
	        if (!response || !response.deletedcredentialsids) {
	            return null;
	        }
	        return response.deletedcredentialsids;
	    }
	    static async generateAppIdCredential(appInstanceDID, appDID) {
	        console.log("generateAppIdCredential request received", appInstanceDID, appDID);
	        let response = await this.postEssentialsUrlIntent("https://did.elastos.net/appidcredissue", {
	            appinstancedid: appInstanceDID,
	            appdid: appDID
	        });
	        console.log("generateAppIdCredential response received", response);
	        if (!response || !response.credential) {
	            return null;
	        }
	        return vr$1.parse(response.credential);
	    }
	    static async updateHiveVaultAddress(vaultAddress, displayName) {
	        console.log("updateHiveVaultAddress request received", vaultAddress, displayName);
	        let response = await this.postEssentialsUrlIntent("https://did.elastos.net/sethiveprovider", {
	            address: vaultAddress,
	            name: displayName
	        });
	        console.log("updateHiveVaultAddress response received", response);
	        if (!response || !response.status) {
	            return null;
	        }
	        return response.status;
	    }
	    static async issueCredential(holder, types, subject, identifier, expirationDate) {
	        console.log("issueCredential request received", holder, types, subject, identifier, expirationDate);
	        let response = await this.postEssentialsUrlIntent("https://did.elastos.net/credissue", {
	            subjectdid: holder,
	            types,
	            properties: subject,
	            identifier,
	            expirationDate
	        });
	        console.log("issueCredential response received", response);
	        if (!response || !response.credential) {
	            return null;
	        }
	        return vr$1.parse(response.credential);
	    }
	    static async generateHiveBackupCredential(sourceHiveNodeDID, targetHiveNodeDID, targetNodeURL) {
	        console.log("generateHiveBackupCredential request received", sourceHiveNodeDID, targetHiveNodeDID, targetNodeURL);
	        let response = await this.postEssentialsUrlIntent("https://did.elastos.net/hivebackupcredissue", {
	            sourceHiveNodeDID,
	            targetHiveNodeDID,
	            targetNodeURL
	        });
	        console.log("generateHiveBackupCredential response received", response);
	        if (!response || !response.credential) {
	            return null;
	        }
	        return vr$1.parse(response.credential);
	    }
	    static async postEssentialsUrlIntent(url, params) {
	        // Append informative caller information to the intent, if available.
	        // getApplicationDID() throws an error if called when no app did has been set.
	        try {
	            params["caller"] = v.getApplicationDID();
	        }
	        catch {
	            // Silent catch, it's ok
	        }
	        return essentialsBridge.postMessage("elastos_essentials_url_intent", {
	            url,
	            params
	        });
	    }
	}

	/**
	 * Connector generated as a standalone JS file that can be injected into dApps opened from the
	 * Essentials dApp browser. This connector is normally injected as a global window.elastos and can then
	 * be found by the connectivity SDK as one of the available connectors for elastos operations.
	 */
	class EssentialsDABConnector {
	    constructor() {
	        this.name = "essentialsiab";
	    }
	    async getDisplayName() {
	        return "Elastos Essentials In App Browser";
	    }
	    getWeb3Provider() {
	        // As we are running inside essentials, the web3 provider is injeted
	        // into window.ethereum
	        return window.ethereum;
	    }
	    /**
	     * DID API
	     */
	    getCredentials(query) {
	        return DIDOperations.getCredentials(query);
	    }
	    requestCredentials(query) {
	        return DIDOperations.requestCredentials(query);
	    }
	    issueCredential(holder, types, subject, identifier, expirationDate) {
	        return DIDOperations.issueCredential(holder, types, subject, identifier, expirationDate);
	    }
	    importCredentials(credentials, options) {
	        return DIDOperations.importCredentials(credentials, options);
	    }
	    signData(data, jwtExtra, signatureFieldName) {
	        return DIDOperations.signData(data, jwtExtra, signatureFieldName);
	    }
	    deleteCredentials(credentialIds, options) {
	        return DIDOperations.deleteCredentials(credentialIds, options);
	    }
	    requestPublish() {
	        // OK. Normally never used, could become deprecated soon, we don't implement for now.
	        throw new Error("Method not implemented.");
	    }
	    generateAppIdCredential(appInstanceDID, appDID) {
	        return DIDOperations.generateAppIdCredential(appInstanceDID, appDID);
	    }
	    updateHiveVaultAddress(vaultAddress, displayName) {
	        return DIDOperations.updateHiveVaultAddress(vaultAddress, displayName);
	    }
	    importCredentialContext(serviceName, contextCredential) {
	        // Ok for now, only used by the credential toolbox, not supposed to be used on mobile.
	        throw new Error("importCredentialContext(): Method not implemented.");
	    }
	    generateHiveBackupCredential(sourceHiveNodeDID, targetHiveNodeDID, targetNodeURL) {
	        return DIDOperations.generateHiveBackupCredential(sourceHiveNodeDID, targetHiveNodeDID, targetNodeURL);
	    }
	    pay(query) {
	        throw new Error("Method not implemented.");
	    }
	    voteForDPoS() {
	        throw new Error("Method not implemented.");
	    }
	    voteForCRCouncil() {
	        throw new Error("Method not implemented.");
	    }
	    voteForCRProposal() {
	        throw new Error("Method not implemented.");
	    }
	    sendSmartContractTransaction(payload) {
	        throw new Error("Method not implemented.");
	    }
	    sendResponse(id, result) {
	        essentialsBridge.sendResponse(id, result);
	    }
	    sendError(id, error) {
	        essentialsBridge.sendError(id, error);
	    }
	}
	// Expose this class globally to be able to create instances from the browser dApp.
	window["EssentialsDABConnector"] = EssentialsDABConnector;

})();
//# sourceMappingURL=essentialsiabconnector.js.map
